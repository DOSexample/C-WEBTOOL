{"version":3,"file":"spreadsheet.js","sources":["../sources/locale.js","../sources/locales/en.js","../sources/views/align.js","../sources/views/border.js","../sources/views/color.js","../node_modules/@xbs/muon/dist/muon.js","../sources/mathematics/methods.js","../sources/views/date.js","../sources/views/dialog.js","../sources/views/form.js","../sources/views/formlate.js","../sources/views/icons.js","../sources/views/list_suggest.js","../sources/operations/undo_group.js","../sources/operations/save.js","../sources/helpers/column_names.js","../sources/toolbar/defaults.js","../sources/operations/styles.js","../sources/helpers/array.js","../sources/operations/formats.js","../sources/mathematics/parser.js","../sources/operations/types.js","../sources/views/suggest_formula.js","../sources/views/button.js","../sources/views/live_editor.js","../sources/views/separator.js","../sources/views/sheets.js","../sources/views/toggle.js","../sources/views/toolbar_title.js","../sources/views/multicheckbox.js","../sources/views/formlist.js","../sources/views/ui.js","../sources/views/series.js","../sources/editors/date.js","../sources/editors/richselect.js","../sources/toolbar/actions.js","../sources/toolbar/buttons.js","../sources/toolbar/all_elements.js","../sources/toolbar.js","../sources/toolbar/helpers.js","../sources/operations/column_operations.js","../sources/operations/lock_cell.js","../sources/operations/spans.js","../sources/helpers/conditional.js","../sources/operations/conditional_formats.js","../sources/table.js","../sources/hotkeys.js","../sources/editor.js","../sources/operations/data.js","../sources/sheets.js","../sources/dialogs/common.js","../sources/mathematics/writer.js","../sources/dialogs/imagecell.js","../sources/dialogs/imagetop.js","../sources/dialogs/sparkline.js","../sources/dialogs/ranges.js","../sources/dialogs/dropdown.js","../sources/mathematics/ranges.js","../sources/operations/filter.js","../sources/dialogs/filter.js","../sources/dialogs/format.js","../sources/dialogs/conditional.js","../sources/dialogs/export.js","../sources/dialogs/link.js","../sources/dialogs/print.js","../sources/dialogs/comments.js","../sources/dialogs/sizing.js","../sources/dialogs/index.js","../sources/operations/undo.js","../sources/operations/views.js","../sources/chart.js","../sources/operations/add_row_col.js","../sources/operations/dropdown.js","../sources/operations/clipboard.js","../sources/operations/hide_row_col.js","../sources/operations/resize.js","../sources/operations/selection.js","../sources/helpers/expand_selection.js","../sources/operations/sorting.js","../sources/mathematics/sheets.js","../sources/operations/hide_gridlines.js","../sources/operations/hide_headers.js","../sources/operations/comments.js","../sources/operations/states.js","../sources/operations/import.js","../sources/operations/print.js","../sources/operations/export.js","../sources/operations/load.js","../sources/operations/clear_styles.js","../sources/api/row_col_operations.js","../sources/api/lock_cell.js","../sources/api/freeze.js","../sources/api/hide_gridlines.js","../sources/api/hide_headers.js","../sources/api/hide_rows.js","../sources/api/math.js","../sources/api/operations.js","../sources/api/core.js","../sources/api/save.js","../sources/api/dropdown.js","../sources/api/filter.js","../sources/api/confirm.js","../sources/api/undo.js","../sources/api/number_formats.js","../sources/menu.js","../sources/spreadsheet.js","../sources/context.js","../sources/operations/index.js","../sources/api/index.js"],"sourcesContent":["import en from \"./locales/en\";\nwebix.i18n.spreadsheet = en;","export default {\n\tlabels:{\n\t\t// formats\n\t\t\"common\": \"Common\",\n\t\t\"currency\": \"Currency\",\n\t\t\"number\": \"Number\",\n\t\t\"percent\": \"Percent\",\n\t\t\"date\": \"Date\",\n\t\t\"string\": \"Text\",\n\t\t\"custom-format\": \"Custom\",\n\t\t\"decimal-places\":\"Decimal places\",\n\t\t\"separator\":\"Group separator\",\n\t\t\"negative\":\"Negative number\",\n\t\t\"currency-symbol\":\"Сurrency\",\n\t\t\"date-format\":\"Date format\",\n\t\t\"format-docs\":\"How to create a format\",\n\t\t// titles\n\t\t\"undo-redo\": \"Undo/Redo\",\n\t\t\"font\": \"Font\",\n\t\t\"text\": \"Text\",\n\t\t\"cell\": \"Cell\",\n\t\t\"align\": \"Align\",\n\t\t\"format\": \"Number\",\n\t\t\"column\": \"Column\",\n\t\t\"borders\": \"Borders\",\n\t\t\"px\": \"px\",\n\t\t\"apply\": \"Apply\",\n\t\t// popups and dialogs\n\t\t\"cancel\": \"Cancel\",\n\t\t\"save\": \"Save\",\n\t\t// multisheets\n\t\t\"sheet\": \"Sheet\",\n\t\t// conditions\n\t\t\"conditional-format\": \"Conditional Format\",\n\t\t\"condition\": \"Condition\",\n\t\t\"conditional-style\": \"Style\",\n\t\t\"conditional-operator\": \"Operator\",\n\t\t\"conditional-between\":\"between\",\n\t\t\"conditional-not-equal\":\"not equal\",\n\t\t// ranges\n\t\t\"range\": \"Range\",\n\t\t\"range-title\": \"Named ranges\",\n\t\t\"range-name\": \"Name\",\n\t\t\"range-cells\": \"Range\",\n\t\t\"range-scope\": \"Scope\",\n\t\t\"range-global\": \"Book\",\n\t\t// images\n\t\t\"image-or\": \"or\",\n\t\t\"image-title\": \"Add image\",\n\t\t\"image-upload\": \"Select file for upload\",\n\t\t\"image-url\": \"URL (e.g. http://*)\",\n\t\t// sparklines\n\t\t\"sparkline-title\": \"Add sparkline\",\n\t\t\"sparkline-type\": \"Type\",\n\t\t\"sparkline-range\": \"Range\",\n\t\t\"sparkline-color\": \"Color\",\n\t\t\"sparkline-positive\": \"Positive\",\n\t\t\"sparkline-negative\": \"Negative\",\n\t\t// custom format\n\t\t\"format-title\": \"Set format\",\n\t\t\"format-pattern\": \"Format pattern\",\n\t\t//dropdown\n\t\t\"dropdown-empty\": \"Empty cells\",\n\t\t\"dropdown-title\": \"Add dropdown\",\n\t\t\"dropdown-range\": \"Range\",\n\t\t// confirm\n\t\t\"ok\": \"OK\",\n\t\t// import/export\n\t\t\"import-title\": \"Import\",\n\t\t\"import-not-support\": \"Sorry, your browser does not support import\",\n\t\t\"export-title\": \"Export\",\n\t\t\"export-name\": \"Name of xslx file\",\n\t\t\"export-all-sheets\":\"Export all sheets\",\n\t\t// add link\n\t\t\"link-title\": \"Add Link\",\n\t\t\"link-name\": \"Text\",\n\t\t\"link-url\": \"URL\",\n\t\t//images\n\t\t\"image\": \"Image\",\n\t\t\"add-image-cell\":\"Add to cell\",\n\t\t\"add-image-top\":\"Add above cells\",\n\t\t//charts\n\t\t\"graph\": \"Graph\",\n\t\t\"add-sparkline\":\"Add to cell\",\n\t\t\"add-chart\":\"Add above cells\",\n\t\t//conditional format labels\n\t\t\"display\" : \"Display\",\n\t\t\"value\" : \"Value\",\n\t\t// confirm messages\n\t\t\"range-remove-confirm\": \"Are you sure you want to remove the range permanently?\",\n\t\t\"sheet-remove-confirm\": \"Are you sure you want to remove the sheet permanently?\",\n\t\t\"merge-cell-confirm\":\"Only the left top value will remain after merging. Continue?\",\n\t\t\"error-range\": \"The range is incorrect!\",\n\t\t//print\n\t\t\"print\":\"Print\",\n\t\t\"print-title\":\"Before you print..\",\n\t\t\"print-settings\":\"General settings\",\n\t\t\"print-paper\":\"Paper size\",\n\t\t\"print-layout\":\"Layout\",\n\t\t\"current-sheet\":\"Current sheet\",\n\t\t\"all-sheets\":\"All sheets\",\n\t\t\"selection\":\"Selected cells\",\n\t\t\"borderless\":\"Hide gridlines\",\n\t\t\"sheet-names\":\"Show sheet names\",\n\t\t\"skip-rows\":\"Skip empty rows\",\n\t\t\"margin\":\"Hide margins\",\n\t\t\"page-letter\":\"Letter\",\n\t\t\"page-a4\":\"A4 (210x297mm)\",\n\t\t\"page-a3\":\"A3 (297x420mm)\",\n\t\t\"page-width\":\"Page width\",\n\t\t\"page-actual\":\"Actual Size\",\n\t\t\"page-portrait\":\"Portrait\",\n\t\t\"page-landscape\":\"Landscape\",\n\t\t//comment\n\t\t\"comment\":\"Comment\",\n\t\t//resize\n\t\t\"width\":\"Width\",\n\t\t\"height\":\"Height\",\n\t\t\"fit-content\": \"Fit to content\",\n\t\t\"default-size\":\"Reset to default\",\n\t\t//views\n\t\t\"edit-view\":\"Edit\",\n\t\t\"remove-view\":\"Remove\",\n\t\t\"chart-edit\":\"Edit chart\",\n\n\t\t\"chart-common\":\"Common\",\n\t\t\"chart-series\":\"Series\",\n\t\t\"chart-extras\":\"Extras\",\n\n\t\t\"export-view\":\"Download\",\n\t\t\"export-view-pdf\":\"PDF document\",\n\t\t\"export-view-png\":\"PNG image\",\n\t\t\"export-view-excel\":\"Excel file\",\n\n\t\t\"line-chart\":\"Line\",\n\t\t\"area-chart\":\"Area\",\n\t\t\"bar-chart\":\"Bar\",\n\t\t\"donut-chart\":\"Donut\",\n\t\t\"pie-chart\":\"Pie\",\n\t\t\"radar-chart\":\"Radar\",\n\t\t\"spline-chart\":\"Spline\",\n\t\t\"splinearea-chart\":\"Spline Area\",\n\n\t\t\"chart-scale\":\"Scale\",\n\t\t\"chart-x-axis\":\"X axis\",\n\t\t\"chart-y-axis\":\"Y axis\",\n\t\t\"chart-lines\":\"Lines\",\n\t\t\"chart-scale-color\":\"Scale color\",\n\t\t\"chart-xAxis-title\":\"Title\",\n\t\t\"chart-yAxis-title\":\"Title\",\n\t\t\"chart-col-xAxis\":\"Use left column as xAxis\",\n\t\t\"chart-row-xAxis\":\"Use top row as xAxis\",\n\t\t\"chart-xAxis-range\":\"Range\",\n\t\t\"chart-yAxis-origin\":\"Origin\",\n\t\t\"chart-yAxis-start\":\"Start\",\n\t\t\"chart-yAxis-end\":\"End\",\n\t\t\"chart-yAxis-step\":\"Step\",\n\t\t\"chart-yAxis-note\":\"* Set all the following parameters to see the effect\",\n\n\t\t\"chart-legend\":\"Legend\",\n\t\t\"chart-row-legend\":\"Use top row as legend\",\n\t\t\"chart-col-legend\":\"Use left column as legend\",\n\t\t\"chart-legend-range\":\"Legend range\",\n\t\t\"chart-legend-align\":\"Align\",\n\t\t\"chart-legend-left\":\"Left\",\n\t\t\"chart-legend-right\":\"Right\",\n\t\t\"chart-legend-center\":\"Center\",\n\t\t\"chart-legend-valign\":\"Vertical align\",\n\t\t\"chart-legend-top\":\"Top\",\n\t\t\"chart-legend-middle\":\"Middle\",\n\t\t\"chart-legend-bottom\":\"Bottom\",\n\n\t\t\"chart-item\":\"Data\",\n\t\t\"stacked-chart\":\"Stacked\",\n\t\t\"chart-range\":\"Range\",\n\t\t\"chart-series-color\":\"Color\",\n\t\t\"add-line\":\"Add line\",\n\t\t\"chart-type\":\"Type\",\n\t\t\"chart-tooltip\":\"Tooltips\",\n\t\t\"chart-label\":\"Labels\",\n\n\t\t\"chart-data-from\":\"Data series from\",\n\t\t\"chart-columns\":\"columns\",\n\t\t\"chart-rows\":\"rows\",\n\n\t\t\"chart-markers\":\"Markers\",\n\t\t\"chart-markers-square\":\"Square\",\n\t\t\"chart-markers-triangle\":\"Triangle\",\n\t\t\"chart-markers-diamond\":\"Diamond\",\n\t\t\"chart-markers-round\":\"Round\",\n\n\t\t\"chart-pie-text\":\"Show values inside\",\n\t\t\"chart-pie-3d\":\"3D\",\n\n\t\t\"chart-radar-circle\":\"Circled lines\"\n\t},\n\ttooltips: {\n\t\t\"color\": \"Font color\",\n\t\t\"background\": \"Background color\",\n\t\t\"font-family\": \"Font family\",\n\t\t\"font-size\": \"Font size\",\n\t\t\"text-align\": \"Horizontal align\",\n\t\t\"vertical-align\": \"Vertical align\",\n\t\t\"borders\": \"Borders\",\n\t\t\"borders-no\": \"Clear borders\",\n\t\t\"borders-left\": \"Left border\",\n\t\t\"borders-top\": \"Top border\",\n\t\t\"borders-right\": \"Right border\",\n\t\t\"borders-bottom\": \"Bottom border\",\n\t\t\"borders-all\": \"All borders\",\n\t\t\"borders-outer\": \"Outer borders\",\n\t\t\"borders-top-bottom\": \"Top and bottom borders\",\n\t\t\"borders-color\": \"Border color\",\n\t\t\"align-left\": \"Left align\",\n\t\t\"align-center\": \"Center align\",\n\t\t\"align-right\": \"Right align\",\n\t\t\"align-top\": \"Top align\",\n\t\t\"align-middle\": \"Middle align\",\n\t\t\"align-bottom\": \"Bottom align\",\n\t\t\"span\": \"Merge\",\n\t\t\"wrap\": \"Text wrap\",\n\t\t\"undo\": \"Undo\",\n\t\t\"redo\": \"Redo\",\n\t\t\"format\": \"Number format\",\n\t\t\"increase-decimals\":\"Increase decimal places\",\n\t\t\"decrease-decimals\":\"Decrease decimal places\",\n\t\t\"font-weight\": \"Bold\",\n\t\t\"font-style\": \"Italic\",\n\t\t\"text-decoration\": \"Underline\",\n\t\t\"hide-gridlines\": \"Hide/show gridlines\",\n\t\t\"hide-headers\": \"Hide/show headers\",\n\t\t\"create-filter\": \"Create/remove filters\",\n\t\t\"freeze-columns\" : \"Freeze/unfreeze columns\",\n\t\t\"add-range\": \"Set name for the selected range\",\n\t\t\"conditional\": \"Conditional formatting\",\n\t\t\"add-sheet\": \"Add Sheet\",\n\t\t\"lock-cell\": \"Lock/unlock cell\",\n\t\t\"clear\": \"Clear\",\n\t\t\"add-link\": \"Add link\",\n\t\t\"row\": \"Rows\",\n\t\t\"column\": \"Columns\",\n\t\t\"sheet\": \"Sheet\",\n\t\t\"add-image\": \"Image\",\n\t\t\"add-sparkline\": \"Graph\",\n\t\t\"add-comment\": \"Comment\"\n\t},\n\tmenus:{\n\t\t\"remove-sheet\": \"Remove sheet\",\n\t\t\"rename-sheet\": \"Rename sheet\",\n\t\t\"file\": \"File\",\n\t\t\"new\": \"New\",\n\t\t\"new-sheet\": \"New sheet\",\n\t\t\"excel-import\": \"Import from Excel\",\n\t\t\"excel-export\": \"Export to Excel\",\n\t\t\"sheet\": \"Sheets\",\n\t\t\"copy-sheet\": \"Copy to new sheet\",\n\t\t\"edit\": \"Edit\",\n\t\t\"undo\": \"Undo\",\n\t\t\"redo\": \"Redo\",\n\t\t\"columns\": \"Columns\",\n\t\t\"insert-column\": \"Insert column\",\n\t\t\"delete-column\": \"Delete column\",\n\t\t\"show-column\": \"Show column\",\n\t\t\"hide-column\": \"Hide column\",\n\t\t\"resize-column\": \"Resize column\",\n\t\t\"rows\": \"Rows\",\n\t\t\"insert-row\": \"Insert row\",\n\t\t\"delete-row\": \"Delete row\",\n\t\t\"show-row\": \"Show row\",\n\t\t\"hide-row\": \"Hide row\",\n\t\t\"resize-row\": \"Resize row\",\n\t\t\"insert\": \"Insert\",\n\t\t\"conditional-format\": \"Conditional format\",\n\t\t\"common\": \"common\",\n\t\t\"text\": \"text\",\n\t\t\"clear\": \"Clear\",\n\t\t\"clear-value\":\"Values\",\n\t\t\"clear-style\":\"Styles\",\n\t\t\"clear-conditional-formats\":\"Conditional formats\",\n\t\t\"clear-dropdown-editors\":\"Dropdowns and filters\",\n\t\t\"clear-comments\":\"Comments\",\n\t\t\"clear-all\":\"All\",\n\t\t\"image\": \"Image\",\n\t\t\"add-image-cell\":\"Add to cell\",\n\t\t\"add-image-top\":\"Add above cells\",\n\t\t\"graph\": \"Graph\",\n\t\t\"add-sparkline\":\"Add to cell\",\n\t\t\"add-chart\":\"Add above cells\",\n\t\t\"data\": \"Data\",\n\t\t\"add-link\": \"Add link\",\n\t\t\"add-range\": \"Named ranges\",\n\t\t\"sort\": \"Sort\",\n\t\t\"sort-asc\": \"Sort A to Z\",\n\t\t\"sort-desc\": \"Sort Z to A\",\n\t\t\"view\": \"View\",\n\t\t\"freeze-columns\": \"Freeze/unfreeze columns\",\n\t\t\"freeze-rows\": \"Freeze/unfreeze rows\",\n\t\t\"hide-gridlines\": \"Hide/show gridlines\",\n\t\t\"hide-headers\": \"Hide/show headers\",\n\t\t\"create-filter\": \"Create/remove filters\",\n\t\t\"add-dropdown\": \"Add dropdown\",\n\t\t\"lock-cell\": \"Lock/unlock cell\",\n\t\t\"print\": \"Print\",\n\t\t\"add-comment\":\"Comment\"\n\t},\n\ttable:{\n\t\t\"math-error\":\"#ERROR!\",\n\t\t\"math-ref-error\":\"#REF!\",\n\t\t\"format-error\":\"INCORRECT FORMAT\"\n\t},\n\tliveEditor:{\n\t\t\"edit\":\"Edit:\"\n\t},\n\tformats:{\n\t\t\"dateFormat\": \"mm/dd/yyyy\",\n\t\t\"timeFormat\": \"hh:mm AM/PM\",\n\t\t\"longDateFormat\": \"dd mmmm yyyy\",\n\t\t\"fullDateFormat\": \"mm/dd/yyyy hh:mm AM/PM\",\n\t\t\"parseDateTime\": \"%m/%d/%Y %G:%i:%s\",\n\t\t\"parseDate\": \"%m/%d/%Y\",\n\t\t\"currencies\": [\n\t\t\t\"{obj} €\",\n\t\t\t\"¥{obj}\",\n\t\t\t\"R$ {obj}\",\n\t\t\t\"{obj} rub.\"\n\t\t]\n\t}\n};\n","webix.protoUI({\n\tname: \"ssheet-align\",\n\t$cssName:\"richselect\",\n\t$init: function(config){\n\t\tconfig.options =  {\n\t\t\tview:\"datasuggest\",\n\t\t\tbody:{\n\t\t\t\tview: \"ssheet-icons\",\n\t\t\t\ttooltip: {\n\t\t\t\t\ttemplate:\"#tooltip#\"\n\t\t\t\t},\n\t\t\t\txCount:3, yCount:1\n\t\t\t},\n\t\t\tdata: config.data\n\t\t};\n\t}\n},webix.ui.richselect);","webix.protoUI({\n\tname: \"ssheet-borders-suggest\",\n\tdefaults:{\n\t\twidth: 300\n\t},\n\t$init: function(config){\n\t\tconfig.body = {\n\t\t\tmargin: 6,\n\t\t\tcols:[\n\t\t\t\t{ view: \"ssheet-icons\", scroll: false, select: true,\n\t\t\t\t\txCount: 4,\n\t\t\t\t\tyCount: 2,\n\t\t\t\t\ttooltip: {\n\t\t\t\t\t\ttemplate: function(obj){\n\t\t\t\t\t\t\treturn webix.i18n.spreadsheet.tooltips[\"borders-\"+obj.id];\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\ton:{\n\t\t\t\t\t\tonAfterSelect: function(){\n\t\t\t\t\t\t\tvar suggest = this.getParentView().getParentView();\n\t\t\t\t\t\t\tsuggest.updateMasterValue(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\ttemplate: function(obj){\n\t\t\t\t\t\tvar css = \"webix_ssheet_button_icon webix_ssheet_icon ssi-borders-\"+obj.value;\n\t\t\t\t\t\treturn \"<span class='\"+css+\"'></span>\";\n\t\t\t\t\t},\n\t\t\t\t\tdata: config.data\n\t\t\t\t},\n\t\t\t\t{ view: \"ssheet-separator\"},\n\t\t\t\t{\n\t\t\t\t\trows:[\n\t\t\t\t\t\t{ view: \"ssheet-color\", css: config.css, name: config.name, width: 68,\n\t\t\t\t\t\t\tvalue: webix.skin.$name == \"contrast\" ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[\"borders-color\"],\n\t\t\t\t\t\t\ttitle: \"<span class='webix_icon wxi-pencil'></span>\",\n\t\t\t\t\t\t\ton:{\n\t\t\t\t\t\t\t\tonChange: function(){\n\t\t\t\t\t\t\t\t\tvar suggest = this.getParentView().getParentView().getParentView();\n\t\t\t\t\t\t\t\t\tsuggest.updateMasterValue(false);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"richselect\", css:\"webix_ssheet_border_type\", value:\"thin\", suggest:{\n\t\t\t\t\t\t\t\tfitMaster:false,\n\t\t\t\t\t\t\t\twidth:130,\n\t\t\t\t\t\t\t\tcss: \"webix_ssheet_suggest\",\n\t\t\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\t\t\ttemplate:\"<div class='webix_ssheet_border webix_ssheet_border_#id#'></div>\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tdata:[\n\t\t\t\t\t\t\t\t\t{ id:\"thin\" },\n\t\t\t\t\t\t\t\t\t{ id:\"medium\" },\n\t\t\t\t\t\t\t\t\t{ id:\"thick\" },\n\t\t\t\t\t\t\t\t\t{ id:\"dashed\" }, \n\t\t\t\t\t\t\t\t\t{ id:\"dotted\" },\n\t\t\t\t\t\t\t\t\t{ id:\"double\" }\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ }\n\t\t\t\t\t]\n\t\t\t\t}\n\n\t\t\t]\n\t\t};\n\t},\n\tupdateMasterValue: function(hide){\n\t\tvar value = this.getValue();\n\t\tvar master = webix.$$(this.config.master);\n\t\tmaster.setValue(value);\n\t\tif(hide)\n\t\t\tthis.hide();\n\t},\n\tsetValue: function(value){\n\t\tif(value[0])\n\t\t\tthis.getList().select(value[0]);\n\t\tif(value[1])\n\t\t\tthis.getColorView().setValue(value[1]);\n\t\tif(value[2])\n\t\t\tthis.getTypeView().setValue(value[2]);\n\t},\n\tgetValue: function(){\n\t\treturn [this.getList().getSelectedId(), this.getColorView().getValue()||\"\", this.getTypeView().getValue()||\"\"];\n\t},\n\tgetList: function(){\n\t\treturn this.getBody().getChildViews()[0];\n\t},\n\tgetColorView: function(){\n\t\treturn this.getBody().getChildViews()[2].getChildViews()[0];\n\t},\n\tgetTypeView: function(){\n\t\treturn this.getBody().getChildViews()[2].getChildViews()[1];\n\t},\n\tgetItemText:function(){\n\t\treturn \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-borders-all'>\";\n\t}\n},webix.ui.suggest);\n\nwebix.protoUI({\n\tname: \"ssheet-borders\",\n\t$cssName: \"richselect\",\n\t$init: function(config){\n\t\tconfig.options = {\n\t\t\tview: \"ssheet-borders-suggest\",\n\t\t\tfitMaster: false,\n\t\t\tdata: config.data\n\t\t};\n\n\t\tthis.$ready.push(webix.bind(function(){\n\t\t\tthis.getPopup().config.master = this.config.id;\n\t\t},this));\n\n\t},\n\tsetValue: function(value){\n\t\tif(webix.isArray(value)){\n\t\t\tif(!this.config.value || value[0] !=  this.config.value[0] || value[1] !=  this.config.value[1]){\n\t\t\t\tthis.getPopup().setValue(value);\n\t\t\t}\n\t\t\tthis.config.value = value;\n\t\t\tif (value[0])\n\t\t\t\tthis.callEvent(\"onChange\");\n\t\t}\n\t\treturn value;\n\t},\n\tgetValue: function(){\n\t\treturn  this.getPopup().getValue().join(\",\");\n\t},\n\tgetList: function(){\n\t\treturn this.getPopup().getBody().getChildViews()[0];\n\t},\n\tgetColorView: function(){\n\t\treturn this.getPopup().getBody().getChildViews()[1].getChildViews()[0];\n\t}\n},webix.ui.richselect);","// toolbar: color selector\nwebix.protoUI({\n\t$cssName: \"colorboard\",\n\tname: \"ssheet-colorboard\",\n\tdefaults:{\n\t\theight:202,\n\t\twidth:220,\n\t\tcss: \"webix_ssheet_colorboard\",\n\t\ttype:\"classic\",\n\t\tpalette: [\n\t\t\t[\"#000000\", \"#434343\", \"#666666\", \"#999999\", \"#b7b7b7\", \"#cccccc\", \"#d9d9d9\", \"#efefef\", \"#f3f3f3\", \"#ffffff\"],\n\t\t\t[\"#980000\", \"#ff0000\", \"#ff9900\", \"#ffff00\", \"#00ff00\", \"#00ffff\", \"#4a86e8\", \"#0000ff\", \"#9900ff\", \"#ff00ff\"],\n\t\t\t[\"#e6b8af\", \"#f4cccc\", \"#fce5cd\", \"#fff2cc\", \"#d9ead3\", \"#d0e0e3\", \"#c9daf8\", \"#cfe2f3\", \"#d9d2e9\", \"#ead1dc\"],\n\t\t\t[\"#dd7e6b\", \"#ea9999\", \"#f9cb9c\", \"#ffe599\", \"#b6d7a8\", \"#a2c4c9\", \"#a4c2f4\", \"#9fc5e8\", \"#b4a7d6\", \"#d5a6bd\"],\n\t\t\t[\"#cc4125\", \"#e06666\", \"#f6b26b\", \"#ffd966\", \"#93c47d\", \"#76a5af\", \"#6d9eeb\", \"#6fa8dc\", \"#8e7cc3\", \"#c27ba0\"],\n\t\t\t[\"#a61c00\", \"#cc0000\", \"#e69138\", \"#f1c232\", \"#6aa84f\", \"#45818e\", \"#3c78d8\", \"#3d85c6\", \"#674ea7\", \"#a64d79\"],\n\t\t\t[\"#85200c\", \"#990000\", \"#b45f06\", \"#bf9000\", \"#38761d\", \"#134f5c\", \"#1155cc\", \"#0b5394\", \"#351c75\", \"#741b47\"],\n\t\t\t[\"#5b0f00\", \"#660000\", \"#783f04\", \"#7f6000\", \"#274e13\", \"#0c343d\", \"#1c4587\", \"#073763\", \"#20124d\", \"#4c1130\"]\n\t\t]\n\t},\n\t$init:function(){\n\t\tthis.attachEvent(\"onSelect\", function(value){\n\t\t\tthis.getParentView().setMasterValue({ value:value });\n\t\t});\n\t}\n}, webix.ui.colorboard);\n\nwebix.protoUI({\n\t$cssName: \"richselect\",\n\tname: \"ssheet-color\",\n\tdefaults:{\n\t\tcss: \"webix_ssheet_color\",\n\t\ticon: \"wxi-menu-down\",\n\t\tsuggest:{\n\t\t\tborderless: true,\n\t\t\tbody:{\n\t\t\t\tview: \"ssheet-colorboard\"\n\t\t\t}\n\t\t}\n\t},\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_color\";\n\t},\n\t$renderInput: function(config, divStart, id){\n\t\tvar color  = this.renderColor.call(this);\n\t\tdivStart = divStart.replace(/([^>]>)(.*)(<\\/div)/, function(match, p1, p2, p3){\n\t\t\treturn p1+config.title +color+p3;\n\t\t});\n\n\t\treturn webix.ui.colorpicker.prototype.$renderInput.call(this,config, divStart, id);\n\t},\n\t$setValue: function(value){\n\t\tvar popup =  webix.$$(this.config.popup.toString());\n\t\tvar colorboard = popup.getBody();\n\t\tvalue = value || \"\";\n\t\tcolorboard.setValue(value);\n\t\tthis.config.value = value;\n\t\tthis.getColorNode().style.backgroundColor = value;\n\t},\n\trenderColor: function(){\n\t\treturn \"<div class='webix_ssheet_cp_color' style='background-color:\"+this.config.value+\";'> </div>\";\n\t},\n\tgetColorNode: function(){\n\t\treturn this.$view.firstChild.firstChild.childNodes[1];\n\t},\n\t$renderIcon:function(){\n\t\treturn webix.ui.text.prototype.$renderIcon.apply(this,arguments);\n\t}\n},webix.ui.colorpicker);","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var t,r={1:\"#ERROR\",2:\"#ERROR\",3:\"#REF!\"},e=function(){return e=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var o in r=arguments[e])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t},e.apply(this,arguments)};function n(t,r,e){return e+64*r+64*t*4096}function o(t){return[t<2147483648?t>>18:t/262144&16777215,t>>6&4095,63&t]}function i(t){return t<2147483648?t>>18:t/262144&16777215}function a(t){return 63&t}function u(t,r,e){for(var n=o(t),i=n[0],a=n[1],u=o(r),f=u[0]-i,s=u[1]-a,h=0;h<=f;h++)for(var c=0;c<=s;c++)e(t+64*c+4096*h*64)}function f(t,r){for(var e,n,i,u,f,h,c,p,v=t.code,g=t.source,l=\"\",b=v.length,M=0;M<b;M+=3){switch(v[M]){case 5:var d=void 0;9===v[M+6]&&(d=r.pageName(a(v[M+7]))),l+=(-1!==(p=d||t.source.substr(v[M+1],v[M+2])).indexOf(\" \")?\"'\"+p+\"'\":p)+\"!\";break;case 7:l+=s(u=(e=o(v[M+4]))[0],h=e[1],v[M+5]);break;case 4:l+=g.substr(v[M+1],v[M+2]).toUpperCase();break;case 8:u=(n=o(v[M+4]))[0],h=n[1],f=(i=o(v[M+7]))[0],c=i[1],l+=s(u,h,v[M+5]),l+=\":\",l+=s(f,c,v[M+8]);break;case 9:break;case 2:l+=\"{{\"+g.substr(v[M+1],v[M+2])+\"}}\";break;case 3:l+=\"#REF!\";break;case 1:l+='\"'+g.substr(v[M+1],v[M+2])+'\"';break;default:l+=g.substr(v[M+1],v[M+2])}}return l}function s(t,r,e){var n=\"\";2&e&&(n+=\"$\");var o=\"\";for(r+=1;r>0;){var i=r%26;0===i&&(i=26),o=String.fromCharCode(64+i)+o,r=(r-i)/26}return n+=o,1&e&&(n+=\"$\"),n+=t+1}function h(t){return t<=122}function c(t){return t<=122?t>=65||35===t||36===t:t>191}function p(t){return t>=97}function v(t){var r=t.charCodeAt(0);return r>=48&&r<=57}function g(t,r){var e;do{r++,e=t.charCodeAt(r)}while(e>=48&&e<=57);return r}function l(t){return\" \"===t||\"\\t\"===t||\"\\n\"===t||\"\\r\"===t}function b(t,r){var e;do{e=t[++r]}while(l(e));return r}function M(t,r){if(\"<\"===t[r]){var e=t[r+1];\">\"!==e&&\"=\"!==e||r++}else\">\"===t[r]&&\"=\"===t[r+1]&&r++;return r+1}function d(r,e,n){for(var o=r.length,i=!0,a=e,u=!1,f=!1,s=!1,g=0;a<o;a++){var l=r[a];if(\"'\"!==l){if(!u){s=!0;var b=l.charCodeAt(0);if(c(b)){h(b)?p(b)&&(f=!0):i=!1,1==g&&g++;continue}if(v(l)){0==g&&g++;continue}break}}else{if(s)break;if(u){a++;break}u=!0}}var M=r[a],d=e,y=a-e;return u&&((y-=1+(\"'\"===r[a-1]?1:0))<0&&(y=0),d++,n=5),0===n&&(\":\"===M&&i?(n=8,f&&(t=!0)):\"!\"===M?n=\"#\"===r[d]?3:5:\"(\"===M?(function(t,r,e){var n=t.substr(r,e);return n.toUpperCase()!==n}(r,d,y)&&(t=!0),n=4):\"}\"===M?n=2:1===g&&i?(n=7,f&&(t=!0)):n=6),[d,y,a,n]}function y(t,r,e){for(var o=0,i=0,a=1,u=1,f=0,s=!1,h=r.length-1;h>=0;h--){var c=r[h].charCodeAt(0);36!==c?c<58?(i+=(c-48)*a,a*=10):(s||(a=1,o=i,i=0,s=!0,u+=1),i+=(c-(c>96?96:64))*a,a*=26):f+=u}t.push(9,n(o-1,i-1,e),f)}function m(r,e){var n,o,a=[];t=!1;for(var u,s=-1,h=0;h<r.length;h++){var p=r[h];if('\"'!=p){if(!(s>-1))if(\"{\"!=p||\"{\"!=r[h+1])if(\"'\"==p||c(p.charCodeAt(0))){var m=d(r,h,0),_=(P=m[0],L=m[1],m[2]),E=m[3],w=a.length;if(7!==E&&8!==E||5!==a[a.length-3])u=e.z,a.push(E,P,L);else{var D=\"'\"===r[P-2]?1:0,I=a[w-2],T=a[w-1];void 0===(u=e.page(r.substr(I,T)))&&(a.push(3,0,0),u=0),a.push(E,P-T-2*D-1,L+T+2*D+1)}if(h=_-1,6===E)e.name(a,r,e);else if(8===E){var C=a.length;if(y(a,r.substr(P,L),u),P=(n=d(r,h+2,0))[0],L=n[1],_=n[2],5===(E=n[3])&&(P=(o=d(r,_+1,0))[0],L=o[1],_=o[2],E=o[3]),7!==E){a[C-3]=7;continue}y(a,r.substr(P,L),u);var N=a[C+1],A=a[C+4];(N>A||i(N)>i(A))&&(a[C+1]=A,a[C+4]=N),a[C-1]+=L+1,h=_-1}else 7===E?y(a,r.substr(P,L),u):3!==E&&5!==E||h++}else if(l(p)){var S=b(r,h);a.push(12,h,S-h),h=S-1}else if(v(p)){var O=g(r,h);a.push(11,h,O-h),h=O-1}else{var x=M(r,h);a.push(10,h,x-h),h=x-1}else{var R=d(r,h+2,2),P=R[0],L=R[1],F=R[2];a.push(2,P,L),h=F+2-1}}else s>-1?(a.push(1,s+1,h-s-1),s=-1):s=h}var U={code:a,source:r,exec:null,broken:0,triggers:null};return t&&(U.source=f(U,e)),U}function _(t){return\"              \".substr(0,10-t.length)}var E=[\">\",\"<\",\"=\",\"+\"];function w(t){var r=function(t){for(var r=t.code,e=t.source,n=\"\",o=r.length,i=0;i<o;i+=3){switch(r[i]){case 4:n+=\"ctx.m.\"+e.substr(r[i+1],r[i+2]).toUpperCase();break;case 1:n+='\"'+e.substr(r[i+1],r[i+2])+'\"';break;case 2:n+='ctx.p(\"'+e.substr(r[i+1],r[i+2])+'\")';break;case 6:case 7:var a=void 0,u=void 0;if(10===r[i-3]?a=i-3:12===r[i-3]&&10===r[i-6]&&(a=i-6),10===r[i+6]?u=i+6:12===r[i+6]&&10===r[i+9]&&(u=i+9),a||u){var f=a?e[r[a+1]]:null,s=u?e[r[u+1]]:null;if(\"&\"==f||\"&\"==s){n+=\"(ctx.v(\"+r[i+4]+') === null ? \"\" : ctx.v('+r[i+4]+\"))\";break}if(-1!=E.indexOf(f)||-1!=E.indexOf(s)){n+=\"(ctx.v(\"+r[i+4]+\") === null ? 0 : ctx.v(\"+r[i+4]+\"))\";break}}n+=\"ctx.v(\"+r[i+4]+\")\";break;case 8:n+=\"ctx.r(\"+r[i+4]+\", \"+r[i+7]+\")\";break;case 10:if(1===r[i+2])n+=\"&\"===(h=e[r[i+1]])?'+\"\"+':\"=\"===h?\"==\":\";\"===h?\",\":h;else if(2===r[i+2]){var h;n+=\"<>\"===(h=e.substr(r[i+1],r[i+2]))?\"!=\":h}else n+=e.substr(r[i+1],r[i+2]);break;case 11:n+=e.substr(r[i+1],r[i+2]);break;case 3:return\"\"}}return n}(t);if(!r)return t.broken=3,void(t.exec=null);try{t.exec=new Function(\"ctx\",\"return \"+r)}catch(r){t.broken=1,t.exec=null}}var D=\"#DIV/0!\",I=\"#VALUE!\",T=\"#NUM!\",C=\"#N/A\";function N(t){var r=new Date(t.getFullYear(),0,0),e=t.valueOf()-r.valueOf()+60*(r.getTimezoneOffset()-t.getTimezoneOffset())*1e3;return Math.floor(e/864e5)}function A(t){var r=new Date(Math.round(86400*(t-25569)*1e3));return new Date(r.getTime()+6e4*r.getTimezoneOffset())}function S(t){return 25569+(t.getTime()-6e4*t.getTimezoneOffset())/864e5}function O(t){return!(!t&&0!==t||(t*=1,isNaN(t)))&&t}function x(t){for(var r=[],e=0;e<t.length;e++)r=r.concat(t[e]);return r}function R(t){return!t&&0!==t}function P(t){return\"string\"==typeof t?\"TRUE\"===t:!!t}function L(t){var r=\"string\"==typeof t?new Date(t):A(t);if(r.getTime())return r;throw t+\" is invalid date\"}function F(t){var r=O(t);if(\"number\"!=typeof r)throw t+\" is not a number\";return r}function U(t,r,e,n,o){var i=O(t),a=r?O(r):null;if(\"number\"!=typeof i||\"boolean\"==typeof a)throw I;if(i<e||i>n||a<-1)throw T;a&&(a=Math.floor(+a));var u=Number(i>>>0).toString(o);if(a&&u.length>a)throw T;return u.padStart(a,\"0\").toUpperCase()}function V(t,r){var e=+nt(t),n=+ot(t),o=+nt(r),i=+ot(r);return Q(e*o-n*i,e*i+n*o)}function k(t,r){var e=+nt(t),n=+ot(t);return Q(e+ +nt(r),n+ +ot(r))}function Y(t){return t>0?Math.floor(t):Math.ceil(t)}function X(t){return t<0?Math.floor(t):Math.ceil(t)}function H(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0,n=0,o=x(t),i=0;i<o.length;i++){var a=O(o[i]);\"number\"==typeof a&&(e+=a,n++)}return n?e/n:0}function B(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=x(t),n=0,o=0,i=0;i<e.length;i++){var a=e[i],u=O(e[i]);\"number\"==typeof u?(n+=u,o++):(!0===a&&n++,(a||!1===a)&&o++)}return o?n/o:0}function j(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=-1/0,n=x(t),o=0;o<n.length;o++){var i=O(n[o]);\"number\"==typeof i&&i>e&&(e=i)}return e===-1/0?0:e}function z(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=1/0,n=x(t),o=0;o<n.length;o++){var i=O(n[o]);\"number\"==typeof i&&i<e&&(e=i)}return e===1/0?0:e}function G(t,r,e){for(var n=x(t),o=r?0:-1,i=e?B.apply(void 0,t):H.apply(void 0,t),a=0,u=0;u<n.length;u++){var f=n[u],s=O(n[u]);if(\"number\"!=typeof s){if(!e||\"boolean\"!=typeof f&&!f)continue;s=!0===f?1:0}o++,a+=Math.pow(s-i,2)}return o?a/o:0}var q={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1};var W=[];function K(t){var r=O(t);if(\"number\"==typeof r&&r>-1){var e=Math.floor(r);return 0===e||1===e?1:(W[e]>0||(W[e]=this.FACT(e-1)*e),W[e])}}var $=[\"\",\"C\",\"CC\",\"CCC\",\"CD\",\"D\",\"DC\",\"DCC\",\"DCCC\",\"CM\",\"\",\"X\",\"XX\",\"XXX\",\"XL\",\"L\",\"LX\",\"LXX\",\"LXXX\",\"XC\",\"\",\"I\",\"II\",\"III\",\"IV\",\"V\",\"VI\",\"VII\",\"VIII\",\"IX\"];function Q(t,r,e){void 0===e&&(e=\"i\");var n=O(t),o=O(r);if(\"number\"!=typeof n&&\"number\"!=typeof o)throw T;var i=\"\",a=\"\";return t&&(i=t.toString()),r&&1!==r?a=r+e:1===r&&(a=e),r>0?(i?i+\"+\":\"\")+a:i+a}function J(t,r){return void 0===r&&(r=null),U(t,r,-512,511,2)}function Z(t,r){return void 0===r&&(r=null),U(t,r,-549755813888,549755813887,16)}function tt(t,r){return void 0===r&&(r=null),U(t,r,-536870912,536870911,8)}function rt(t){var r=O(t);if(\"number\"==typeof r){var e=r<0?-1:1,n=1/(1+.3275911*(r=Math.abs(r)));return e*(1-((((1.061405429*n-1.453152027)*n+1.421413741)*n-.284496736)*n+.254829592)*n*Math.exp(-r*r))}throw I}var et=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7];function nt(t){if(\"string\"!=typeof t)throw I;if([\"i\",\"+i\",\"1i\",\"+1i\",\"-i\",\"-1i\",\"j\",\"+j\",\"1j\",\"+1j\",\"-j\",\"-1j\"].indexOf(t)>=0)return 0;var r=t.indexOf(\"+\"),e=t.indexOf(\"-\");0===r&&(r=t.indexOf(\"+\",1)),0===e&&(e=t.indexOf(\"-\",1));var n=t.substring(t.length-1,t.length),o=\"i\"===n||\"j\"===n;if(r>=0||e>=0){if(!o)throw T;if(r>=0){if(isNaN(+t.substring(0,r))||isNaN(+t.substring(r+1,t.length-1)))throw T;return Number(t.substring(0,r))}if(isNaN(+t.substring(0,e))||isNaN(+t.substring(e+1,t.length-1)))throw T;return Number(t.substring(0,e))}if(o){if(isNaN(+t.substring(0,t.length-1)))throw T;return 0}if(isNaN(+t))throw T;return+t}function ot(t){if(\"string\"!=typeof t)throw I;if([\"i\",\"j\"].indexOf(t)>=0)return 1;var r=(t=t.replace(\"+i\",\"+1i\").replace(\"-i\",\"-1i\").replace(\"+j\",\"+1j\").replace(\"-j\",\"-1j\")).indexOf(\"+\"),e=t.indexOf(\"-\");0===r&&(r=t.indexOf(\"+\",1)),0===e&&(e=t.indexOf(\"-\",1));var n=t.substring(t.length-1,t.length),o=\"i\"===n||\"j\"===n;if(r>=0||e>=0){if(!o)throw T;if(r>=0){if(isNaN(+t.substring(0,r))||isNaN(+t.substring(r+1,t.length-1)))throw T;return Number(t.substring(r+1,t.length-1))}if(isNaN(+t.substring(0,e))||isNaN(+t.substring(e+1,t.length-1)))throw T;return-Number(t.substring(e+1,t.length-1))}if(o){var i=+t.substring(0,t.length-1);if(isNaN(i))throw T;return i}if(isNaN(+t))throw T;return 0}function it(t){var r=+nt(t),e=+ot(t);return Q(Math.cos(r)*Math.cosh(e),-Math.sin(r)*Math.sinh(e))}function at(t){var r=+nt(t),e=+ot(t);return Q(Math.cos(e)*(Math.exp(r)+Math.exp(-r))/2,Math.sin(e)*(Math.exp(r)-Math.exp(-r))/2)}function ut(t,r){var e=+nt(t),n=+ot(t),o=+nt(r),i=+ot(r),a=Math.pow(o,2)+Math.pow(i,2);return Q((e*o+n*i)/a,(n*o-e*i)/a)}function ft(t){var r=+nt(t),e=+ot(t);return Q(Math.sin(r)*Math.cosh(e),Math.cos(r)*Math.sinh(e))}function st(t){var r=+nt(t),e=+ot(t);return Q(Math.cos(e)*(Math.exp(r)-Math.exp(-r))/2,Math.sin(e)*(Math.exp(r)+Math.exp(-r))/2)}function ht(t,r){var e=x(t).sort((function(t,r){return t-r})),n=O(r);if(\"number\"!=typeof n)throw I;var o=(e.length-1)*n,i=Math.floor(o),a=o-i;return void 0!==e[i+1]?e[i]+a*(e[i+1]-e[i]):e[i]}var ct=Object.freeze({__proto__:null,SUM:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0,n=x(t),o=0;o<n.length;o++){var i=O(n[o]);\"number\"==typeof i&&(e+=i)}return e},AVERAGE:H,AVERAGEA:B,COUNT:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0,n=x(t),o=0;o<n.length;o++){var i=O(n[o]);\"number\"==typeof i&&e++}return e},COUNTA:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0,n=x(t),o=0;o<n.length;o++)n[o]&&1*n[o]!=0&&e++;return e},COUNTBLANK:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0,n=x(t),o=0;o<n.length;o++)0===n[o]||n[o]||e++;return e},MAX:j,MIN:z,PRODUCT:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=!1,n=1,o=x(t),i=0;i<o.length;i++){var a=O(o[i]);\"number\"==typeof a&&(e=!0,n*=a)}return e?n:null},SUMPRODUCT:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=t[0].length;for(var n in t)if(t[n].length!==e)return;var o=0;for(n=0;n<t[0].length;n++){var i=!1,a=1;for(var u in t){var f=O(t[u][n]);\"number\"==typeof f&&(a*=f,i=!0)}i&&(o+=a)}return o},SUMSQ:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0,n=x(t),o=0;o<n.length;o++){var i=O(n[o]);\"number\"==typeof i&&(e+=Math.pow(i,2))}return e},VAR:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return G(t,!1,!1)},VARA:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return G(t,!1,!0)},VARP:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return G(t,!0,!1)},VARPA:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return G(t,!0,!0)},STDEV:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Math.sqrt(this.VARP.apply(this,t))},STDEVP:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Math.sqrt(this.VARP.apply(this,t))},STDEVA:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Math.sqrt(this.VARA.apply(this,t))},STDEVPA:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Math.sqrt(this.VARPA.apply(this,t))},POWER:function(t,r){var e=O(t),n=O(r);if(\"number\"==typeof e&&\"number\"==typeof n)return Math.pow(e,n)},QUOTIENT:function(t,r){var e=O(t),n=O(r);if(\"number\"==typeof e&&\"number\"==typeof n)return Y(e/n)},SQRT:function(t){var r=O(t);if(\"number\"==typeof r&&r>=0)return Math.sqrt(r)},ABS:function(t){var r=O(t);if(\"number\"==typeof r)return Math.abs(r)},RAND:function(){return Math.random()},PI:function(){return Math.PI},INT:function(t){var r=O(t);if(\"number\"==typeof r)return Math.floor(r)},ROUND:function(t,r){var e=O(t),n=O(r)||0;if(\"number\"==typeof e&&\"number\"==typeof n)return parseFloat(e.toFixed(n))},ROUNDDOWN:function(t,r){var e=O(t),n=O(r)||0;if(\"number\"==typeof e&&\"number\"==typeof n)return Math.floor(e*Math.pow(10,n))/Math.pow(10,n)},ROUNDUP:function(t,r){var e=O(t),n=O(r)||0;if(\"number\"==typeof e&&\"number\"==typeof n)return Math.ceil(e*Math.pow(10,n))/Math.pow(10,n)},TRUNC:function(t){var r=O(t);if(\"number\"==typeof r)return Y(r)},EVEN:function(t){var r=O(t);if(\"number\"==typeof r){var e=X(r);return e%2?e+Math.sign(r):e}},ODD:function(t){var r=O(t);if(\"number\"==typeof r){var e=X(r);return e%2?e:e+Math.sign(r)}},ACOS:function(t){var r=O(t);if(\"number\"==typeof r)return Math.acos(r)},ACOSH:function(t){var r=O(t);if(\"number\"==typeof r)return Math.acosh(r)},ACOT:function(t){var r=O(t);if(\"number\"==typeof r)return Math.atan(1/r)},ACOTH:function(t){var r=O(t);if(\"number\"==typeof r)return.5*Math.log((r+1)/(r-1))},ARABIC:function(t){if(!O(t)&&/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/.test(\"\"+t)){var r=0;return(\"\"+t).replace(/[MDLV]|C[MD]?|X[CL]?|I[XV]?/g,(function(t){return r+=q[t],t})),+r}},ASIN:function(t){var r=O(t);if(\"number\"==typeof r)return Math.asin(r)},ASINH:function(t){var r=O(t);if(\"number\"==typeof r)return Math.asinh(r)},ATAN:function(t){var r=O(t);if(\"number\"==typeof r)return Math.atan(r)},ATAN2:function(t,r){var e=O(t),n=O(r);if(\"number\"==typeof e&&\"number\"==typeof n)return Math.atan2(n,e)},ATANH:function(t){var r=O(t);if(\"number\"==typeof r)return Math.log((1+r)/(1-r))/2},BASE:function(t,r,e){void 0===e&&(e=0);var n=O(t),o=O(r),i=O(e);if(\"number\"==typeof n&&\"number\"==typeof o&&\"number\"==typeof i){var a=n.toString(o);return new Array(Math.max(i+1-a.length,0)).join(\"0\")+a.toUpperCase()}},CEILING:function(t,r,e){void 0===r&&(r=1),void 0===e&&(e=0);var n=O(t),o=O(r),i=O(e);if(\"number\"==typeof n&&\"number\"==typeof o&&\"number\"==typeof i)return 0===o?0:(o=Math.abs(o),n>=0?Math.ceil(n/o)*o:0===e?-1*Math.floor(Math.abs(n)/o)*o:-1*Math.ceil(Math.abs(n)/o)*o)},COS:function(t){var r=O(t);if(\"number\"==typeof r)return Math.cos(r)},COSH:function(t){var r=O(t);if(\"number\"==typeof r)return Math.cosh(r)},COT:function(t){var r=O(t);if(\"number\"==typeof r)return 1/Math.tan(r)},COTH:function(t){var r=O(t);if(\"number\"==typeof r){var e=Math.exp(2*r);return(e+1)/(e-1)}},CSC:function(t){var r=O(t);if(\"number\"==typeof r)return 1/Math.sin(r)},CSCH:function(t){var r=O(t);if(\"number\"==typeof r)return 2/(Math.exp(r)-Math.exp(-r))},DEGREES:function(t){var r=O(t);if(\"number\"==typeof r)return 180*r/Math.PI},DECIMAL:function(t,r){var e=O(t),n=O(r);if(!(\"\"+e).match(\"/[2-9]/\")&&\"number\"==typeof e&&\"number\"==typeof n&&n>1&&n<37)return parseInt(\"\"+e,n)},FACT:K,FACTDOUBLE:function(t){var r=O(t);if(\"number\"==typeof r){var e=Math.floor(r);return e<=0?1:e*this.FACTDOUBLE(e-2)}},COMBIN:function(t,r){var e=O(t),n=O(r);if(\"number\"==typeof e&&\"number\"==typeof n)return this.FACT(e)/(this.FACT(n)*this.FACT(e-n))},COMBINA:function(t,r){var e=O(t),n=O(r);if(\"number\"==typeof e&&\"number\"==typeof n)return 0===e&&0===n?1:this.COMBIN(e+n-1,e-1)},FLOOR:function(t,r){var e=O(t),n=O(r);if(\"number\"==typeof e&&\"number\"==typeof n){var o=Math.abs(n);return e>=0?Math.floor(e/o)*o:-1*Math.ceil(Math.abs(e)/o)*o}},GCD:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=x(t),n=e.length;if(!n)return 1;for(var o=e[0],i=1;\"number\"!=typeof o;)o=e[i],i++;for(var a=o<0?-o:o;i<n;i++){var u=O(e[i]);if(\"number\"==typeof u){for(var f=u<0?-u:u;a&&f;)a>f?a%=f:f%=a;a+=f}}return a},LN:function(t){var r=O(t);if(\"number\"==typeof r)return Math.log(r)},LOG:function(t,r){void 0===r&&(r=10);var e=O(t),n=O(r);if(\"number\"==typeof e&&\"number\"==typeof n)return Math.log(e)/Math.log(n)},LOG10:function(t){var r=O(t);if(\"number\"==typeof r)return Math.log(r)/Math.log(10)},MOD:function(t,r){var e=O(t),n=O(r);if(\"number\"==typeof e&&\"number\"==typeof n&&0!==n){var o=Math.abs(e%n);return r>0?o:-o}},MROUND:function(t,r){var e=O(t),n=O(r);if(\"number\"==typeof e&&\"number\"==typeof n&&e*n>-1)return Math.round(e/n)*n},MULTINOMIAL:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=x(t),n=0,o=1,i=0;i<e.length;i++){var a=O(e[i]);\"number\"==typeof a&&(n+=a,o*=this.FACT(e[i]))}return this.FACT(n)/o},RADIANS:function(t){var r=O(t);if(\"number\"==typeof r)return r*Math.PI/180},RANDBETWEEN:function(t,r){var e=O(t),n=O(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e+Math.ceil((n-e+1)*Math.random())-1},ROMAN:function(t){var r=O(t);if(\"number\"==typeof r){for(var e=String(r).split(\"\"),n=\"\",o=3;o--;)n=($[+e.pop()+10*o]||\"\")+n;return new Array(+e.join(\"\")+1).join(\"M\")+n}},SEC:function(t){var r=O(t);if(\"number\"==typeof r)return 1/Math.cos(r)},SECH:function(t){var r=O(t);if(\"number\"==typeof r)return 2/(Math.exp(r)+Math.exp(-r))},SIN:function(t){var r=O(t);if(\"number\"==typeof r)return Math.sin(r)},SINH:function(t){var r=O(t);if(\"number\"==typeof r)return Math.sinh(r)},SQRTPI:function(t){var r=O(t);if(\"number\"==typeof r&&r>-1)return Math.sqrt(r*Math.PI)},SUBTOTAL:function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];var n=O(t),o=x(r);if(\"number\"==typeof n)switch(n){case 1:case 101:return this.AVERAGE(o);case 102:case 2:return this.COUNT(o);case 103:case 3:return this.COUNTA(o);case 104:case 4:return this.MAX(o);case 105:case 5:return this.MIN(o);case 106:case 6:return this.PRODUCT(o);case 107:case 7:case 110:case 10:return;case 108:case 8:return this.STDEVP(o);case 109:case 9:return this.SUM(o);case 111:case 11:return this.VARP(o)}},ADD:function(t,r){var e=O(t),n=O(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e+n},MINUS:function(t,r){var e=O(t),n=O(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e-n},DIVIDE:function(t,r){var e=O(t),n=O(r);if(\"number\"==typeof e&&\"number\"==typeof n&&0!==n)return e/n},MULTIPLY:function(t,r){var e=O(t),n=O(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e*n},GT:function(t,r){var e=O(t),n=O(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e>n},GTE:function(t,r){var e=O(t),n=O(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e>=n},LT:function(t,r){var e=O(t),n=O(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e<n},LTE:function(t,r){var e=O(t),n=O(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e<=n},EQ:function(t,r){return typeof t==typeof r&&t==r},NE:function(t,r){return typeof t!=typeof r||t!=r},POW:function(t,r){var e=O(t),n=O(r);if(\"number\"==typeof e&&\"number\"==typeof n)return this.POWER(t,r)},SUMX2MY2:function(t,r){if(!t.find((function(t){return\"number\"!=typeof O(t)}))&&!r.find((function(t){return\"number\"!=typeof O(t)}))){for(var e=0,n=0;n<t.length;n++)e+=t[n]*t[n]-r[n]*r[n];return e}},SUMX2PY2:function(t,r){if(!t.find((function(t){return\"number\"!=typeof O(t)}))&&!r.find((function(t){return\"number\"!=typeof O(t)}))){for(var e=0,n=0;n<t.length;n++)e+=t[n]*t[n]+r[n]*r[n];return e}},SUMXMY2:function(t,r){if(!t.find((function(t){return\"number\"!=typeof O(t)}))&&!r.find((function(t){return\"number\"!=typeof O(t)}))){for(var e=0,n=0;n<t.length;n++)e+=Math.pow(t[n]-r[n],2);return e}},TAN:function(t){var r=O(t);if(\"number\"==typeof r)return Math.tan(r)},TANH:function(t){var r=O(t);if(\"number\"==typeof r)return Math.tanh(r)},COMPLEX:Q,CORREL:function(t,r){if(t.length!==r.length)throw C;for(var e=t.filter((function(t){return\"number\"==typeof t})),n=r.filter((function(t){return\"number\"==typeof t})),o=e.length,i=e.reduce((function(t,r){return t+r}),0)/o,a=n.reduce((function(t,r){return t+r}),0)/o,u=0,f=0,s=0,h=0;h<o;h++)u+=(e[h]-i)*(n[h]-a),f+=Math.pow(e[h]-i,2),s+=Math.pow(n[h]-a,2);var c=Math.sqrt(f*s);if(!c)throw D;return u/c},DEC2BIN:J,DEC2HEX:Z,DEC2OCT:tt,DELTA:function(t,r){var e=O(t),n=O(r);if(\"number\"==typeof e||\"number\"==typeof e)return+(e===n);throw I},DEVSQ:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=x(t),n=[];e.forEach((function(t){\"number\"==typeof t&&n.push(t)}));var o=n.reduce((function(t,r){return t+r}),0)/n.length;return n.reduce((function(t,r){return t+Math.pow(r-o,2)}),0)},ERF:rt,ERFC:function(t){var r=O(t);if(\"number\"==typeof r)return 1-rt(r);throw I},EXP:function(t){var r=O(t);if(\"number\"==typeof r)return Math.exp(r);throw I},FISHER:function(t){var r=O(t);if(\"number\"==typeof r&&r>-1&&r<1)return.5*Math.log((1+r)/(1-r));throw I},FISHERINV:function(t){var r=O(t);if(\"number\"==typeof r){var e=Math.exp(2*r);return(e-1)/(e+1)}throw I},GAMMA:function t(r){var e=O(r);if(\"number\"!=typeof e)throw I;if(!(Number.isInteger(e)&&e<=0)){if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*t(1-e));e-=1;for(var n=et[0],o=1;o<9;o++)n+=et[o]/(e+o);var i=e+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(i,e+.5)*Math.exp(-i)*n}throw T},GEOMEAN:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=x(t);if(e.some((function(t){return!Number.isFinite(t)||t<=0})))throw T;return Math.pow(e.reduce((function(t,r){return r*t}),1),1/e.length)},GESTEP:function(t,r){void 0===r&&(r=0);var e=O(t),n=O(r);if(\"number\"==typeof e&&\"number\"==typeof n)return+(t>=r);throw I},HARMEAN:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=x(t);if(e.some((function(t){return!Number.isFinite(t)||t<=0})))throw T;var n=e.reduce((function(t,r){return t+1/r}),0);return 1/(1/e.length*n)},HEX2BIN:function(t,r){return void 0===r&&(r=null),J(parseInt(t.toString(),16),r)},HEX2DEC:function(t,r){void 0===r&&(r=null);var e=parseInt(t.toString(),16);if(!Number.isFinite(e)||\"boolean\"==typeof r||r&&\"boolean\"==typeof O(r))throw I;var n=+r;return n&&(n=+n.toFixed(0)),parseInt(t.toString(),16).toString().padStart(n,\"0\")},HEX2OCT:function(t,r){return void 0===r&&(r=null),tt(parseInt(t.toString(),16),r)},IMREAL:nt,IMAGINARY:ot,IMABS:function(t){var r=nt(t),e=ot(t);if(!Number.isFinite(+r)||!Number.isFinite(+e))throw I;return Math.sqrt(Math.pow(+r,2)+Math.pow(+e,2))},IMCONJUGATE:function(t){return Q(+nt(t),-+ot(t))},IMCOS:it,IMCOSH:at,IMCOT:function(t){return ut(it(t),ft(t))},IMCSC:function(t){return ut(\"1\",ft(t))},IMCSCH:function(t){return ut(\"1\",st(t))},IMDIV:ut,IMSIN:ft,IMSINH:st,IMEXP:function(t){var r=+nt(t),e=+ot(t),n=Math.exp(r);return Q(n*Math.cos(e),n*Math.sin(r))},IMLN:function(t){var r=+nt(t),e=+ot(t);return Q(Math.log(Math.sqrt(r*r+e*e)),Math.atan(e/r))},IMPOWER:function(t,r){var e=O(r);if(\"number\"!=typeof e)throw I;var n=+nt(t),o=+ot(t),i=Math.sqrt(n*n+o*o),a=Math.pow(i,e),u=Math.atan(o/n);return Q(a*Math.cos(e*u),a*Math.sin(e*u))},IMPRODUCT:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(0===t.length)throw I;for(var e=t[0],n=0,o=t.slice(1);n<o.length;n++){var i=o[n];e=V(e.toString(),i.toString())}return e.toString()},IMSEC:function(t){return ut(\"1\",it(t))},IMSECH:function(t){return ut(\"1\",at(t))},IMSQRT:function(t){var r=+nt(t),e=+ot(t),n=Math.sqrt(Math.sqrt(r*r+e*e)),o=Math.atan(e/r)/2;return Q(n*Math.cos(o),n*Math.sin(o))},IMSUB:function(t,r){var e=+nt(t),n=+ot(t);return Q(e-+nt(r),n-+ot(r))},IMSUM:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(0===t.length)throw I;for(var e=t[0],n=0,o=t.slice(1);n<o.length;n++){var i=o[n];e=k(e.toString(),i.toString())}return e.toString()},IMTAN:function(t){return ut(ft(t),it(t))},LARGE:function(t,r){var e=O(r),n=t.sort((function(t,r){return t-r}));if(\"number\"==typeof e&&!t.some((function(t){return\"number\"!=typeof O(t)})))return n[n.length-e];throw I},MEDIAN:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=x(t);e.sort((function(t,r){return t-r}));var n=Math.floor(e.length/2);return e.length%2?e[n]:(e[n-1]+e[n])/2},OCT2BIN:function(t,r){return void 0===r&&(r=null),J(parseInt(t.toString(),8),r)},OCT2DEC:function(t,r){void 0===r&&(r=null);var e=r?O(r):null,n=parseInt(t.toString(),8);if(!Number.isFinite(n)||\"boolean\"==typeof e)throw I;return e&&(e=+e.toFixed(0)),parseInt(t.toString(),8).toString().padStart(e,\"0\")},OCT2HEX:function(t,r){return void 0===r&&(r=null),Z(parseInt(t.toString(),8),r)},PERMUT:function(t,r){var e=O(t),n=O(r);if(\"number\"==typeof e&&\"number\"==typeof n)return K(e)/K(e-n);throw I},PERCENTILE:ht,QUORTILE:function(t,r){var e=O(r);if(\"number\"!=typeof e)throw I;switch(e){case 0:return z.apply(void 0,t);case 1:return ht(t,.25);case 2:return ht(t,.5);case 3:return ht(t,.75);case 4:return j.apply(void 0,t);default:throw T}},SIGN:function(t){var r=O(t);if(\"number\"==typeof r)return 0===r?0:r/Math.abs(r);throw I},SMALL:function(t,r){var e=O(r),n=t.sort((function(t,r){return t-r}));if(\"number\"==typeof e&&!t.some((function(t){return\"number\"!=typeof O(t)})))return n[e-1];throw I},STEYX:function(t,r){if(t.length!==r.length)throw C;var e=t.filter((function(t){return\"number\"==typeof t})),n=r.filter((function(t){return\"number\"==typeof t})),o=e.length;if(2===o)throw D;for(var i=e.reduce((function(t,r){return t+r}),0)/o,a=n.reduce((function(t,r){return t+r}),0)/o,u=0,f=0,s=0,h=0;h<o;h++)u+=(e[h]-i)*(n[h]-a),f+=Math.pow(e[h]-i,2),s+=Math.pow(n[h]-a,2);if(2===s)throw D;return Math.sqrt((f-Math.pow(u,2)/s)/(o-2))},WEIBULL:function(t,r,e,n){var o=F(t),i=F(r),a=F(e);if(1==r)return 1/a;var u=Math.exp(-Math.pow(o/a,i));return n?1-u:i/Math.pow(a,i)*Math.pow(o,i-1)*u},AVEDEV:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=x(t).filter((function(t){return\"number\"==typeof t})),n=e.length;if(0===n)throw D;var o=e.reduce((function(t,r){return t+r}),0)/n,i=e.reduce((function(t,r){return t+Math.abs(r-o)}),0);return i/n},BINOMDIST:function(t,r,e,n){var o=this;void 0===n&&(n=!1);var i=F(t),a=F(r),u=F(e),f=function(t,r,e){return o.COMBIN(r,t)*Math.pow(e,t)*Math.pow(1-e,r-t)};if(!n)return f(i,a,u);for(var s=0,h=0;h<i+1;h++)s+=f(h,a,u);return s},BINOMDISTRANGE:function(t,r,e,n){var o=F(t),i=F(r),a=F(e),u=O(n);\"number\"!=typeof u&&(u=a);for(var f=0,s=a;s<=u;s++){f+=this.COMBIN(o,s)*Math.pow(i,s)*Math.pow(1-i,o-s)}return f},BINOMDISTINV:function(t,r,e){for(var n=F(t),o=F(r),i=F(e),a=0;a<=n;a++){if(this.BINOMDIST(a,n,o,!0)>=i)return a}},BITAND:function(t,r){var e=O(t),n=O(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e&n;throw I},BITOR:function(t,r){var e=O(t),n=O(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e|n;throw I},BITXOR:function(t,r){var e=O(t),n=O(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e^n;throw I},BITLSHIFT:function(t,r){var e=O(t),n=O(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e<<n;throw I},BITRSHIFT:function(t,r){var e=O(t),n=O(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e>>n;throw I},COVAR:function(t,r){var e=t.filter((function(t){return\"number\"==typeof t})),n=r.filter((function(t){return\"number\"==typeof t}));if(e.length!==n.length)throw C;var o=e.length;if(0===o)throw D;for(var i=e.reduce((function(t,r){return t+r}),0)/o,a=n.reduce((function(t,r){return t+r}),0)/o,u=0,f=0;f<o;f++)u+=(e[f]-i)*(n[f]-a);return u/o}});var pt=/[\\0-\\x1F]/g;var vt=Object.freeze({__proto__:null,CONCATENATE:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return x(t).join(\"\")},LEFT:function(t,r){return R(t)?\"\":t.toString().substring(0,r)},MID:function(t,r,e){return R(t)?\"\":t.toString().substring(r,r+e)},RIGHT:function(t,r){return R(t)?\"\":t.toString().substring(t.length-r)},LOWER:function(t){return R(t)?\"\":t.toString().toLowerCase()},UPPER:function(t){return R(t)?\"\":t.toString().toUpperCase()},PROPER:function(t){if(R(t))return\"\";var r=t.toString().toLowerCase().split(\" \");for(var e in t=\"\",r)t+=(t?\" \":\"\")+r[e].substring(0,1).toUpperCase()+r[e].substring(1);return t},TRIM:function(t){return R(t)?\"\":t.toString().trim()},LEN:function(t){return R(t)?0:t.toString().length},CHAR:function(t){var r=O(t);if(\"number\"==typeof r)return String.fromCharCode(r)},CLEAN:function(t){return void 0===t&&(t=\"\"),(\"\"+t).replace(pt,\"\")},CODE:function(t){return void 0===t&&(t=\"\"),(\"\"+t).charCodeAt(0)},DOLLAR:function(t,r){void 0===r&&(r=2);var e=O(t),n=O(r);if(\"number\"==typeof e&&\"number\"==typeof n)return\"$\"+e.toFixed(n)},EXCAT:function(t,r){return t===r},FIND:function(t,r,e){void 0===e&&(e=0);var n=O(e);if(\"number\"==typeof n&&r)return(\"\"+r).indexOf(\"\"+t,n-1)+1;throw\"index cannot be string\"},FIXED:function(t,r,e){void 0===r&&(r=2),void 0===e&&(e=!1);var n=O(t),o=O(r);if(\"number\"==typeof n&&\"number\"==typeof o){var i=n.toFixed(o);return P(e)?\"\"+i:i.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\")}},NUMBERVALUE:function(t,r,e){if(void 0===r&&(r=\".\"),void 0===e&&(e=\",\"),\"string\"==typeof t&&\"string\"==typeof r&&\"string\"==typeof e)return Number(t.replace(r,\".\").replace(e,\"\"))},REGEXEXTRACT:function(t,r){if(\"string\"==typeof t&&\"string\"==typeof r){var e=t.match(new RegExp(r));return e?e[e.length>1?e.length-1:0]:null}},REGEXMATCH:function(t,r){if(\"string\"==typeof t&&\"string\"==typeof r)return!!t.match(new RegExp(r))},REGEXREPLACE:function(t,r,e){if(\"string\"==typeof t&&\"string\"==typeof r)return t.replace(new RegExp(r),\"\"+e)},REPT:function(t,r){var e=O(r);if(\"number\"==typeof e)return new Array(e+1).join(\"\"+t)},SEARCH:function(t,r,e){void 0===e&&(e=0);var n=O(e);if(\"number\"==typeof n){var o=(\"\"+r).toLowerCase().indexOf((\"\"+t).toLowerCase(),n-1)+1;if(0!==o)return o;throw\"not found\"}},SUBSTITUTE:function(t,r,e,n){if(!t||!r||!e&&\"\"!==e)return\"\"+t;if(void 0===n)return(\"\"+t).replace(new RegExp(\"\"+r,\"g\"),\"\"+e);for(var o=0,i=0;(\"\"+t).indexOf(\"\"+r,o)>0;)if(o=(\"\"+t).indexOf(\"\"+r,o+1),++i===n)return(\"\"+t).substring(0,o)+e+(\"\"+t).substring(o+(\"\"+r).length)},T:function(t){return\"\"+t},JOIN:function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];var n=[];return r.forEach((function(r){\"object\"==typeof r?n.push(r.join(\"\"+t)):n.push(r)})),n.join(\"\"+t)},REPLACE:function(t,r,e,n){var o=O(r),i=O(e);if(\"number\"==typeof o&&\"number\"==typeof i){var a=t.toString(),u=n.toString();return a.replace(a.substr(o-1,i),u)}},ARRAYTOTEXT:function(t,r){return r?\"{\"+t.map((function(t){return\"string\"==typeof t?'\"'+t+'\"':t})).join(\"; \")+\"}\":t.join(\"; \")}}),gt=[[],[1,2,3,4,5,6,7],[7,1,2,3,4,5,6],[6,0,1,2,3,4,5],[],[],[],[],[],[],[],[7,1,2,3,4,5,6],[6,7,1,2,3,4,5],[5,6,7,1,2,3,4],[4,5,6,7,1,2,3],[3,4,5,6,7,1,2],[2,3,4,5,6,7,1],[1,2,3,4,5,6,7]],lt=[void 0,0,1,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,1,2,3,4,5,6,0],bt=[[],[6,0],[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],void 0,void 0,void 0,[0,0],[1,1],[2,2],[3,3],[4,4],[5,5],[6,6]];function Mt(t){return 1===new Date(t,1,29).getMonth()}function dt(t,r,e){void 0===e&&(e=0);var n=L(t),o=L(r);if(n&&o){var i=n.getDate(),a=n.getMonth()+1,u=n.getFullYear(),f=o.getDate(),s=o.getMonth()+1,h=o.getFullYear(),c=365,p=h-u+1,v=(new Date(h+1,0,1).getTime()-new Date(u,0,1).getTime())/1e3/60/60/24/p;switch(e){case 0:return 31===i&&31===f?(i=30,f=30):31===i?i=30:30===i&&31===f&&(f=30),(f+30*s+360*h-(i+30*a+360*u))/360;case 1:return u===h||u+1===h&&(a>s||a===s&&i>=f)?((u===h&&Mt(u)||function(t,r){var e=t.getFullYear(),n=new Date(e,2,1);if(Mt(e)&&t<n&&r>=n)return!0;var o=r.getFullYear(),i=new Date(o,2,1);return Mt(o)&&r>=i&&t<i}(n,o)||1===s&&29===f)&&(c=366),this.DAYS(o.toDateString(),n.toDateString())/c):this.DAYS(o.toDateString(),n.toDateString())/v;case 2:return this.DAYS(o.toDateString(),n.toDateString())/360;case 3:return this.DAYS(o.toDateString(),n.toDateString())/365;case 4:return(f+30*s+360*h-(i+30*a+360*u))/360}}}var yt=Object.freeze({__proto__:null,DATE:function(t,r,e){return S(new Date(t,r-1,e))},TIME:function(t,r,e){return S(new Date(1900,0,1,t,r,e))},DAY:function(t){return A(t).getDate()},MONTH:function(t){return A(t).getMonth()+1},YEAR:function(t){return A(t).getFullYear()},HOUR:function(t){return A(t).getHours()},MINUTE:function(t){return A(t).getMinutes()},SECOND:function(t){return A(t).getSeconds()},NOW:function(){return S(new Date)},DATEDIF:function(t,r,e){if(\"D\"===e)return r-t;var n=A(t),o=A(r);switch(e){case\"Y\":return o.getFullYear()-n.getFullYear();case\"M\":return(a=12*(o.getFullYear()-n.getFullYear()))+o.getMonth()-n.getMonth();case\"D\":return Math.floor(r-t);case\"MD\":if((u=o.getDate()-n.getDate())<0){var i=new Date(n.getFullYear(),n.getMonth()+1,0).getDate();return o.getDate()+i-n.getDate()}return u;case\"YM\":var a;return(a=o.getMonth()-n.getMonth())<0?12+a:a;case\"YD\":var u;return(u=N(o)-N(n))<0?365+u:u}},DATEVALUE:function(t){if(\"string\"==typeof t)return S(new Date(new Date(t).toDateString()))},DAYS:function(t,r){var e=L(t),n=L(r);if(e&&n)return Math.round((e.getTime()-n.getTime())/864e5)},DAYS360:function(t,r,e){void 0===e&&(e=0);var n=L(t),o=L(r);if(n&&o){var i=n.getMonth(),a=o.getMonth(),u=void 0,f=void 0;if(e)u=31===n.getDate()?30:n.getDate(),f=31===o.getDate()?30:o.getDate();else{var s=new Date(n.getFullYear(),i+1,0).getDate(),h=new Date(o.getFullYear(),a+1,0).getDate();u=n.getDate()===s?30:n.getDate(),o.getDate()===h?u<30?(a++,f=1):f=30:f=o.getDate()}return 360*(o.getFullYear()-n.getFullYear())+30*(a-i)+(f-u)}},EDATE:function(t,r){var e=L(t),n=O(r);if(e&&\"number\"==typeof n)return e.setMonth(e.getMonth()+n),S(e)},EOMONTH:function(t,r){var e=L(t),n=O(r);if(e&&\"number\"==typeof n)return S(new Date(e.getFullYear(),e.getMonth()+n+1,0))},ISOWEEKNUM:function(t){var r=L(t);if(r){r.setHours(0,0,0),r.setDate(r.getDate()+4-(r.getDay()||7));var e=new Date(r.getFullYear(),0,1);return Math.ceil(((r.getTime()-e.getTime())/864e5+1)/7)}},NETWORKDAYS:function(t,r,e){return this.NETWORKDAYSINTL(t,r,1,e)},NETWORKDAYSINTL:function(t,r,e,n){var o=L(t),i=L(r);if(o&&i){var a=void 0===e?bt[1]:bt[e],u=void 0;u=void 0===n?[]:n instanceof Array?n:[n];for(var f=0;f<u.length;f++){if((l=A(u[f]))instanceof Error)throw\"The \"+u[f]+\" is not a  number\";u[f]=l}var s=(i.getTime()-o.getTime())/864e5+1,h=Math.round(s),c=o;for(f=0;f<s;f++){var p=(new Date).getTimezoneOffset()>0?c.getUTCDay():c.getDay(),v=!1;p!==a[0]&&p!==a[1]||(v=!0);for(var g=0;g<u.length;g++){var l;if((l=u[g]).getDate()===c.getDate()&&l.getMonth()===c.getMonth()&&l.getFullYear()===c.getFullYear()){v=!0;break}}v&&h--,c.setDate(c.getDate()+1)}return h}},TIMEVALUE:function(t){if(\"string\"==typeof t){var r=t.split(\" \"),e=r[1],n=r[0].split(\":\"),o=new Date;return o.setHours(+n[0]),e&&\"PM\"===e.toUpperCase()&&o.setHours(o.getHours()+12),o.setMinutes(+n[1]),n[2]&&o.setSeconds(+n[2]),(3600*o.getHours()+60*o.getMinutes()+o.getSeconds())/86400}},WEEKNUM:function(t,r){void 0===r&&(r=1);var e=L(t);if(21===r)return this.ISOWEEKNUM(r);var n=lt[r],o=new Date(e.getFullYear(),0,1),i=o.getDay()<n?1:0,a=o.getTime()-24*Math.abs(o.getDay()-n)*60*60*1e3;return Math.floor((e.getTime()-a)/864e5/7+1)+i},WEEKDAY:function(t,r){void 0===r&&(r=1);var e=L(t).getDay();return gt[r][e]},WORKDAY:function(t,r,e){return this.WORKDAYINTL(t,r,1,e)},WORKDAYINTL:function(t,r,e,n){var o=L(t),i=O(r);if(o&&\"number\"==typeof i){var a=void 0===e?bt[1]:bt[e],u=void 0;u=void 0===n?[]:n instanceof Array?n:[n];for(var f=0;f<u.length;f++){if((p=A(u[f]))instanceof Error)throw\"The \"+u[f]+\" is not a  number\";u[f]=p}for(var s=0;s<i;){o.setDate(o.getDate()+1);var h=o.getDate();if(h!==a[0]&&h!==a[1]){for(var c=0;c<u.length;c++){var p;if((p=u[c]).getDate()===o.getDate()&&p.getMonth()===o.getMonth()&&p.getFullYear()===o.getFullYear()){s--;break}}s++}}return S(o)}},YEARFRAC:dt});var mt=Object.freeze({__proto__:null,IF:function(t,r,e){return t?r:e},AND:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0;e<t.length;e++)if(!P(t[e]))return!1;return!0},NOT:function(t){return!P(t)},OR:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0;e<t.length;e++)if(t[e])return!0;return!1},CHOOSE:function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];var n=O(t);if(r.length>1&&\"number\"==typeof n){if(r.length<n)throw\"the index number is greater than the length of the array of values\";if(n<=0)throw\"index cannot be less than or equal to 0\";return r[--n]}},FALSE:function(){return!1},TRUE:function(){return!0}});var _t=Object.freeze({__proto__:null,ISBLANK:function(t){return R(t)},ISBINARY:function(t){return/^[01]{1,10}$/.test(\"\"+t)},ISEVEN:function(t){var r=O(t);return\"number\"==typeof r&&r%2==0},ISODD:function(t){var r=O(t);return\"number\"==typeof r&&r%2!=0},ISNOTEXT:function(t){return\"string\"!=typeof t},ISNUMBER:function(t){return\"number\"==typeof O(t)},ISTEXT:function(t){return\"string\"==typeof t},N:function(t){var r=O(t);if(\"number\"==typeof r)return r;var e=new Date(t);return e.getTime()?S(e):\"TRUE\"===t||!0===t?1:\"FALSE\"===t||!1===t?0:void 0}});var Et=Object.freeze({__proto__:null,ACCRINT:function(t,r,e,n,o,i,a){void 0===o&&(o=0),void 0===a&&(a=0);var u=L(t),f=L(e),s=F(n),h=F(o),c=F(i),p=F(a);if(-1===[1,2,4].indexOf(c))throw\"Frequency is \"+i+\". It's should be 1, 2 or 4\";if(-1===[0,1,2,3,4].indexOf(p))throw\"Basis is \"+a+\". It's should be 0, 1, 2, 3 or 4\";if(f<=u)throw\"Settlement canot be before or equal to issue\";return h*s*dt(t,e,p)},PMT:function(t,r,e,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var i,a=F(t),u=F(r),f=F(e),s=F(n);if(0===a)i=(f+s)/u;else{var h=Math.pow(1+a,u);i=a*(f*h+s)/(h-1),1===o&&(i/=1+a)}return-i},FV:function(t,r,e,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var i,a=F(t),u=F(r),f=F(e),s=F(n);if(0!==a){var h=Math.pow(1+a,u);return i=s*h+f*(h-1)/a,1===o&&(i=s*h+f*(1+a)*(h-1)/a),-i}i=s+f*u},DB:function(t,r,e,n,o){void 0===o&&(o=12);var i=F(t),a=F(r),u=F(e),f=F(n),s=F(o);if(i<0||a<0||u<0||f<0)throw\"Parameters cannot be negative\";if(-1===[1,2,3,4,5,6,7,8,9,10,11,12].indexOf(s))throw\"Moth is \"+o+\". It's should be beetwen 1 and 12\";if(f>u)throw\"Period cannot be greater than life\";if(a>=i)return 0;for(var h=+(1-Math.pow(a/i,1/u)).toFixed(3),c=i*h*s/12,p=c,v=0,g=n===u?u-1:n,l=2;l<=g;l++)p+=v=(i-p)*h;return 1===n?c:n===u?(i-p)*h:v},DDB:function(t,r,e,n,o){void 0===o&&(o=2);var i=F(t),a=F(r),u=F(e),f=F(n),s=F(o);if(i<0||a<0||u<0||f<0||s<0)throw\"Parameters cannot be negative\";if(f>u)throw\"Period cannot be greater than life\";if(a>=i)return 0;for(var h=0,c=0,p=1;p<=n;p++)h+=c=Math.min(s/u*(i-h),i-a-h);return c},DOLLARDE:function(t,r){var e=F(t),n=F(r);if(n<0)throw\"Fraction cannot be negative\";if(n>=0&&n<1)throw\"Fraction cannot be zero\";n=parseInt(\"\"+n,10);var o=parseInt(\"\"+t,10);o+=e%1*Math.pow(10,Math.ceil(Math.log(n)/Math.LN10))/n;var i=Math.pow(10,Math.ceil(Math.log(n)/Math.LN2)+1);return o=Math.round(o*i)/i},DOLLARFR:function(t,r){var e=F(t),n=F(r);if(n<0)throw\"Fraction cannot be negative\";if(n>=0&&n<1)throw\"Fraction cannot be zero\";n=parseInt(\"\"+n,10);var o=parseInt(\"\"+t,10);return o+=e%1*Math.pow(10,-Math.ceil(Math.log(n)/Math.LN10))*n},EFFECT:function(t,r){var e=F(t),n=F(r);if(e<=0)throw\"Rate cannot be less than or equal to zero\";if(n<1)throw\"Periods cannot be less than 1\";return n=parseInt(\"\"+n,10),Math.pow(1+e/n,n)-1},FVSCHEDULE:function(t,r){for(var e=F(t),n=r.map((function(t){return F(t)})),o=n.length,i=e,a=0;a<o;a++)i*=1+n[a];return i},IRR:function(t,r){void 0===r&&(r=0);for(var e=x(t).map((function(t){return F(t)})),n=F(r),o=function(t,r,e){for(var n=e+1,o=t[0],i=1;i<t.length;i++)o+=t[i]/Math.pow(n,(r[i]-r[0])/365);return o},i=function(t,r,e){for(var n=e+1,o=0,i=1;i<t.length;i++){var a=(r[i]-r[0])/365;o-=a*t[i]/Math.pow(n,a+1)}return o},a=[],u=!1,f=!1,s=0;s<e.length;s++)a[s]=0===s?0:a[s-1]+365,e[s]>0&&(u=!0),e[s]<0&&(f=!0);if(!u||!f)throw\"Values should contain at least one positive value and one negative value\";var h,c,p,v=n=void 0===r?.1:n,g=!0;do{h=v-(p=o(e,a,v))/i(e,a,v),c=Math.abs(h-v),v=h,g=c>1e-10&&Math.abs(p)>1e-10}while(g);return v},IPMT:function(t,r,e,n,o,i){void 0===o&&(o=0),void 0===i&&(i=0);var a=F(t),u=F(e),f=F(r),s=F(n),h=F(o),c=this.PMT(a,u,s,h,i);return(1===f?1===i?0:-s:1===i?this.FV(a,f-2,c,s,1)-c:this.FV(a,f-1,c,s,0))*a},ISPMT:function(t,r,e,n){var o=F(t),i=F(r),a=F(e);return F(n)*o*(i/a-1)},NPV:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=x(t).map((function(t){return F(t)})),n=F(e[0]),o=0,i=1;i<e.length;i++)o+=e[i]/Math.pow(1+n,i);return o},NOMINAL:function(t,r){var e=F(t),n=F(r);if(e<=0)throw\"Rate cannot be less then or equal to zero\";if(n<1)throw\"Periods cannot be less then 1\";return n=parseInt(\"\"+n,10),(Math.pow(e+1,1/n)-1)*n},NPER:function(t,r,e,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var i=F(t),a=F(r),u=F(e),f=F(n),s=F(o),h=a*(1+i*s)-f*i,c=u*i+a*(1+i*s);return Math.log(h/c)/Math.log(1+i)},PDURATION:function(t,r,e){var n=F(t),o=F(r),i=F(e);if(n<=0)throw\"Rate cannot be less then or equal to zero\";return(Math.log(i)-Math.log(o))/Math.log(1+n)},PPMT:function(t,r,e,n,o,i){void 0===o&&(o=0),void 0===i&&(i=0);var a=F(t),u=F(r),f=F(e),s=F(n),h=F(o),c=F(i);return this.PMT(a,f,s,h,c)-this.IPMT(a,u,f,s,h,c)},PV:function(t,r,e,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var i=F(t),a=F(r),u=F(e),f=F(n),s=F(o);return 0===i?-u*a-f:((1-Math.pow(1+i,a))/i*u*(1+i*s)-f)/Math.pow(1+i,a)},SYD:function(t,r,e,n){var o=F(t),i=F(r),a=F(e);return(o-i)*(a-F(n)+1)*2/(a*(a+1))},TBILLPRICE:function(t,r,e){var n=L(t),o=L(r),i=F(e);if(\"number\"==typeof i&&o>n)return 100*(1-i*Math.round((o.getTime()-n.getTime())/864e5)/360)},TBILLYIELD:function(t,r,e){var n=L(t),o=L(r),i=F(e);if(\"number\"==typeof i&&o>n)return(100-i)/i*360/Math.round((o.getTime()-n.getTime())/864e5)}}),wt={number:ct,string:vt,date:yt,other:mt,information:_t,financial:Et},Dt=e(e(e(e(e(e({},ct),vt),yt),mt),_t),Et);var It=Math.pow(10,8);function Tt(t,r,e){e.add?t.has(r)||e.add(r):t.add(r)}function Ct(t){if(t.keys)return Array.from(t.keys());var r=[];return t.forEach((function(t,e){return r.push(e)})),r}function Nt(t){if(t.values)return t.values();var r=[];t.forEach((function(t,e){return r.push(e)}));var e=0;return{add:function(t){r.push(t)},next:function(){var t=r[e];return{done:++e>r.length,value:t}}}}var At=function(){function t(t){var r=this;(t=t||{get:null,set:null})&&(this._getter=t.get,this._setter=t.set),this._parser=m,this._printer=w,this._parseContext={name:function(){},pageName:function(){return\"\"},pageObj:function(){return null},page:function(){return 0},z:0},this.$count=0,this._data=new Map,this._triggers=new Map,this._holders={},this._context={v:function(t){if(-1===t)throw new Error;var e=r._getter(t);return void 0===e?null:e},r:function(t,e){var n=[];return u(t,e,(function(t){return n.push(r._getter(t))})),n},m:Dt,e:function(t){throw t},p:function(t){return r.getPlaceholder(t)}}}return t.prototype.setValue=function(t,r,e,n){\"\"===r&&(r=null),this._removeTriggers(t,null),this._setter(t,r,e)&&(n||this.trigger(t))},t.prototype.clean=function(t){this._removeTriggers(t,null)},t.prototype.getValue=function(t){return this._getter(t)},t.prototype.setPlaceholder=function(t,r){var e=this;\"*\"===t?Object.entries(r).forEach((function(t){return e.setPlaceholder(t[0],t[1])})):(null===r?delete this._holders[t]:this._holders[t]=r,this.each((function(r,n){(function(t,r,e){for(var n=0;n<t.length;n+=3)if(2===t[n]&&r.substr(t[n+1],t[n+2])==e)return!0;return!1})(n.code,n.source,t)&&e.setMath(r,n.source,e._parseContext)})))},t.prototype.getPlaceholder=function(t){if(\"*\"===t)return this._holders;var r=this._holders[t];return void 0===r?null:r},t.prototype.setMath=function(t,r,e,n){var o=this._generate(r,e),i=this._setMathAt(t,o);n||this._execAndTrigger(i)},t.prototype.refresh=function(t){this._execAndTrigger(t)},t.prototype.getMath=function(t){return this._data.get(t)},t.prototype.trigger=function(t,r){var e=this._triggers.get(t);if(e){var n=!r;r||(r=new Set);for(var o=0;o<e.length;o++)r.add(e[o]);n&&this.triggerSet(r)}return null},t.prototype.triggerSet=function(t){for(var r=this,e=new Map;t.size;){var n=Nt(t),o=!1;t:for(var i=n.next();!i.done;i=n.next()){var a=this._data.get(i.value),u=e.get(i.value);if(!u||(1==u&&(u=this._check_for_loops(i.value,a.triggers,e)),2!=u)){var f=a.triggers;if(f)for(var s=0;s<f.length;s++)if(t.has(f[s]))continue t;this._execAndTrigger(i.value,t),u||e.set(i.value,1),t.delete(i.value),o=!0}}if(!o)return void t.forEach((function(e){return r._errorAndTrigger(e,t)}))}},t.prototype._check_for_loops=function(t,r,e){var n=new Set;r.forEach((function(t){return n.add(t)}));for(var o=Nt(n),i=o.next();!i.done;i=o.next()){if(i.value==t)return e.set(t,2),2;var a=e.get(i.value);if(a&&a>1)return e.set(t,a),a;var u=this._data.get(i.value);u&&u.triggers&&u.triggers.forEach((function(t){return Tt(n,t,o)}))}return e.set(t,3),3},t.prototype._setMathAt=function(t,r){if(this._removeTriggers(t,r)){if(r.triggers)if(-1===r.triggers.indexOf(t))for(var n=0;n<r.triggers.length;n++){var o=r.triggers[n],i=this._triggers.get(o);void 0===i&&(i=[],this._triggers.set(o,i)),i.push(t)}else r=e(e({},r),{broken:3});return this._data.set(t,r),t}},t.prototype._removeTriggers=function(t,r){var e=this._data.get(t);if(!e)return!0;if(e===r)return!1;var n=e.triggers;if(n&&3!==e.broken)for(var o=0;o<n.length;o++){var i=n[o],a=this._triggers.get(i);if(a){var u=a.findIndex((function(r){return r===t}));a.splice(u,1)}}return this._data.delete(t),!0},t.prototype.parse=function(t,r){return this._parser(t,r||this._parseContext)},t.prototype.exec=function(t,r){var e=this._generate(t,r);return this._exec(e)},t.prototype.each=function(t){var r=this;Ct(this._data).forEach((function(e){return t(e,r._data.get(e))}))},t.prototype.setLogger=function(t){this._err_handler=t},t.prototype._setErr=function(t,e){return t.broken=2,e&&this._err_handler&&this._err_handler(e),r[t.broken]},t.prototype._exec=function(t){if(t.broken>0&&2!==t.broken)return r[t.broken];try{var e=t.exec(this._context);return t.broken=0,\"number\"==typeof e?isFinite(e)?Math.round(e*It)/It:this._setErr(t):e}catch(r){return this._setErr(t,r)}},t.prototype.toString=function(t,r){return f(t,r||this._parseContext)},t.prototype.regenerate=function(t,r,n){var o=this;n=e({},n||this._parseContext),Ct(this._data).forEach((function(e){var i=!1,u=o._data.get(e),s=a(e);if(r&&s===t)o._removeTriggers(e,null);else{for(var h=0;h<u.code.length;h+=3)if(9===u.code[h]&&a(u.code[h+1])===t){i=!0;break}i&&(n.z=s,r?o.setMath(e,u.source,n):(u.source=f(u,n),u.code=o._parser(u.source,n).code))}}))},t.prototype.recalculate=function(t,r){var n=this;r=e({},r||this._parseContext);var o=new Set;this.each((function(e){if(t){var i=n._data.get(e);if(i.broken&&2!==i.broken)return r.z=a(e),void n.setMath(e,i.source,r)}o.add(e)})),this.triggerSet(o)},t.prototype._generate=function(t,r,e){var n=e||this._parser(t,r||this._parseContext);return this._printer(n),n.triggers=function(t){for(var r=[],e=t.code,n=e.length,o=0;o<n;o+=3){switch(e[o]){case 7:case 6:var i=e[o+4];r.push(i);break;case 8:u(e[o+4],e[o+7],(function(t){return r.push(t)}))}}if(r.length>10){var a=new Set;r=r.filter((function(t){return!a.has(t)&&(a.add(t),!0)}))}return r.length?r:null}(n),n},t.prototype._execAndTrigger=function(t,r){this.$count+=1;var e=this._data.get(t);if(e){var n=this._exec(e);this._setter(t,n)&&this.trigger(t,r)}},t.prototype._errorAndTrigger=function(t,r){var e=this._data.get(t),n=this._setErr(e);this._setter(t,n)&&this.trigger(t,r)},t.prototype.debug=function(t){console.log(function(t){for(var r=t.code,e=t.source,n=\"\",o=r.length,i=0;i<o;i+=3){var a=r[i],u=void 0;switch(a){case 4:u=\"method\";break;case 1:u=\"text\";break;case 5:u=\"page\";break;case 2:u=\"holder\";break;case 6:u=\"name\";break;case 7:u=\"arg\";break;case 8:u=\"range\";break;case 9:u=\"data\";break;case 10:u=\"op\";break;case 11:u=\"number\";break;case 3:u=\"error\";break;case 12:u=\"extra\"}n+=9===a?\"              \"+r[i+1]+\" x \"+r[i+2]+\")\\n\":\"[\"+u+\"]\"+_(u)+e.substr(r[i+1],r[i+2])+\"\\n\"}return n}(this.parse(t)))},t.prototype.transpose=function(t,r,e,i){var a=this;i=i||this._parseContext;var u=o(t),f=u[0],s=u[1],h=u[2],c=[],p=new Map,v=new Map;Ct(this._data).forEach((function(t){var u=o(t),g=u[0],l=u[1],b=u[2],M=a._data.get(t),d=a._transpose(M,f,s,r,e,i),y=t;if(b===h&&(l>=s||g>=f)&&(y=n(g>=f?g+r:g,l>=s?l+e:l,b)),M!==d||t!==y){if(v.set(t,d),b===h&&(e<0&&l>=s&&l<s-e||r<0&&g>=f&&g<f-r))return;p.set(y,d),c.push(y)}})),Ct(p).forEach((function(t){return a._setMathAt(t,p.get(t))})),Array.from(v.keys()).forEach((function(t){p.has(t)||a._removeTriggers(t,null)}));for(var g=new Set,l=0;l<c.length;l++)g.add(c[l]);this.triggerSet(g)},t.prototype.transposeMath=function(t,r,e,n){return\"string\"==typeof t&&(t=this.parse(t,n)),this._transpose(t,-1,-1,r,e,n||this._parseContext).source},t.prototype._transpose=function(t,r,e,i,a,u){for(var s=!0,h=t.code,c=!(r<0||e<0),p=0;p<h.length;p+=3)if(7===h[p]){var v=o(h[p+4]),g=v[0],l=v[1],b=v[2];if(u.z!==b)continue;var M=h[p+5];if(!c&&3==M)continue;(c||0==(1&M))&&g>=r&&(s&&(h=[].concat(h),s=!1),((g+=i)<r||g<0)&&(h[p]=3)),(c||0==(2&M))&&l>=e&&(s&&(h=[].concat(h),s=!1),((l+=a)<e||l<0)&&(h[p]=3)),s||(h[p+4]=n(g,l,b)),p+=3}else if(8===h[p]){var d=h[p+5],y=h[p+8];if(!c&&3===d&&3===y)continue;var m=o(h[p+4]),_=m[0],E=m[1],w=(b=m[2],o(h[p+7])),D=w[0],I=w[1];if(u.z!==b)continue;i&&((c||0==(1&d))&&(i>0?_>=r:_>r)&&(s&&(h=[].concat(h),s=!1),(_+=i)<0&&(h[p]=3)),(c||0==(1&y))&&D>=r&&(s&&(h=[].concat(h),s=!1),(D+=i)<_&&(h[p]=3))),a&&((c||0==(2&d))&&(a>0?E>=e:E>e)&&(s&&(h=[].concat(h),s=!1),(E+=a)<0&&(h[p]=3)),(c||0==(2&y))&&I>=e&&(s&&(h=[].concat(h),s=!1),(I+=a)<E&&(h[p]=3))),s||(h[p+4]=n(_,E,b),h[p+7]=n(D,I,b)),p+=6}if(s)return t;var T={code:h,broken:t.broken,source:t.source,triggers:null,exec:null};return T=this._parser(f(T,u),u),this._generate(T.source,u,T)},t}();var St=function(){function t(t,r,n){this._data=[],this._id=t,this._store=r,this._meta={},this._parseContext=e(e({},n),{z:t})}return t.prototype.getMeta=function(){return this._meta},t.prototype.setMeta=function(t){this._meta=e(e({},this._meta),t)},t.prototype.getID=function(){return this._id},t.prototype.cellID=function(t,r){return n(t,r,this._id)},t.prototype.getSize=function(){var t=this._data.length,r=0;return this._data.forEach((function(t){t&&t.length>r&&(r=t.length)})),[t,r]},t.prototype.getContext=function(){return this._parseContext},t.prototype.addRow=function(t,r){this._data.splice.apply(this._data,Ot(t,r)),this._store.transpose(n(t,0,this._id),r,0,this._parseContext)},t.prototype.removeRow=function(t,r){this._data.splice(t,r),this._store.transpose(n(t,0,this._id),-r,0,this._parseContext)},t.prototype.addColumn=function(t,r){var e=Ot(t,r);this._data.forEach((function(t){t&&t.splice.apply(t,e)})),this._store.transpose(n(0,t,this._id),0,r,this._parseContext)},t.prototype.removeColumn=function(t,r){this._data.forEach((function(e){e&&e.splice(t,r)})),this._store.transpose(n(0,t,this._id),0,-r,this._parseContext)},t.prototype.setCell=function(t,r,n){var o=this._data[t];o||(o=this._data[t]=[]);var i=o[r];o[r]=i?e(e(e({},i),n),{value:i.value}):n,void 0!==n.value&&this.setValue(t,r,n.value)},t.prototype.setValue=function(t,r,e,o){\"string\"==typeof e&&e.length>1&&\"=\"===e[0]?this._store.setMath(n(t,r,this._id),e.substr(1),this._parseContext):this._store.setValue(n(t,r,this._id),e,o)},t.prototype.getCell=function(t,r,e){var n=this._data[t],o=n?n[r]:null;return o||!e||(n||(n=this._data[t]=[]),(o=n[r])||(o=n[r]={value:\"\"})),o},t.prototype.getValue=function(t,r,e){if(e){var o=this._store.getMath(n(t,r,this._id));if(o)return\"=\"+o.source}var i=this.getCell(t,r,!1);return i?i.value:null},t.prototype.getRange=function(t,r,e,n){for(var o=[],i=t;i<=e;i++)for(var a=r;a<=n;a++)o.push(this.getValue(i,a,!1));return o},t.prototype.getCellRange=function(t,r,e,n){for(var o=[],i=t;i<=e;i++)for(var a=r;a<=n;a++)o.push(this.getCell(i,a));return o},t.prototype.eachCell=function(t){this._data.forEach((function(r,e){r&&r.forEach((function(r,n){r&&t(e,n,r)}))}))},t.prototype.serialize=function(t){var r=this,o=[];return this.eachCell((function(i,a,u){if(u=e({},u),t){var f=r._store.getMath(n(i,a,r.getID()));f&&(u.value=\"=\"+f.source)}o.push([i,a,u])})),o},t.prototype.parse=function(t,r){var o=this;this._store.each((function(t){a(t)===o._id&&o._store.clean(t)})),this._data=[];var i=new Set;t.forEach((function(t){var a=t[0],u=t[1],f=t[2],s=o._data[a];s||(s=o._data[a]=[]);var h=(f=s[u]=e({},f)).value;if(h)if(\"string\"==typeof h&&h.length>1&&\"=\"===h[0]){var c=n(a,u,o._id),p=h.substr(1);o._store.setMath(c,p,o.getContext(),!0),i.add(c)}else if(r){f.value=null;c=n(a,u,o._id);o._store.setValue(c,h,null,!0),o._store.trigger(c,i)}})),this._store.triggerSet(i)},t}();function Ot(t,r){for(var e=[t,0],n=0;n<r;n++)e.push(null);return e}var xt=function(){function t(t,r,e){this._ranges=new Map,this._counter=1,this._rangeOrder=[],this._store=t,this._page=r,this._pageGetter=e}return t.prototype.get=function(t){return this._store.getMath(this._ranges.get(t))},t.prototype.toId=function(t){return this._ranges.get(t)},t.prototype.add=function(t,r){var e=this._ranges.get(t)||this._next_id();this._store.setMath(e,r,this._page.getContext()),this._ranges.set(t,e),this._refresh(t)},t.prototype.remove=function(t){this._ranges.delete(t),this._counter=1,this._refresh(t)},t.prototype.serialize=function(){var t=this;return Array.from(this._ranges.keys()).map((function(r){return[r,t.get(r).source]}))},t.prototype.parse=function(t){var r=this;t.forEach((function(t){return r.add(t[0],t[1])}))},t.prototype._refresh=function(t){var r=this,e=t.indexOf(\"!\"),n=\"\";-1!==e&&(n=t.substr(0,e),t=t.substr(e+1)),this._store.each((function(e,o){if(function(t,r,e,n){for(var o=0;o<t.length;o+=3)if(6===t[o]){if(\"\"!==e){if(5===t[o-3]&&r.substr(t[o-2],t[o-1])!==e)continue;return!0}if(r.substr(t[o+1],t[o+2])===n)return!0}return!1}(o.code,o.source,n,t)){var i=a(e);r._store.setMath(e,o.source,r._pageGetter(i).getContext())}}))},t.prototype._next_id=function(){for(;this._rangeOrder[this._counter];)this._counter++;return this._rangeOrder[this._counter]=!0,n(this._counter,0,this._page.getID())},t.prototype.renamePage=function(t,r){var e=this;t+=\"!\",r&&(r+=\"!\"),this._ranges.forEach((function(n,o,i){0===o.indexOf(t)&&(r?i.set(o.replace(t,r),n):e._store.clean(n),i.delete(o))}))},t}();var Rt=function(){function t(){var t=this;this._pages=[],this._pageNames=[],this._pageName2ID=new Map,this._pCounter=0,this._parseContext={page:function(r){return t._pageName2ID.get(r)},pageName:function(r){return t._pageNames[r]},pageObj:function(r){return t._pages[r]},name:function(r,e,n){var o,i=r.length,a=e.substr(r[i-2],r[i-1]);if(5===r[i-6]){var u=e.substr(r[i-5],r[i-4]);o=t._ranges.toId(u+\"!\"+a)||t._ranges.toId(a)}else o=t._ranges.toId(n.pageName(n.z)+\"!\"+a)||t._ranges.toId(a);r.push(9,o||-1,0)},z:0},this._store=new At({get:function(r){var e=o(r),n=e[0],i=e[1],a=e[2];return t._pages[a].getValue(n,i)},set:function(r,e,n){var i=o(r),a=i[0],u=i[1],f=i[2],s=t._pages[f].getCell(a,u,!0);return null==n&&(n=s.$format||0),s.$format=n,\"string\"==typeof e&&1!=n&&e&&parseFloat(e)==e&&(e=parseFloat(e)),s.value!==e&&(s.value=e,!0)}});var r=this._pages[63]=new St(63,this._store,this._parseContext);this._ranges=new xt(this._store,r,this.getPage.bind(this))}return t.prototype.addPage=function(t){for(;this._pages[this._pCounter];)this._pCounter++;var r=this._pCounter,e=new St(r,this._store,this._parseContext);return this._pageName2ID.set(t,r),this._pages[r]=e,this._pageNames[r]=t,e},t.prototype.renamePage=function(t,r){if(t!==r){var e=this._pageName2ID.get(t);this._pageName2ID.delete(t),this._pageName2ID.set(r,e),this._pageNames[e]=r,this._ranges.renamePage(t,r);var n=this._pages[e].getContext();this._store.regenerate(e,!1,n)}},t.prototype.removePage=function(t){var r=this._pageName2ID.get(t),e=this._pages[r].getContext();this._pageName2ID.delete(t),this._pages[r]=this._pageNames[r]=null,this._pCounter=0,this._ranges.renamePage(t,null),this._store.regenerate(r,!0,e)},t.prototype.getPage=function(t){return\"string\"==typeof t&&(t=this._pageName2ID.get(t)),this._pages[t]},t.prototype.getRanges=function(){return this._ranges},t.prototype.getStore=function(){return this._store},t}();exports.D_COMMON=0,exports.D_STRING=1,exports.DataPage=St,exports.DataStore=Rt,exports.Store=At,exports.T_ARG=7,exports.T_DATA=9,exports.T_ERROR=3,exports.T_METHOD=4,exports.T_NAME=6,exports.T_NUMBER=11,exports.T_OPERATOR=10,exports.T_PAGE=5,exports.T_PLACEHOLDER=2,exports.T_RANGE=8,exports.T_SPACE=12,exports.T_TEXT=1,exports.addMethod=function(t,r){Dt[t]=r},exports.column=function(t){return t>>6&4095},exports.fromId=o,exports.methodGroups=wt,exports.methods=Dt,exports.page=a,exports.row=i,exports.str2id=function(t){var r=[];return y(r,t,0),r[1]},exports.str2pos=function(t){var r=[];return y(r,t,0),o(r[1]).slice(0,2)},exports.str2range=function(t){var r=[];t.split(\":\").map((function(t){return y(r,t,0)}));var e=o(r[1]),n=e[0],i=e[1],a=o(r[4]);return[n,i,a[0],a[1]]},exports.toId=n;\n//# sourceMappingURL=muon.js.map\n","import {addMethod} from \"@xbs/muon\";\n\nexport function init(view){\n\tconst math = {\n\t\tIMAGE: url => `<img class=\"webix_ssheet_cimage\" src=\"${webix.template.escape(url)}\">`,\n\t\tHYPERLINK: (url, text) => `<a target=\"blank\" href=\"${webix.template.escape(url)}\">${webix.template.escape(text || url)}</a>`,\n\t\tSPARKLINE: (arr, type, color1, color2) => {\n\t\t\tconst config = { type, color: color1, negativeColor:color2  };\n\t\t\tconst width = type == \"pie\"? 60: 150;\n\n\t\t\tfor(let i = 0 ; i < arr.length; i++)\n\t\t\t\tarr[i] = arr[i]||0;\n\n\t\t\treturn webix.Sparklines.getTemplate(config)(arr, { width, height: 35 });\n\t\t}\n\t};\n\n\tconst keys = Object.keys(math);\n\tkeys.forEach((key, i) => addMath(view, key, math[key], i == keys.length - 1));\n}\n\nexport function addMath(view, name, handler, sort){\n\tname = name.toUpperCase();\n\taddMethod(name, handler);\n\tif(view.$$(\"liveEditor\")){\n\t\tconst sid = view.$$(\"liveEditor\").config.suggest;\n\t\tconst list = webix.$$(sid).getList();\n\t\tif(!list.exists(name)){\n\t\t\tlist.add({id:name, value:name});\n\t\t\tif(sort)\n\t\t\t\tlist.sort(\"value\", \"asc\", \"string\");\n\t\t}\n\t}\n}\n\nexport function getJsDateFromExcel(excelDate) {\n\tconst date = new Date(Math.round((excelDate - 25569) * 86400 * 1000));\n\treturn new Date(date.getTime() + date.getTimezoneOffset() * 60000);\n}\n\nexport function getExcelDateFromJs(jsDate) {\n\tconst returnDateTime = 25569 + ((jsDate.getTime() - (jsDate.getTimezoneOffset() * 60000)) / (86400 * 1000));\n\treturn returnDateTime.toString();\n}","import {getJsDateFromExcel, getExcelDateFromJs} from \"../mathematics/methods\";\n\nfunction getJsDate(value){\n\tif ((value || value === 0) && !(value instanceof Date) && !isNaN(value)){\n\t\tvalue = getJsDateFromExcel(value);\n\t}\n\treturn value;\n}\n\nfunction getExcelDate(value){\n\tif (value && value instanceof Date){\n\t\tvalue = getExcelDateFromJs(value);\n\t}\n\treturn value;\n}\n\nwebix.protoUI({\n\t$cssName: \"datepicker\",\n\tname: \"ssheet-datepicker\",\n\tgetValue:function(){\n\t\tconst value = webix.ui.datepicker.prototype.getValue.apply(this);\n\t\treturn getExcelDate(value) || \"\";\n\t},\n\t$prepareValue:function(value){\n\t\tvalue = getJsDate(value);\n\t\treturn webix.ui.datepicker.prototype.$prepareValue.apply(this, [value]);\n\t}\n}, webix.ui.datepicker);\n\nwebix.protoUI({\n\t$cssName: \"daterangepicker\",\n\tname: \"ssheet-daterangepicker\",\n\tgetValue:function(){\n\t\tlet value = webix.ui.datepicker.prototype.getValue.apply(this);\n\t\tif (value){\n\t\t\tvalue = webix.copy(value);\n\t\t\tvalue.start = getExcelDate(value.start);\n\t\t\tvalue.end = getExcelDate(value.end);\n\t\t}\n\t\treturn value || \"\";\n\t},\n\t$prepareValue:function(value){\n\t\tif (!value){\n\t\t\tvalue = { start:null, end:null };\n\t\t}\n\t\telse if (!value.start && !value.end)\n\t\t\tvalue = { start:value };\n\n\t\tvalue.start = getJsDate(value.start);\n\t\tvalue.end = getJsDate(value.end);\n\n\t\treturn webix.ui.daterangepicker.prototype.$prepareValue.apply(this, [value]);\n\t}\n}, webix.ui.daterangepicker);","webix.protoUI({\n\t$cssName: \"window\",\n\tname: \"ssheet-dialog\",\n\t$init: function(config){\n\t\tthis.$view.className += \" webix_ssheet_dialog\";\n\t\tthis.config.buttons = config.buttons;\n\t\tthis.config.close = true;\n\t},\n\tgetBodyConfig: function(content){\n\t\tcontent.borderless = true;\n\t\tvar elements = this.getFormElements(content);\n\t\tvar config = {\n\t\t\tview: \"form\",\n\t\t\tcss: \"webix_ssheet_form\",\n\t\t\tpadding: webix.skin.$active.layoutPadding.form,\n\t\t\telements: elements\n\t\t};\n\t\treturn config;\n\t},\n\tgetFormElements: function(content){\n\t\tvar elements;\n\t\tif(webix.isArray(content))\n\t\t\telements= content;\n\t\telse{\n\t\t\telements = [];\n\t\t\telements.push(content);\n\t\t}\n\t\tif(this.config.buttons){\n\t\t\telements.push({height:1});\n\t\t\telements.push( {\n\t\t\t\tmargin: 10,\n\t\t\t\tcols:[\n\t\t\t\t\t{},\n\t\t\t\t\t{view: \"button\", css: \"ssheet_cancel_button\", label: webix.i18n.spreadsheet.labels.cancel, autowidth:true, click: function(){\n\t\t\t\t\t\tvar parentView = this.getTopParentView();\n\t\t\t\t\t\tparentView.callEvent(\"onCancelClick\",[]);\n\t\t\t\t\t}},\n\t\t\t\t\t{view: \"button\", label: webix.i18n.spreadsheet.labels.save, hotkey: \"enter\", autowidth:true, click: function(){\n\t\t\t\t\t\tvar parentView = this.getTopParentView();\n\t\t\t\t\t\tparentView.callEvent(\"onSaveClick\",[]);\n\t\t\t\t\t}}\n\t\t\t\t]\n\t\t\t});\n\t\t}\n\t\treturn elements;\n\t},\n\tbody_setter: function(value){\n\t\tif(typeof value == \"object\"){\n\t\t\tif(webix.isUndefined(value.padding))\n\t\t\t\tvalue.padding = webix.skin.$active.layoutPadding.form;\n\t\t\tif(value.view == \"form\" && value.elements){\n\t\t\t\tvalue.elements = this.getFormElements(value.elements);\n\t\t\t\tif(!value.css)\n\t\t\t\t\tvalue.css = \"webix_ssheet_form\";\n\t\t\t}\n\t\t\telse\n\t\t\t\tvalue = this.getBodyConfig(value);\n\t\t}\n\n\t\treturn webix.ui.window.prototype.body_setter.call(this,value);\n\t},\n\tdefaults:{\n\t\tmove:true,\n\t\thead: \"Dialog\",\n\t\tbuttons: true,\n\t\tclose:true,\n\t\t//we need to retain focus in table area, so disabling the autofocusing feature\n\t\tautofocus:false,\n\t\twidth: 350\n\t}\n}, webix.ui.window, webix.IdSpace);\n\n\n\nwebix.protoUI({\n\t$cssName: \"datatable\",\n\tname: \"ssheet-dialog-table\",\n\t$init: function(config){\n\t\tif(!config.headerRowHeight)\n\t\t\tconfig.headerRowHeight = 34;\n\t\tthis.$view.className += \" webix_ssheet_dialog_table\";\n\t}\n},webix.ui.datatable);","webix.protoUI({\n\tname: \"ssheet-form-popup\",\n\tdefaults:{\n\t\tpadding:0,\n\t\tborderless: true\n\t},\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_form\";\n\t}\n}, webix.ui.suggest);\n\nwebix.protoUI({\n\tname: \"ssheet-form-suggest\",\n\tdefaults:{\n\t\tpadding:0,\n\t\tborderless: true\n\t},\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_suggest\";\n\t}\n}, webix.ui.suggest);\n\nwebix.protoUI({\n\t$cssName: \"colorpicker\",\n\tname: \"ssheet-colorpicker\",\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_colorpicker\";\n\t},\n\tdefaults:{\n\t\tsuggest:{\n\t\t\tborderless: true,\n\t\t\tbody:{\n\t\t\t\tview: \"ssheet-colorboard\",\n\t\t\t}\n\t\t}\n\t}\n}, webix.ui.colorpicker);","webix.protoUI({\n\tname:\"formlate\",\n\tsetValue:function(a){ return this.setHTML(a); },\n\tgetValue:function(){ return \"\"; }\n}, webix.ui.template);","webix.protoUI({\n\tname:\"ssheet-icons\",\n\t$cssName: \"dataview\",\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_dataview\";\n\t},\n\tdefaults:{\n\t\tborderless: true,\n\t\ttemplate: \"<span class='webix_ssheet_button_icon #css#' ></span>\",\n\t\ttype:{\n\t\t\twidth: 36,\n\t\t\theight: 36\n\t\t}\n\t}\n},webix.ui.dataview);","webix.protoUI({\n\tname: \"ssheet-suggest\",\n\tdefaults:{\n\t\tpadding:0,\n\t\tcss: \"webix_ssheet_suggest\"\n\t}\n},webix.ui.contextmenu);","const group = {\n\tvalue: null,\n\tset: function(method, master){\n\t\tif(!this.value){\n\t\t\tthis.start();\n\t\t\tmethod.call(master);\n\t\t\tthis.end();\n\t\t}\n\t\telse\n\t\t\tmethod.call(master);\n\t},\n\tstart(){\n\t\tthis.value = webix.uid();\n\t},\n\tend(){\n\t\tthis.value = null;\n\t}\n};\n\nexport default group;","export function init(view){\n\tconst events = [\n\t\t{name:\"onSheetAdd\", type:\"insert\"},\n\t\t{name:\"onSheetRemove\", type:\"remove\"},\n\t\t{name:\"onSheetRename\", type:\"rename\"},\n\t\t{name:\"onCellChange\"},\n\t\t{name:\"onStyleChange\"},\n\t\t{name:\"onAction\"},\n\t\t{name:\"onRowOperation\"},\n\t\t{name:\"onColumnOperation\"},\n\t\t{name:\"onAfterConditionSet\"},\n\t\t{name:\"onAfterRangeSet\"},\n\t\t{name:\"onAfterSpan\"},\n\t\t{name:\"onAfterSplit\"},\n\t\t{name:\"onAfterFilter\", view: \"cells\"},\n\t\t{name:\"onRowResize\", view: \"cells\"},\n\t\t{name:\"onColumnResize\", view: \"cells\"}\n\t];\n\n\tlet thread;\n\tfor (let i = 0; i < events.length; i++){\n\t\tconst handler = events[i];\n\t\t(handler.view ? view.$$(handler.view) : view).attachEvent(handler.name, function(name, newName){\n\t\t\tif (view._loading_data) return;\n\n\t\t\tlet params;\n\t\t\tif(handler.type)\n\t\t\t\tparams = handler.type == \"rename\" ? [handler.type, newName, name] : [handler.type, name];\n\t\t\telse\n\t\t\t\tparams = [\"update\", view.getActiveSheet()];\n\n\t\t\tclearTimeout(thread);\n\t\t\tthread = webix.delay(() => view.callEvent(\"onChange\", params));\n\t\t});\n\t}\n\n\tview.attachEvent(\"onChange\", function(){\n\t\tsave(view, \"all\");\n\t});\n}\n\nexport function save(view, name, data){\n\tvar save = view.config.save;\n\tvar url;\n\tif (!save) return;\n\n\tif(name == \"all\"){\n\t\tif(!save.all)\n\t\t\treturn;\n\t\tdata = { data: view.serialize({ sheets: true }) };\n\t\turl = save.all;\n\t}\n\telse{\n\t\turl = typeof save === \"string\" ? save + \"/\" + name : save[name];\n\t}\n\n\turl = webix.proxy.$parse(url);\n\n\tif(url){\n\t\tif (typeof url === \"function\")\n\t\t\treturn url(name, data);\n\n\t\tif (url.$proxy && url.save)\n\t\t\treturn url.save(view, data, null, null);\n\n\t\tvar ajax = webix.ajax();\n\t\tif (name === \"all\")\n\t\t\tajax.headers({ \"Content-type\" : \"application/json\" });\n\t\tajax.post(url, data);\n\t}\n}","export const decode = {};\nexport const encode = {};\n\nconst alpha = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n\nfunction indexToHeader(index){\n\tconst chars = alpha.length;\n\tconst quotient = Math.floor(--index / chars);\n\tif (quotient > 0)\n\t\treturn indexToHeader(quotient) + alpha[index % chars];\n\n\treturn alpha[index % chars];\n}\n\nexport function updateMaxColumn(maxColumn){\n\tconst lastColumn = Object.keys(encode).length;\n\n\tfor(let i = lastColumn + 1; i <= maxColumn; i++){\n\t\tlet str = indexToHeader(i);\n\n\t\tdecode[str] = i;\n\t\tencode[i] = str;\n\t}\n}\n\nexport function adress(text){\n\tconst size = (text.charCodeAt(1) < 59) ? 1 : 2;\n\tconst col = text.substr(0, size);\n\tconst row = text.substr(size);\n\n\treturn [row*1, decode[col]];\n}\n\nexport function range(text, view, page){\n\tconst nind = text.indexOf(\"!\");\n\tlet sheet = page || \"\";\n\n\t//parse sheet names\n\tif (nind !== -1){\n\t\tsheet = text.substr(0, nind);\n\t\tif (sheet[0] === \"'\")\n\t\t\tsheet = sheet.substr(1, sheet.length-2);\n\t\ttext = text.substr(nind+1);\n\t}\n\n\tlet parts = text.split(\":\");\n\tif (parts.length != 2){\n\t\tif(view){\n\t\t\tlet code = view.ranges.getCode(text, sheet);\n\t\t\tif(!code){\n\t\t\t\t// global named range\n\t\t\t\tcode = view.ranges.getCode(text, true);\n\t\t\t\tif(!code)\n\t\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst rangeParts = code.split(\"!\");\n\t\t\tif(rangeParts[0] != page || view.getActiveSheet())\n\t\t\t\tsheet = rangeParts[0].replace(/'/g,\"\");\n\t\t\tcode = rangeParts[1];\n\t\t\tparts = code.split(\":\");\n\t\t}\n\t\telse\n\t\t\treturn null;\n\t} \n\n\tconst d1 = adress(parts[0]);\n\tconst d2 = adress(parts[1]);\n\n\tif(d1[0] && d1[1] && d2[0] && d2[1])\n\t\treturn [d1[0], d1[1], d2[0], d2[1], sheet];\n}\n\n\nfunction escapeSheet(sheet){\n\treturn sheet.indexOf(\" \") == -1 ? sheet : `'${sheet}'`;\n}\n\nexport function toRange(x,y,x2,y2,sheet){\n\treturn (sheet?(escapeSheet(sheet)+\"!\"):\"\")+encode[y]+x+\":\"+encode[y2]+x2;\n}\nexport function toSheetRange(x,y,sheet){\n\treturn (sheet?(escapeSheet(sheet)+\"!\"):\"\")+x+\":\"+y;\n}\n\nexport function rangeObj(text, view){\n\tif (typeof text === \"object\") return text;\n\tconst a = range(text, view);\n\treturn { start:{ row:a[0], column:a[1]}, end:{ row:a[2], column:a[3] }, sheet: a[4] };\n}\n\nexport function eachRange(text, view, callback, data){\n\tconst range = rangeObj(text);\n\tfor (let row = range.start.row; row <= range.end.row; row++) {\n\t\tfor (let column = range.start.column; column <=  range.end.column; column++) {\n\t\t\tcallback(view, {row: row, column: column}, data);\n\t\t}\n\t}\n}\n\nconst cellTest = /[A-Z]+[0-9]+/;\nexport function isRange(text){\n\tif(typeof text == \"string\"){\n\t\tconst cells = text.split(\":\");\n\t\tif(cells.length == 2){\n\t\t\tfor(let i = 0; i < cells.length; i++){\n\t\t\t\tconst parts = cells[i].split(\"!\");\n\t\t\t\tif(!cellTest.test(parts.pop()))\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t}\n}\n\nexport function changeRange(text,name,inc,start){\n\tlet updated = false;\n\n\tif(isRange(text)){\n\t\tlet [r1,c1,r2,c2,sheet] = range(text);\n\n\t\t//ranges like B2:A1\n\t\tif(r1 > r2)\n\t\t\t[r1, r2] = [r2, r1];\n\t\tif(c1 > c2)\n\t\t\t[c1, c2] = [c2, c1];\n\n\t\tif (name === \"row\" && start.row <= r2){\n\t\t\tif((inc < 0 && start.row < r1) || (inc > 0 && start.row <= r1))\n\t\t\t\tr1 += inc;\n\t\t\tr2 += inc;\n\n\t\t\tif(r2<r1)\n\t\t\t\treturn \"\";\n\n\t\t\tupdated = true;\n\t\t}\n\t\telse if (name === \"column\" && start.column <= c2){\n\t\t\tif((inc < 0 && start.column < c1) || (inc > 0 && start.column <= c1))\n\t\t\t\tc1 += inc;\n\t\t\tc2 += inc;\n\n\t\t\tif(c2<c1)\n\t\t\t\treturn \"\";\n\n\t\t\tupdated = true;\n\t\t}\n\t\tif(updated)\n\t\t\ttext = toRange(r1,c1,r2,c2,sheet);\n\t}\n\n\treturn text;\n}","export const toolbarSizes = {\n\twidth:38,\n\tmargin: 7,\n\tpaddingY: 1,\n\tsectorPadding: 5,\n\tsectorMargin: 0\n};\n\n// default styles for toolbar elements\nexport const defaultStyles = {\n\t\"color\"         : \"#666666\",\n\t\"background\"    : \"#ffffff\",\n\t\"font-family\"   : \"'PT Sans', Tahoma\",\n\t\"font-size\" : \"15px\",\n\t\"text-align\": \"left\",\n\t\"vertical-align\": \"middle\",\n\t\"white-space\": \"nowrap\",\n};\n\nexport function setSkinDefaults(){\n\tconst skin = webix.skin.$name;\n\tconst material = skin == \"material\" || skin == \"mini\";\n\ttoolbarSizes.width = webix.skin.$active.inputHeight+2;\n\ttoolbarSizes.titleHeight = webix.skin.$name == \"mini\" ? 18 : 20;\n\n\tdefaultStyles[\"font-family\"] = material ? \"'Roboto', sans-serif\" : \"'PT Sans', Tahoma\";\n\n\tif(skin == \"contrast\"){\n\t\tdefaultStyles.background = \"#393939\";\n\t\tdefaultStyles.color = \"#ffffff\";\n\t}\n}","import group from \"./undo_group\";\nimport {save} from \"./save\";\nimport {eachRange} from \"../helpers/column_names\";\nimport {defaultStyles} from \"../toolbar/defaults\";\n\n//do not change order, it will break server side compatibility\n//add new options to the end of this list\nexport const style_names = [\n\t\"color\",\"background\",\"text-align\",\n\t\"font-family\",\"font-size\",\n\t\"font-style\",\"text-decoration\",\"font-weight\",\n\t\"vertical-align\", \"wrap\", \"borders\", \"format\",\n\t\"border-right\", \"border-bottom\",\"border-left\", \"border-top\"\n];\n\nconst _style_map = {\n\t\"text-align\": {\n\t\tleft: () => \"justify-content:flex-start;\",\n\t\tcenter: () => \"justify-content:center;\",\n\t\tright: () => \"justify-content:flex-end;\"\t\t\n\t},\n\t\"vertical-align\": {\n\t\ttop: () => \"align-items:flex-start;\",\n\t\tmiddle: () => \"align-items:center;\",\n\t\tbottom: () => \"align-items:flex-end;\"\n\t},\n\twrap: {\n\t\twrap: ()=> {\n\t\t\treturn \"white-space: normal !important;\";\n\t\t}\n\t},\n\t\"border-left\": obj => {\n\t\treturn getBorderCss(\"border-left\", obj);\n\t},\n\t\"border-top\": obj => {\n\t\treturn getBorderCss(\"border-top\", obj);\n\t},\n\t\"border-right\": obj => {\n\t\treturn getBorderCss(\"border-right\", obj);\n\t},\n\t\"border-bottom\": obj => {\n\t\treturn getBorderCss(\"border-bottom\", obj);\n\t},\n\t\"font-weight\": obj => {\n\t\t//Roboto bold - font-weight:500 (looks better, than 700). Roboto is default font for material skins.\n\t\tif(obj[\"font-weight\"] == \"bold\"){\n\t\t\tconst family = obj[\"font-family\"] || defaultStyles[\"font-family\"];\n\t\t\treturn \"font-weight:\" + (family == \"'Roboto', sans-serif\" ? 500 : 700) + \";\";\n\t\t}\n\t\treturn \"\";\n\t}\n};\n\nfunction getBorderCss(pos, obj){\n\tlet border = obj[pos];\n\tif(border){\n\t\tlet [color, type] = border.split(\",\");\n\n\t\ttype = type || \"thin\";\n\t\tlet size = \"1px\";\n\t\tif(type == \"medium\")\n\t\t\tsize = \"2px\";\n\t\telse if(type == \"thick\" || type == \"double\")\n\t\t\tsize = \"3px\";\n\n\t\tif([\"thin\", \"medium\", \"thick\"].indexOf(type) != -1)\n\t\t\ttype = \"solid\";\n\n\t\treturn `${pos}: ${size} ${type} ${color} !important;`;\n\t}\n\treturn \"\";\n}\n\nconst border_checks = {\n\t\"border-left\":\t\tfunction(cell, area, mode){ return cell.column == area.start.column || mode ==\"no\"; },\n\t\"border-right\":\t\tfunction(cell, area, mode){ return cell.column == area.end.column || mode == \"all\" || mode ==\"no\"; },\n\t\"border-top\":\t\tfunction(cell, area , mode){ return cell.row == area.start.row || mode ==\"no\"; },\n\t\"border-bottom\":\tfunction(cell, area, mode){ return cell.row == area.end.row || mode == \"all\"|| mode ==\"no\"; }\n};\n\nconst _style_handlers = {\n\t\"borders\": function(view, style, value, cell){\n\t\tconst area = view.$$(\"cells\").getSelectArea();\n\t\tvalue = value.split(\",\");\n\t\tconst type = value[0];\n\t\tlet color = value[1];\n\t\tlet lineStyle = value[2];\n\n\t\tvar modes = [\"border-left\", \"border-right\", \"border-bottom\", \"border-top\"];\n\n\t\tif(type == \"top-bottom\"){\n\t\t\tmodes = [\"border-top\",\"border-bottom\"];\n\t\t}\n\t\telse if (type != \"no\" && type != \"all\" && type != \"outer\")\n\t\t\tmodes = [\"border-\"+type];\n\n\t\tfor (var i = 0; i < modes.length; i++){\n\t\t\tvar mode = modes[i];\n\t\t\tlet result = view.callEvent(\"onAction\", [\"check-borders\", {row:cell.row, column:cell.column, area, type, mode}]);\n\t\t\tif (result === true || border_checks[mode](cell, area, type)){\n\t\t\t\tconst border = type == \"no\" ? \"\" : `${color},${lineStyle}`;\n\t\t\t\tstyle = _updateStyle(view, style, mode, border, cell);\n\t\t\t}\n\t\t}\n\t\treturn style;\n\t}\n};\n\nvar sizeEl;\nexport function init(view){\n\tview.attachEvent(\"onStyleSet\", (name, value) => _applyStyles(view, name, value));\n\tview.attachEvent(\"onDataParse\", (data) => _parse(view, data));\n\tview.attachEvent(\"onDataSerialize\", (data) => _serialize(view, data));\n\tview.attachEvent(\"onReset\", () => reset(view));\n\tview.attachEvent(\"onUndo\", (type, row, column, style) => {\n\t\tif(type == \"style\")\n\t\t\t_undoStyle(view, row, column, style);\n\t});\n\n\treset(view);\n\n\tif (!sizeEl)\n\t\tsizeEl = webix.html.create(\"DIV\", { style:\"visibility:hidden; position:absolute; top:0px; left:0px; height:auto;\"}, \"\");\n}\n\nfunction reset(view){\n\tview._styles = {};\n\tview._styles_cache = {};\n\tview._styles_max = 1;\n\n\tlet prefix = \".wss_\"+view.$index;\n\twebix.html.removeStyle(prefix);\n}\n\nexport function getStyle(view, cell){\n\tconst obj = view._mPage.getCell(cell.row-1, cell.column-1);\n\tconst span = view.$$(\"cells\").getSpan(cell.row, cell.column);\n\n\tif(span){\n\t\tconst spanStyles = span[5].split(\" \");\n\t\tfor (let i = 0; i < spanStyles.length; i++){\n\t\t\tconst spanStyle = view._styles[spanStyles[i]];\n\t\t\tif(spanStyle)\n\t\t\t\treturn spanStyle;\n\t\t}\n\t}\n\n\tif (obj && obj.style)\n\t\treturn view._styles[obj.style];\n\n\treturn null;\n}\n\nexport function getFormat(view, row, column){\n\tvar obj = view._mPage.getCell(row-1, column-1);\n\treturn (obj && obj.format) || \"\";\n}\n\n// undo\nfunction _undoStyle(view, row, column, style){\n\tvar cell = {row: row, column: column};\n\tsetStyle(view, cell, style);\n}\n\nfunction _serialize(view, obj){\n\tvar styles = [];\n\n\tfor (var key in view._styles_cache)\n\t\tstyles.push([view._styles_cache[key].id, key]);\n\n\tobj.styles = styles;\n}\n\nexport function addStyle(view, props, origin){\n\tvar style = {\n\t\tprops:styleFromText(\";;;;;;;;;;;;;;;\")\n\t};\n\n\tif (origin)\n\t\tfor (var key in origin.props)\n\t\t\tstyle.props[key] = origin.props[key];\n\n\tfor (let  key in props)\n\t\tstyle.props[key] = props[key];\n\n\n\tstyle.text = _styleToText(style);\n\tvar cache = view._styles_cache[style.text];\n\tif (cache)\n\t\treturn cache;\n\n\t_addStyle(view, style);\n\n\treturn style;\n}\n\nfunction _parse(view, obj){\n\tif (obj.styles)\n\t\tfor (let i=0; i < obj.styles.length; i++){\n\t\t\tvar styleObj = obj.styles[i];\n\t\t\tvar style = {\n\t\t\t\tid: styleObj[0],\n\t\t\t\ttext:styleObj[1],\n\t\t\t\tprops: styleFromText(styleObj[1])\n\t\t\t};\n\n\t\t\t_addStyle(view, style, true);\n\t\t}\n\n\tfor (let i = 0; i < obj.data.length; i++){\n\t\tvar [row, column, , css] = obj.data[i];\n\n\t\tif (css)\n\t\t\tupdate_style_data(view, row, column, view._styles[css]);\n\t}\n}\n\nfunction _applyStyles(view, name, value){\n\tgroup.set(function(){\n\t\tview.eachSelectedCell(function(cell){\n\t\t\t_applyCellStyles(view, cell, name, value);\n\t\t});\n\t});\n\tview.refresh();\n}\n\nfunction _applyCellStyles(view, cell, name, value){\n\tvar ostyle = getStyle(view, cell);\n\tvar nstyle = _updateStyle(view, ostyle, name, value, cell);\n\n\tif (nstyle && nstyle != ostyle)\n\t\t_setStyle(view, cell, nstyle, ostyle);\n}\n\nfunction _updateStyle(view, style, name, value, cell){\n\n\tif(_style_handlers[name]){\n\t\treturn _style_handlers[name](view, style, value, cell);\n\t}\n\n\tif (style && style.props[name] == value) return style;\n\n\tvar nstyle = { text:\"\", id:0, props: (style?webix.copy(style.props):{}) };\n\tnstyle.props[name] = value;\n\tnstyle.text = _styleToText(nstyle);\n\n\tvar cache = view._styles_cache[nstyle.text];\n\tif (cache)\n\t\treturn cache;\n\n\t_addStyle(view,nstyle);\n\n\treturn nstyle;\n}\n\nfunction update_style_data(view, row, column, style){\n\tconst obj = view._mPage.getCell(row-1, column-1, true);\n\tobj.style = style && style.id;\n\tobj.format = style && style.props.format;\n}\n\nexport function setStyle(view, cell, style){\n\tvar old = getStyle(view, cell);\n\treturn _setStyle(view, cell, style, old);\n}\n\nexport function setRangeStyle(view, range, style) {\n\teachRange(range, view, _setStyle, style);\n}\n\nexport function getTextSize(view, text, css, baseWidth){\n\tsizeEl.innerHTML = text;\n\tsizeEl.style.width = baseWidth ? baseWidth+\"px\" : \"auto\";\n\n\tsizeEl.className = \"webix_table_cell webix_cell \"+css;\n\tview._table.$view.appendChild(sizeEl);\n\n\tconst width = Math.max(0, sizeEl.offsetWidth+1);\n\tconst height = Math.max(0, sizeEl.offsetHeight+1);\n\n\tview._table.$view.removeChild(sizeEl);\n\tsizeEl.innerHTML = \"\";\n\n\treturn { width, height };\n}\n\nfunction _setStyle(view, cell, style, old){\n\tif(view.callEvent(\"onBeforeStyleChange\", [cell.row, cell.column, style, old])){\n\t\tgroup.set(()=>{\n\t\t\tconst format = style && style.props.format || null;\n\t\t\tconst oldFormat = old && old.props.format || null;\n\t\t\tconst formatChanged = format != oldFormat;\n\t\t\tif(!formatChanged || formatChanged && view.callEvent(\"onBeforeFormatChange\", [cell.row, cell.column, format, oldFormat])){\n\t\t\t\tupdate_style_data(view, cell.row, cell.column, style);\n\t\t\t\tview.callEvent(\"onStyleChange\", [cell.row, cell.column, style, old]);\n\n\t\t\t\tif(formatChanged)\n\t\t\t\t\tview.callEvent(\"onFormatChange\", [cell.row, cell.column, format, oldFormat]);\n\n\t\t\t\tview.saveCell(cell.row,cell.column);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction _buildCssString(style) {\n\tlet css = \"\";\n\n\tfor (var key in style){\n\t\tif (style[key]){\n\t\t\tif( _style_map[key]){\n\t\t\t\tif(_style_map[key][style[key]])\n\t\t\t\t\tcss += _style_map[key][style[key]](style);\n\t\t\t\telse if(typeof  _style_map[key] == \"function\")\n\t\t\t\t\tcss += _style_map[key](style);\n\t\t\t}\n\t\t\telse\n\t\t\t\tcss+= key+\":\"+style[key]+\";\";\n\t\t}\n\t}\n\n\treturn css;\n}\n\nfunction _addStyle(view, style, silent){\n\tview._styles_cache[style.text] = style;\n\n\twhile (!style.id || view._styles[style.id])\n\t\tstyle.id = \"wss\"+(view._styles_max++);\n\tview._styles[style.id] = style;\n\n\tconst css = _buildCssString(style.props);\n\tlet prefix = \".wss_\"+view.$index;\n\twebix.html.addStyle(prefix+\" .\"+style.id+\"{\"+css+\"}\", prefix);\n\n\tif (!silent)\n\t\tsave(view, \"styles\", { name:style.id, text: style.text } );\n}\n\nfunction _styleToText(style){\n\tvar id = [];\n\tfor (var i=0; i<style_names.length; i++)\n\t\tid.push(style.props[style_names[i]]);\n\treturn id.join(\";\");\n}\n\nexport function styleFromText(text){\n\tvar parts = text.split(\";\");\n\tvar props = {};\n\tfor (var i=0; i<style_names.length; i++)\n\t\tprops[style_names[i]] = parts[i];\n\treturn props;\n}\n\n\n\nexport function clearRangeStyle(view, range){\n\tgroup.set(function(){\n\t\teachRange(range, view, function(view, cell){\n\t\t\tlet style = getStyle(view,cell);\n\t\t\tif (style)\n\t\t\t\tsetStyle(view, cell, null);\n\t\t});\n\t});\n}\n\nexport function compactStyles(view){\n\tconst serialized = view.serialize();\n\tserialized.styles = removeUnusedStyles(serialized);\n\n\treset(view);\n\t_parse(view, serialized);\n}\n\nexport function removeUnusedStyles(serialized){\n\tconst data = serialized.data;\n\tconst styles = serialized.styles;\n\n\tconst used = {};\n\tfor (let i=0; i<data.length; i++){\n\t\tconst name = data[i][3];\n\t\tif (name)\n\t\t\tused[name] = 1;\n\t}\n\n\tconst newStyles = [];\n\tfor(let i = 0; i<styles.length; i++){\n\t\tconst name = styles[i][0];\n\t\tif (used[name])\n\t\t\tnewStyles.push(styles[i]);\n\t}\n\n\treturn newStyles;\n}","export function find(arr, func){\n\tvar result = findIndex(arr, func);\n\treturn arr[result];\n}\n\nexport function findIndex(arr, func){\n\tvar result = -1;\n\tfor(var i =0; result<0 && i < arr.length; i++){\n\t\tif(func(arr[i]))\n\t\t\tresult = i;\n\t}\n\treturn result;\n}\n\nexport function getDimension(data, spans, rows, cols){\n\tfor(let i=0; i<data.length; i++){\n\t\t// data[i] - [ row, column, value, style]\n\t\tlet line = data[i];\n\t\tif (line[0]>rows) rows=line[0];\n\t\tif (line[1]>cols) cols=line[1];\n\t}\n\n\tif(spans)\n\t\tfor(let i = 0; i < spans.length; i++){\n\t\t\t// spans[i] - [ row, column, colCount, rowCount ]\n\t\t\tconst spanEndRow = spans[i][0] + spans[i][3] - 1;\n\t\t\tconst spanEndCol = spans[i][1] + spans[i][2] - 1;\n\n\t\t\tif(spanEndRow > rows) rows = spanEndRow;\n\t\t\tif(spanEndCol > cols) cols = spanEndCol;\n\t\t}\n\n\treturn [rows*1, cols*1];\n}","import {addStyle, styleFromText} from \"./styles\";\nimport {getJsDateFromExcel} from \"../mathematics/methods\";\nimport group from \"./undo_group\";\nimport * as arr from \"../helpers/array\";\n\nexport function init(view){\n\tview.attachEvent(\"onDataParse\", (data) => load(view, data));\n\tview.attachEvent(\"onDataSerialize\", (data, config) => serialize(view, data, config));\n}\n\nexport let formatHelpers = {};\nexport let currencies = [];\n\nlet formats;\nlet formatsCount;\nlet formatSources;\nlet formatCache;\n\nfunction getCurrencySymbol(format){\n\treturn webix.template(format)(\"\");\n}\n\nexport function setDefaultFormats(){\n\tconst formatsLocale = webix.i18n.spreadsheet.formats;\n\n\tcurrencies = [ webix.i18n.price ];\n\tcurrencies = currencies.concat(webix.copy(formatsLocale.currencies));\n\n\tcurrencies = currencies.map(format => {\n\t\tconst id = getCurrencySymbol(format);\n\t\treturn {\n\t\t\tformat,\n\t\t\tid,\n\t\t\tvalue: id.trim()\n\t\t};\n\t});\n\n\tformats = {};\n\tformatsCount = 0;\n\tformatSources = {};\n\tformatCache = {};\n\tformatHelpers = {\n\t\tprice : {\n\t\t\tgetFormat : function(value, extra){\n\t\t\t\textra.css = \"webix_ssheet_format_price\";\n\t\t\t\treturn webix.i18n.priceFormat(value);\n\t\t\t},\n\t\t\tvalues:webix.extend({\n\t\t\t\tzeros: webix.i18n.priceSettings.decimalSize, \n\t\t\t\tsymbol: webix.i18n.priceFormat(\"\"),\n\t\t\t\tseparator: 1, negative:1, type: \"price\"\n\t\t\t}, getDelimiters(\"price\"))\n\t\t},\n\t\t\"int\" : {\n\t\t\tgetFormat : function(value, extra){\n\t\t\t\textra.css = \"webix_ssheet_format_int\";\n\t\t\t\treturn webix.i18n.numberFormat(value);\n\t\t\t},\n\t\t\tvalues:webix.extend({\n\t\t\t\tzeros: webix.i18n.decimalSize,\n\t\t\t\tseparator: 1, negative:1, type: \"int\",\n\t\t\t}, getDelimiters(\"int\"))\n\t\t},\n\t\tpercent : {\n\t\t\tgetFormat : function(value, extra){\n\t\t\t\textra.css = \"webix_ssheet_format_percent\";\n\t\t\t\treturn Math.round(value*100)+\"%\";\n\t\t\t},\n\t\t\tvalues:webix.extend({\n\t\t\t\tzeros: 0, separator: 0, negative:1, type: \"percent\",\n\t\t\t}, getDelimiters(\"percent\"))\n\t\t},\n\t\tdate : {\n\t\t\tgetFormat : function(value, extra){\n\t\t\t\textra.css = \"webix_ssheet_format_date\";\n\t\t\t\treturn format2code(formatsLocale.dateFormat, getDelimiters(\"date\"))(value);\n\t\t\t},\n\t\t\tvalues: { type:\"date\", date:formatsLocale.dateFormat }\n\t\t},\n\t\tstring : {\n\t\t\tgetFormat : function(value, extra){\n\t\t\t\textra.css = \"webix_ssheet_format_text\";\n\t\t\t\treturn value;\n\t\t\t},\n\t\t\tvalues: { type:\"string\" }\n\t\t}\n\t};\n\n\tfor(let i in formatHelpers){\n\t\tformatSources[i] = serializeFormat(formToValues(i, formatHelpers[i].values));\n\t\tformatCache[formatSources[i]] = i;\n\t}\n}\n\nexport function getDelimiters(type){\n\tif(type == \"price\")\n\t\treturn { groupSign:webix.i18n.priceSettings.groupDelimiter, decimalSign:webix.i18n.priceSettings.decimalDelimiter };\n\telse \n\t\treturn { groupSign:webix.i18n.groupDelimiter, decimalSign:webix.i18n.decimalDelimiter };\n}\n\nfunction serialize(view, data){\n\tconst formats = [];\n\tconst defaultFormats = [\"percent\", \"int\", \"price\", \"date\", \"string\"];\n\n\tfor(let i in formatSources){\n\t\tif(defaultFormats.indexOf(i) == -1) //exclude default formats\n\t\t\tformats.push([i,formatSources[i]]);\n\t}\n\tdata.formats = formats;\n}\n\nfunction load(view,data){\n\tvar i,\n\t\tformats = data.formats;\n\n\tif(formats)\n\t\tfor(i = 0; i < formats.length; i++)\n\t\t\tcreateFormatName(formats[i][1],formats[i][0]);\n}\n\nexport function getFormat(name){\n\treturn formatHelpers[name] ? formatHelpers[name].getFormat : formatHelpers[name];\n}\n\nexport function getFormatSource(name, toexcel){\n\tif(toexcel){\n\t\tlet parsed = parseFormat({values: formatHelpers[name].values, format: formatSources[name]});\n\t\treturn serializeFormat(parsed, true);\n\t}\n\telse\n\t\treturn formatSources[name];\n}\n\nfunction createFormatName(str, values){\n\tif (formatCache[str]) return formatCache[str];\n\n\tlet name = typeof(values) == \"object\" ? \"fmt\"+(formatsCount) : values;\n\tformatsCount++;\n\n\tformats[name] = str;\n\n\tif(typeof(values) == \"string\")\n\t\tvalues = formatToForm(str);\n\n\twebix.extend(\n\t\tvalues,\n\t\tgetDelimiters(\"custom\")\n\t);\n\n\tformatHelpers[name] = {\n\t\tgetFormat:format2code(str, {decimalSign: values.decimalSign, groupSign: values.groupSign}),\n\t\tvalues: values\n\t};\n\n\tformatSources[name] = str;\n\tformatCache[str] = name;\n\n\treturn name;\n}\n\nexport function addFormat(view, row, column, format, type){\n\tif(!type)\n\t\ttype = {format:format, type: \"custom\"};\n\tconst old = view.getStyle(row, column);\n\tconst nev = addStyle(view, { format:createFormatName(format, type) }, old);\n\tview.setStyle(row, column, nev);\n}\n\nexport function removeFormat(view, row, column){\n\tconst old = view.getStyle(row, column);\n\tconst nev = addStyle(view, { format:\"\" }, old);\n\tview.setStyle(row, column, nev);\n}\n\nfunction splitFormat(str){\n\tvar conditional = str.match(/.*\\[[><=].*/g);\n\tvar parts = str.split(\";\");\n\tif (!conditional){\n\t\tif (parts.length > 1){\n\t\t\tparts[0] = (parts.length > 2 ? \"[>0]\" : \"[>=0]\")+parts[0];\n\t\t\tparts[1] = \"[<0]\"+parts[1];\n\t\t\tif (parts[2])\n\t\t\t\tparts[2] = \"[=0]\"+parts[2];\n\t\t}\n\t}\n\treturn parts;\n}\n\nexport function format2code(str, delimiters){\n\tconst errorMessage = webix.i18n.spreadsheet.table[\"format-error\"];\n\tlet parts = splitFormat(str);\n\tlet code = [\"var spaces = \\\"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\\\";\"];\n\tfor (var i=0; i<parts.length; i++){\n\t\tvar separated = separateFmt(parts[i]);\n\t\tcode.push(genCode(separated.condition, separated.color.toLowerCase(), separated.symbol, separated.fmt, i, parts.length > 0, delimiters));\n\t}\n\n\treturn new Function(\"val\",\"extra\", `try{ ${code.join(\"\\n\")} return val; } catch(err) { return \"${errorMessage}\"; }`);\n}\n\nfunction genCode(check, color, symbol, line, ind, isAbs, delimiters){\n\tvar str = \"\";\n\tif (check){\n\t\tif (!ind) str+=\"if\"; else str+=\"else if\";\n\t\tif (check[0] === \"=\") check = \"=\"+check;\n\t\tstr+=\"(val\"+check+\"){\";\n\t\tif (isAbs) str+=\"val = Math.abs(val);\";\n\t}\n\tif (color)\n\t\tstr+=\"extra.css = \\\"webix_ssheet_format_\"+color+\"\\\";\";\n\n\tstr += genFormatCode(line, delimiters, symbol);\n\n\treturn str+(check?\"}\":\"\");\n}\n\nconst dateTypes = {\n\t\"yy\": \"%y\",\n\t\"yyyy\": \"%Y\",\n\t\"m\": \"%n\",\n\t\"mm\": \"%m\",\n\t\"mmm\": \"%M\",\n\t\"mmmm\": \"%F\",\n\t\"mmmmm\":\"%F\", //not supported by webix\n\t\"d\": \"%j\",\n\t\"dd\": \"%d\",\n\t\"ddd\": \"%D\",\n\t\"dddd\": \"%l\"\n};\n\nconst timeTypes = {\n\t\"h\": \"%G\",\n\t\"hh\": \"%H\",\n\t\"m\": \"%i\", //not supported by webix\n\t\"mm\": \"%i\",\n\t\"s\": \"%s\", //not supported by webix\n\t\"ss\": \"%s\",\n\t\"AM/PM\": \"%A\"\n};\n\nconst dateOrder = Object.keys(dateTypes).sort((a, b) => b.length - a.length);\nconst timeOrder = Object.keys(timeTypes).sort((a, b) => b.length - a.length);\n\nfunction excelDateToWebix(text, lastDateType){\n\tconst typesOrder = [\n\t\t{name:\"date\", order:dateOrder, types:dateTypes}, \n\t\t{name:\"time\", order:timeOrder, types:timeTypes}\n\t];\n\n\t// \"m\"/\"mm\" format can be either date (%n/%m) or time (%i), so check last date type\n\tconst basedOnLast = /^m{1,2}(?!m)/.test(text);\n\tif(basedOnLast && lastDateType != \"date\")\n\t\ttypesOrder.reverse();\n\n\tfor(let i = 0; i < typesOrder.length; i++){\n\t\tconst type = typesOrder[i];\n\t\tfor(let j = 0; j < type.order.length; j++)\n\t\t\tif(text.indexOf(type.order[j]) == 0)\n\t\t\t\treturn {\n\t\t\t\t\tformat: type.types[type.order[j]],\n\t\t\t\t\tlength: type.order[j].length,\n\t\t\t\t\ttype: type.name\n\t\t\t\t};\n\t}\n}\n\nfunction genFormatCode(line, delimiters, symbol){\n\tif (!line)\n\t\treturn \"return val;\";\n\n\tlet str = \"return \\\"\\\"\";\n\n\tlet isQuote;\n\tlet fmt = \"\";\n\tlet multiply = 1;\n\tlet comma, numberPlaceholder, textPlaceholder;\n\tlet date = [];\n\tlet lastDateType = \"date\";\n\n\tlet symbolPos;\n\tif(symbol){\n\t\tconst currency = arr.find(currencies, val => val.id == symbol);\n\t\tsymbolPos = \"left\";\n\n\t\tif(currency)\n\t\t\tsymbolPos = arr.findIndex(currency.format.split(\"{obj}\"), val => val) ? \"right\" : \"left\";\n\t}\n\n\tfor (var i=0; i<line.length; i++){\n\t\tvar betweenPlaceholders = placeholder(line[i-1])&&placeholder(line[i+1]);\n\t\tif (line[i] == \"\\\"\"){\n\t\t\tif(webix.isUndefined(isQuote))\n\t\t\t\tisQuote = i;\n\t\t\telse {\n\t\t\t\tstr += `+\"${line.substr(isQuote+1, i-isQuote-1)}\"`;\n\t\t\t\tisQuote = undefined;\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\tif (!webix.isUndefined(isQuote))\n\t\t\tcontinue;\n\t\tif(line[i] == \"%\")\n\t\t\tmultiply = multiply*100;\n\n\t\tif(/[a-zA-Z]/.test(line[i])){\n\t\t\tconst datePart = excelDateToWebix(line.substr(i), lastDateType);\n\t\t\tif(datePart){\n\t\t\t\tif(numberPlaceholder || textPlaceholder)\n\t\t\t\t\treturn \"throw \\\"unexpected number placeholder\\\";\";\n\t\t\t\tdate.push(datePart.format);\n\t\t\t\tstr += \"/*date*/\"; //update this value after date format is ready\n\t\t\t\tlastDateType = datePart.type;\n\t\t\t\ti += datePart.length-1;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\telse\n\t\t\t\tstr += `+\"${line[i]}\"`;\n\t\t}\n\t\telse if (line[i] === delimiters.decimalSign && betweenPlaceholders){\n\t\t\tfmt+= delimiters.decimalSign;\n\t\t}\n\t\telse if(line[i]==\"@\"){\n\t\t\tif(numberPlaceholder || date.length)\n\t\t\t\treturn \"throw \\\"unexpected number placeholder\\\";\";\n\t\t\tif(!textPlaceholder){\n\t\t\t\tstr+=\"+fmt\";\n\t\t\t\ttextPlaceholder = true;\n\t\t\t}\n\t\t\tfmt+=line[i];\t\t\n\t\t}\n\t\telse if (placeholder(line[i])){\n\t\t\tif(textPlaceholder || date.length)\n\t\t\t\treturn \"throw \\\"unexpected text placeholder\\\";\";\n\t\t\tif (!numberPlaceholder) {\n\t\t\t\tif(symbolPos == \"left\")\n\t\t\t\t\tstr += `+\"${symbol}\"`;\n\t\t\t\tstr+=\"+fmt\";\n\t\t\t\tif(symbolPos == \"right\")\n\t\t\t\t\tstr += `+\"${symbol}\"`;\n\t\t\t\tnumberPlaceholder=true;\n\t\t\t}\n\t\t\tfmt+=line[i];\n\t\t}\n\t\telse if (line[i] === delimiters.groupSign && betweenPlaceholders)\n\t\t\tcomma = true;\n\t\telse\n\t\t\tstr += `+\"${line[i]}\"`;\n\t}\n\n\tif(date.length){\n\t\t// 12-hour or 24-hour clock depends on AM/PM in format\n\t\tif(date.indexOf(\"%A\") != -1)\n\t\t\tdate = date.map(datePart => {\n\t\t\t\tswitch(datePart){\n\t\t\t\t\tcase \"%G\": return \"%g\";\n\t\t\t\t\tcase \"%H\": return \"%h\";\n\t\t\t\t\tdefault: return datePart;\n\t\t\t\t}\n\t\t\t});\n\n\t\tfor(let i = 0; i < date.length; i++)\n\t\t\tstr = str.replace(\"/*date*/\", `+dateParts[${i}]`);\n\t}\n\n\treturn `\n\t\t${date.length ? `val = (${getJsDateFromExcel})(val); var dateParts = webix.Date.dateToStr(\"${date.join(\";\")}\")(val).split(\";\");` : \"\"}\n\t\t${fmt ? `${numberFormat(fmt, comma, delimiters, multiply)};` : \"\"}\n\t\t${str};`;\n}\n\nfunction numberFormat(fmt, comma, delimiters, multiply){\n\tvar str = `if(/^@+$/.test(\"${fmt}\") || isNaN(val)){ var fmt = val; }else {`;\n\tvar decimal = delimiters.decimalSign;\n\tvar [left, right] = getParts(fmt, decimal);\n\tright = (right || \"\").split(\"\").reverse().join(\"\");\n\n\t//calculate indexes in mask\n\tvar lzeros = left.indexOf(\"0\"); if (lzeros>=0) lzeros = left.length - lzeros;\n\tvar lfills = left.indexOf(\"?\"); if (lfills>=0) lfills = left.length - lfills;\n\tvar rzeros = right.indexOf(\"0\"); if (rzeros>=0) rzeros = right.length - rzeros;\n\tvar rfills = right.indexOf(\"?\"); if (rfills>=0) rfills = right.length - rfills;\n\tvar rmax = right.length;\n\n\tstr += `\n\tval = val*${multiply};\n\tvar parts = val.toFixed(${rmax}).split(\".\");\n\tvar left = parts[0];\n\tvar lsize = left.length; \n\tvar right = parts[1] || \"\";\n\tif (left.length < ${lzeros}) left = \"0000000000\".substr(0, ${lzeros} - left.length)+left;\n\tif (left.length < ${lfills}) left = spaces.substr(0, 6*(${lfills} - left.length))+left;\n\tif (${comma}) {\n\t\tvar buf = [];\n\t\tvar start = 3;\n\t\twhile (lsize > start) { buf.push(left.substr(left.length-start,3)); start+=3; }\n\t\tvar last = left.substr(0,left.length-start+3);\n\t\tif (last !== \"-\")\n\t\t\tbuf.push(last);\n\t\telse\n\t\t\tbuf.push(\"-\"+buf.pop());\n\n\t\tleft = buf.reverse().join(\"${delimiters.groupSign}\");\n\t}\n\tif (right){\n\t\tvar zpoint = right.length-1;\n\t\twhile (zpoint >= ${rzeros}){\n\t\t\tif (right[zpoint] !== \"0\"){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tzpoint--;\n\t\t}\n\n\t\tif (zpoint <= right.length)\n\t\t\tright = right.substr(0, zpoint+1);\n\n\t\tif (right.length < ${rfills}){\n\t\t\tright += spaces.substr(0, 6*(${rfills} - right.length));\n\t\t}\n\t}\n\tvar fmt = left+(right?\"${decimal}\":\"\")+right;\n\t`;\n\n\treturn str+\"}\\n\";\n}\n\nfunction updateDecimals(fmt, inc, val){\n\tlet parsed = parseFormat(fmt);\n\tfor(let i = 0; i < parsed.length; i++){\n\t\tif(parsed[i].decimals){\n\t\t\tif(inc>0)\n\t\t\t\tparsed[i].right.placeholders += Array(inc+1).join(\"0\");\n\t\t\telse\n\t\t\t\tparsed[i].right.placeholders = parsed[i].right.placeholders.slice(0, inc);\n\t\t}\n\t\telse{\n\t\t\tconst withoutText = !parsed[i].left.text && !parsed[i].right.text;\n\t\t\tconst withoutPlaceholders = !parsed[i].left.placeholders && !parsed[i].right.placeholders;\n\t\t\t//check if cell value have decimals (not cell format)\n\t\t\tif(inc < 0 && withoutText && withoutPlaceholders && webix.rules.isNumber(val) && val.indexOf(\".\") > -1){\n\t\t\t\tparsed[i].left.placeholders = \"0\";\n\t\t\t\tparsed[i].right.placeholders = Array(val.split(\".\")[1].length).join(Array(inc+1).join(\"0\"));\n\t\t\t}\n\t\t\t//ignore text\n\t\t\telse if(inc > 0 && (parsed[i].left.placeholders || withoutText)){\n\t\t\t\tparsed[i].left.placeholders = parsed[i].left.placeholders || \"0\";\n\t\t\t\tparsed[i].right.placeholders = Array(inc+1).join(\"0\");\n\t\t\t\tparsed[i].decimals = true;\n\t\t\t}\n\t\t}\n\t\tparsed[i].decimals = parsed[i].right.placeholders.length > 0;\n\t}\n\n\treturn serializeFormat(parsed);\n}\n\nexport function changeAreaDecimals(view, inc, row, column){\n\tlet cells = getCells(view, row, column);\n\tif(cells.length == 0)\n\t\treturn;\n\n\tconst obj = view._mPage.getCell(cells[0].row-1, cells[0].column-1);\n\tconst oldFormat = obj && obj.format;\n\tconst value = (obj && obj.value) ? obj.value.toString() : \"\";\n\t\n\tif(webix.rules.isNumber(value) || oldFormat){\n\t\tgroup.set(function(){\n\t\t\tfor(let i = 0; i < cells.length; i++)\n\t\t\t\tchangeCellDecimals(view, inc, cells[i]);\n\t\t});\n\t\tview.refresh();\n\n\t\tlet format = getFormatName(view, cells[0].row, cells[0].column) || \"common\";\n\t\tformat = isCustom(format) ? \"custom\" : format;\n\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"format\", value:format}]);\n\t}\n}\n\nexport function changeCellDecimals(view, inc, cell){\n\tlet format;\n\tconst obj = view._mPage.getCell(cell.row-1, cell.column-1);\n\tconst oldFormat = obj && obj.format;\n\tconst value = (obj && obj.value) ? obj.value.toString() : \"\";\n\n\tif(oldFormat){\n\t\tformat = webix.copy({values:formatHelpers[oldFormat].values, format:getFormatSource(oldFormat)});\n\t\tformat.format = updateDecimals(format, inc, value);\n\n\t\tif(format.values && format.values.hasOwnProperty(\"zeros\"))\n\t\t\tformat.values.zeros = Math.max(format.values.zeros+inc, 0);\n\t}\n\t//add format for cell without format\n\telse{\n\t\tconst zeros = webix.rules.isNumber(value) && value.split(\".\")[1] ? Math.max(value.split(\".\")[1].length+inc, 0) : Math.max(inc, 0);\n\n\t\tformat = {values:{negative:1, zeros:zeros, separator:0, type:\"int\"}};\n\t\tformat.format = serializeFormat(formToValues(format.values.type, format.values));\n\t}\n\taddFormat(view, cell.row, cell.column, format.format, format.values);\n}\n\nexport function isCustom(name){\n\treturn name != \"common\" && (name.indexOf(\"fmt\") != -1 || formatHelpers[name].values.type == \"custom\");\n}\n\nexport function formToValues(type, formValues){\n\tif(type == \"string\")\n\t\treturn [{left:{text:\"@\"}}];\n\tif(formValues.date)\n\t\treturn [{left:{text:formValues.date}}];\n\n\tlet values = [{condition:\">=0\", left:{text:\"\"},right:{text:\"\"}}, {condition:\"<0\", left:{text:\"\"}, right:{text:\"\"}}];\n\twebix.extend(values, getDelimiters(type));\n\tvalues[0].right.placeholders = values[1].right.placeholders = formValues.zeros ? Array(formValues.zeros + 1).join(\"0\") : \"\";\n\tvalues[0].separator = values[1].separator = formValues.separator && type != \"percent\";\n\tvalues[0].left.placeholders = values[1].left.placeholders = values[0].separator ? \"#\"+values.groupSign +\"0\" : \"0\";\n\tvalues[0].decimals = values[1].decimals = formValues.zeros ? true : false;\n\tvalues[1].color = formValues.negative != 1 ? \"red\" : \"\";\n\tvalues[1].left.text += formValues.negative < 3 ? \"-\" : \"\";\n\tif(formValues.negative == 4)\n\t\tvalues[1].left.text += \"(\";\n\n\tif(type === \"percent\")\n\t\tvalues[0].right.text = values[1].right.text += \"%\";\n\telse if(type === \"price\"){\n\t\tconst symbolId = formValues.symbol;\n\t\tconst currency = arr.find(currencies, val => val.id == symbolId);\n\t\tconst pos = arr.findIndex(currency.format.split(\"{obj}\"), val => val) ? \"right\" : \"left\";\n\n\t\tvalues[0][pos].symbol = values[1][pos].symbol = symbolId;\n\t}\n\n\tif(formValues.negative == 4)\n\t\tvalues[1].right.text += \")\";\n\n\treturn values;\n}\n\nfunction formatToForm(format){\n\tconst formatsLocale = webix.i18n.spreadsheet.formats;\n\tconst dates = [\n\t\tformatsLocale.dateFormat,\n\t\tformatsLocale.timeFormat,\n\t\tformatsLocale.fullDateFormat,\n\t\tformatsLocale.longDateFormat\n\t];\n\tconst form = {format, type:\"custom\"};\n\n\tif(arr.find(dates, date => date == format)){\n\t\twebix.extend(form, {\n\t\t\ttype:\"date\", date:format\n\t\t}, true);\n\t}\n\telse{\n\t\tlet [first, second] = format.split(\";\");\n\t\tif(first && second){\n\t\t\tif(first.indexOf(\"[>=0]\") == 0 && second.indexOf(\"[<0]\") == 0){\n\t\t\t\tfirst = first.replace(\"[>=0]\", \"\");\n\t\t\t\tsecond = second.replace(\"[<0]\", \"\");\n\n\t\t\t\tlet red;\n\t\t\t\tif(second.indexOf(\"[red]\") == 0){\n\t\t\t\t\tsecond = second.replace(\"[red]\", \"\");\n\t\t\t\t\tred = true;\n\t\t\t\t}\n\n\t\t\t\tif(second[0] == \"-\"){\n\t\t\t\t\tsecond = second.substring(1);\n\t\t\t\t\tform.negative = red ? 2 : 1;\n\t\t\t\t}\n\t\t\t\telse if(red){\n\t\t\t\t\tif(second[0] == \"(\" && second[second.length-1] == \")\"){\n\t\t\t\t\t\tform.negative = 4;\n\t\t\t\t\t\tsecond = second.substring(1, second.length-1);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tform.negative = 3;\n\t\t\t\t}\n\n\t\t\t\tif(form.negative && first == second){\n\t\t\t\t\tlet type = \"int\";\n\t\t\t\t\tlet priceBrackets = first.indexOf(\"[$\") != -1;\n\n\t\t\t\t\tif(first[first.length-1] == \"%\"){\n\t\t\t\t\t\tfirst = first.substring(0, first.length-1);\n\t\t\t\t\t\ttype = \"percent\";\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tfor(let i = 0; i < currencies.length; i++){\n\t\t\t\t\t\t\tconst currency = currencies[i].id;\n\t\t\t\t\t\t\tlet isPrice;\n\n\t\t\t\t\t\t\tif(priceBrackets){\n\t\t\t\t\t\t\t\tif(first.indexOf(`[$${currency}]`) != -1){\n\t\t\t\t\t\t\t\t\tfirst = first.replace(`[$${currency}]`, \"\");\n\t\t\t\t\t\t\t\t\tisPrice = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(first.indexOf(currency) != -1){\n\t\t\t\t\t\t\t\tfirst = first.replace(currency, \"\");\n\t\t\t\t\t\t\t\tisPrice = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif(isPrice){\n\t\t\t\t\t\t\t\ttype = \"price\";\n\t\t\t\t\t\t\t\tform.symbol = currency;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst delimiters = getDelimiters(type);\n\n\t\t\t\t\tif(first.indexOf(\"#\"+delimiters.groupSign) == 0){\n\t\t\t\t\t\tfirst = first.replace(\"#\"+delimiters.groupSign, \"\");\n\t\t\t\t\t\tform.separator = 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst [integer, decimal] = first.split(delimiters.decimalSign);\n\t\t\t\t\tif((!integer || integer == \"0\") && (!decimal || /^[0]+$/.test(decimal))){\n\t\t\t\t\t\tform.type = type;\n\t\t\t\t\t\tform.delimiters = delimiters;\n\t\t\t\t\t\tform.zeros = decimal ? decimal.length : 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn form;\n}\n\nexport function serializeFormat(values, toExcel){\n\tlet fmt = \"\";\n\tfor(let i = 0; i < values.length; i++){\n\t\tif(values[i].condition)\n\t\t\tfmt += \"[\"+values[i].condition+\"]\";\n\t\tif(values[i].color)\n\t\t\tfmt += \"[\"+values[i].color+\"]\";\n\n\t\tif(values[i].left){\n\t\t\tif(values[i].left.text){\n\t\t\t\tlet leftText = values[i].left.text;\n\t\t\t\tfmt += leftText;\n\t\t\t}\n\t\t\tif(values[i].left.symbol)\n\t\t\t\tfmt += \"[$\"+values[i].left.symbol+\"]\";\n\t\t\tif(values[i].left.placeholders){\n\t\t\t\tlet leftPlaceholders = values[i].left.placeholders;\n\t\t\t\tfmt += toExcel ? leftPlaceholders.replace(values.groupSign, \",\") : leftPlaceholders;\n\t\t\t}\n\t\t}\n\n\t\tif(values[i].decimals)\n\t\t\tfmt += toExcel ? \".\" : values.decimalSign;\n\n\t\tif(values[i].right){\n\t\t\tif(values[i].right.placeholders)\n\t\t\t\tfmt += values[i].right.placeholders;\n\t\t\tif(values[i].right.symbol)\n\t\t\t\tfmt += \"[$\"+values[i].right.symbol+\"]\";\n\t\t\tif(values[i].right.text){\n\t\t\t\tlet rightText = values[i].right.text;\n\n\t\t\t\tfmt += rightText;\n\t\t\t}\n\t\t}\n\t\tif(i != values.length - 1)\n\t\t\tfmt += \";\";\n\t}\n\treturn fmt;\n}\n\nfunction parseFormat(fmt){\n\tconst fmtParts = fmt.format.split(\";\");\n\tlet values = [];\n\n\tfor(let i = 0; i < fmtParts.length; i++){\n\t\tlet separated = separateFmt(fmtParts[i]);\n\t\tvalues[i] = {color:separated.color, condition:separated.condition ,left:{}, right:{}};\n\n\t\tconst format = separated.fmt;\n\n\t\tvalues.groupSign = fmt.values.groupSign;\n\t\tvalues.decimalSign = fmt.values.decimalSign;\n\n\t\tif(format.indexOf(values.groupSign) > -1)\n\t\t\tvalues[i].separator = true;\n\n\t\tconst sepFmtParts = getParts(format, values.decimalSign);\n\n\t\tlet left = sepFmtParts[0];\n\t\tlet right = sepFmtParts[1] || \"\";\n\n\t\tif(sepFmtParts[1])\n\t\t\tvalues[i].decimals = true;\n\n\t\tleft = getFmtPartValues(left, \"left\", values.groupSign);\n\t\tright = getFmtPartValues(right, \"right\", values.groupSign);\n\n\t\tvalues[i].left = {\n\t\t\ttext: left.leftText,\n\t\t\tplaceholders: left.placeholders\n\t\t};\n\n\t\tvalues[i].right = {\n\t\t\ttext: left.rightText + right.rightText,\n\t\t\tplaceholders: right.placeholders\n\t\t};\n\n\t\tconst symbol = separated.symbol;\n\t\tif(symbol){\n\t\t\tconst currency = arr.find(currencies, val => val.id == symbol);\n\t\t\tlet pos = \"left\";\n\n\t\t\tif(currency)\n\t\t\t\tpos = arr.findIndex(currency.format.split(\"{obj}\"), val => val) ? \"right\" : \"left\";\n\n\t\t\tvalues[i][pos].symbol = symbol;\n\t\t}\n\t}\n\treturn values;\n}\n\nfunction getFmtPartValues(fmtPart, type, groupSign){\n\tlet firstPlaceholder;\n\tif(type == \"left\"){\n\t\tfirstPlaceholder = fmtPart.match(/[#?0]/);\n\t\tfirstPlaceholder = firstPlaceholder ? firstPlaceholder.index : Infinity;\n\t}\n\n\tlet leftText = \"\";\n\tlet rightText = \"\";\n\tlet placeholders = \"\";\n\tfor(let k = 0; k < fmtPart.length; k++){\n\t\tif(!placeholder(fmtPart[k])){\n\t\t\tif(fmtPart[k] == groupSign && placeholder(fmtPart[k+1]) && placeholder(fmtPart[k-1])){\n\t\t\t\tplaceholders += fmtPart[k];\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(type == \"left\")\n\t\t\t\tif(k < firstPlaceholder){\n\t\t\t\t\tleftText += fmtPart[k];\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\trightText += fmtPart[k];\n\t\t}\n\t\telse\n\t\t\tplaceholders += fmtPart[k];\n\t}\n\treturn {leftText: leftText, rightText: rightText, placeholders: placeholders};\n}\n\nfunction separateFmt(line){\n\tlet color = \"\";\n\tlet check = \"\";\n\tlet symbol = \"\";\n\n\tlet start = line.indexOf(\"[\");\n\tif (start != -1){\n\t\tif (line[1].match(/[><=]/)){\n\t\t\tlet end = line.indexOf(\"]\");\n\t\t\tcheck = line.substr(start+1, end-start-1);\n\t\t\tline = line.substr(end+1);\n\t\t}\n\t}\n\n\tstart = line.indexOf(\"[$\");\n\tif(start != -1){\n\t\tlet end = start + line.substr(start).indexOf(\"]\");\n\t\tsymbol = line.substr(start+2, end-start-2);\n\t\tline = line.substr(0, start)+line.substr(end+1);\n\t}\n\n\tstart = line.indexOf(\"[\");\n\tif (start != -1){\n\t\tlet end = line.indexOf(\"]\");\n\t\tcolor = line.substr(start+1, end-start-1);\n\t\tline = line.substr(end+1);\n\t}\n\treturn {condition:check, color, symbol, fmt:line};\n}\n\nfunction getCells(view, row, column){\n\tif(row && column){\n\t\tif (typeof row === \"object\" && typeof column === \"object\"){\n\t\t\tlet cells = [];\n\t\t\tfor (let r = row.row; r<=column.row; r++)\n\t\t\t\tfor (let c = row.column; c<=column.column; c++)\n\t\t\t\t\tcells.push({row: r, column: c});\n\t\t\treturn cells;\n\t\t}\n\t\telse\n\t\t\treturn [{row: row, column: column}];\n\t}\n\telse\n\t\treturn view.getSelectedId(true);\n}\n\nfunction placeholder(val){\n\treturn val === \"0\" || val === \"#\" || val === \"?\";\n}\n\nfunction getParts(str, decimal){\n\t// it is nessesary to use \"/\" before decimal to escape regex special characters\n\tconst match = str.match(\"[#?0][/\"+decimal+\"][#?0]\");\n\tif(match)\n\t\treturn [str.substring(0, match.index+1), str.substring(match.index+2)];\n\telse\n\t\treturn [str];\n}\n\n//simple check: take into account only first condition\nexport function checkFormat(format, type, checkTime){\n\tformat = format && format.fmt ? format.fmt : getFormatSource(format);\n\tif(!format) return;\n\tconst parts = splitFormat(format);\n\tconst separated = separateFmt(parts[0]).fmt;\n\n\tlet quot;\n\tif(separated)\n\t\tfor(let i = 0; i < separated.length; i++){\n\t\t\tif(separated[i] == \"\\\"\")\n\t\t\t\tquot = !quot;\n\t\t\tif(quot) continue;\n\n\t\t\tif(type == \"date\" && /[a-zA-Z]/.test(separated)){\n\t\t\t\tconst datePart = excelDateToWebix(separated.substr(i), \"date\");\n\t\t\t\tif(datePart){\n\t\t\t\t\tif(checkTime){\n\t\t\t\t\t\tif(datePart.type == \"time\")\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(type == \"string\" && separated[i] == \"@\")\n\t\t\t\treturn true;\n\t\t}\n}\n\nexport function getFormatName(view, row, col){\n\tconst item = view._mPage.getCell(row-1, col-1);\n\treturn (item && item.format) || null;\n}\n\nexport function isDateInvalid(value){\n\treturn value < -99974430.925 || value > 100025569.125;\n}\n\nexport function getDateEditFormat(view, row, col){\n\tconst formatName = getFormatName(view, row, col);\n\tconst locale = webix.i18n.spreadsheet.formats;\n\tconst isTime = checkFormat(formatName, \"date\", true);\n\n\treturn webix.Date.dateToStr( locale[isTime ? \"parseDateTime\" : \"parseDate\"] );\n}\n\nexport function getFormatFromData(data, array){\n\tconst styleName = array[3];\n\tlet fmt;\n\tif(styleName){\n\t\tlet style = arr.find(data.styles, arr => arr[0] == styleName);\n\t\tif(style){\n\t\t\tstyle = style[1];\n\t\t\tconst fmtName = styleFromText(style).format;\n\t\t\tif(fmtName){\n\t\t\t\tif(data.formats)\n\t\t\t\t\tfmt = arr.find(data.formats, arr => arr[0] == fmtName);\n\n\t\t\t\tif(fmt)\n\t\t\t\t\tfmt = fmt[1];\n\t\t\t\telse\n\t\t\t\t\tfmt = getFormatSource(fmtName); //default formats (int, percent, etc.)\n\t\t\t}\n\t\t}\n\t}\n\treturn fmt;\n}","import {getFormatName, getFormatSource} from \"../operations/formats\";\n\nexport function isChar(char) {\n\tconst code = char.charCodeAt(0);\n\treturn code <= 122 ? code >= 65 || code === 35 || code === 36 : code > 191;\n}\n\nexport function getLastCharIndex(str, includeNumbers){\n\tlet lastChar = str.length;\n\tfor(let i = lastChar - 1; i >= 0; i--){\n\t\tif(!isChar(str[i])){\n\t\t\tif(includeNumbers && isNumber(str[i]))\n\t\t\t\tcontinue;\n\t\t\treturn lastChar;\n\t\t}\n\t\telse\n\t\t\tlastChar = i;\n\t}\n}\n\nfunction isNumber(char){\n\tvar code = char.charCodeAt(0);\n\treturn code>=48 && code<=57;\n}\n\nfunction getWord(formula, i, passive){\n\tvar max = formula.length;\n\tvar sheet = passive;\n\tvar quotes = false;\n\n\tfor(var j=i; j<max; j++){\n\t\tvar key =  formula[j];\n\t\tif (key === \"'\"){\n\t\t\tquotes = !quotes;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (!quotes){\n\t\t\tif (key == \"!\"){\n\t\t\t\tif(formula[i] == \"#\") //error\n\t\t\t\t\tcontinue;\n\t\t\t\telse{\n\t\t\t\t\t//multi-sheet math\n\t\t\t\t\tsheet = formula.substr(i, j-i);\n\t\t\t\t\tif (sheet[0] === \"'\")\n\t\t\t\t\t\tsheet = sheet.substr(1, sheet.length-2);\n\t\t\t\t\ti=j+1;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (!isChar(key) && !isNumber(key)){\n\t\t\t\treturn [formula.substr(i, j-i), j, i, sheet];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn [formula.substr(i), j, i, sheet];\n}\n\nvar operand = /^[A-Z$]+[0-9]+$/;\nfunction isPosition(text){\n\treturn operand.test(text);\n}\n\nexport function position(word){\n\tvar row = 0, sum = 0, x = 1, mode = 1, flags = 0;  \n\tvar chars = false;\n\n\tfor (var j =word.length-1; j>=0; j--){\n\t\tvar key = word[j].charCodeAt(0);\n\t\tif (key === 36) {\n\t\t\tflags = flags+mode;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (key < 58){\n\t\t\t//numeric\n\t\t\tsum += (key - 48)*x;\n\t\t\tx *= 10;\n\t\t} else {\n\t\t\tif (!chars){\n\t\t\t\tx = 1; row = sum; sum = 0; chars = true; mode += 1;\n\t\t\t}\n\t\t\t//alpha\n\t\t\tsum += (key - 64)*x;\n\t\t\tx*=26;\n\t\t}\n\t}\n\n\t/*\n\t\t$X$Y => flags = 3\n\t\t$XY  => flags = 2\n\t\tX$Y  => flags = 1\n\t\tXY   => flags = 0\n\t*/\n\treturn [row, sum, flags];\n}\n\nexport function split(formula, view, crosssheet){\n\tconst activeSheet = view.getActiveSheet();\n\tvar lines = [];\n\tvar index = 0;\n\tvar quotes = false, ph = false;\n\tfor (var i = formula[i] === \"=\" ? 1 : 0; i < formula.length; i++){\n\t\tvar key = formula[i];\n\t\tif (key == \"\\\"\"){\n\t\t\tquotes = !quotes;\n\t\t} else if (!quotes){\n\t\t\tif (key == \"{\" && formula[i+1] == \"{\"){\n\t\t\t\tph = true;\n\t\t\t} else if (key == \"}\" && formula[i+1] == \"}\"){\n\t\t\t\tph = false;\n\t\t\t} else if (!ph){\n\t\t\t\tconst escaped = key === \"'\";\n\t\t\t\tif (escaped || isChar(key)){\n\t\t\t\t\tlet [word, end, ,sheet] = getWord(formula, i, \"\");\n\t\t\t\t\tlet next = end - 1;\n\t\t\t\t\tlet value;\n\n\t\t\t\t\tif(formula[next+1] !== \"(\"){\n\t\t\t\t\t\tif(isPosition(word)){\n\t\t\t\t\t\t\tif(!sheet || sheet == activeSheet || crosssheet){\n\t\t\t\t\t\t\t\tvalue = sheet ? [sheet, word, escaped] : word;\n\t\t\t\t\t\t\t\tpushLine(lines, formula, i, index, value);\n\t\t\t\t\t\t\t\tindex = next+1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif(crosssheet){\n\t\t\t\t\t\t\t\tvalue = sheet ? [sheet, word, escaped] : word;\n\t\t\t\t\t\t\t\tpushLine(lines, formula, i, index, value);\n\t\t\t\t\t\t\t\tindex = next+1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tlet range;\n\n\t\t\t\t\t\t\t\tif(sheet)\n\t\t\t\t\t\t\t\t\trange = view.ranges.getCode(word, sheet);\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t//global range\n\t\t\t\t\t\t\t\t\trange = view.ranges.getCode(word, true);\n\n\t\t\t\t\t\t\t\t\t//active sheet range\n\t\t\t\t\t\t\t\t\tif(!range)\n\t\t\t\t\t\t\t\t\t\trange = view.ranges.getCode(word);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif(range){\n\t\t\t\t\t\t\t\t\tconst parts = range.split(\"!\");\n\t\t\t\t\t\t\t\t\tif(parts[0] == activeSheet){\n\t\t\t\t\t\t\t\t\t\tvalue = [sheet, word, escaped, parts[1]];\n\t\t\t\t\t\t\t\t\t\tpushLine(lines, formula, i, index, value);\n\t\t\t\t\t\t\t\t\t\tindex = next+1;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ti = next;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (index!=formula.length)\n\t\tlines.push(formula.substr(index));\n\treturn lines;\n}\n\nfunction pushLine(lines, formula, i, index, value){\n\tif (i!==0)\n\t\tlines.push(formula.substr(index, i-index));\n\tlines.push(value);\n}\n\nexport function getMathFormat(view, value){\n\tlet level = 0;\n\tlet blockLevel;\n\n\tconst parts = split(value, view);\n\n\tfor(let i = 0; i < parts.length; i++){\n\t\t// parts[i] can contain numbers, math operators, formulas, etc.\n\t\tif(i%2 === 0){\n\t\t\t// check formulas and round brackets which are not in quotes\n\t\t\tconst methods = parts[i].match(/(([a-zA-Z]*\\()|\\))(?=(?:[^\"]|\"[^\"]*\")*$)/g);\n\t\t\tif(methods)\n\t\t\t\tmethods.forEach(part => {\n\t\t\t\t\tif(part.indexOf(\"(\") > -1){\n\t\t\t\t\t\tlevel++;\n\t\t\t\t\t\t// some methods block format addition (like count,odd,etc.)\n\t\t\t\t\t\tconst safeMethods = /^(SUM|AVERAGE|MAX|MIN|INT|ROUND|ROUNDDOWN|ROUNDUP|TRUNC)?\\($/gi;\n\t\t\t\t\t\tif(!blockLevel && !safeMethods.test(part))\n\t\t\t\t\t\t\tblockLevel = level;\n\t\t\t\t\t}\n\t\t\t\t\telse if(--level < blockLevel)\n\t\t\t\t\t\tblockLevel = null;\n\t\t\t\t});\n\t\t}\n\t\t// parts[i] can be named range, cell from the active / non-active sheet\n\t\telse if(!blockLevel){\n\t\t\tif(webix.isArray(parts[i])){\n\t\t\t\tif(/^[A-Za-z]+$/.test(parts[i][1]))\n\t\t\t\t\tparts[i] = parts[i][3].split(\":\")[0];\n\t\t\t\telse if(parts[i][0] == view.getActiveSheet())\n\t\t\t\t\tparts[i] = parts[i][1];\n\t\t\t\telse\n\t\t\t\t\tcontinue; // ignore non-active sheets\n\t\t\t}\n\n\t\t\t// if range - check first cell position\n\t\t\tconst cell = position(parts[i]);\n\t\t\tconst name = getFormatName(view, cell[0], cell[1]);\n\n\t\t\t// first cell with number format\n\t\t\tif(name)\n\t\t\t\treturn {fmt: getFormatSource(name)};\n\t\t}\n\t}\n}","import {getFormatName, checkFormat, isDateInvalid, getFormatFromData, getFormatSource} from \"./formats\";\nimport {getExcelDateFromJs} from \"../mathematics/methods\";\nimport {getMathFormat} from \"../mathematics/parser\";\n\nexport function init(view){\n\tview.attachEvent(\"onCellChange\", function(row, col, value, type){\n\t\tif(!this._setType){\n\t\t\tconst formatName = getFormatName(this, row, col);\n\t\t\tconst cell = {\n\t\t\t\trow,\n\t\t\t\tcol,\n\t\t\t\tvalue,\n\t\t\t\tfmt: formatName ? {fmt: getFormatSource(formatName)} : null,\n\t\t\t\ttype\n\t\t\t};\n\t\t\tsetType(this, cell);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onBeforeFormatChange\", function(row, col, formatName){\n\t\tif(!this._setType){\n\t\t\tconst cell = {\n\t\t\t\trow,\n\t\t\t\tcol,\n\t\t\t\tvalue: view.getCellValue(row, col),\n\t\t\t\tfmt: {fmt:getFormatSource(formatName)}\n\t\t\t};\n\t\t\tsetType(this, cell, true);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAction\", function(action, values){\n\t\tif(action == \"dropdown\" && values.newValue && values.newValue.editor == \"excel_date\"){\n\t\t\tconst format = getFormatName(this, values.row, values.column);\n\t\t\tif(getFormatType(format) != \"date\")\n\t\t\t\tthis.setFormat(values.row, values.column, webix.i18n.spreadsheet.formats.dateFormat);\n\t\t}\n\t});\n}\n\nexport function loadCell(view, data, item){\n\tconst fmt = getFormatFromData(data, item);\n\tconst cell = {\n\t\tvalue: item[2],\n\t\tfmt: fmt ? {fmt} : null,\n\t\ttype: item[4]\n\t};\n\tsetType(view, cell);\n\treturn cell;\n}\n\nfunction getExpectType(view, cell, parseDate, isFormula, formatType, style){\n\t//date based math\n\tlet type = \"string\";\n\tif(!webix.isUndefined(cell.value)){\n\t\tif(isFormula){\n\t\t\ttype = \"number\";\n\n\t\t\tif(/^=(now|date|time)\\(/i.test(cell.value))\n\t\t\t\ttype = \"date\";\n\t\t\telse if(/^=(sparkline|image)\\(/i.test(cell.value))\n\t\t\t\ttype = \"string\";\n\t\t}\n\t\telse if(!isNaN(cell.value))\n\t\t\ttype = \"number\";\n\t\telse if(formatType != \"string\" && parseDate){\n\t\t\t//if user types a date string, or it comes from Excel import\n\t\t\t//set date type and convert string to Excel date\n\t\t\tconst parser = webix.Date.strToDate( webix.i18n.spreadsheet.formats.parseDateTime );\n\t\t\tconst value  = parser(cell.value);\n\t\t\tif(value != \"\" && !isNaN(value)){\n\t\t\t\t//change cell style - value changes once (some value -> 35767.5)\n\t\t\t\t//change cell value - value changes twice (some value -> \"12/03/97\" -> 35767.5)\n\t\t\t\t//so ignore undo for cell value change\n\t\t\t\tif(style)\n\t\t\t\t\tdateToExcel(view, cell, value);\n\t\t\t\telse\n\t\t\t\t\tview.ignoreUndo(() => dateToExcel(view, cell, value));\n\n\t\t\t\ttype = \"date\";\n\t\t\t}\n\t\t}\n\t}\n\treturn type;\n}\n\nfunction dateToExcel(view, cell, date){\n\tdate = getExcelDateFromJs(date);\n\tcell.value = date;\n\n\tif(!view._loading_data)\n\t\tview.setCellValue(cell.row, cell.col, date);\n}\n\nfunction checkType(type, expectType, formatType, isFormula, value){\n\ttype = type || expectType;\n\n\t//strings will always have string type regardless of format\n\tif(expectType == \"string\")\n\t\ttype = \"string\";\n\telse if(formatType)\n\t\ttype = formatType;\n\n\tif(type == \"date\" && !isFormula && isDateInvalid(value))\n\t\ttype = \"number\";\n\n\treturn type;\n}\n\nfunction getFormatType(format){\n\tlet formatType = format ? \"number\" : null;\n\tif(checkFormat(format, \"string\"))\n\t\tformatType = \"string\";\n\telse if(checkFormat(format, \"date\"))\n\t\tformatType = \"date\";\n\treturn formatType;\n}\n\nexport function getType(view, row, column){\n\tconst item = view._mPage.getCell(row-1, column-1);\n\treturn (item && item.type) || null;\n}\n\nfunction setType(view, cell, style){\n\tconst parseToStore = !(cell.row && cell.col);\n\n\t//prevent type change during value or format change\n\tview._setType = true;\n\n\tconst isFormula = typeof cell.value == \"string\" && cell.value[0] == \"=\";\n\tconst parseDate = (!style || cell.fmt == getFormatSource(\"date\")) && (!view._loading_data || cell.type == \"date\");\n\n\tlet mathFormat;\n\tif(!parseToStore)\n\t\tmathFormat = isFormula && !cell.fmt ? getMathFormat(view, cell.value) : null;\n\n\tconst formatType = getFormatType(cell.fmt || mathFormat);\n\tconst expectType = getExpectType(view, cell, parseDate, isFormula, formatType, style);\n\n\tcell.type = checkType(cell.type, expectType, formatType, isFormula, cell.value);\n\tcell.$format = formatType == \"string\" ? 1 : 0;\n\n\tif(!parseToStore){\n\t\tconst item = view._mPage.getCell(cell.row-1, cell.col-1, true);\n\t\titem.type = cell.type;\n\t\titem.$format = cell.$format;\n\n\t\tupdateCell(view, cell, expectType, formatType, mathFormat);\n\t}\n\n\tdelete view._setType;\n}\n\nfunction updateCell(view, cell, expectType, formatType, mathFormat){\n\tconst row = cell.row;\n\tconst col = cell.col;\n\tconst isString = typeof cell.value == \"string\";\n\n\tconst isFormula = isString && cell.value[0] == \"=\";\n\tconst cellEditor = view.getCellEditor(row, col);\n\n\t//update cell value if set number format (5e5 -> 500000, 005 -> 5)\n\tif(!view._loading_data && cell.type === \"number\" && isString && !isFormula && cell.value !== \"\")\n\t\tview.setCellValue(row, col, cell.value*1);\n\n\tif(mathFormat)\n\t\tview.setFormat(row, col, mathFormat.fmt);\n\telse if(cell.type == \"date\"){\n\t\t// add default date format\n\t\tif(formatType != \"date\"){\n\t\t\tconst isTime = isFormula && cell.value.toUpperCase().indexOf(\"=TIME(\") == 0;\n\t\t\tconst locale = webix.i18n.spreadsheet.formats;\n\t\t\tconst format = isTime ? locale.timeFormat : locale.dateFormat;\n\t\t\tview.setFormat(row, col, format);\n\t\t}\n\n\t\t//set date editor for cells with date type\n\t\tif(!isFormula && !cellEditor)\n\t\t\tview.setCellEditor(row, col, {editor: \"excel_date\"});\n\t}\n\telse if(formatType != \"string\" && cell.type == \"string\" && expectType != \"string\"){\n\t\t//force text format for numbers typed as strings\n\t\tview.setFormat(row, col, \"@\");\n\t}\n\n\t//remove date editor\n\tif((cell.type != \"date\" || isFormula) && cellEditor && cellEditor.editor == \"excel_date\")\n\t\tview.setCellEditor(row, col, null);\n}\n","import {isChar, getLastCharIndex} from \"../mathematics/parser\";\n\nwebix.protoUI({\n\tname: \"suggest-formula\",\n\tdefaults: {\n\t\tfitMaster: false,\n\t\twidth: 200,\n\t\tfilter(item, value) {\n\t\t\tconst editor = webix.$$(this.config.master);\n\t\t\tconst cursor = editor.getInputNode().selectionStart;\n\t\t\tconst val = editor.getValue();\n\n\t\t\tif(val.charAt(0) !== \"=\") return;\n\n\t\t\tconst str = val.substring(0, cursor);\n\t\t\tconst search = str.substring( getLastCharIndex(str, true) );\n\t\t\tconst nextSymbol = val.charAt(cursor);\n\n\t\t\tif(search && (cursor === val.length || !(isChar(nextSymbol) || /^[0-9]/.test(nextSymbol))))\n\t\t\t\tvalue = search;\n\n\t\t\treturn item.value.toString().toLowerCase().indexOf(value.toLowerCase()) === 0;\n\t\t}\n\t},\n\t$init() {\n\t\tthis.attachEvent(\"onBeforeShow\", (node) => {\n\t\t\tif(node.tagName){\n\t\t\t\tconst editor = webix.$$(this.config.master);\n\t\t\t\tconst text = editor.getValue();\n\n\t\t\t\t//only for formulas\n\t\t\t\tif(!text || text.charAt(0) !== \"=\") return false;\n\n\t\t\t\tconst sizes = webix.html.offset(node);\n\n\t\t\t\tconst selectionStart = editor.getInputNode().selectionStart;\n\t\t\t\tconst textWidth = webix.html.getTextSize(text.substring(0, selectionStart), \"webix_ssheet_formula\").width;\n\n\t\t\t\tconst y = sizes.y + sizes.height;\n\t\t\t\tconst x = sizes.x + textWidth;\n\n\t\t\t\twebix.ui.popup.prototype.show.apply(this, [{x, y}]);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t},\n\tsetMasterValue(data, refresh) {\n\t\tconst text = data.id ? this.getItemText(data.id) : (data.text||data.value);\n\t\twebix.$$(this.config.master).setValueHere(text);\n\n\t\tif (!refresh)\n\t\t\tthis.hide(true);\n\n\t\tthis.callEvent(\"onValueSuggest\", [data, text]);\n\t},\n\t$enterKey: function() {\n\t\tif (this.isVisible())\n\t\t\treturn webix.ui.suggest.prototype.$enterKey.apply(this, arguments);\n\t}\n}, webix.ui.suggest);","webix.protoUI({\n\tname: \"ssheet-button\",\n\t$cssName: \"button\",\n\tdefaults:{\n\t\ttype:\"htmlbutton\",\n\t\twidth: 40\n\t},\n\t$init: function(config){\n\t\tthis.$view.className += \" webix_ssheet_button\"+(config.arrow?\" webix_ssheet_button_menu\":\"\");\n\t\tif(config.label || config.icon){\n\t\t\tlet icon = (config.icon||config.name),\n\t\t\t\ttext = config.label||\"\";\n\t\t\tif(config.arrow)\n\t\t\t\ttext += \"<span class='webix_ssheet_button_icon webix_ssheet_icon_arrow webix_icon wxi-menu-down'></span>\";\n\t\t\tconfig.label = \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\"+icon+\"'></span> \"+text;\n\t\t\tconfig.tooltip = webix.i18n.spreadsheet.tooltips[config.name]||\"\";\n\t\t}\n\t\tif(config.options && !config.popup)\n\t\t\tconfig.popup = getPopupConfig(config.options);\n\t}\n},webix.ui.button);\n\n\nwebix.protoUI({\n\tname: \"ssheet-button-icon-top\",\n\t$cssName: \"button\",\n\tdefaults:{\n\t\ttype:\"htmlbutton\",\n\t\twidth: 70,\n\t\theight: 70\n\t},\n\t$init: function(config){\n\t\tthis.$view.className += \" ssheet_button_icon_top\";\n\t\tif(config.label) {\n\t\t\tlet icon = (config.icon || config.name||\"\"),\n\t\t\t\ttext = config.label;\n\t\t\tconfig.label = \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\" + icon + \"'></span><br/>\";\n\t\t\tconfig.label += \"<span class='ssheet_button_icon_top_text'>\"+text+\"</span>\";\n\t\t\tif (config.arrow)\n\t\t\t\tconfig.label += \"<br/><span class='ssheet_button_icon_top_arrow webix_icon wxi-menu-down'></span>\";\n\t\t\tconfig.tooltip = webix.i18n.spreadsheet.tooltips[config.name]||\"\";\n\t\t}\n\t\tif(config.options && !config.popup)\n\t\t\tconfig.popup = getPopupConfig(config.options);\n\t}\n},webix.ui.button);\n\n\nfunction getPopupConfig(options){\n\treturn {\n\t\tview: \"ssheet-suggest\",\n\t\tcss: \"webix_ssheet_suggest\",\n\t\tautowidth:true,\n\t\ttemplate: function(obj){\n\t\t\tvar text = \"\";\n\t\t\tif(obj.icon)\n\t\t\t\ttext += \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\" + obj.icon + \"'></span> \";\n\t\t\ttext += obj.value || webix.i18n.spreadsheet.menus[obj.id] || obj.id;\n\t\t\treturn text;\n\t\t},\n\t\tdata: options,\n\t\ton:{\n\t\t\tonItemClick: function(id){\n\t\t\t\tvar button = this.config.master;\n\t\t\t\tif(button){\n\t\t\t\t\tlet view = webix.$$(button).getTopParentView();\n\t\t\t\t\tvar params = [this.getItem(id)];\n\t\t\t\t\tif(webix.$$(button).config.area){\n\t\t\t\t\t\tlet area = view.$$(\"cells\").getSelectArea();\n\t\t\t\t\t\tif(area)\n\t\t\t\t\t\t\tparams = params.concat([area.start,area.end]);\n\t\t\t\t\t}\n\t\t\t\t\tview.callEvent(\"onCommand\",params);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}","import \"./suggest_formula\";\nimport {getJsDateFromExcel} from \"../mathematics/methods\";\nimport {getType} from \"../operations/types\";\nimport {getDateEditFormat} from \"../operations/formats\";\nimport {split, position, getLastCharIndex} from \"../mathematics/parser\";\n\nwebix.protoUI({\n\tname: \"live-editor\",\n\t$cssName:\"texthighlight\",\n\t$init(config){\n\t\tconfig.suggest = {\n\t\t\tview: \"suggest-formula\",\n\t\t\tdata: config.suggestData\n\t\t};\n\t\tconfig.highlight = this.highlight;\n\n\t\tthis._highlightedCells = {};\n\t\tthis.$view.className += \" webix_ssheet_formula\";\n\n\t\tthis.attachEvent(\"onKeyPress\", (code, e) => {\n\t\t\tdelete this._update_range;\n\t\t\tif(code == 13) {\n\t\t\t\t//ignore Enter key if it was pressed to select some value from suggest\n\t\t\t\tif ((new Date() - (this._last_value_set || 0)) > 300){\n\t\t\t\t\tconst cell = this.config.activeCell;\n\t\t\t\t\tthis.showActiveSheet(true);\n\t\t\t\t\tthis.updateCellValue(cell);\n\t\t\t\t\t//blur to avoid calling highlight function after selection move\n\t\t\t\t\tthis.getInputNode().blur();\n\t\t\t\t\t//we have 'enter' hot key to activate editor\n\t\t\t\t}\n\t\t\t\twebix.html.preventEvent(e);\n\t\t\t}\n\t\t\t//esc - cancel editing\n\t\t\telse if(code == 27){\n\t\t\t\tthis.showActiveSheet();\n\n\t\t\t\twebix.delay(()=>{\n\t\t\t\t\tconst master = this.getTopParentView();\n\t\t\t\t\tconst cell = master.getSelectedId();\n\t\t\t\t\tconst oldVal = this.getCellValue(cell.row, cell.column);\n\n\t\t\t\t\tif(this.getValue() == oldVal)\n\t\t\t\t\t\tmaster.$$(\"cells\").refresh(cell.row);\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.setValue(oldVal);\n\n\t\t\t\t\tdelete master.$handleSelection;\n\n\t\t\t\t\twebix.UIManager.setFocus(master.$$(\"cells\"));\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tthis.attachEvent(\"onAfterRender\", function(){\n\t\t\twebix.eventRemove(this.keydownEv);\n\n\t\t\tthis.keydownEv = webix.event(this.getInputNode(), \"keydown\", e => {\n\t\t\t\tthis.endEdit(e);\n\t\t\t});\n\t\t});\n\t},\n\thighlight(value){\n\t\tlet html = \"\";\n\t\tconst master = this.getTopParentView();\n\t\tconst escapeText = webix.template.escape;\n\n\t\tfor(let area in this._highlightedCells){\n\t\t\tconst cells = this._highlightedCells[area];\n\t\t\tthis.changeCellCss(cells[0], cells[1], cells[2], true);\n\t\t}\n\t\tthis._highlightedCells = {};\n\n\t\t//value can be null\n\t\tif(value && value[0]==\"=\"){\n\t\t\tconst parts = split(value, master);\n\t\t\tconst sheet = master.getActiveSheet();\n\n\t\t\tlet colorIndex = 1;\n\n\t\t\tfor(let i = 0; i < parts.length; i++){\n\t\t\t\tif(i%2 === 0)\n\t\t\t\t\thtml += escapeText(parts[i]);\n\t\t\t\telse{\n\t\t\t\t\tconst crossheet = webix.isArray(parts[i]);\n\t\t\t\t\tconst cellSheet = crossheet ? this.prepareSheet(parts[i][0], parts[i][2]) : \"\";\n\t\t\t\t\tconst activeMath = this._activeMath;\n\n\t\t\t\t\tconst activeSheet = !crossheet && (!activeMath || activeMath == sheet);\n\t\t\t\t\tlet cell = position(crossheet ? parts[i][1] : parts[i]);\n\t\t\t\t\tconst cellText = crossheet ? cellSheet+parts[i][1] : parts[i];\n\n\t\t\t\t\tconst rangeName = crossheet && !getLastCharIndex(parts[i][1]);\n\n\t\t\t\t\tif(rangeName || activeSheet || (crossheet && parts[i][0] == sheet)){\n\t\t\t\t\t\tlet repeatedColor;\n\t\t\t\t\t\t//range\n\t\t\t\t\t\tif((parts[i+1] == \":\" && parts[i+2]) || rangeName){\n\t\t\t\t\t\t\tlet nextCell, nextCellText;\n\n\t\t\t\t\t\t\tif(rangeName){\n\t\t\t\t\t\t\t\tconst cells = parts[i][3].split(\":\");\n\n\t\t\t\t\t\t\t\tcell = position(cells[0]);\n\t\t\t\t\t\t\t\tnextCell = position(cells[1]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tnextCell = position(webix.isArray(parts[i+2]) ? parts[i+2][1] : parts[i+2]);\n\t\t\t\t\t\t\t\tnextCellText = webix.isArray(parts[i+2]) ? cellSheet+parts[i+2][1] : parts[i+2];\n\t\t\t\t\t\t\t\ti+=2;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\trepeatedColor = this.setColor(cell[0], cell[1], nextCell[0], nextCell[1], colorIndex);\n\t\t\t\t\t\t\thtml += `<span class=\"webix_ssheet_highlight_color_${repeatedColor||colorIndex}\">${rangeName ? cellText : cellText+\":\"+nextCellText}</span>`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//OtherSheet!A1:A3 - do not highlight A3\n\t\t\t\t\t\telse if(parts[i-1] && parts[i-1][ parts[i-1].length-1 ] == \":\"){\n\t\t\t\t\t\t\thtml += cellText;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//cell\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\trepeatedColor = this.setColor(cell[0], cell[1], cell[0], cell[1], colorIndex);\n\t\t\t\t\t\t\thtml += `<span class=\"webix_ssheet_highlight_color_${repeatedColor||colorIndex}\">${cellText}</span>`;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst colors = 7;\n\t\t\t\t\t\tif(!repeatedColor)\n\t\t\t\t\t\t\tcolorIndex += colorIndex == colors ? -1*(colors-1) : 1;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\thtml += cellText;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\thtml = escapeText(value);\n\n\t\tmaster.$$(\"cells\").refresh();\n\n\t\tif(document.activeElement == this.getInputNode())\n\t\t\tthis.paintValue();\n\t\treturn html;\n\t},\n\tshowActiveSheet(enter){\n\t\tconst master = this.getTopParentView();\n\t\tconst grid = master._table;\n\n\t\tif(this._activeMath){\n\t\t\tif(this._activeMath != master.getActiveSheet()){\n\t\t\t\tconst cell = this.config.activeCell;\n\n\t\t\t\tthis.define({activeCell:null});\n\n\t\t\t\tmaster.showSheet(this._activeMath);\n\n\t\t\t\twebix.delay(()=>{\n\t\t\t\t\tgrid.select(cell.row + (enter ? 1 : 0), cell.column);\n\t\t\t\t});\n\t\t\t}\n\t\t\tdelete this._activeMath;\n\t\t}\n\t\telse if(enter){\n\t\t\twebix.delay(()=>{\n\t\t\t\tgrid.moveSelection(\"down\");\n\t\t\t});\n\t\t}\n\t},\n\tchangeCellCss(row, col, index, remove){\n\t\tconst css = `webix_ssheet_highlight_background_${index}`;\n\t\tfor (let r = row.start; r <= row.end; r++)\n\t\t\tfor (let c = col.start; c <=  col.end; c++)\n\t\t\t\tthis.getTopParentView().$$(\"cells\")[remove?\"removeCellCss\":\"addCellCss\"](r, c, css, true);\n\t},\n\tendEdit(e){\n\t\tlet code = e.which || e.keyCode;\n\n\t\t//if it is a formula - force user to finish it by click outside or 'enter'\n\t\tif(code == 9 || (code>36 && code<41 && this.getValue().charAt(0)!==\"=\")){\n\t\t\tlet dir = (code == 40)?\"down\":(code === 39?\"right\":(code ==37?\"left\":\"up\"));\n\t\t\tif (code === 9){\n\t\t\t\tdir = e.shiftKey ? \"left\" : \"right\";\n\t\t\t\twebix.html.preventEvent(e);\n\t\t\t}\n\n\t\t\tthis.getInputNode().blur();\n\t\t\tthis.updateCellValue();\n\t\t\tthis.getTopParentView()._table.moveSelection(dir);\n\t\t}\n\t},\n\tpaintValue(){\n\t\tconst master = this.getTopParentView();\n\t\tif(!this._activeMath || this._activeMath == master.getActiveSheet()){\n\t\t\tconst cell = this.config.activeCell;\n\t\t\tconst node = master._table.getItemNode(cell);\n\t\t\tif(cell && node) \n\t\t\t\tnode.innerHTML = `<div>${webix.template.escape(this.getValue())}</div>`;\n\t\t}\n\t},\n\tupdateCellValue(cell) {\n\t\tconst newv = this.getValue();\n\t\tconst master = this.getTopParentView();\n\t\tcell = cell || this.config.activeCell;\n\n\t\tif (!cell)\n\t\t\tthis.setValue(\"\");\n\t\telse{\n\t\t\tconst val = master.getCellValue(cell.row, cell.column);\n\n\t\t\tif(newv !== val){\n\t\t\t\tthis.config.value = newv;\n\t\t\t\tmaster.setCellValue(cell.row, cell.column, newv);\n\t\t\t\tmaster.refresh();\n\t\t\t}\n\t\t}\n\n\t\tdelete master.$handleSelection;\n\t},\n\t$setValueHere(value){\n\t\tthis.setValueHere(value);\n\t},\n\tsetValueHere(value) {\n\t\tthis._last_value_set = new Date();\n\n\t\tconst formula = this.getValue();\n\t\tif(formula && formula.charAt(0)===\"=\"){\n\t\t\tconst cursor = this.getInputNode().selectionStart;\n\t\t\tlet str1 = formula.substring(0, cursor);\n\t\t\tconst str2 = formula.substring(cursor);\n\n\t\t\tif(str1[str1.length-1] == \"(\")\n\t\t\t\tstr1 = str1.substring(0, str1.length-1);\n\n\t\t\tstr1 = str1.substring(0, getLastCharIndex(str1, true));\n\n\t\t\t//suggest called via up/down key\n\t\t\tstr1 += value + (str2[0] == \"(\" ? \"\" : \"(\");\n\n\t\t\tthis.setValue(str1 + str2);\n\t\t\tthis.getInputNode().setSelectionRange(str1.length, str1.length);\n\t\t}\n\t},\n\texpectOperator(){\n\t\tconst text = this.getValue();\n\n\t\tif(text[0] == \"=\"){\n\t\t\tlet cursor = this.getInputNode().selectionStart;\n\t\t\twhile(text[cursor-1] == \" \")\n\t\t\t\tcursor--;\n\t\t\treturn text[cursor-1] && text[cursor-1].match(/[+&\\-/*%=(:,]/);\n\t\t}\n\t},\n\tsetRange(range, replace){\n\t\tconst cursor = this.getInputNode().selectionStart;\n\t\tconst formula = this.getValue();\n\n\t\tlet str1, str2;\n\n\t\t//check if range was added by click\n\t\tif(replace)\n\t\t\treplace = this._update_range && cursor == this._update_range.pos + this._update_range.len;\n\n\t\tconst lastPos = replace ? this._update_range.pos : cursor;\n\n\t\tstr1 = formula.substring(0, lastPos) + range;\n\t\tstr2 = formula.substring(cursor);\n\n\t\tthis._update_range = {pos: lastPos, len: range.length};\n\n\t\tthis.setValue(str1 + str2);\n\t},\n\tprepareSheet(sheet, escaped){\n\t\tif(!sheet)\n\t\t\treturn \"\";\n\t\tconst condition = webix.isUndefined(escaped) ? sheet.indexOf(\" \") != -1 : escaped;\n\t\treturn (condition ? `'${sheet}'` : sheet) + \"!\";\n\t},\n\tprepareArea(first, second){\n\t\treturn {\n\t\t\tstart: Math.min(first, second),\n\t\t\tend: Math.max(first, second)\n\t\t};\n\t},\n\tsetColor(row1, col1, row2, col2, color){\n\t\tconst row = this.prepareArea(row1, row2);\n\t\tconst col = this.prepareArea(col1, col2);\n\t\tconst index = [row.start, row.end, col.start, col.end].join(\",\");\n\t\tconst coloredArea = this._highlightedCells[index];\n\n\t\tif(!coloredArea){\n\t\t\tthis._highlightedCells[index] = [row, col, color];\n\t\t\tthis.changeCellCss(row, col, color);\n\t\t}\n\t\telse\n\t\t\treturn coloredArea[2];\n\t},\n\tgetCellValue(row, column){\n\t\tconst master = this.getTopParentView();\n\t\tlet value = master.getCellValue(row, column);\n\t\tif(getType(master, row, column) == \"date\" && value[0] != \"=\"){\n\t\t\tconst format = getDateEditFormat(master, row, column);\n\t\t\tvalue = format(getJsDateFromExcel(value));\n\t\t}\n\t\treturn value;\n\t}\n}, webix.ui.texthighlight);","webix.protoUI({\n\tname: \"ssheet-separator\",\n\tdefaults:{\n\t\tcss: \"webix_ssheet_toolbar_spacer\",\n\t\ttemplate: \" \",\n\t\twidth: 1,\n\t\tborderless: true\n\t}\n},webix.ui.view);","webix.protoUI({\n\tname: \"sheets\",\n\tdefaults:{\n\t\tlayout: \"x\",\n\t\tborderless: true,\n\t\tcss:\"ssheet_list_sheets\",\n\t\tselect: true,\n\t\tdrag: \"order\",\n\t\tdragscroll:\"x\",\n\t\tscroll:false\n\t}\n},webix.EditAbility,webix.ui.list);","// toolbar: toogle button\nwebix.protoUI({\n\t$cssName: \"toggle\",\n\tname:\"ssheet-toggle\",\n\ttoggle:function(){\n\t\tvar value = this.getValue() == this.config.onValue?true:false;\n\t\tthis.setValue(!value);\n\t},\n\t$setValue:function(value){\n\t\tif(value == this.config.offValue)\n\t\t\tvalue = false;\n\t\telse if(value == this.config.onValue)\n\t\t\tvalue = true;\n\t\twebix.ui.toggle.prototype.$setValue.call(this,value);\n\t},\n\tgetValue:function(){\n\t\tvar config = this.config;\n\t\tvar value = config.value;\n\t\treturn  !value || value==config.offValue?(config.offValue||false):(config.onValue||true);\n\t},\n\tdefaults:{\n\t\ttemplate:function(obj, common){\n\t\t\tvar css = (obj.value === true ||obj.value == obj.onValue) ? \" webix_pressed\" : \"\";\n\t\t\tvar inp = common.$renderInput(obj, common);\n\t\t\treturn \"<div class='webix_el_box\"+css+\"' style='width:\"+obj.awidth+\"px; height:\"+obj.aheight+\"px'>\"+inp+\"</div>\";\n\t\t}\n\t}\n}, webix.ui.toggle);\n\n\n// toolbar: silent toggle button\nwebix.protoUI({\n\tname:\"ssheet-toggle-silent\",\n\t$cssName:\"toggle\",\n\t$allowsClear:false,\n\tsetValue:function(){\n\t\tthis.blockEvent();\n\t\twebix.ui.toggle.prototype.setValue.apply(this, arguments);\n\t\tthis.unblockEvent();\n\t}\n}, webix.ui.toggle);","webix.protoUI({\n\tname: \"ssheet-bar-title\",\n\tdefaults:{\n\t\tborderless: true\n\t},\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_subbar_title\";\n\t}\n},webix.ui.template);","webix.protoUI({\n\tname:\"multicheckbox\",\n\tdefaults:{\n\t\tpadding:0,\n\t\ttype:\"clean\",\n\t\tborderless:true,\n\t\telementsConfig:{\n\t\t\tlabelWidth:10\n\t\t}\n\t},\n\t$init:function(config){\n\t\tconfig.rows = [{height:0.000001}];\n\t\tthis.$ready.push(function(){\n\t\t\tthis._initOnChange();\n\t\t});\n\t},\n\t_initOnChange(){\n\t\tthis.attachEvent(\"onChange\", function(newv){\n\t\t\tconst name = this.$eventSource.config.name;\n\n\t\t\tthis.blockEvent();\n\t\t\tif(name == \"$all\"){\n\t\t\t\tfor(let i in this.elements)\n\t\t\t\t\tthis.elements[i].setValue(newv);\n\t\t\t\tif(!newv)\n\t\t\t\t\tthis._getCheckboxes()[0].setValue(1);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tconst count = this.getValue().length;\n\t\t\t\tthis.elements.$all.setValue(count == this._count ? 1 : 0);\n\t\t\t\tif(!count)\n\t\t\t\t\tthis._getCheckboxes()[0].setValue(1);\n\t\t\t}\n\t\t\tthis.unblockEvent();\n\t\t});\n\t},\n\tsetValue:function(value){\n\t\tthis.elements = {};\n\t\tthis._count = value.length;\n\n\t\tif(value.length > 1){\n\t\t\tlet elements = [];\n\t\t\tlet base = [];\n\t\t\tconst maxHeight = 400;\n\n\t\t\tvalue.forEach(sheet => {\n\t\t\t\tbase.push({ view: \"checkbox\", labelRight: sheet.name, name: sheet.name, value: sheet.active});\n\t\t\t});\n\n\t\t\tconst baseHeight = base.length * webix.skin.$active.inputHeight;\n\t\t\tconst scroll = baseHeight > maxHeight;\n\n\t\t\telements.push({\n\t\t\t\tview:\"scrollview\", body:{rows:base},\n\t\t\t\tscroll: scroll,\n\t\t\t\theight: scroll ? maxHeight : baseHeight\n\t\t\t});\n\n\t\t\telements.push({ template:\"<div class='ss_sep_line'></div>\", height:10 });\n\t\t\telements.push({ view:\"checkbox\", labelRight:webix.i18n.spreadsheet.labels[\"export-all-sheets\"], name:\"$all\", value:0 });\n\n\t\t\twebix.ui(elements, this);\n\t\t}\n\t\telse if(this.getChildViews().length > 1){\n\t\t\twebix.ui([{height:0.000001}], this);\n\t\t}\n\t},\n\tgetValue:function(){\n\t\tconst checkboxes = this._getCheckboxes();\n\t\tlet output = [];\n\n\t\t//save order\n\t\tfor(let i = 0; i < checkboxes.length; i++)\n\t\t\tif(checkboxes[i].getValue())\n\t\t\t\toutput.push(checkboxes[i].config.name);\n\n\t\treturn output;\n\t},\n\t_getCheckboxes(){\n\t\tconst scrollview = this.queryView(\"scrollview\");\n\t\treturn scrollview ? scrollview.getBody().getChildViews() : [];\n\t}\n}, webix.ui.form);","webix.protoUI({\n\tname:\"formlist\",\n\tdefaults:{\n\t\tpaddingY: 5,\n\t\theight: 120,\n\t},\n\t$init:function(config){\n\n\t\tconfig.cols = [\n\t\t\t{\n\t\t\t\tcss:\"webix_inp_label\",\n\t\t\t\ttemplate:config.label,\n\t\t\t\twidth:config.labelWidth,\n\t\t\t\tborderless:true\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"list\",\n\t\t\t\tdata:config.data,\n\t\t\t\tcss:config.css,\n\t\t\t\ttemplate:config.template,\n\t\t\t\tselect: true,\n\t\t\t\tscroll:false,\n\t\t\t\tborderless:true,\n\t\t\t\ton:{\n\t\t\t\t\tonSelectChange:()=>{\n\t\t\t\t\t\tthis.getParentView().callEvent(\"onChange\", []);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t},\n\tsetValue:function(value){this.getChildViews()[1].select(value);},\n\tgetValue:function(){return this.getChildViews()[1].getSelectedId();},\n\trefresh: function(){this.getChildViews()[1].refresh();},\n\tfocus:function(){}\n}, webix.ui.layout);","webix.protoUI({\n\tname: \"ssheet-ui\",\n\tdefaults:{\n\t\tmove:true,\n\t\tcss:\"webix_shadow_none webix_ssheet_ui\",\n\t\thead:false,\n\t\tresize:true,\n\t\ttoFront:true,\n\t\tminWidth:50,\n\t\tminHeight:200,\n\t\tescHide:false,\n\t\tautofit:false\n\t},\n\t$init:function(){\n\t\t// prevent block selection\n\t\tthis.$view.setAttribute(\"webixignore\", \"1\");\n\n\t\tthis.$ready.push(function(){\n\t\t\twebix.UIManager.addHotKey(\"delete\", webix.bind(this._removeView, this));\n\t\t\twebix.UIManager.addHotKey(\"backspace\", webix.bind(this._removeView, this));\n\t\t\tthis.getMenu();\n\t\t});\n\t\tthis.attachEvent(\"onDestruct\", function(){\n\t\t\twebix.eventRemove(this._clickEv);\n\t\t\tthis._menu.destructor();\n\t\t});\n\t},\n\tmove_setter:function(value){\n\t\tif (value){\n\t\t\twebix.DragControl.addDrag(this.$view, this);\n\t\t}\n\t\treturn value;\n\t},\n\t$dragPos:function(pos, e){\n\t\tthis.callEvent(\"onViewMove\", [pos, e]);\n\t\treturn pos;\n\t},\n\t$dragCreate:function(object, e){\n\t\tconst trg = e.target;\n\t\tif (!trg.getAttribute || trg.getAttribute(\"webix_disable_drag\") || trg.getAttribute(\"webixignore\"))\n\t\t\treturn;\n\n\t\tthis.getMenu().hide();\n\t\tconst elOffset = webix.html.offset(object);\n\t\tconst elPos = webix.html.pos(e);\n\t\tconst pOffset = webix.html.offset(object.parentNode);\n\t\tconst state = webix.$$(this.config.master).getScrollState();\n\n\t\twebix.DragControl.top = elOffset.y - elPos.y - pOffset.y;\n\t\twebix.DragControl.left = elOffset.x - elPos.x - pOffset.x + state.x;\n\n\t\treturn webix.toNode(this.$view);\n\t},\n\t$dragDestroy:function(node, drag){\n\t\tconst x = this.config.left = parseInt(drag.style.left,10);\n\t\tconst y = this.config.top = parseInt(drag.style.top,10);\n\n\t\twebix.DragControl.top = webix.DragControl.left = 0;\n\n\t\tthis.callEvent(\"onViewMoveEnd\", [x, y]);\n\t\treturn;\n\t},\n\tgetMenu:function(){\n\t\tconst labels = webix.i18n.spreadsheet.labels;\n\t\tif(!this._menu){\n\t\t\tlet data = [\n\t\t\t\t{ value:labels[\"export-view\"], submenu:[\n\t\t\t\t\t{ id:\"pdf\", value:labels[\"export-view-pdf\"] },\n\t\t\t\t\t{ id:\"png\", value:labels[\"export-view-png\"] },\n\t\t\t\t\t{ id:\"excel\", value:labels[\"export-view-excel\"] }\n\t\t\t\t] }\n\t\t\t];\n\n\t\t\tif(!webix.$$(this.config.master).getTopParentView().config.readonly)\n\t\t\t\tdata = [\n\t\t\t\t\t{ id:\"edit\", value:labels[\"edit-view\"] },\n\t\t\t\t\t...data,\n\t\t\t\t\t{ id:\"del\", value:labels[\"remove-view\"] }\n\t\t\t\t];\n\n\t\t\tthis._menu = webix.ui({\n\t\t\t\tview:\"contextmenu\",\n\t\t\t\tsubmenuConfig:{\n\t\t\t\t\texternalUI: this.config.id\n\t\t\t\t},\n\t\t\t\tdata:data,\n\t\t\t\ton:{\n\t\t\t\t\tonMenuItemClick: id => this._menuActions(id),\n\t\t\t\t\tonBeforeShow: () => this._toggleExcel()\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst dots = webix.html.create(\"span\", {\"class\":\"webix_ssheet_view_menu webix_icon wxi-dots\"});\n\t\t\tthis._clickEv = webix.event(dots, \"click\", ()=> {\n\t\t\t\tif(this._menu.isVisible())\n\t\t\t\t\tthis._menu.hide();\n\t\t\t\telse\n\t\t\t\t\tthis._menu.show(dots);\n\t\t\t});\n\t\t\tthis.$view.firstChild.appendChild(dots);\n\t\t}\n\t\treturn this._menu;\n\t},\n\t_menuActions:function(id){\n\t\tswitch(id){\n\t\t\tcase \"del\":\n\t\t\t\tthis.callEvent(\"onViewRemove\", []);\n\t\t\t\tbreak;\n\t\t\tcase \"edit\":\n\t\t\t\tthis.callEvent(\"onViewEdit\", []);\n\t\t\t\tbreak;\n\t\t\tcase \"pdf\":\n\t\t\t\twebix.toPDF(this.getBody(), {display:\"image\"});\n\t\t\t\tbreak;\n\t\t\tcase \"png\":\n\t\t\t\twebix.toPNG(this.getBody());\n\t\t\t\tbreak;\n\t\t\tcase \"excel\":\n\t\t\t\twebix.toExcel(this.getBody(), {header: false});\n\t\t\t\tbreak;\n\t\t}\n\t},\n\t_toggleExcel:function(){\n\t\tconst view = this.getBody();\n\t\tif(view.data && view.data.pull)\n\t\t\tthis._menu.showItem(\"excel\");\n\t\telse\n\t\t\tthis._menu.hideItem(\"excel\");\n\t},\n\t_removeView:function(view){\n\t\tif(view && view.getTopParentView() == this)\n\t\t\tthis.callEvent(\"onViewRemove\", []);\n\t}\n}, webix.ui.window);","webix.protoUI({\n\tname: \"ssheet-series\",\n\t$init: function(config){\n\t\tconfig.rows = [\n\t\t\t{\n\t\t\t\tview: \"scrollview\",\n\t\t\t\tborderless: true,\n\t\t\t\tbody: {\n\t\t\t\t\tview: \"accordion\",\n\t\t\t\t\tcss: \"webix_ssheet_accordion\",\n\t\t\t\t\tmargin: webix.skin.$active.layoutMargin.form,\n\t\t\t\t\tmulti: true,\n\t\t\t\t\ttype: \"clean\",\n\t\t\t\t\trows: [\n\t\t\t\t\t\tthis.getSectionConfig()\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\ton:{\n\t\t\t\t\tonAfterScroll:function(){\n\t\t\t\t\t\t//close possibly open selector popups\n\t\t\t\t\t\twebix.callEvent(\"onClick\", []);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{ view:\"button\", label:webix.i18n.spreadsheet.labels[\"add-line\"], click:()=>{\n\t\t\t\tthis.addSection();\n\t\t\t}}\n\t\t];\n\t},\n\tgetSectionConfig: function(i){\n\t\tconst view = this;\n\t\tconst labels = webix.i18n.spreadsheet.labels;\n\t\tconst trashIcon = \"<span class='webix_icon webix_ssheet_series_icon wxi-trash'></span>\";\n\t\tconst padding = webix.skin.$active.dataPadding-2;\n\n\t\treturn {\n\t\t\tview:\"accordionitem\",\n\t\t\theader:`${labels[\"chart-item\"]} ${i ? i+1 : 1} ${trashIcon}`,\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\tpadding,\n\t\t\t\telementsConfig:{\n\t\t\t\t\tlabelWidth:180\n\t\t\t\t},\n\t\t\t\ton:{\n\t\t\t\t\tonChange: () => {\n\t\t\t\t\t\tthis.callEvent(\"onChange\", []);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\telements:[\n\t\t\t\t\t{ view:\"text\", label:labels[\"chart-range\"], name:\"range\", range:true, on:{\n\t\t\t\t\t\tonChange: function(val, oldVal) {\n\t\t\t\t\t\t\tconst upper = val.toUpperCase();\n\t\t\t\t\t\t\tif(val != upper){\n\t\t\t\t\t\t\t\tthis.blockEvent();\n\t\t\t\t\t\t\t\tthis.setValue(upper);\n\t\t\t\t\t\t\t\tthis.unblockEvent();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tview.callEvent(\"onRangeChange\", [upper, oldVal]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}},\n\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"chart-series-color\"], name:\"color\"},\n\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-tooltip\"], name:\"tooltip\" },\n\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-label\"], name:\"label\", hidden: !this.labelsVisible },\n\t\t\t\t\t{ view:\"richselect\", label:labels[\"chart-markers\"], value:\"square\", name:\"marker\", hidden: !this.markersVisible,\n\t\t\t\t\t\tsuggest:{\n\t\t\t\t\t\t\tview: \"ssheet-form-suggest\",\n\t\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t\t{id:\"square\", value:labels[\"chart-markers-square\"]},\n\t\t\t\t\t\t\t\t{id:\"triangle\", value:labels[\"chart-markers-triangle\"]},\n\t\t\t\t\t\t\t\t{id:\"diamond\", value:labels[\"chart-markers-diamond\"]},\n\t\t\t\t\t\t\t\t{id:\"round\", value:labels[\"chart-markers-round\"]}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\tonClick:{\n\t\t\t\t\"wxi-trash\": function(){\n\t\t\t\t\tconst layout = this.getParentView();\n\t\t\t\t\tlayout.removeView(this);\n\n\t\t\t\t\tconst childs = layout.getChildViews();\n\n\t\t\t\t\tfor (let i = 0; i < childs.length; i++) {\n\t\t\t\t\t\tchilds[i].define({header:`${labels[\"chart-item\"]} ${i+1} ${trashIcon}`});\n\t\t\t\t\t\tchilds[i].refresh();\n\t\t\t\t\t}\n\n\t\t\t\t\tview.callEvent(\"onChange\", []);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t},\n\taddSection: function(){\n\t\tconst layout = this.getLayout();\n\t\tconst lastIndex = layout.getChildViews().length;\n\t\tconst layoutId = layout.addView(this.getSectionConfig(lastIndex));\n\n\t\twebix.$$(layoutId).queryView({name: \"range\"}).focus();\n\t},\n\tsetValue: function(value){\n\t\tvalue = value || [];\n\n\t\tconst layout = this.getLayout();\n\t\tconst childs = layout.getChildViews();\n\t\tconst count = childs.length;\n\n\t\tif(count > value.length)\n\t\t\tfor(let i = count; i > value.length; i--)\n\t\t\t\tthis.getLayout().removeView(childs[i-1]);\n\t\telse if(value.length > count)\n\t\t\tfor(let i = value.length; i > count; i--)\n\t\t\t\tthis.addSection();\n\n\t\tfor(let i = 0; i < childs.length; i++){\n\t\t\tconst form = childs[i].getChildViews()[0];\n\t\t\tconst range = form.queryView({name: \"range\"});\n\n\t\t\t//block range events to ignore onRangeChange\n\t\t\trange.blockEvent();\n\t\t\tform.setValues(value[i]);\n\t\t\trange.unblockEvent();\n\t\t}\n\t},\n\tsetSubValue: function(sub, value){\n\t\tsub.blockEvent();\n\t\tsub.setValue(value);\n\t\tsub.unblockEvent();\n\t},\n\tgetLayout(){\n\t\treturn this.queryView(\"scrollview\").getBody();\n\t},\n\thideSubviews(name, show){\n\t\tif(name == \"marker\")\n\t\t\tthis.markersVisible = show;\n\t\telse\n\t\t\tthis.labelsVisible = show;\n\n\t\tthis.queryView({ name }, \"all\").forEach(view => {\n\t\t\tif(show)\n\t\t\t\tview.show();\n\t\t\telse\n\t\t\t\tview.hide();\n\t\t});\n\t},\n\tgetValue: function(){\n\t\tconst value = [];\n\n\t\tconst layout = this.getLayout();\n\t\tlayout.getChildViews().forEach(child => {\n\t\t\tvalue.push(child.getChildViews()[0].getValues());\n\t\t});\n\t\treturn value;\n\t}\n}, webix.ui.layout);","import {getJsDateFromExcel, getExcelDateFromJs} from \"../mathematics/methods\";\nimport {getDateEditFormat} from \"../operations/formats\";\n\nwebix.editors.excel_date = webix.extend({\n\tcreatePopup:function(){\n\t\tconst editor = webix.editors.excel_date;\n\n\t\tif(!editor.popup){\n\t\t\tconst popup = webix.ui({\n\t\t\t\tview:\"popup\",\n\t\t\t\tbody:{ \n\t\t\t\t\tview:\"calendar\",\n\t\t\t\t\ticons:true,\n\t\t\t\t\ttimepicker:true,\n\t\t\t\t\ton:{\n\t\t\t\t\t\tonChange: function(val){\n\t\t\t\t\t\t\tval = val[0];\n\t\t\t\t\t\t\tthis.getParentView()._last_input_target.value = val ? getExcelDateFromJs(val) : \"\";\n\t\t\t\t\t\t\twebix.callEvent(\"onEditEnd\", []);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ton:{\n\t\t\t\t\tonEnter: function(){\n\t\t\t\t\t\twebix.callEvent(\"onEditEnd\", []);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\teditor.popup = popup.config.id;\n\t\t}\n\n\t\treturn editor.popup;\n\t},\n\trender:function(){\n\t\tconst node = webix.html.create(\"div\", {\n\t\t\t\"class\":\"webix_dt_editor\"\n\t\t}, \"<input type='text'>\");\n\n\t\tthis.popup = this.createPopup();\n\n\t\twebix.event(node.firstChild, \"click\", ()=> this.getPopup().show(node));\n\n\t\treturn node;\n\t},\n\tgetPopup(){\n\t\treturn webix.$$(this.popup);\n\t},\n\tshowPopup:function(){\n\t\tconst input = this.getInputNode();\n\t\tconst popup = this.getPopup();\n\n\t\tpopup._last_input_target = input;\n\t\tpopup.show(input);\n\n\t\tinput.setAttribute(\"aria-expanded\", \"true\");\n\t},\n\tupdateCalendar(value){\n\t\tconst calendar = this.getPopup().getBody();\n\n\t\tcalendar.blockEvent();\n\t\tcalendar.setValue(value);\n\t\tcalendar.unblockEvent();\n\t},\n\tafterRender:function(){\n\t\tthis.showPopup();\n\t},\n\tsetValue:function(value){\n\t\tconst noDate = (value === \"\" || isNaN(value*1));\n\t\tvalue = noDate ? new Date() : getJsDateFromExcel(value);\n\t\tthis.updateCalendar(value);\n\n\t\tconst view = webix.$$(this.config.node).queryView(a => a.name === \"spreadsheet\", \"parent\");\n\t\tconst format = getDateEditFormat(view, this.config.row.id, this.config.id);\n\t\tthis.getInputNode().value = format(value);\n\t},\n\tgetValue:function(){\n\t\tconst value = this.getInputNode().value;\n\t\tthis.getPopup().hide();\n\t\treturn value;\n\t}\n}, webix.editors.text);","webix.editors.ss_richselect = webix.extend({\n\tgetFormat:function(value){\n\t\tconst list = this.getInputNode();\n\t\tlet item;\n\n\t\tif (value && list.exists(value))\n\t\t\titem = list.getItem(value);\n\t\treturn item && item.format;\n\t},\n\tpopupInit:function(popup){\n\t\twebix.editors.richselect.popupInit.apply(this, arguments);\n\n\t\tpopup.getList().define(\"template\", function(obj){\n\t\t\treturn obj.$value || obj.value;\n\t\t});\n\t}\n}, webix.editors.richselect);","import {changeAreaDecimals} from \"../operations/formats\";\n\nexport const actions = {\n\tspan: function(view){\n\t\tvar range = view.$$(\"cells\").getSelectArea();\n\t\tif(range){\n\t\t\tif(isMerged(view,range)){\n\t\t\t\tview.splitCell();\n\t\t\t}\n\t\t\telse{\n\t\t\t\tlet values = [];\n\t\t\t\tfor(let r = range.start.row; r<=range.end.row; r++){\n\t\t\t\t\tfor(let c = range.start.column; c<=range.end.column; c++){\n\t\t\t\t\t\tlet value = view.getCellValue(r,c);\n\t\t\t\t\t\tif(value) values.push(value);\n\t\t\t\t\t\tif(values.length >1) break;\n\t\t\t\t\t}\n\t\t\t\t\tif(values.length >1) break;\n\t\t\t\t}\n\t\t\t\tif(values.length>1){\n\t\t\t\t\tview.confirm({\n\t\t\t\t\t\ttext:webix.i18n.spreadsheet.labels[\"merge-cell-confirm\"]\n\t\t\t\t\t}).then(()=> view.combineCells() );\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tview.combineCells();\n\t\t\t}\n\t\t}\n\t},\n\tundo: function(view){\n\t\tview.undo();\n\t},\n\tredo: function(view){\n\t\tview.redo();\n\t},\n\t\"hide-gridlines\": function(view){\n\t\tview.hideGridlines(\"toggle\");\n\t},\n\t\"hide-headers\": function(view){\n\t\tview.hideHeaders(\"toggle\");\n\t},\n\t\"freeze-columns\": function(view){\n\t\tvar table = view.$$(\"cells\");\n\t\tvar select = table.getSelectedId();\n\t\tview.freezeColumns(select && select.column!=\"rowId\"?select.column : 0);\n\t},\n\t\"freeze-rows\":function(view){\n\t\tvar table = view.$$(\"cells\");\n\t\tvar select = table.getSelectedId();\n\t\tview.freezeRows(select ? select.row : 0);\n\t},\n\t\"increase-decimals\": function(view){\n\t\tchangeAreaDecimals(view, 1);\n\t},\n\t\"decrease-decimals\": function(view){\n\t\tchangeAreaDecimals(view, -1);\n\t},\n};\n\nfunction isMerged(view,range){\n\tvar i, j,\n\t\tc0 = range.start,\n\t\tc1 = range.end;\n\n\tfor( i = c0.row*1; i <= c1.row*1; i++ ){\n\t\tfor( j = c0.column*1; j <= c1.column*1; j++ ){\n\t\t\tif(view.$$(\"cells\").getSpan(i, j))\n\t\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n","import {toolbarSizes, defaultStyles} from \"./defaults\";\nimport {formatHelpers} from \"../operations/formats\";\n\n// options for 'font-family' select\nexport const fontFamily = [\n\t{id: \"Arial\", value: \"Arial\"},\n\t{id: \"'Roboto', sans-serif\", value: \"Roboto\"},\n\t{id: \"'PT Sans', Tahoma\", value: \"PT Sans\"},\n\t{id: \"Tahoma\", value: \"Tahoma\"},\n\t{id: \"Verdana\", value: \"Verdana\"},\n\t{id: \"Calibri, Tahoma\", value:\"Calibri\"}\n];\n\n// options for 'format' select\nfunction getCellFormats(){\n\tconst locale = webix.i18n.spreadsheet.labels;\n\treturn [\n\t\t{id: \"common\", value: locale.common },\n\t\t{id: \"price\", value: locale.currency, example: \"98.20\"},\n\t\t{id: \"int\", value: locale.number, example: \"2120.02\"},\n\t\t{id: \"percent\", value: locale.percent, example:\"0.5\"},\n\t\t{id: \"date\", value: locale.date, example:\"45000\"},\n\t\t{id: \"string\", value: locale.string, example:\"012345\"},\n\t\t{id: \"custom\", value: locale[\"custom-format\"]},\n\t];\n}\n\nexport function getColumnOperation(view){\n\tconst locale = webix.i18n.spreadsheet.menus;\n\tlet colOperations = [\n\t\t{ id:\"add\",    group:\"column\", value:locale[\"insert-column\"]},\n\t\t{ id:\"del\",    group:\"column\", value:locale[\"delete-column\"]},\n\t\t{ id:\"show\",   group:\"column\", value:locale[\"show-column\"]},\n\t\t{ id:\"hide\",   group:\"column\", value:locale[\"hide-column\"]}\n\t];\n\tif(view.config.resizeCell != false)\n\t\tcolOperations.push({ id:\"resize\", group:\"column\", value:locale[\"resize-column\"]});\n\treturn colOperations;\n}\n\nexport function getRowOperation(view){\n\tconst locale = webix.i18n.spreadsheet.menus;\n\tlet rowOperations = [\n\t\t{ id:\"add\",    group:\"row\", value:locale[\"insert-row\"]},\n\t\t{ id:\"del\",    group:\"row\", value:locale[\"delete-row\"]},\n\t\t{ id:\"show\",   group:\"row\", value:locale[\"show-row\"]},\n\t\t{ id:\"hide\",   group:\"row\", value:locale[\"hide-row\"]}\n\t];\n\tif(view.config.resizeCell != false)\n\t\trowOperations.push({ id:\"resize\", group:\"row\", value:locale[\"resize-row\"]});\n\treturn rowOperations;\n}\n\n// options for 'clear' select\nexport function getClearOperation(){\n\treturn [\n\t\t{id: \"clear-value\",               value: getLocaleClear(\"value\")},\n\t\t{id: \"clear-style\",               value: getLocaleClear(\"style\")},\n\t\t{id: \"clear-conditional-formats\", value: getLocaleClear(\"conditional-formats\")},\n\t\t{id: \"clear-dropdown-editors\",    value: getLocaleClear(\"dropdown-editors\")},\n\t\t{id: \"clear-comments\",            value: getLocaleClear(\"comments\")},\n\t\t{ $template: \"Separator\" },\n\t\t{id: \"clear-all\",                 value: getLocaleClear(\"all\")}\n\t];\n}\n\n// options for 'borders' select\nconst borders = [\n\t{id: \"no\", value: \"no\"},\n\t{id: \"left\", value: \"left\"},\n\t{id: \"top\", value: \"top\"},\n\t{id: \"right\", value: \"right\"},\n\t{id: \"bottom\", value: \"bottom\"},\n\t{id: \"all\", value: \"all\"},\n\t{id: \"outer\", value: \"outer\"},\n\t{id: \"top-bottom\", value: \"top-bottom\"}\n];\n\nfunction getLocaleClear(value){\n\tvar locale = webix.i18n.spreadsheet.menus;\n\treturn locale[\"clear\"] + \" \" + locale[\"clear-\"+value].toLowerCase();\n}\n\n// options for 'font-size' select\nfunction getFontSize(){\n\tvar numbers = [\n\t\t\"8\",\"9\",\"10\",\"11\",\"12\",\"14\",\"15\",\n\t\t\"16\",\"18\",\"20\",\"22\",\"24\",\"28\",\"36\"\n\t];\n\tvar  fontSize = [];\n\n\tfor(var i =0; i < numbers.length; i++){\n\t\tfontSize.push({id: numbers[i]+webix.i18n.spreadsheet.labels.px, value: numbers[i]});\n\t}\n\treturn fontSize;\n}\n\nexport const styleFormats = {\n\t\"font-weight\": \"bold\",\n\t\"font-style\": \"italic\",\n\t\"text-decoration\": \"underline\"\n};\n\nexport const ui = {\n\tbutton: function(config){\n\t\treturn {\n\t\t\tview: \"ssheet-toggle\", width: config.width||toolbarSizes.width, id: config.name, name: config.name,  label: config.label,\n\t\t\tcss: config.css||\"\", onValue: styleFormats[config.name], offValue: \"normal\",\n\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[config.name]||\"\"\n\t\t};\n\t},\n\tcolorButton: function(config){\n\t\treturn {\n\t\t\tview: \"ssheet-color\",  css: config.css,  name: config.name, width: config.width||toolbarSizes.width+24,\n\t\t\ttitle: \"<span class='webix_ssheet_button_icon webix_ssheet_color_button_icon webix_ssheet_icon ssi-\"+config.name+\"' ></span>\",\n\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[config.name]||\"\"\n\t\t};\n\t},\n\ttoggleButton: function(config){\n\t\treturn {\n\t\t\tview: \"ssheet-toggle-silent\", width: toolbarSizes.width, id: config.name, name: config.name,\n\t\t\tlabel: \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\"+config.name+\"'></span>\",\n\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[config.name]||\"\"\n\t\t};\n\t},\n\ticonButton: function(config){\n\t\tvar btn = webix.copy(config);\n\t\twebix.extend(btn, {view: \"button\", width: toolbarSizes.width, id: config.name,\n\t\t\tlabel: \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\"+config.name+\"'></span>\",\n\t\t\tcss: \"\",\n\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[config.name]||webix.i18n.spreadsheet.menus[config.name]||\"\"\n\t\t});\n\t\tif(config.onValue){\n\t\t\twebix.extend(btn,{view: \"ssheet-toggle\", onValue: config.onValue, offValue: config.offValue},true);\n\t\t}\n\n\t\treturn btn;\n\t},\n\tsegmented: function(config){\n\t\treturn  {\n\t\t\tview: \"segmented\", name: config.name, css:config.css||\"\", width: config.width||toolbarSizes.width+76,  options:config.options\n\t\t};\n\t},\n\tselect: function(config){\n\t\twebix.extend(config,{\n\t\t\tview: \"richselect\",\n\t\t\tid: config.name,\n\t\t\tvalue: defaultStyles[config.name],\n\t\t\tsuggest: {\n\t\t\t\tcss: \"webix_ssheet_suggest\",\n\t\t\t\t//fitMaster: false,\n\t\t\t\tpadding: 0,\n\t\t\t\tdata: config.options\n\t\t\t}\n\t\t});\n\n\t\tconfig.tooltip = webix.i18n.spreadsheet.tooltips[config.name]||\"\";\n\t\tif(config.popupWidth){\n\t\t\tconfig.suggest.fitMaster = false;\n\t\t\tconfig.suggest.width = config.popupWidth;\n\t\t}\n\t\tif(config.popupTemplate)\n\t\t\tconfig.suggest.body = {\n\t\t\t\ttemplate: config.popupTemplate\n\t\t\t};\n\t\tif(config.popupEvents){\n\t\t\tconfig.suggest.body = config.suggest.body || {};\n\t\t\tconfig.suggest.body.on = config.popupEvents;\n\t\t}\n\t\treturn config;\n\t},\n\tseparator: function(){\n\t\treturn {\n\t\t\tview: \"ssheet-separator\"\n\t\t};\n\t},\n\ttitle: function(config){\n\t\tvar title = config.title;\n\t\tif(title.indexOf(\"$\") === 0)\n\t\t\ttitle = \"\";\n\t\ttitle = webix.i18n.spreadsheet.labels[config.title]||title;\n\n\t\treturn {\n\t\t\ttemplate: title, view: \"ssheet-bar-title\", height: toolbarSizes.titleHeight\n\t\t};\n\t},\n\tborders: function(config){\n\t\treturn {view: \"ssheet-borders\", width:config.width||toolbarSizes.width+24, data: borders, id: config.name, name: config.name,\n\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[config.name] };\n\t},\n\talign: function(config){\n\t\treturn {view: \"ssheet-align\", value: defaultStyles[config.name], width:config.width||toolbarSizes.width+24, data: config.options,\n\t\t\tname: config.name, tooltip: webix.i18n.spreadsheet.tooltips[config.name] };\n\t},\n\tcondFormat: function(config){\n\t\treturn {\n\t\t\tview: \"ssheet-cond-format\",\n\t\t\twidth: 40,\n\t\t\tid: config.name,\n\t\t\tname: config.name\n\t\t};\n\t}\n};\n\nexport const buttonsMap = {\n\t\"font-family\": function(){\n\t\treturn  ui.select({name: \"font-family\", options:fontFamily, width: 100});\n\t},\n\t\"font-size\": function(){\n\t\treturn  ui.select({name: \"font-size\", options:getFontSize(), width: 64});\n\t},\n\t\"font-weight\": function(){\n\t\treturn ui.button({name:\"font-weight\",label: \"B\", css: \"webix_ssheet_bold\"});\n\t},\n\t\"font-style\": function(){\n\t\treturn ui.button({name: \"font-style\",label: \"I\",css:\"webix_ssheet_italic\"});\n\t},\n\t\"text-decoration\": function(){\n\t\treturn ui.button({name: \"text-decoration\",label: \"U\",css: \"webix_ssheet_underline\"});\n\t},\n\t\"color\": function(){\n\t\treturn ui.colorButton({name: \"color\",icon:\"font\",css:\"webix_ssheet_color\"});\n\t},\n\t\"background\": function(){\n\t\treturn  ui.colorButton({name: \"background\",icon:\"paint-brush\",css:\"webix_ssheet_background\", width: 64});\n\t},\n\t\"borders\": function(){\n\t\treturn ui.borders({ name: \"borders\" });\n\t},\n\t\"text-align\": function(){\n\t\tvar locale = webix.i18n.spreadsheet.tooltips;\n\t\treturn ui.align({name: \"text-align\", css: \"webix_ssheet_align\", options:[\n\t\t\t{id: \"left\", css: \"webix_ssheet_icon ssi-left\", tooltip: locale[\"align-left\"]},\n\t\t\t{id: \"center\", css: \"webix_ssheet_icon ssi-center\", tooltip: locale[\"align-center\"]},\n\t\t\t{id: \"right\", css: \"webix_ssheet_icon ssi-right\", tooltip: locale[\"align-right\"]}\n\t\t]});\n\t},\n\t\"vertical-align\": function(){\n\t\tvar locale = webix.i18n.spreadsheet.tooltips;\n\t\treturn  ui.align({name: \"vertical-align\", css: \"webix_ssheet_align\", options:[\n\t\t\t{id: \"top\", css: \"webix_ssheet_icon ssi-top\", tooltip: locale[\"align-top\"]},\n\t\t\t{id: \"middle\", css: \"webix_ssheet_icon ssi-middle\", tooltip: locale[\"align-middle\"]},\n\t\t\t{id: \"bottom\", css: \"webix_ssheet_icon ssi-bottom\", tooltip: locale[\"align-bottom\"]}\n\t\t]});\n\t},\n\t\"wrap\": function(){\n\t\treturn ui.iconButton({name: \"wrap\", onValue:\"wrap\", offValue:\"nowrap\"});\n\t},\n\t\"format\": function(){\n\t\treturn ui.select({\n\t\t\tname: \"format\", width: 106, options:getCellFormats(), popupWidth: 180,\n\t\t\tpopupTemplate: function(obj){\n\t\t\t\t//make it look like an actual cell\n\t\t\t\tvar format =  formatHelpers[obj.id] ? formatHelpers[obj.id].getFormat : \"\";\n\t\t\t\tvar cell = {css:\"\"};\n\t\t\t\tvar example = format && obj.example?format(obj.example, cell):\"\";\n\t\t\t\treturn obj.value + (format?\"<span class='webix_ssheet_right\"+(cell.css?\" \"+cell.css:\"\")+\"'>\"+example+\"</span>\":\"\");\n\t\t\t},\n\t\t\tpopupEvents:{\n\t\t\t\tonItemClick: function(id){\n\t\t\t\t\tif(id == \"custom\")\n\t\t\t\t\t\tthis.getTopParentView().callEvent(\"onCommand\", [{id:id}]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\t\"column\": function(view){\n\t\treturn {\n\t\t\tname: \"column\",\n\t\t\tview: \"ssheet-button\", icon: \"column\",\n\t\t\tarrow: true, area: true, width: 58,\n\t\t\toptions:getColumnOperation(view)\n\t\t};\n\t},\n\t\"row\": function(view){\n\t\treturn {\n\t\t\tname: \"row\", view: \"ssheet-button\", icon: \"row\",\n\t\t\tarrow: true, area: true, width: 58,\n\t\t\toptions:getRowOperation(view)\n\t\t};\n\t},\n\t\"clear\": function(){\n\t\treturn {\n\t\t\tname: \"clear\", view: \"ssheet-button\", icon: \"clear-styles\",\n\t\t\tarrow: true, area: true, width: 58,\n\t\t\toptions:getClearOperation()\n\t\t};\n\t},\n\t\"image\":function(){\n\t\treturn {\n\t\t\tname:\"image\", view:\"ssheet-button\", icon:\"add-image\",\n\t\t\tarrow:true, options:[\n\t\t\t\t{id:\"add-image-cell\", value: webix.i18n.spreadsheet.labels[\"add-image-cell\"]},\n\t\t\t\t{id:\"add-image-top\", value: webix.i18n.spreadsheet.labels[\"add-image-top\"]}\n\t\t\t]\n\t\t};\n\t},\n\t\"graph\":function(){\n\t\treturn {\n\t\t\tname:\"graph\", view:\"ssheet-button\", icon:\"add-sparkline\",\n\t\t\tarrow:true, options:[\n\t\t\t\t{id:\"add-sparkline\", value:webix.i18n.spreadsheet.labels[\"add-sparkline\"]},\n\t\t\t\t{id:\"add-chart\", value: webix.i18n.spreadsheet.labels[\"add-chart\"]}\n\t\t\t]\n\t\t};\n\t},\n\t\"comment\": function(){\n\t\treturn {\n\t\t\tname: \"comment\",\n\t\t\tview: \"ssheet-button\", icon: \"comments\",\n\t\t\tarrow: true, area: true, width: 55\n\t\t};\n\t},\n\t\"create-filter\": function(){\n\t\treturn ui.toggleButton({name: \"create-filter\"});\n\t},\n\t\"hide-gridlines\": function(){\n\t\treturn ui.toggleButton({name: \"hide-gridlines\"});\n\t},\n\t\"hide-headers\": function(){\n\t\treturn ui.toggleButton({name: \"hide-headers\"});\n\t}\n};","import {toolbarSizes} from \"./defaults\";\n\nfunction getText(text){\n\tvar locale = webix.i18n.spreadsheet;\n\treturn locale.menus[text] || locale.labels[text] || locale.tooltips[text] || text;\n}\nfunction calcButtons(){\n\tvar i, name, width,\n\t\tgroups = {\n\t\t\t\"undo\":[\"undo\",\"redo\"],\n\t\t\t\"insert\":[\"add-sparkline\",\"add-image\",\"add-comment\"]\n\t\t},\n\t\tresult = {};\n\n\tfor( name in groups){\n\t\tresult[name] = 0;\n\t\tfor(i=0; i < groups[name].length; i++){\n\t\t\twidth = webix.html.getTextSize(getText(groups[name][i]), \"webix_ssheet_button_measure\").width + 7;\n\t\t\tresult[name] = Math.max(width,result[name]);\n\t\t}\n\t}\n\treturn result;\n}\nexport function getAllElements(){\n\tvar sizes = calcButtons();\n\tvar titleHeight = toolbarSizes.titleHeight;\n\n\treturn [\n\t\t{\n\t\t\tpadding: 3,\n\t\t\tmargin: 0,\n\t\t\trows:[\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"sheet\", view: \"ssheet-button-icon-top\", label: getText(\"sheet\"), arrow: true,\n\t\t\t\t\t\t\toptions:[\n\t\t\t\t\t\t\t\t{id: \"new-sheet\"},\n\t\t\t\t\t\t\t\t{id: \"copy-sheet\"},\n\t\t\t\t\t\t\t\t{id: \"remove-sheet\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t{$button: \"excel-import\"},\n\t\t\t\t\t\t\t\t{$button: \"excel-export\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t{$button: \"print\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{},\n\t\t\t\t{template: getText(\"file\"), view: \"ssheet-bar-title\", height: titleHeight, width: 85}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{$button: \"undo\", view: \"ssheet-button\", label: getText(\"undo\"), width: sizes.undo },\n\t\t\t\t{$button: \"redo\", view: \"ssheet-button\", label: getText(\"redo\"), width: sizes.undo},\n\t\t\t\t{template: getText(\"undo-redo\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmargin: 2,\n\t\t\t\t\t\t\tcols:[\n\t\t\t\t\t\t\t\t{$button: \"font-family\", width: (webix.skin.$active.inputHeight+2)*3+4},\n\t\t\t\t\t\t\t\t{$button: \"font-size\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{$button: \"borders\"}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmargin: 2,\n\t\t\t\t\t\t\tcols:[\n\t\t\t\t\t\t\t\t{$button: \"font-weight\"},\n\t\t\t\t\t\t\t\t{$button: \"font-style\"},\n\t\t\t\t\t\t\t\t{$button: \"text-decoration\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\t{$button: \"background\"},\n\t\t\t\t\t\t{$button: \"color\"}\n\t\t\t\t\t]\n\n\t\t\t\t},\n\t\t\t\t{template: getText(\"font\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{$button: \"text-align\"},\n\t\t\t\t\t\t{$button: \"span\"}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{$button: \"vertical-align\"},\n\n\t\t\t\t\t\t{$button: \"wrap\"}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{template: getText(\"align\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{$button: \"format\"},\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{$button: \"increase-decimals\"},\n\t\t\t\t\t\t{$button: \"decrease-decimals\"}\n\t\t\t\t\t]\n\t\t\t\t},\n\n\t\t\t\t{template: getText(\"number\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{cols:[\n\t\t\t\t\t{ $button: \"sort-asc\"},\n\t\t\t\t\t{ $button: \"create-filter\"},\n\t\t\t\t\t{ $button: \"conditional-format\"},\n\t\t\t\t\t{ $button: \"add-link\"},\n\t\t\t\t\t{ $button: \"clear\"}\n\t\t\t\t]},\n\t\t\t\t{cols:[\n\t\t\t\t\t{ $button: \"sort-desc\"},\n\t\t\t\t\t{ $button: \"add-range\"},\n\t\t\t\t\t{ $button: \"lock-cell\"},\n\t\t\t\t\t{ $button: \"add-dropdown\"}\n\t\t\t\t]},\n\t\t\t\t{template: getText(\"edit\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{$button: \"image\", view: \"ssheet-button\", label: getText(\"image\"), width:sizes.insert},\n\t\t\t\t\t\t{$button: \"add-comment\", view: \"ssheet-button\", label: getText(\"comment\"), width:sizes.insert},\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{$button: \"graph\", view: \"ssheet-button\", label: getText(\"graph\"), width:sizes.insert},\n\t\t\t\t{template: getText(\"insert\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{rows:[\n\t\t\t\t\t\t\t{$button:\"row\"},\n\t\t\t\t\t\t\t{$button:\"column\"}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t{$button:\"hide-gridlines\"},\n\t\t\t\t\t\t\t\t{$button:\"hide-headers\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t{$button:\"freeze-rows\"},\n\t\t\t\t\t\t\t\t{$button:\"freeze-columns\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{template: getText(\"view\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{}\n\t];\n}","import {actions} from \"./toolbar/actions\";\nimport {defaultStyles} from \"./toolbar/defaults\";\nimport {toolbarButtons, getButtons} from \"./toolbar/helpers\";\nimport * as elm from \"./toolbar/all_elements\";\nimport {isCustom} from \"./operations/formats\";\nimport {getStyle, getFormat} from \"./operations/styles\";\n\nconst buttons = {\n\t\"undo-redo\": [\"undo\",\"redo\"],\n\t\"font\": [\"font-family\",\"font-size\",\"font-weight\",\"font-style\",\"text-decoration\",\"color\",\"background\",\"borders\"],\n\t\"align\": [\"text-align\",\"vertical-align\",\"wrap\",\"span\"],\n\t\"format\": [\"format\"]\n};\n\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\tview.attachEvent(\"onCommand\", (action) => {\n\t\tif (action.id == \"toolbar-update\")\n\t\t\tupdateValue(view, action.name, action.value);\n\t});\n\n\tvar elements = [];\n\n\tif(view.config.toolbar){\n\t\tlet allElements =  view.config.toolbar;\n\t\tif(allElements == \"full\"){\n\t\t\tallElements = elm.getAllElements();\n\t\t\tif(webix.isUndefined(view.config.bottombar))\n\t\t\t\tview.config.bottombar = true;\n\t\t}\n\t\telements =   toolbarButtons(view, allElements);\n\t}\n\telse\n\t\telements =   getButtons(view, view.config.buttons || buttons);\n\n\tvar bar = {\n\t\tview:\"toolbar\",\n\t\tcss: \"webix_ssheet_toolbar webix_layout_toolbar\",\n\t\tid:\"bar\",\n\t\tpadding:0,\n\t\telements: elements,\n\t\ton: {\n\t\t\tonChange: function (){\n\t\t\t\tvar source = this.$eventSource;\n\t\t\t\tvar value = source.getValue();\n\t\t\t\tvar name = source.config.name;\n\t\t\t\tif(name == \"format\" && value == \"common\")\n\t\t\t\t\tvalue = \"\";\n\t\t\t\tif(!(name == \"format\" && value == \"custom\"))\n\t\t\t\t\tview.callEvent(\"onStyleSet\", [name, value]);\n\t\t\t},\n\t\t\tonItemClick: function (id){\n\t\t\t\tvar viewId = view.innerId(id);\n\t\t\t\tif (actions[viewId])\n\t\t\t\t\tactions[viewId].call(this, view);\n\t\t\t\telse\n\t\t\t\t\tview.callEvent(\"onCommand\", [{ id: viewId }]);\n\t\t\t}\n\t\t}\n\t};\n\n\tview.callEvent(\"onViewInit\", [\"toolbar\", bar]);\n\treturn bar;\n\n}\n\nfunction ready(view){\n\tview.attachEvent(\"onAfterSelect\", (selected) => setValues(view, selected));\n}\n\nfunction setValues(view, selected) {\n\tconst barStyles = getBarStyles(view, selected);\n\tview.$$(\"bar\").setValues(barStyles);\n}\n\nfunction updateValue(view, name, value){\n\tconst element = view.$$(\"bar\").elements[name];\n\n\tif (element)\n\t\telement.setValue(value);\n}\n\nfunction getBarStyles(view, selected){\n\tconst dropdowns = [\n\t\t\"font-family\",\n\t\t\"font-size\",\n\t\t\"text-align\",\n\t\t\"vertical-align\",\n\t\t\"format\",\n\t\t\"background\",\n\t\t\"color\"\n\t];\n\n\tconst cell = selected[0];\n\tconst barStyles = getCellStyles(view, cell);\n\n\tfor(let i = 1; i < selected.length; i++){\n\t\tconst cellStyle = getCellStyles(view, selected[i]);\n\n\t\tfor(let k = dropdowns.length-1; k >= 0; k--){\n\t\t\tconst property = dropdowns[k];\n\t\t\tif(barStyles[property] != cellStyle[property]){\n\t\t\t\tdelete barStyles[property];\n\t\t\t\tdropdowns.splice(k, 1);\n\t\t\t}\n\t\t}\n\n\t\tif(!dropdowns.length)\n\t\t\tbreak;\n\t}\n\n\treturn barStyles;\n}\n\nfunction getCellStyles(view, cell){\n\tconst span = view.$$(\"cells\").getSpan(cell.row, cell.column);\n\tif(span)\n\t\t[cell.row, cell.column] = span;\n\n\tconst obj = getStyle(view, cell);\n\tconst styles = obj ? webix.copy(obj.props) : {};\n\n\tfor (let i in defaultStyles)\n\t\tif(!styles[i])\n\t\t\tstyles[i] = defaultStyles[i];\n\n\tconst format = getFormat(view, cell.row, cell.column) || \"common\";\n\tstyles.format = isCustom(format) ? \"custom\" : format;\n\n\treturn styles;\n}","import {ui, buttonsMap} from \"./buttons\";\n\nexport function toolbarButtons(view,structure){\n\tvar checkButtons = function(cells){\n\t\tfor(var i =0; i < cells.length; i++){\n\t\t\tvar name = cells[i].$button;\n\t\t\tif (name){\n\t\t\t\tvar base = buttonsMap[name] ? buttonsMap[name](view) : ui.iconButton({name:name});\n\t\t\t\twebix.extend(cells[i], base);\n\t\t\t}\n\t\t\t\n\t\t\tif(cells[i].rows)\n\t\t\t\tcheckButtons(cells[i].rows);\n\t\t\tif(cells[i].cols)\n\t\t\t\tcheckButtons(cells[i].cols);\n\t\t}\n\t};\n\tcheckButtons(structure);\n\treturn structure;\n}\n\nexport function getButtons(view,structure){\n\tvar config = [];\n\tfor(var block in structure){\n\t\tconfig.push(elementsBlock(view, block, structure[block]));\n\t\tconfig.push(ui.separator());\n\t}\n\treturn config;\n}\n\nfunction blockColumns(view, buttons){\n\tvar cols = [];\n\tfor(var i =0; i < buttons.length; i++){\n\t\tlet name = buttons[i];\n\t\tif(typeof name == \"object\"){\n\t\t\tcols.push(name);\n\t\t}\n\t\telse {\n\t\t\tvar base = buttonsMap[name] ? buttonsMap[name](view) : ui.iconButton({name:name});\n\t\t\tcols.push(base);\n\t\t}\n\t}\n\treturn cols;\n}\n\n\nfunction elementsBlock(view, name, columns){\n\tvar block = {\n\t\trows:[\n\t\t\t{\n\t\t\t\tpadding:2,\n\t\t\t\tcols:[{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols: blockColumns(view, columns)\n\t\t\t\t}]\n\t\t\t},\n\t\t\tui.title({title:name})\n\t\t]\n\t};\n\treturn block;\n}","import {getTextSize} from \"./styles\";\n\nexport function selectRow(row, view, endRow){\n\tvar columns = view.$$(\"cells\").config.columns;\n\tvar firstColumn = columns[0].id == \"rowId\" ? 1 : 0;\n\n\tvar start = {\n\t\trow:row,\n\t\tcolumn:columns[firstColumn].id\n\t};\n\tvar last = {\n\t\trow: (endRow || row),\n\t\tcolumn: columns[columns.length-1].id\n\t};\n\n\tif(start.column && last.column)\n\t\t_selectRange(start, last, view);\n}\n\nexport function selectAll(view){\n\tvar order = view.$$(\"cells\").data.order;\n\tvar columns = view.$$(\"cells\").config.columns;\n\tvar firstColumn = columns[0].id == \"rowId\" ? 1 : 0;\n\n\tvar start = {\n\t\trow: order[0],\n\t\tcolumn: columns[firstColumn].id\n\t};\n\tvar last = {\n\t\trow: order[order.length-1],\n\t\tcolumn: columns[columns.length-1].id\n\t};\n\n\tif(start.column && last.column)\n\t\t_selectRange(start, last, view);\n}\n\nexport function selectColumn(column, view, endColumn){\n\tvar order = view.$$(\"cells\").data.order;\n\tvar startRow = order[0];\n\tvar lastRow = order[order.length-1];\n\n\tvar start = {row: startRow, column: column};\n\tvar last = {row: lastRow, column: (endColumn || column) };\n\n\t_selectRange(start, last, view);\n}\n\nexport function isColSelected(column, view){\n\tconst selectedArea = view.$$(\"cells\").getSelectArea();\n\tif (selectedArea){\n\t\tif (column >= selectedArea.start.column && column <= selectedArea.end.column)\n\t\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport function isCellSelected(row, column, view){\n\treturn isRowSelected(row, view) && isColSelected(column, view);\n}\n\nexport function isRowSelected(row, view){\n\tconst selectedArea = view.$$(\"cells\").getSelectArea();\n\tif (selectedArea){\n\t\tif (row >= selectedArea.start.row && row <= selectedArea.end.row)\n\t\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport function selectColumns(column, view) {\n\tconst selectedArea = view.$$(\"cells\").getSelectArea();\n\n\tif (!selectedArea)\n\t\tselectColumn(column, view);\n\telse {\n\t\tlet col1 = Math.min(selectedArea.start.column, selectedArea.end.column, column);\n\t\tlet col2 = Math.max(selectedArea.start.column, selectedArea.end.column, column);\n\t\tselectColumn(col1, view, col2);\n\t}\n}\n\nfunction _selectRange(a, b, view){\n\tview.$$(\"cells\").addSelectArea(a, b);\n}\n\n\nexport function adjustColumn(column, view) {\n\tlet width = 25;\n\tconst columnWidth = view._table.getColumnConfig(column).width;\n\n\tview._table.eachRow(function(row) {\n\t\tconst span = view._table.getSpan(row, column);\n\t\tif(span && span[2] > 1)\n\t\t\treturn;\n\n\t\tconst text = this.getText(row, column);\n\t\tconst style = view.getStyle(row, column);\n\t\tconst css = style ? style.id : \"\";\n\n\t\tif (text.replace(/<\\/?[^>]+(>|$)/g, \"\")) {\n\t\t\tconst size = getTextSize(view, text, css);\n\n\t\t\tif(view.getCellEditor(row, column))\n\t\t\t\tsize.width += 20;\n\t\t\tif(view.getCellFilter(row, column))\n\t\t\t\tsize.width += 20;\n\n\t\t\tif(style && style.props.wrap == \"wrap\" && size.width > columnWidth)\n\t\t\t\tsize.width = columnWidth;\n\t\t\tif (size.width > width)\n\t\t\t\twidth = size.width;\n\t\t}\n\t});\n\tview._table.setColumnWidth(column, width);\n}\n\nexport function adjustRow(row, view) {\n\tlet height = 25;\n\n\tview._table.eachColumn(function(column) {\n\t\tif(column != \"rowId\"){\n\t\t\tconst text = this.getText(row, column);\n\n\t\t\t// if there is text wrap in cell we need to know width to get correct height\n\t\t\tlet width = this.getColumnConfig(column).width;\n\t\t\tconst span = view._table.getSpan(row, column);\n\t\t\tif(span)\n\t\t\t\twidth = view._table.getSpanNode({row:span[0], column:span[1]}).offsetWidth;\n\n\t\t\tlet style = view.getStyle(row, column);\n\t\t\tlet css = style ? style.id : \"\";\n\n\t\t\tif (text.replace(/<\\/?[^>]+(>|$)/g, \"\")) {\n\t\t\t\tlet size = getTextSize(view, text, css, width);\n\t\t\t\tif (size.height > height) height = size.height;\n\t\t\t}\n\t\t}\n\t});\n\tview._table.setRowHeight(row, height);\n}\n\nexport function highlightColRow(start, end, view){\n\tif(!view._table.config.header) return;\n\n\tconst grid = view._table;\n\n\tconst css = \"webix_highlight\";\n\n\tlet sr = start.row, er = end.row, sc = start.column, ec = end.column;\n\n\tconst columns = grid.config.columns;\n\tconst firstColumn = columns[1].id;\n\n\tif(sc == \"rowId\"){\n\t\tif(sc == ec){\n\t\t\tstart.column = sc = firstColumn;\n\t\t\tend.column = ec = columns[ columns.length-1 ].id;\n\t\t}\n\t\telse\n\t\t\tstart.column = sc = firstColumn;\n\t}\n\telse if(ec == \"rowId\")\n\t\tend.column = ec = firstColumn;\n\n\tif(er<sr) [sr, er] = [er, sr];\n\tif(ec<sc) [sc, ec] = [ec, sc];\n\n\tgrid.eachRow(function(row){\n\t\tif(row < sr || row > er)\n\t\t\tgrid.removeCellCss(row, \"rowId\", css, true);\n\t\telse\n\t\t\tgrid.addCellCss(row, \"rowId\", css, true);\n\t});\n\twebix.delay(() => grid.refresh());\n\n\tgrid.eachColumn(function(col){\n\t\tconst node = grid.getHeaderNode(col);\n\t\tif(col == \"rowId\" || !node) return;\n\n\t\tif(col < sc || col > ec)\n\t\t\twebix.html.removeCss(node, css);\n\t\telse\n\t\t\twebix.html.addCss(node, css, true);\n\t});\n}","import group from \"./undo_group\";\n\nexport const lockCss = \"webix_lock\";\n\nexport function init(view){\n\tview._locks = {};\n\tview.attachEvent(\"onReset\", () => reset(view));\n\tview.attachEvent(\"onUndo\", (type, row, column, mode) => {\n\t\tif (type === \"lock\") lockCell(view, row, column, !!mode, true);\n\t});\n\n\tview.attachEvent(\"onCommand\", (cm) => {\n\t\tif (cm.id === \"lock-cell\")\n\t\t\tlock(view);\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n}\n\nfunction reset(view){\n\tview._locks = {};\n}\n\nexport function lockCell(view, row, column, mode, silent){\n\tvar table = view.$$(\"cells\");\n\tif (typeof row === \"object\" && typeof column === \"object\"){\n\t\tgroup.set(function() {\n\t\t\t_mapCellsCalls(row, column, function(row, column){\n\t\t\t\tlockCell(view, row, column, mode, true);\n\t\t\t});\n\t\t});\n\t} else {\n\t\tmode = ((mode === false) ? false : true);\n\t\tvar objrow = view._locks[row] = view._locks[row] || {};\n\t\tobjrow[column] = mode;\n\t\tif (mode)\n\t\t\ttable.addCellCss(row, column, lockCss, true);\n\t\telse\n\t\t\ttable.removeCellCss(row, column, lockCss, true);\n\n\t\tview.callEvent(\"onAction\", [\"lock\", { row, column, value: !mode, newValue: mode }]);\n\t}\n\n\tif (!silent)\n\t\ttable.refresh();\n}\n\nfunction _mapCellsCalls(start, end, handler,master){\n\tfor (let x = start.row; x<=end.row; x++)\n\t\tfor (let y = start.column; y<=end.column; y++)\n\t\t\thandler.call(master||this, x, y);\n}\n\nexport function isCellLocked(view, row, column){\n\treturn view._locks[row]?view._locks[row][column]:false;\n}\n\nexport function serialize(view,data){\n\tvar row, column,\n\t\tlocked = [];\n\tfor(row in view._locks){\n\t\tfor(column in view._locks[row])\n\t\t\tif(view._locks[row][column])\n\t\t\t\tlocked.push([row,column]);\n\t}\n\tdata.locked = locked;\n}\n\nexport function load(view,data){\n\tvar i,\n\t\tlocked = data.locked;\n\n\tif(locked)\n\t\tfor(i = 0; i < locked.length; i++)\n\t\t\tlockCell(view, locked[i][0],locked[i][1],true, true);\n}\n\nfunction lock(view){\n\tvar block = view.$$(\"cells\").getSelectArea();\n\tif (block){\n\t\tvar mode = view.isCellLocked(block.start.row, block.start.column);\n\t\tview.lockCell(block.start, block.end, !mode);\n\t}\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet locked = data.locked,\n\t\ti = locked.length;\n\n\tif(inc){\n\t\twhile(i--){\n\t\t\tlet [row,column] = locked[i];\n\t\t\tif(row && name == \"row\" && row>= start.row || column && name == \"column\" && column >= start.column){\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc)\t//delete lock mark if row was deleted\n\t\t\t\t\t\tlocked.splice(i,1);\n\t\t\t\t\telse\t\t\t\t\t\t//update mark position if upper row was deleted\n\t\t\t\t\t\tlocked[i][0] = row*1 + inc;\n\t\t\t\t} else if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\tlocked.splice(i, 1);\n\t\t\t\t\t} else \n\t\t\t\t\t\tlocked[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}","import {lockCss} from \"./lock_cell\";\nimport {save} from \"./save\";\nimport * as arr from \"../helpers/array\";\n\nexport function init(view){\n\tview.attachEvent(\"onStyleChange\", (row, column, style) => {\n\t\tvar span = getSpan(view, row, column);\n\t\tif (span){\n\t\t\tvar extraCss = getExtraCss(view, row, column);\n\t\t\tspan[3] = (style ? style.id : \"\") + (extraCss ? (\" \" + extraCss) : \"\");\n\t\t}\n\t});\n\n\tview.attachEvent(\"onDataParse\", (data) => {\n\t\tparse(view, data);\n\t});\n\n\tview.attachEvent(\"onDataSerialize\", (data) => {\n\t\tserialize(view, data);\n\t});\n\t\n\tview.attachEvent(\"onUndo\", (type, row, column, value, isUndo) => {\n\t\tif(type == \"span\" || type == \"split\"){\n\t\t\tif (type == \"span\") \n\t\t\t\tisUndo = !isUndo;\n\t\t\tundoSpan(view, row, column, value, isUndo);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAction\", (name, options) => {\n\t\tif(name == \"lock\")\n\t\t\tsetSpanCss(view, options.row, options.column, lockCss, options.newValue);\n\t\telse if(name == \"before-grid-change\")\n\t\t\tupdatePosition(view, options.name, options.inc, options.data, options.start);\n\t\telse if(name == \"check-borders\")\n\t\t\treturn checkSpanBorders(view, options.row, options.column, options.area, options.mode);\n\t});\n}\n\nfunction getSpan(view, row, column){\n\tvar item = view.$$(\"cells\").getSpan()[row];\n\tif (item)\n\t\treturn item[column];\n}\n\nfunction parse(view, data){\n\tif (data.spans)\n\t\tfor (var i = 0; i < data.spans.length; i++) {\n\t\t\tvar span = data.spans[i];\n\t\t\taddSpan( view,\n\t\t\t\t{ row: span[0], column: span[1] },\n\t\t\t\tspan[2]*1,\n\t\t\t\tspan[3]*1,\n\t\t\t\ttrue \n\t\t\t);\n\t\t}\n}\n\nfunction serialize(view, data){\n\tvar spans = [];\n\tvar pull = view.$$(\"cells\").getSpan();\n\tif (pull){\n\t\tfor (var rid in pull){\n\t\t\tvar row = pull[rid];\n\t\t\tfor (var cid in row){\n\t\t\t\tvar span = row[cid];\n\t\t\t\tspans.push([rid*1, cid*1, span[0], span[1]]);\n\t\t\t}\n\t\t}\n\n\t\tdata.spans = spans;\n\t}\n}\n\nexport function addSpan(view, cell, x, y, silent){\n\tif (x<2 && y<2) return;\n\n\tif(silent || view.callEvent(\"onBeforeSpan\", [cell.row, cell.column, [x, y]])){\n\t\tconst obj = view._mPage.getCell(cell.row-1, cell.column-1);\n\t\tlet css = ( obj && obj.style ) || \"\";\n\t\tvar extraCss = getExtraCss(view, cell.row, cell.column);\n\t\tif (extraCss)\n\t\t\tcss += \" \" + extraCss;\n\n\t\tsetSpanValue(view, cell, x, y);\n\t\tview.$$(\"cells\").addSpan(cell.row, cell.column, x, y, null, css);\n\t\tif (!silent){\n\t\t\tview.callEvent(\"onAfterSpan\", [cell.row, cell.column, [x, y]]);\n\t\t\tsave(view, \"spans\", {\n\t\t\t\trow:cell.row, column: cell.column,\n\t\t\t\tx:x, y:y\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport function removeSpan(view, cell){\n\tvar span = view.$$(\"cells\").getSpan(cell.row, cell.column);\n\tif(span && view.callEvent(\"onBeforeSplit\", [ cell.row, cell.column, [span[2], span[3]] ])){\n\t\tview.$$(\"cells\").removeSpan(cell.row, cell.column);\n\t\tview.callEvent(\"onAfterSplit\", [ cell.row, cell.column, [span[2], span[3]] ]);\n\t\tsave(view, \"spans\", {\n\t\t\trow:cell.row, column: cell.column,\n\t\t\tx:0, y:0\n\t\t});\n\t}\n}\n\nexport function getRange(sel){\n\tvar lx, ly, rx, ry;\n\trx = ry = 0;\n\tlx = ly = Infinity;\n\n\tfor (var i=0; i<sel.length; i++){\n\t\tvar cx = sel[i].column*1;\n\t\tvar cy = sel[i].row*1;\n\n\t\tlx = Math.min(cx, lx);\n\t\trx = Math.max(cx, rx);\n\t\tly = Math.min(cy, ly);\n\t\try = Math.max(cy, ry);\n\t}\n\n\treturn {\n\t\tcell:{ row:ly, column:lx },\n\t\tx: rx-lx+1,\n\t\ty: ry-ly+1\n\t};\n}\n\nexport function setSpanCss(view, row, column, css, add){\n\tconst span = getSpan(view, row, column);\n\tif (span){\n\t\tif (add){\n\t\t\tif (span[3].indexOf(css) == -1)\n\t\t\t\tspan[3] += \" \" + css;\n\t\t} else {\n\t\t\tspan[3] = span[3].replace(\" \" + css, \"\");\n\t\t}\n\t}\n}\n\nfunction getExtraCss(view, row, column){\n\tlet extraCss = [];\n\tif(view.getCellEditor(row, column))\n\t\textraCss.push(\"ss_editor\");\n\tif(view.getCellFilter(row, column))\n\t\textraCss.push(\"ss_filter\");\n\treturn extraCss.join(\" \");\n}\n\nfunction undoSpan(view,row, column,value,isUndo){\n\tif(isUndo){\n\t\tremoveSpan(view,{row: row, column: column});\n\t}\n\telse{\n\t\taddSpan(view, {row: row, column: column}, value[0], value[1]);\n\t}\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet spans = data.spans;\n\tif(inc){\n\t\tfor(let i = spans.length-1;i >=0;i--){\n\t\t\tlet [row,column] = spans[i];\n\n\t\t\tif(inc < 0){//deleting\n\t\t\t\tif(name == \"row\" && row <= start.row-inc-1)\n\t\t\t\t\tinc = start.row - spans[i][0];\n\t\t\t\telse if (name == \"column\" && column <= start.column-inc-1)\n\t\t\t\t\tinc = start.column - spans[i][1];\n\t\t\t}\n\n\t\t\tif(name == \"row\" && row>= start.row || name == \"column\" && column >= start.column){\n\t\t\t\tspans[i][0] =  name == \"row\"?row*1 + inc:row;\n\t\t\t\tspans[i][1] = name == \"column\"?column*1 + inc:column;\n\t\t\t}\n\t\t}\n\t}\n}\n\nvar borderChecks = {\n\t\"border-right\":\t\tfunction(row, column, span, area){\n\t\treturn area.end.column == column+span[0]-1;\n\t},\n\t\"border-bottom\":\tfunction(row, column, span, area){\n\t\treturn area.end.row == row+span[1]-1;\n\t}\n};\n\nfunction checkSpanBorders(view, row, column, area, mode){\n\tvar span = getSpan(view, row, column);\n\treturn span&&borderChecks[mode]?borderChecks[mode](row, column, span, area):false;\n}\n\n// clear merged cells except the first one\nfunction setSpanValue(view, cell, x, y){\n\tvar i,j,value,\n\t\trow = cell.row*1,\n\t\tcolumn = cell.column*1,\n\t\tisEmpty = !view.getCellValue(row,column);\n\tfor(i = row; i < row+y; i++){\n\t\tfor(j = column; j < column+x; j++) {\n\t\t\tvalue = view.getCellValue(i,j);\n\t\t\tif(value!==\"\" && (j != column || i != row)){\n\t\t\t\tif(isEmpty){\n\t\t\t\t\tisEmpty = false;\n\t\t\t\t\tview.setCellValue(row,column,value);\n\t\t\t\t}\n\t\t\t\tview.setCellValue(i,j,\"\");\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function adjustSpan (span, action, start, end, view, data, spanData){\n\tvar length = action.group == \"row\" ? span[3] : span[2];\n\tvar checkSpan = action.group == \"row\" ? [span[0]*1, span[0]*1+span[3]-1] : [span[1]*1, span[1]*1+span[2]-1];\n\tvar selection = action.group == \"row\" ? [start.row, end.row] : [start.column, end.column];\n\n\t//if we add, the number of selected rows/cols is added to span, so we need original selection length\n\tvar inc = selection[1] - selection[0] + 1;\n\n\tselection[0] = Math.max(selection[0], checkSpan[0]);\n\tselection[1] = Math.min(selection[1], checkSpan[1]);\n\n\tvar isFirstCell = selection[0] == checkSpan[0];\n\n\tif(selection[0] <= selection[1]){ //selection is in span\n\t\tif(action.id == \"del\") //if we delete, only rows/cols included into span\n\t\t\tinc = (selection[1] - selection[0]+ 1) * -1;\n\t\t//delete smth which starts as span and less than it's length\n\t\tif(action.id == \"del\" && isFirstCell && length > -1*inc){\n\t\t\tconst item = arr.find(data, arr => arr[0] == span[0] && arr[1] == span[1]);\n\t\t\tif(item)\n\t\t\t\tspanData.push(item);\n\t\t}\n\n\t\tif(!(isFirstCell && action.id == \"add\")){\n\t\t\tspan[2] = action.group == \"column\" ? span[2]+inc : span[2];\n\t\t\tspan[3] = action.group == \"row\" ? span[3]+inc : span[3];\n\t\t}\n\t}\n\treturn span;\n}\n\nexport function pasteSpan(view, extra, row, col, cutted, translate){\n\t//existing span\n\tvar s = view._table.getSpan(row, col);\n\tif(extra && extra.span){\n\t\tvar span = extra.span;\n\t\t//if we are on start position for the future span\n\t\tif(row == span[0]*1+translate.row && col == span[1]*1+translate.column){\n\t\t\t//delete spans in future paste zone \n\t\t\tview._table.mapCells(row, col, span[3], span[2], (value, rid, cid) => {\n\t\t\t\ts = view._table.getSpan(rid,cid);\n\t\t\t\tif(s) removeSpan(view, {row:s[0], column:s[1]});\n\t\t\t}, true);\n\t\t\taddSpan(view, {row:row, column:col}, span[2], span[3]);\n\t\t\tif(cutted === 1)\n\t\t\t\tremoveSpan(view, {row:extra.row, column:extra.col});\n\t\t}\n\t}\n\telse if(s)\n\t\tremoveSpan(view, {row:s[0], column:s[1]});\n}","import {isDateInvalid} from \"../operations/formats\";\n\nfunction getText(text){\n\tvar locale = webix.i18n.spreadsheet.labels;\n\treturn locale[text] || text;\n}\nexport function getDefaultStyles(){\n\treturn [\n\t\t{name: getText(\"normal\"), css: \"webix_ssheet_condition_regular\"},\n\t\t{name: getText(\"neutral\"), css: \"webix_ssheet_condition_neutral\"},\n\t\t{name: getText(\"bad\"), css: \"webix_ssheet_condition_bad\"},\n\t\t{name: getText(\"good\"), css: \"webix_ssheet_condition_good\"}\n\t];\n}\n\nfunction isDate(value){\n\treturn value && !isNaN(value) && !isDateInvalid(value);\n}\n\nexport const conditions = {\n\tnumber:[\n\t\t{ id:\"greater\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a !== \"\" && (a*1 > b*1);\n\t\t}},\n\t\t{ id:\"less\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a !== \"\" && (a*1 < b*1);\n\t\t}},\n\t\t{ id:\"greaterOrEqual\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a !== \"\" && (a*1 >= b*1);\n\t\t}},\n\t\t{ id:\"lessOrEqual\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a !== \"\" && (a*1 <= b*1);\n\t\t}},\n\t\t{ id:\"equal\", batch:\"text\", handler:function(a,b){ return a == b; }},\n\t\t{ id:\"notEqual\", batch:\"text\", handler:function(a,b){ return a != b; }},\n\t\t{ id:\"contains\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().indexOf(b.toString().toLowerCase()) !== -1;\n\t\t}},\n\t\t{ id:\"notContains\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().indexOf(b.toString().toLowerCase()) === -1;\n\t\t}}\n\t],\n\ttext: [\n\t\t{ id:\"contains\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().indexOf(b.toString().toLowerCase()) !== -1;\n\t\t}},\n\t\t{ id:\"notContains\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().indexOf(b.toString().toLowerCase()) === -1;\n\t\t}},\n\t\t{ id:\"equal\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase() === b.toString().toLowerCase();\n\t\t}},\n\t\t{ id:\"notEqual\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase() !== b.toString().toLowerCase();\n\t\t}},\n\t\t{ id:\"beginsWith\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().lastIndexOf(b.toString().toLowerCase(), 0) === 0;\n\t\t}},\n\t\t{ id:\"notBeginsWith\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().lastIndexOf(b.toString().toLowerCase(), 0) !== 0;\n\t\t}},\n\t\t{ id:\"endsWith\", batch:\"text\", handler:function(a,b){\n\t\t\ta = a.toString();\n\t\t\tb = b.toString();\n\t\t\treturn a.toLowerCase().indexOf(b.toLowerCase(), a.length - b.length) !== -1;\n\t\t}},\n\t\t{ id:\"notEndsWith\", batch:\"text\", handler:function(a,b){\n\t\t\ta = a.toString();\n\t\t\tb = b.toString();\n\t\t\treturn a.toLowerCase().indexOf(b.toLowerCase(), a.length - b.length) === -1;\n\t\t}}\n\t],\n\tdate: [\n\t\t{ id:\"greater\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a > b;\n\t\t}},\n\t\t{ id:\"less\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a < b;\n\t\t}},\n\t\t{ id:\"greaterOrEqual\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a >= b;\n\t\t}},\n\t\t{ id:\"lessOrEqual\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a <= b;\n\t\t}},\n\t\t{ id:\"equal\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a == b;\n\t\t}},\n\t\t{ id:\"notEqual\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn !isDate(a) || a != b;\n\t\t}},\n\t\t{ id:\"between\", batch: \"daterangepicker\", handler: function(a, b){\n\t\t\tif (!isDate(a)) return false;\n\t\t\treturn (!b.start || a > b.start) && (!b.end || a < b.end);\n\t\t}},\n\t\t{ id:\"notBetween\", batch: \"daterangepicker\", handler: function(a, b){\n\t\t\tif (!isDate(a)) return false;\n\t\t\treturn (!b.start || a <= b.start) || (!b.end || a >= b.end);\n\t\t}}\n\t]\n};","import group from \"./undo_group\";\nimport {eachRange} from \"../helpers/column_names\";\nimport {setSpanCss} from \"./spans\";\nimport {conditions} from \"../helpers/conditional\";\nimport {getType} from \"./types\";\nimport * as arr from \"../helpers/array\";\n\nexport function init(view){\n\tview.conditions = {\n\t\t_empty:true,\n\t\t_pull: {},\n\t\thandlers: createRules(),\n\t\tadd: function(rId, cId, cond, val, style){\n\t\t\tadd.apply(this, [view, rId, cId, cond, val, style]);\n\t\t},\n\t\tupdate: function(r, c, data){\n\t\t\tupdate.apply(this, [view, r, c, data]);\n\t\t},\n\t\tremove,\n\t\tget,\n\t\tparse,\n\t\tserialize,\n\t\tclear\n\t};\n\n\tview.attachEvent(\"onConditionSet\", (data) => _setCondition(view, data));\n\n\tview.attachEvent(\"onUndo\", (type_action, row, column, value) => {\n\t\tif(type_action == \"condition\")\n\t\t\t_undoCondition(view, row, column, value);\n\t});\n\n\tview.attachEvent(\"onDataSerialize\", (data) => _serialize(view, data));\n\tview.attachEvent(\"onDataParse\", (data) => _parse(view, data));\n\n\tview.attachEvent(\"onReset\", () => view.conditions.clear() );\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n\n\treset(view);\n}\n\nfunction createRules(){\n\tconst rules = webix.copy(conditions);\n\trules.number = rules.number.concat([\n\t\t{ id:\"between\", handler: function(a, b){\n\t\t\treturn (!b.start || a > b.start) && (!b.end || a < b.end);\n\t\t}},\n\t\t{ id:\"notBetween\", handler: function(a, b){\n\t\t\treturn (!b.start || a <= b.start) || (!b.end || a >= b.end);\n\t\t}}\n\t]);\n\treturn rules;\n}\n\nfunction getCellValue(view, value){\n\tif(isNaN(value*1)){\n\t\tif (value.charAt(0) == \"=\" && value.length > 1){\n\t\t\tvalue = view._mData.getStore().exec(value.substring(1));\n\t\t\tif(value === null)\n\t\t\t\tvalue = \"\";\n\t\t}\n\t}\n\telse {\n\t\tvalue = value*1;\n\t}\n\treturn value;\n}\n\nfunction reset(view){\n\tview.conditions.clear();\n}\n\nfunction _setCondition(view, data){\n\tgroup.set(function(){\n\t\tview.eachSelectedCell((cell) => {\n\t\t\tconst collection = view.conditions.get(cell.row, cell.column);\n\t\t\tif(collection)\n\t\t\t\tfor (let i = 0; i < collection.length; i++)\n\t\t\t\t\tsetSpanCss(view, cell.row, cell.column, collection[i][2], false);\n\t\t\t_changeCondition(\"update\", cell.row, cell.column, (collection||null), data, view);\n\t\t});\n\t});\n\tview.refresh();\n}\n\nfunction _undoCondition(view, row, column, value){\n\tif(view.conditions.get(row, column))\n\t\tview.conditions.remove(row, column);\n\tif(value)\n\t\tview.conditions.update(row, column, value);\n}\n\nfunction _serialize(view, obj){\n\tobj.conditions = view.conditions.serialize();\n}\n\nfunction _parse(view, obj){\n\tview.conditions.parse(obj.conditions);\n}\n\nexport function getConditionCss(view, row, column, rendered){\n\tlet css = \"\";\n\n\tif (!view.conditions._empty){\n\t\tconst collection = view.conditions.get(row, column);\n\t\tif(collection){\n\t\t\tconst span = view.$$(\"cells\").getSpan(row, column);\n\t\t\tlet value = view.getCellValue(row,column,false);\n\t\t\tif(!value && value !== 0)\n\t\t\t\tvalue = \"\";\n\n\t\t\tlet type = getType(view, row, column);\n\t\t\tif(!type || type == \"string\")\n\t\t\t\ttype = \"text\";\n\n\t\t\tfor (let i = collection.length - 1; i >= 0; i--){\n\t\t\t\tlet currentValue = value;\n\t\t\t\tconst rule = collection[i][0];\n\t\t\t\tconst handlers = view.conditions.handlers;\n\t\t\t\tlet handler;\n\n\t\t\t\tlet checkOrder = [\"text\", type, \"number\", \"date\"];\n\t\t\t\tcheckOrder = checkOrder.filter((v, i) => checkOrder.indexOf(v) == i);\n\n\t\t\t\tfor(let k = 0; k < checkOrder.length; k++){\n\t\t\t\t\tconst checkType = checkOrder[k];\n\n\t\t\t\t\thandler = arr.find(handlers[checkType], obj => obj.id == rule);\n\t\t\t\t\tif(handler){\n\t\t\t\t\t\thandler = handler.handler;\n\t\t\t\t\t\tif(checkType == \"text\" && rule != \"equal\" && rule != \"notEqual\")\n\t\t\t\t\t\t\tcurrentValue = rendered;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet compare = collection[i][1];\n\t\t\t\tif(webix.isArray(compare))\n\t\t\t\t\tcompare = {\n\t\t\t\t\t\tstart: getCellValue(view, compare[0]),\n\t\t\t\t\t\tend: getCellValue(view, compare[1])\n\t\t\t\t\t};\n\t\t\t\telse\n\t\t\t\t\tcompare = getCellValue(view, compare);\n\n\t\t\t\tif(!css && handler && handler(currentValue, compare)){\n\t\t\t\t\tcss = collection[i][2];\n\t\t\t\t\tif(!span)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tsetSpanCss(view, row, column, collection[i][2], true);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tsetSpanCss(view, row, column, collection[i][2], false);\n\t\t\t}\n\t\t}\n\t}\n\treturn css;\n}\n\n\nfunction addEmptyCollection(pull, row, column, state){\n\tstate._empty = false;\n\tif(!pull[row])\n\t\tpull[row] = {};\n\tif(!pull[row][column])\n\t\tpull[row][column] = [];\n\treturn pull[row][column];\n}\n\n\nfunction parse(data){\n\t//backward compatibility\n\tconst oldConditions = {\n\t\t\">\": \"greater\",\n\t\t\"<\": \"less\",\n\t\t\"=\": \"equal\",\n\t\t\"!=\": \"notEqual\",\n\t\t\"<>\": \"between\"\n\t};\n\n\tthis._empty = true;\n\tif (!data) return;\n\n\tlet i = data.length;\n\twhile(i--){\n\t\tconst c = data[i];\n\t\tconst collection = addEmptyCollection(this._pull,c[0],c[1],this);\n\t\tc[2] = oldConditions[ c[2] ] || c[2];\n\t\tcollection.push([c[2],c[3],c[4]]);\n\t}\n}\n\nfunction clear(){\n\tthis._pull = {};\n}\n\nfunction update(view, row, column, newData){\n\tvar collection = this.get(row, column);\n\tif(!collection)\n\t\taddEmptyCollection(this._pull, row, column, this);\n\n\tnewData.map(item => _normalizeValue(view, item) );\n\tthis._pull[row][column] = newData;\n}\n\nfunction get(rowId, columnId){\n\tif(!rowId)\n\t\treturn this._pull;\n\tif(!columnId)\n\t\treturn this._pull[rowId];\n\treturn this._pull[rowId]?this._pull[rowId][columnId]:null;\n}\n\nfunction add(view, rowId, columnId, condition, value, style){\n\tconst collection = addEmptyCollection(this._pull, rowId, columnId, this);\n\tcollection.push( _normalizeValue(view, [condition, value, style]) );\n}\n\nfunction remove(rowId, columnId){\n\tvar collection = this.get(rowId, columnId);\n\tif(collection)\n\t\tdelete this._pull[rowId][columnId];\n}\n\nfunction serialize(){\n\tvar column, condition, i, row,\n\t\tdata = [];\n\n\tfor( row in this._pull)\n\t\tfor( column in this._pull[row])\n\t\t\tfor(i=0; i < this._pull[row][column].length; i++){\n\t\t\t\tcondition = this._pull[row][column][i];\n\t\t\t\tdata.push([row,column, condition[0],condition[1],condition[2]]);\n\t\t\t}\n\n\treturn data;\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet conditions = data.conditions,\n\t\ti = conditions.length;\n\n\tif(inc){\n\t\twhile(i--){\n\t\t\tlet [row,column] = conditions[i];\n\t\t\tif(name == \"row\" && row>= start.row || name == \"column\" && column >= start.column){\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc)\t//delete lock mark if row was deleted\n\t\t\t\t\t\tconditions.splice(i,1);\n\t\t\t\t\telse\t\t\t\t\t\t//update mark position if upper row was deleted\n\t\t\t\t\t\tconditions[i][0] = row*1 + inc;\n\t\t\t\t} else if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\tconditions.splice(i, 1);\n\t\t\t\t\t} else \n\t\t\t\t\t\tconditions[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function clearConditionalFormats(view, range){\n\tgroup.set(function(){\n\t\teachRange(range, view, function(view, cell){\n\t\t\tvar condition = view.conditions.get(cell.row, cell.column);\n\t\t\tif(condition)\n\t\t\t\t_changeCondition(\"remove\", cell.row, cell.column, condition, null, view);\t\t\t\t\n\t\t});\n\t\tview.refresh();\n\t});\n}\n\nexport function pasteCondition(view, extra, row, col, cutted){\n\tvar condition = extra.condition;\n\tvar collection = view.conditions.get(row,col);\n\t_changeCondition(\"update\", row, col, (collection||null), condition, view);\n\tif(cutted === 1)\n\t\t_changeCondition(\"remove\", extra.row, extra.col, condition, null, view);\n}\n\nexport function _changeCondition(name, row, column, oldCondition, newCondition, view){\n\tif (view.callEvent(\"onBeforeConditionSet\", [row, column, oldCondition, newCondition])){\n\t\tview.conditions[name].apply(view.conditions, [row, column, newCondition]);\n\t\tview.callEvent(\"onAfterConditionSet\", [row, column, oldCondition, newCondition]);\n\t}\n}\n\nfunction _normalizeValue(view, condition){\n\tconst val = condition[1];\n\tif(val[0] == \"=\")\n\t\tcondition[1] = view._mData.getStore().parse(val).source; //fixes formula\n\treturn condition;\n}","import * as cop from \"./operations/column_operations\";\nimport {getConditionCss} from \"./operations/conditional_formats\";\nimport * as nms from \"./helpers/column_names\";\nimport * as fmt from \"./operations/formats\";\n\nexport function init(view, extra){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\tvar datatable = {\n\t\tview:\"datatable\", id:\"cells\", css:\"webix_ssheet_table webix_data_border wss_\"+view.$index,\n\t\theaderRowHeight: webix.skin.$name == \"contrast\" || webix.skin.$name == \"flat\" ? 24 : 20,\n\t\tspans: true,\n\t\tleftSplit: 1,\n\t\tareaselect:true,\n\t\tminColumnWidth:38,\n\t\teditable:true,\n\t\teditaction:(extra.liveEditor ? \"custom\" : \"dblclick\"),\n\t\tminRowHeight:1,\n\t\tnavigation:true\n\t};\n\n\tif (extra)\n\t\tdatatable = webix.extend(datatable, extra, true);\n\n\treturn datatable;\n}\n\nfunction ready(view){\n\tvar grid = view._table;\n\n\tvar showCommentHandler = webix.event(document.body, \"mousemove\", function(){\n\t\tvar thread;\n\t\treturn function(e) {\n\t\t\tclearTimeout(thread);\n\t\t\tthread = webix.delay(function(e){\n\t\t\t\tif(view.comments._activeComment.editStatus)\n\t\t\t\t\treturn;\n\n\t\t\t\tvar cell = grid.locate(e);\n\t\t\t\tvar visible = view.comments.commentsView && view.comments.commentsView.isVisible();\n\n\t\t\t\tif(cell && view.comments.get(cell.row, cell.column)){\n\t\t\t\t\tvar activeCell = view.comments._activeComment.cell;\n\t\t\t\t\tif((activeCell && (activeCell.row != cell.row || activeCell.column != cell.column)) || !visible)\n\t\t\t\t\t\tview.callEvent(\"onCommand\",[{id: \"add-comment\", cell, viewonly: true }]);\n\t\t\t\t}\n\t\t\t\telse if(visible && !view.comments.commentsView.$view.contains(e.target))\n\t\t\t\t\tview.callEvent(\"onCommentHide\", []);\n\t\t\t}, true, [e], 250);\n\t\t};\n\t}());\n\n\t//in grid math\n\tif (view.config.math){\n\t\tgrid.config.editMath = true;\n\t}\n\n\t//saving value after edit\n\tgrid.attachEvent(\"onBeforeEditStop\", (st, ed) => {\n\t\tgrid.$anyKey = false;\n\t\t//ignore empty cells\n\t\tif (st.old === webix.undefined && st.value === \"\") return;\n\n\t\tif (st.value != st.old){\n\t\t\tview.setCellValue(ed.row, ed.column, st.value);\n\t\t\tgrid.refresh();\n\t\t}\n\t\tst.value = st.old;\n\t});\n\n\tgrid.attachEvent(\"onEnter\", function(ev){\n\t\tif (grid.getEditor()){\n\t\t\twebix.delay(function(){\n\t\t\t\tgrid.moveSelection(\"down\");\n\t\t\t});\n\t\t}\n\t\twebix.html.preventEvent(ev);\n\t});\n\n\t//prevent editing of locked cells\n\tview.attachEvent(\"onBeforeEditStart\", (row, column) => !view.isCellLocked(row, column));\n\tgrid.attachEvent(\"onAfterEditStart\", ({row, column}) => {\n\t\tlet v = view.getCellValue(row, column);\n\n\t\tif(grid.$anyKey){\n\t\t\tgrid.$anyKey = false;\n\t\t\tv = \"\";\n\t\t}\n\n\t\tgrid.getEditor().setValue(v);\n\t});\n\tgrid.attachEvent(\"onBeforeEditStart\", (editor) => \n\t\tview.callEvent(\"onBeforeEditStart\", [editor.row, editor.column]) );\n\n\t//column drag event checking\n\tlet dragStartColumn;\n\tlet dragEndColumn;\n\n\t//column and row selection\n\tgrid.attachEvent(\"onBeforeSelect\", (id) => id.column != \"rowId\" );\n\tgrid.attachEvent(\"onBeforeBlockSelect\", (start, end, finalStep) => {\n\t\tcop.highlightColRow(\n\t\t\tfinalStep ? start : webix.copy(start),\n\t\t\tfinalStep ? end : webix.copy(end),\n\t\t\tview\n\t\t);\n\t});\n\n\tfunction highlightHeaders(){\n\t\tlet ids = grid.getSelectedId(true);\n\t\tif(ids.length){\n\t\t\tlet start = ids[0];\n\t\t\tlet end = ids[ids.length-1]?ids[ids.length-1]:ids[0];\n\t\t\tcop.highlightColRow(start, end, view);\n\t\t}\n\t\telse {\n\t\t\tlet data = {row:0, column:0};\n\t\t\tcop.highlightColRow(data, data, view);\n\t\t}\n\t}\n\n\tgrid.attachEvent(\"onSelectChange\", () => highlightHeaders());\n\tgrid.attachEvent(\"onAfterColumnShow\", () => {\n\t\twebix.delay(() => highlightHeaders());\n\t});\n\tgrid.attachEvent(\"onColumnResize\", () => {\n\t\twebix.delay(() => highlightHeaders());\n\t});\n\n\twebix.event(grid.$view.firstChild, \"mousedown\", e => {\n\t\tconst resizeColumn = grid.config.resizeColumn;\n\t\tconst col = grid.locate(e);\n\n\t\tif(col && col.cind){\n\t\t\tif(resizeColumn){\n\t\t\t\tconst dx = grid.getColumnConfig(col.column).width;\n\t\t\t\tconst pos = webix.html.posRelative(e);\n\t\t\t\tif(pos.x < resizeColumn.size || dx-pos.x < resizeColumn.size+1)\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t\tdragStartColumn = col.cind;\n\t\t}\n\t});\n\n\twebix.event(grid.$view.firstChild, \"mousemove\", e => {\n\t\tif(dragStartColumn){\n\t\t\tconst col = grid.locate(e);\n\n\t\t\tif(col){\n\t\t\t\tdragEndColumn = col.cind;\n\t\t\t\tcop.highlightColRow(\n\t\t\t\t\t{column: grid.columnId(dragStartColumn)},\n\t\t\t\t\t{column: grid.columnId(dragEndColumn||1)},\n\t\t\t\t\tview\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t});\n\n\tconst selectColumnHandler = webix.event(document.body, \"mouseup\", () => {\n\t\tif(dragStartColumn){\n\t\t\tif(dragEndColumn != null){\n\t\t\t\tcop.selectColumn(\n\t\t\t\t\tgrid.columnId(dragStartColumn),\n\t\t\t\t\tview,\n\t\t\t\t\tgrid.columnId(dragEndColumn||1)\n\t\t\t\t);\n\t\t\t\tdragEndColumn = null;\n\t\t\t}\n\t\t\tdragStartColumn = null;\n\t\t}\n\t});\n\n\tgrid.attachEvent(\"onItemDblClick\", (id) => {\n\t\tif (id.column === \"rowId\")\n\t\t\tcop.adjustRow(id.row, view);\n\t});\n\n\tlet lastHeaderClick = 0;\n\tgrid.attachEvent(\"onHeaderClick\", (id, e) => {\n\t\tif(id.column == \"rowId\"){\n\t\t\tcop.selectAll(view);\n\t\t\treturn;\n\t\t}\n\t\tlet headerClick = new Date();\n\t\tlet dblClick = (headerClick - lastHeaderClick <= 300);\n\n\t\tif (dblClick) {\n\t\t\tcop.adjustColumn(id.column, view);\n\t\t} else {\n\t\t\tlastHeaderClick = headerClick;\n\t\t\tif (e.shiftKey) {\n\t\t\t\tcop.selectColumns(id.column, view);\n\t\t\t} else {\n\t\t\t\tcop.selectColumn(id.column, view);\n\t\t\t}\n\t\t}\n\t});\n\n\t//select rows by shift click\n\tvar lastClickedRow = null;\n\tgrid.attachEvent(\"onItemClick\", (cell, e) => {\n\t\tif (cell.column === \"rowId\") {\n\t\t\tif (!e.shiftKey)\n\t\t\t\tcop.selectRow(cell.row, view);\n\t\t\telse {\n\t\t\t\tif (!lastClickedRow)\n\t\t\t\t\tcop.selectRow(cell.row, view);\n\t\t\t\telse\n\t\t\t\t\tcop.selectRow(lastClickedRow, view, cell.row);\n\t\t\t}\n\t\t\tlastClickedRow = cell.row;\n\t\t}\n\t});\n\n\t//reset API\n\tview.attachEvent(\"onReset\", () => reset(view));\n\n\tview.attachEvent(\"onBeforeSheetShow\", () => grid.editStop());\n\n\tgrid.attachEvent(\"onBlur\", function(){\n\t\t//after focus moved out, check and if it is somewhere\n\t\t//on the spreadsheet controls them move focus back to datatable\n\t\twebix.delay(function(){\n\t\t\tvar target = document.activeElement;\n\n\t\t\tif (target && target.tagName == \"INPUT\") return;\n\n\t\t\tvar focus = webix.UIManager.getFocus();\n\t\t\tvar need_focus = focus &&\n\t\t\t\tfocus != grid &&\n\t\t\t\tfocus.getTopParentView &&\n\t\t\t\tfocus.getTopParentView() === view;\n\n\t\t\tif (need_focus)\n\t\t\t\twebix.UIManager.setFocus(grid);\n\n\t\t}, this, [], 100);\n\t});\n\n\tsetDefaultCss(view);\n\n\tview.attachEvent(\"onDestruct\", () => {\n\t\twebix.eventRemove(showCommentHandler);\n\t\twebix.eventRemove(selectColumnHandler);\n\t});\n}\n\nexport function cell_template(view, obj, common, _v, column, valueOnly){\n\tconst col = column.id;\n\tconst row = obj.id;\n\n\tif (!view._mPage) return \"\";\n\tconst cell = view._mPage.getCell(row-1, col-1);\n\n\tlet value = cell ? cell.value : \"\";\n\tconst format = cell ? cell.format : \"\";\n\n\tconst math = view.getCellValue(row, col);\n\tif(math != value){\n\t\tconst locale = webix.i18n.spreadsheet.table;\n\t\tif(value == \"#REF!\")\n\t\t\tvalue = locale[\"math-ref-error\"];\n\t\telse if(value == \"#ERROR\")\n\t\t\tvalue = locale[\"math-error\"];\n\t}\n\n\tlet css = \"\";\n\tconst text = (!value && value !== 0) || isNaN(value);\n\tconst invalidDate = fmt.checkFormat(format, \"date\") && fmt.isDateInvalid(value);\n\n\tlet extra = \"\";\n\tif (!valueOnly){\n\t\textra += view.comments.get(row, col) ? \"<div class='ssheet_commented_sign'></div>\" : \"\";\n\t\textra += view.getCellFilter(row, col) ? \"<div class='ssheet_filter_sign'></div>\" : \"\";\n\t}\n\n\t//text can be formatted only in case of string number format\n\tif(!invalidDate && (!text || fmt.checkFormat(format, \"string\"))){\n\t\tif (format){\n\t\t\tconst cell = { css:\"\" };\n\t\t\tconst helper = fmt.getFormat(format);\n\t\t\tif (helper){\n\t\t\t\tlet newValue = helper(value, cell);\n\n\t\t\t\tif(newValue != webix.i18n.spreadsheet.table[\"format-error\"]){\n\t\t\t\t\tif (cell.css)\n\t\t\t\t\t\tcss = `class=\"${cell.css}\"`;\n\t\t\t\t\tvalue = newValue;\n\t\t\t\t}\n\t\t\t\telse if(!text)\n\t\t\t\t\tvalue = value * 1;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tvalue = value * 1;\n\t}\n\n\t//print only cell values (td with position:relative ignores borders while printing)\n\tif(view._print && !(value || value === 0))\n\t\treturn \"\";\n\n\tif(webix.isUndefined(value) || value === null)\n\t\tvalue = \"\";\n\n\treturn `<div ${css}>${value}</div>${view._print ? \"\" : extra}`;\n}\n\nexport function reset(view){\n\tconst grid = view.$$(\"cells\");\n\tgrid.clearAll();\n\n\tconst columns = view.config.columnCount;\n\tconst rows = view.config.rowCount;\n\n\tconst cols = [{\n\t\tid:\"rowId\", header:\"\", width:40,\n\t\tcss:\"sheet_column_0\",\n\t\ttemplate:(el) => {\n\t\t\treturn el.id;\n\t\t}\n\t}];\n\n\tfor (let i=1; i<=columns; i++){\n\t\tcols.push({\n\t\t\tid:i,\n\t\t\teditor:\"text\",\n\t\t\theader:{\n\t\t\t\ttext: nms.encode[i]\n\t\t\t},\n\t\t\ttemplate:function(obj, common, value, column){\n\t\t\t\treturn cell_template(view, obj, common, value, column);\n\t\t\t},\n\t\t\tcssFormat:function(value, obj, row, column){\n\t\t\t\tconst rendered = getRenderedValue(view, row, column);\n\t\t\t\tconst cell = view._mPage.getCell(row-1, column-1);\n\t\t\t\tconst style = cell ? cell.style : \"\";\n\n\t\t\t\tconst conditional = getConditionCss(view, row, column, rendered);\n\n\t\t\t\treturn `${style} ${conditional}`;\n\t\t\t}\n\t\t});\n\t\tview.callEvent(\"onColumnInit\",[cols[i]]);\n\t}\n\tgrid.refreshColumns(cols);\n\n\tconst data = [];\n\tfor (let i=1; i<=rows; i++)\n\t\tdata.push({ id:i });\n\n\tgrid.parse(data);\n}\n\nexport function getRenderedValue(view, row, col){\n\tconst htmlFilter = /<[^>]*>/gi;\n\treturn cell_template(view, {id: row}, null, null, {id: col}, true).replace(htmlFilter, \"\");\n}\n\n// nowrap by default\nfunction setDefaultCss(view){\n\twebix.html.addStyle(\"#\"+view._table.$view.id+\".webix_dtable .webix_cell { white-space:nowrap;}\");\n}\n","import group from \"./operations/undo_group\";\nimport {selectAll} from \"./operations/column_operations\";\nimport {styleFormats} from \"./toolbar/buttons\";\n\nexport function init(view){\n\tconst grid = view.$$(\"cells\");\n\tconst key = webix.env.isMac ? \"command\" : \"ctrl\";\n\n\twebix.UIManager.addHotKey(key+\"-a\", () => { if(!grid.getEditor()) selectAll(view); }, grid);\n\n\tif(!view.config.readonly){\n\t\twebix.UIManager.addHotKey(\"any\", (view, ev) => {\n\t\t\tconst code = ev.which || ev.keyCode;\n\t\t\tconst f2 = code == 113;\n\n\t\t\t//ignore shift key, f1, f3 - f12 (f2 - edit)\n\t\t\tif (code == 16 || (code >= 112 && code <= 123 && !f2)) return;\n\n\t\t\tconst sel = view.getSelectedId(true);\n\t\t\tif (sel.length){\n\t\t\t\tif(!(view.config.liveEditor && f2))\n\t\t\t\t\tgrid.$anyKey = true;\n\t\t\t\tgrid.edit(sel[0]);\n\t\t\t}\n\t\t}, grid);\n\n\t\twebix.UIManager.addHotKey(\"enter\", (view) => {\n\t\t\tconst sel = view.getSelectedId(true);\n\t\t\tif (sel.length){\n\t\t\t\tif(!(view.config.liveEditor && !grid.callEvent(\"onBeforeLiveEditor\", [sel[0]])))\n\t\t\t\t\tgrid.edit(sel[0]);\n\t\t\t}\n\t\t}, grid);\n\n\t\twebix.UIManager.addHotKey(\"backspace\", () => del(view), grid);\n\t\twebix.UIManager.addHotKey(\"delete\", () => del(view), grid);\n\n\t\tvar redo = webix.env.isMac ? \"command-shift-z\" : \"ctrl-y\";\n\t\twebix.UIManager.addHotKey(redo, () => view.redo(), grid);\n\t\twebix.UIManager.addHotKey(key+\"-z\", () => view.undo(), grid);\n\n\t\twebix.UIManager.addHotKey(key+\"-b\", () => styleHotKey(view, \"font-weight\"), grid);\n\t\twebix.UIManager.addHotKey(key+\"-i\", () => styleHotKey(view, \"font-style\"), grid);\n\t\twebix.UIManager.addHotKey(key+\"-u\", (v, e) => ctrlU(view, e), grid);\n\t\twebix.UIManager.addHotKey(key+\"-p\", (v, e) => ctrlP(view, e), grid);\n\t}\n}\n\nfunction del(view) {\n\tif(!view.$$(\"cells\").getEditor())\n\t\tgroup.set(function(){\n\t\t\tview.eachSelectedCell((cell) => view.setCellValue(cell.row,cell.column, \"\"));\n\t\t\tview.refresh();\n\t\t});\n}\n\nfunction ctrlU(view, e) {\n\tstyleHotKey(view, \"text-decoration\");\n\treturn webix.html.preventEvent(e);\n}\nfunction ctrlP(view, e) {\n\tview.callEvent(\"onCommand\",[{id: \"print\"}]);\n\treturn webix.html.preventEvent(e);\n}\n\nfunction styleHotKey(view, attr) { \n\tvar cell = view.getSelectedId();\n\tif(cell){\n\t\tvar style = view.getStyle(cell.row, cell.column);\n\n\t\tvar elementOn = styleFormats[attr];\n\t\tvar elementOff = \"normal\";\n\n\t\tvar state = (style && style.props[attr] === elementOn)? elementOff : elementOn;\n\t\tview.callEvent(\"onStyleSet\", [attr, state]);\n\t}\n}","import {methods} from \"@xbs/muon\";\n\nlet methodsName = [];\nfor(let name in methods)\n\tmethodsName.push(name);\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn {\n\t\tview:\"toolbar\",\n\t\tcss:\"webix_ssheet_toolbar\",\n\t\telements:[\n\t\t\t{\n\t\t\t\tview:\"label\",\n\t\t\t\tlabel:webix.i18n.spreadsheet.liveEditor[\"edit\"],\n\t\t\t\twidth:60\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"live-editor\",\n\t\t\t\tdisabled:true,\n\t\t\t\tid:\"liveEditor\",\n\t\t\t\tsuggestData: methodsName\n\t\t\t}\n\t\t]\n\t};\n}\n\nfunction ready(view){\n\tconst editor = view.$$(\"liveEditor\");\n\n\t//block native editor, and move focus to the custom input\n\t//edit by key press\n\tview._table.attachEvent(\"onBeforeEditStart\", function(cell){\n\t\tconst mode = view._table.$anyKey;\n\t\tview._table.$anyKey = false;\n\n\t\treturn startEdit(this, cell, mode);\n\t});\n\t//edit by enter key\n\tview._table.attachEvent(\"onBeforeLiveEditor\", function(cell){\n\t\treturn startEdit(this, cell, false);\n\t});\n\t//edit by dbl-click\n\tview._table.attachEvent(\"onItemDblClick\", function(cell){\n\t\tif(view.getCellEditor(cell.row, cell.column))\n\t\t\tthis.edit(cell);\n\t\telse\n\t\t\tstartEdit(this, cell, false);\n\t});\n\n\tview._table.attachEvent(\"onAfterScroll\", function(){\n\t\tif(editor.$view.contains(document.activeElement))\n\t\t\teditor.paintValue();\n\t});\n\n\tview.attachEvent(\"onCellChange\", (r,c,v) => {\n\t\tvar cell = editor.config.activeCell;\n\t\tif (cell && cell.row == r && cell.column == c)\n\t\t\teditor.setValue(v);\n\t});\n\n\tview.attachEvent(\"onAfterSelect\", (data) => {\n\t\tif (!view.$handleSelection){\n\t\t\tlet cell = data[0];\n\t\t\tfillEditor(cell);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onChange\", (mode) => {\n\t\tif (mode == \"update\" && editor.isEnabled()){\n\t\t\tconst cell = editor.config.activeCell;\n\t\t\tif(cell && editor.getValue() != view.getCellValue(cell.row, cell.column)){\n\t\t\t\tdelete editor._update_range;\n\t\t\t\teditor.showActiveSheet();\n\t\t\t\teditor.updateCellValue();\n\t\t\t}\n\t\t}\n\t});\n\n\tview.attachEvent(\"onBeforeSheetShow\", (name)=> {\n\t\tif(view._rangeDialog)\n\t\t\treturn;\n\t\tconst cell = editor.config.activeCell;\n\t\tif(cell){\n\t\t\tconst cursor = editor.getInputNode().selectionStart;\n\t\t\tconst val = editor.getValue();\n\t\t\tif(view.getCellValue(cell.row, cell.column) != val){\n\t\t\t\tif(!editor._activeMath)\n\t\t\t\t\teditor._activeMath = view.getActiveSheet();\n\t\t\t\twebix.delay(()=>{\n\t\t\t\t\tif(name == editor._activeMath){\n\t\t\t\t\t\tview.$handleSelection = null;\n\t\t\t\t\t\tconst cell = editor.config.activeCell;\n\t\t\t\t\t\tview._table.select(cell.row, cell.column);\n\t\t\t\t\t}\n\n\t\t\t\t\teditor.setValue(val);\n\t\t\t\t\t//update highlight\n\t\t\t\t\teditor.refresh();\n\n\t\t\t\t\teditor.getInputNode().setSelectionRange(cursor, cursor);\n\t\t\t\t\teditor.paintValue();\n\n\t\t\t\t\tview.$handleSelection = function(a,b,st,en){ return pasteRange(st, en, a); };\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t\tclearEditor();\n\t\t}\n\t});\n\n\tview.attachEvent(\"onReset\", () => {\n\t\tif(!view._rangeDialog)\n\t\t\tview.$handleSelection = null;\n\t});\n\tview.$$(\"cells\").attachEvent(\"onFocus\", ()=>{\n\t\t//ignore table clipboard logic\n\t\tif(editor._activeMath){\n\t\t\twebix.delay(()=>editor.focus());\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAfterLoad\", () => clearEditor());\n\n\tview.attachEvent(\"onAction\", function(name, options){\n\t\tconst cell = editor.config.activeCell;\n\t\tconst isActiveCell = cell && cell.row == options.row && cell.column == options.column;\n\t\tif(isActiveCell && (name == \"lock\" || name == \"dropdown\"))\n\t\t\tdisableEditor(options.row, options.column);\n\t});\n\n\tview.attachEvent(\"onFormatChange\", (r, c) => updateEditor(r, c));\n\tview.attachEvent(\"onCellChange\", (r, c) => updateEditor(r, c));\n\n\tfunction updateEditor(row, column){\n\t\tconst activeCell = editor.config.activeCell;\n\t\tif(activeCell && activeCell.row == row && activeCell.column == column)\n\t\t\tfillEditor({row, column});\n\t}\n\n\tfunction startEdit(table, cell, clear){\n\t\t//do not interfere with custom editors\n\t\tif (!view.getCellEditor(cell.row, cell.column) && fillEditor(cell, clear)){\n\t\t\teditor.focus();\n\n\t\t\tif(!clear){\n\t\t\t\teditor.paintValue();\n\n\t\t\t\tconst input = editor.getInputNode();\n\t\t\t\tconst symbols = input.value.length;\n\t\t\t\tinput.setSelectionRange(symbols, symbols);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tfunction disableEditor(row,column){\n\t\tconst disabled = view.getCellEditor(row, column) || view.isCellLocked(row, column);\n\t\tif(disabled)\n\t\t\teditor.disable();\n\t\telse\n\t\t\teditor.enable();\n\t\treturn disabled;\n\t}\n\n\tfunction fillEditor(cell, clear){\n\t\tconst disabled = disableEditor(cell.row, cell.column);\n\t\teditor.config.activeCell = cell;\n\t\teditor.setValue( clear ? \"\" : editor.getCellValue(cell.row, cell.column) );\n\n\t\tif(!view._rangeDialog)\n\t\t\tview.$handleSelection = disabled ? null : function(a,b,st,en){ return pasteRange(st, en, a); };\n\n\t\treturn !disabled;\n\t}\n\n\tfunction pasteRange(st, en, cell){\n\t\tconst updateRange = editor._update_range;\n\t\tlet cursor = editor.getInputNode().selectionStart;\n\n\t\tlet sheet = \"\";\n\t\tif(editor._activeMath){\n\t\t\tconst activeSheet = view.getActiveSheet();\n\t\t\tif(editor._activeMath != activeSheet)\n\t\t\t\tsheet = editor.prepareSheet(activeSheet);\n\t\t}\n\n\t\tlet range;\n\t\tif(st == en){\n\t\t\tconst colon = editor.getValue()[ (updateRange ? updateRange.pos : cursor)-1 ] == \":\";\n\t\t\trange = colon ? st : sheet+st;\n\t\t}\n\t\telse\n\t\t\trange = `${sheet+st}:${en}`;\n\n\t\tif(updateRange && updateRange.pos == cursor - updateRange.len){\n\t\t\teditor.setRange(range, true);\n\t\t\tcursor = editor._update_range.pos + range.length;\n\t\t}\n\t\telse if(editor.expectOperator()){\n\t\t\teditor.setRange(range);\n\t\t\tcursor += range.length;\n\t\t}\n\t\telse\n\t\t\treturn endEdit(cell);\n\n\t\teditor.focus();\n\t\teditor.getInputNode().setSelectionRange(cursor, cursor);\n\t\teditor.paintValue();\n\n\t\treturn false;\n\t}\n\n\tfunction endEdit(st){\n\t\tif (editor.isEnabled()){\n\t\t\tconst cell = editor.config.activeCell;\n\t\t\teditor.showActiveSheet();\n\t\t\teditor.updateCellValue(cell);\n\t\t\teditor.setValue(st ? view.getCellValue(st.row, st.column) : \"\");\n\t\t}\n\t\treturn true;\n\t}\n\n\tfunction clearEditor(){\n\t\teditor.define({activeCell:null});\n\t\teditor.setValue(\"\");\n\t\teditor.disable();\n\t}\n}\n","export function init(view){\n\t//parsing initial data\n\tview.attachEvent(\"onDataParse\", (data) => _parse(view, data));\n\tview.attachEvent(\"onDataSerialize\", (data, config) => _serialize(view, data, config));\n\n\t// undo\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tif(type == \"value\")\n\t\t\t_undoValue(view, row, column, value);\n\t});\n}\n\nfunction _serialize(view, obj, config){\n\tvar math = !config || config.math!==false;\n\n\tvar grid = view.$$(\"cells\");\n\tvar state = grid.getState();\n\tvar columns = state.ids.concat(state.hidden);\n\n\t// remove \"rowId\" column\n\tcolumns.splice(columns.indexOf(\"rowId\"), 1);\n\n\tobj.data = getSheetData(view, math);\n\n\tobj.table = {\n\t\tfrozenColumns : (view._frozenColumns || 0),\n\t\tfrozenRows : (view._frozenRows || 0)\n\t};\n}\n\nfunction _parse(view, obj){\n\tconst grid = view.$$(\"cells\");\n\n\tconst tconfig = obj.table || { frozenColumns : 0, frozenRows : 0 };\n\tview._frozenColumns = view._frozenRows = 0;\n\tif (tconfig){\n\t\tif (!webix.isUndefined(tconfig.frozenColumns))\n\t\t\tview.freezeColumns(tconfig.frozenColumns);\n\t\tif (!webix.isUndefined(tconfig.frozenRows))\n\t\t\tview.freezeRows(tconfig.frozenRows);\n\t}\n\n\tif(obj.sizes)\n\t\tgrid.define(\"fixedRowHeight\", false);\n\n\tfor (let i = 0; i < obj.data.length; i++){\n\t\tconst [ row, column, value, , type ] = obj.data[i];\n\n\t\tview.ignoreUndo(()=>{\n\t\t\t//cell format can be updated via types module\n\t\t\tview.callEvent(\"onCellChange\", [row, column, value, type]);\n\t\t});\n\t}\n}\n\nfunction _undoValue(view, row, column, value){\n\tview.setCellValue(row, column, value);\n}\n\nexport function getSheetData(view, math, page){\n\tpage = page ? view._mData.getPage(page) : view._mPage;\n\treturn page.serialize(math)\n\t\t.map(arr =>{\n\t\t\treturn [ ++arr[0], ++arr[1], arr[2].value, arr[2].style||\"\", arr[2].type];\n\t\t})\n\t\t.filter(arr => {\n\t\t\treturn arr[2] || arr[2] === 0 || arr[3];\n\t\t});\n}","import * as arr from \"./helpers/array\";\nimport {getSheetData} from \"./operations/data\";\nimport {DataStore} from \"@xbs/muon\";\nimport {loadCell} from \"./operations/types\";\nimport {removeUnusedStyles} from \"./operations/styles\";\nimport {updateMaxColumn} from \"./helpers/column_names\";\n\nconst options = [\n\t\"rename-sheet\",\n\t\"remove-sheet\"\n];\n\nconst actionMap = {\n\t\"remove-sheet\": function(view){\n\t\tview.confirm({\n\t\t\ttext: webix.i18n.spreadsheet.labels[\"sheet-remove-confirm\"]\n\t\t}).then(()=>{\n\t\t\tremove(view, view._activeSheet);\n\t\t});\n\t},\n\t\"rename-sheet\": function(view){\n\t\tedit(view, view._activeSheet);\n\t},\n\t\"new-sheet\": function(view){\n\t\tadd(view);\n\t},\n\t\"copy-sheet\": function(view){\n\t\tcopy(view);\n\t}\n};\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n}\n\nexport function defaultBottom(view){\n\tvar readonly = view.config.readonly;\n\tvar tabWidth = view.config.sheetTabWidth;\n\tvar toolbar =  {\n\t\tview: \"toolbar\",\n\t\tid: \"bottom-toolbar\",\n\t\tcss: \"webix_ssheet_bottom_toolbar webix_layout_toolbar\",\n\t\tpaddingY: 0,\n\t\theight: 34,\n\t\telements:[\n\t\t\t{\n\t\t\t\tview: \"button\", type:\"htmlbutton\", width: 34, id: \"add-sheet\",\n\t\t\t\tlabel: \"<span class='webix_ssheet_icon_add_sheet'></span>\",\n\t\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[\"add-sheet\"]||\"\", hidden:readonly\n\t\t\t},\n\t\t\t{\n\t\t\t\tid:\"sheets\",\n\t\t\t\tview:\"sheets\",\n\t\t\t\twidth: 5 * tabWidth,\n\t\t\t\teditable:!readonly,\n\t\t\t\teditaction: \"dblclick\",\n\t\t\t\teditor:\"text\",\n\t\t\t\teditValue:\"value\",\n\t\t\t\ttype:{\n\t\t\t\t\twidth: tabWidth,\n\t\t\t\t\theight: 32,\n\t\t\t\t\ttemplate: function(obj){\n\t\t\t\t\t\treturn \"<div>\"+obj.value+\"</div>\"+\n\t\t\t\t\t\t\t(!readonly?\"<div class='webix_input_icon wxi-menu-down webix_ssheet_sheet_arrow'></div>\":\"\");\n\t\t\t\t\t},\n\t\t\t\t\t//remove skin selection css on dnd\n\t\t\t\t\tcss:\"ssheet_order_sheets\"\n\t\t\t\t},\n\t\t\t\tonClick:{\n\t\t\t\t\twebix_ssheet_sheet_arrow: function(e, id){\n\t\t\t\t\t\tinitSheetMenu(view, e, id);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ton:{\n\t\t\t\t\tonItemClick: function(id){\n\t\t\t\t\t\tif(id != view._activeSheet)\n\t\t\t\t\t\t\tview.showSheet(id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"button\", type:\"htmlbutton\", width: 34, id: \"prev-sheet\", disabled:true, hidden:true,\n\t\t\t\tlabel: \"<span class='webix_icon wxi-menu-left'></span>\", batch:\"pager\",\n\t\t\t\tclick:function(){scrollSheets(view, -1);}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"button\", type:\"htmlbutton\", width: 34, id: \"next-sheet\", hidden:true,\n\t\t\t\tlabel: \"<span class='webix_icon wxi-menu-right'></span>\", batch:\"pager\",\n\t\t\t\tclick:function(){scrollSheets(view, 1);}\n\t\t\t}\n\t\t]\n\t};\n\n\tview.callEvent(\"onViewInit\", [\"bottom-toolbar\", toolbar]);\n\n\treturn toolbar;\n}\n\nfunction scrollSheets(view, direction){\n\tvar sheets = view.$$(\"sheets\");\n\tsheets.scrollTo(sheets.getScrollState().x+(direction*view.config.sheetTabWidth), 0);\n}\n\nfunction menuInit(view){\n\tvar data = [];\n\tfor(var i=0; i < options.length;i++)\n\t\tdata.push({id: options[i], value:webix.i18n.spreadsheet.menus[options[i]]||options[i]});\n\n\tvar menu =  {\n\t\tview: \"ssheet-suggest\",\n\t\tdata: data\n\t};\n\tview.callEvent(\"onViewInit\", [\"sheet-menu\", menu]);\n\treturn menu;\n}\n\nexport function reset(view, obj){\n\tconst tabs = view.$$(\"sheets\");\n\tif (tabs){\n\t\ttabs.clearAll();\n\t\tconst set = [];\n\t\tobj.sheets.forEach(function(sheet){\n\t\t\tset.push({id:sheet.name, value: sheet.name});\n\t\t});\n\t\ttabs.parse(set);\n\t}\n}\n\nfunction ready(view){\n\tprepare(view);\n\n\tif(view.$$(\"add-sheet\"))\n\t\tview.$$(\"add-sheet\").attachEvent(\"onItemClick\", function(){\n\t\t\tadd(view);\n\t\t});\n\n\tview.attachEvent(\"onAfterSheetShow\", (name) => selectSheet(view,name));\n\n\tview.attachEvent(\"onCommand\", function(command){\n\t\tif(actionMap[command.id])\n\t\t\tactionMap[command.id](this);\n\t});\n\n\tif(view.$$(\"sheets\")){\n\t\tview.$$(\"sheets\").data.attachEvent(\"onStoreUpdated\", () => changePagerVisability(view));\n\t\tview.$$(\"sheets\").attachEvent(\"onAfterScroll\", () => changePagerStatus(view));\n\t\tview.$$(\"sheets\").attachEvent(\"onAfterDrop\", (context) => dataOrder(view,context.start,context.index));\n\t\tview.$$(\"sheets\").attachEvent(\"onAfterEditStop\", (state) => rename(view,state.old,state.value));\n\t}\n}\n\nfunction initSheetMenu(view, e, id){\n\tif(!view.$sheetMenu){\n\t\tview.$sheetMenu = webix.ui(menuInit(view));\n\t\tview._destroy_with_me.push(view.$sheetMenu);\n\t\tview.$sheetMenu.attachEvent(\"onItemClick\", (id)=> callAction(view,id));\n\t}\n\n\tif(view.$sheetMenu.getItem(\"remove-sheet\"))\n\t\tif(view.$$(\"sheets\").count() == 1)\n\t\t\tview.$sheetMenu.disableItem(\"remove-sheet\");\n\t\telse\n\t\t\tview.$sheetMenu.enableItem(\"remove-sheet\");\n\tif(view.callEvent(\"onBeforeSheetMenu\", [id])){\n\t\tview.$sheetMenu.show(e);\n\t}\n}\n\nfunction changePagerStatus(view){\n\tconst sheets = view.$$(\"sheets\");\n\tconst scrollPos = sheets.getScrollState().x;\n\n\tif(scrollPos == 0){\n\t\tview.$$(\"prev-sheet\").disable();\n\t}\n\telse{\n\t\tview.$$(\"prev-sheet\").enable();\n\t\tvar tabWidth = view.config.sheetTabWidth;\n\t\tif(scrollPos == (sheets.count()-(sheets.config.width/tabWidth))*tabWidth){\n\t\t\tview.$$(\"next-sheet\").disable();\n\t\t\treturn;\n\t\t}\n\t}\n\tview.$$(\"next-sheet\").enable();\n}\n\nfunction changePagerVisability(view){\n\tvar toolbar = view.$$(\"bottom-toolbar\");\n\tvar sheets = view.$$(\"sheets\");\n\n\tif(sheets.count() <= (sheets.config.width/view.config.sheetTabWidth))\n\t\ttoolbar.showBatch(\"pager\", false);\n\telse\n\t\ttoolbar.showBatch(\"pager\");\n}\n\nfunction dataOrder(view, name, num){\n\tfor (let id in view._sheets) {\n\t\tif (view._sheets[id].name == name) {\n\t\t\tconst item = view._sheets.splice(id, 1);\n\t\t\tview._sheets.splice(num, 0, item[0]);\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\nexport function add(view, content){\n\tvar index, name, newIndex;\n\n\tindex = arr.findIndex(view._sheets, x => x.name == view._activeSheet);\n\tnewIndex = index>-1?index+1:view._sheets.length;\n\tname = getNewTitle(view);\n\tcontent = content || {data:[]};\n\tview._sheets.splice(newIndex, 0, {\n\t\tname: name,\n\t\tcontent: content\n\t});\n\n\tif(view.$$(\"sheets\"))\n\t\tview.$$(\"sheets\").add({id: name, value: name},newIndex);\n\n\tview._mData.addPage(name);\n\n\tparseToStore(view, name, content);\n\n\tview.showSheet(name);\n\tview.callEvent(\"onSheetAdd\", [name]);\n\treturn name;\n}\n\nfunction getNewTitle(view){\n\tvar index = view._sheets.length+1;\n\twhile(getSheet(view, (webix.i18n.spreadsheet.labels.sheet+index)))\n\t\tindex++;\n\tvar name = webix.i18n.spreadsheet.labels.sheet+index;\n\treturn name;\n}\n\nfunction selectSheet(view,name){\n\tif(view.$$(\"sheets\")){\n\t\tview.$$(\"sheets\").select(name);\n\t\tview.$$(\"sheets\").showItem(name);\n\t}\n}\n\nexport function edit(view,name){\n\tview.$$(\"sheets\").edit(name);\n}\n\nexport function remove(view,name){\n\tvar index, newSheet;\n\tif(view._sheets.length >1){\n\t\tindex = arr.findIndex(view._sheets,x => x.name == name);\n\t\tview._sheets.splice(index,1);\n\t\tview._mData.removePage(name);\n\t\tif(!view._sheets[index])\n\t\t\tindex = 0;\n\t\tnewSheet = \tview._sheets[index];\n\t\tview._activeSheet = null;\n\t\tif(view.$$(\"sheets\")){\n\t\t\tview.$$(\"sheets\").remove(name);\n\t\t\tview.$$(\"sheets\").refresh();\n\t\t}\n\t\tview.showSheet(newSheet.name);\n\t\tview.callEvent(\"onSheetRemove\", [name]);\n\t}\n}\n\nexport function rename(view,name,newName){\n\tif (name == newName) return;\n\n\t//correct sheet name\n\tvar i = 1;\n\twhile (!newName || getSheet(view, newName)){\n\t\tnewName = webix.i18n.spreadsheet.labels.sheet + i;\n\t\ti++;\n\t}\n\tnewName = newName.replace(/[*?:[\\]\\\\/]/g,\"\").substring(0, 31);\n\n\tvar sheet = getSheet(view, name);\n\tvar sheets = view.$$(\"sheets\");\n\n\tsheet.name = newName;\n\tif(view._activeSheet == name)\n\t\tview._activeSheet = newName;\n\n\tif(sheets){\n\t\tlet item = sheets.getItem(name);\n\t\titem.value = newName;\n\t\tsheets.data.changeId(name,newName);\n\t\tsheets.refresh(newName);\n\t}\n\n\tview._mData.renamePage(name, newName);\n\tview.callEvent(\"onSheetRename\", [name, newName]);\n}\n\nexport function serialize(view, obj, config){\n\tgetSheet(view, view._activeSheet).content = obj;\n\n\tconst sheets = webix.copy(view._sheets);\n\n\tconst math = !config || config.math!==false;\n\tconst compactStyles = config && config.compactStyles;\n\n\tsheets.forEach(sheet => {\n\t\tif(sheet.name != view._activeSheet){\n\t\t\tsheet.content.data = getSheetData(view, math, sheet.name);\n\t\t\tif(compactStyles)\n\t\t\t\tsheet.content.styles = removeUnusedStyles(sheet.content);\n\t\t\tsheet.content.ranges = view.ranges.serialize(sheet.name);\n\t\t}\n\t});\n\n\treturn sheets;\n}\n\nfunction parseToStore(view, name, obj){\n\tview.ranges.parse(obj.ranges, name);\n\n\tconst page = view._mData.getPage(name);\n\tconst data = webix.copy(obj.data).map((arr, index) => {\n\t\tconst cell = loadCell(view, obj, arr);\n\n\t\tconst linkRegex = /^=link\\(/i;\n\n\t\tif(typeof cell.value == \"string\" && linkRegex.test(cell.value)){\n\t\t\t// LINK is deprecated\n\t\t\tcell.value = cell.value.replace(linkRegex, \"=HYPERLINK(\");\n\t\t}\n\n\t\tconst item = obj.data[index];\n\n\t\t//cell value and type can be changed via types module\n\t\titem[2] = cell.value;\n\t\titem[3] = item[3] || \"\";\n\t\titem[4] = cell.type;\n\n\t\treturn [ --arr[0], --arr[1], {\n\t\t\tvalue: cell.value,\n\t\t\ttype: cell.type,\n\t\t\tstyle: item[3],\n\t\t\t$format: cell.$format\n\t\t}];\n\t});\n\n\tpage.parse(data, true);\n}\n\nexport function load(view, obj){\n\tview._loading_data = true;\n\tobj = webix.isArray(obj)?{sheets:obj}:obj;\n\n\tif(!obj.sheets && view._activeSheet){\n\t\t//loading into active sheet\n\t\tconst name = view._activeSheet;\n\t\tgetSheet(view, name).content = obj;\n\t\tparseToStore(view, name, obj);\n\t\trefresh(view, obj);\n\t} else {\n\t\t//creating new set of sheets\n\t\tprepare(view, obj);\n\t}\n\tview._loading_data = false;\n}\n\nexport function prepare(view, obj){\n\tif(!obj) obj = {data:[]}; \n\tif(!obj.sheets){\n\t\tobj = newSheet(obj);\n\t}\n\n\tlet name;\n\tview._activeSheet = \"\";\n\tview._sheets = obj.sheets;\n\tview._mData = new DataStore();\n\n\t// first add all pages then parse data in them\n\tobj.sheets.forEach(sheet => {\n\t\tview._mData.addPage(sheet.name);\n\t});\n\n\tobj.sheets.forEach((sheet, index) => {\n\t\tconst page = view._mData.getPage(sheet.name);\n\t\tconst content = sheet.content;\n\t\tconst sheetName = sheet.name;\n\n\t\tparseToStore(view, sheetName, content);\n\n\t\tif(index == 0){\n\t\t\tname = sheetName;\n\t\t\tview._mPage = page;\n\t\t}\n\t});\n\n\treset(view, obj);\n\tshow(view, name);\n}\n\nexport function newSheet(obj){\n\treturn {\n\t\tsheets:[{\n\t\t\tname: webix.i18n.spreadsheet.labels.sheet + 1,\n\t\t\tcontent: obj\n\t\t}]\n\t};\n}\n\nexport function show(view,name){\n\tif (name == view._activeSheet) return;\n\n\tif(view.callEvent(\"onBeforeSheetShow\", [name])){\n\t\tif (view._activeSheet)\n\t\t\tgetSheet(view, view._activeSheet).content = view.serialize();\n\n\t\tview._activeSheet = name;\n\t\tconst obj = getSheet(view, name).content;\n\n\t\tview._mPage = view._mData.getPage(name);\n\n\t\trefresh(view, obj);\n\n\t\tview.callEvent(\"onAfterSheetShow\", [name]);\n\t}\n}\n\nexport function getSheet(view, name){\n\treturn arr.find(view._sheets, x => x.name == name);\n}\n\nexport function eachSheet(view, callback){\n\tfor (var i=0; i<view._sheets.length; i++)\n\t\tcallback(view._sheets[i].name);\n}\n\nexport function getActive(view){\n\treturn view._activeSheet;\n}\n\nfunction refresh(view, obj){\n\tconst data = getSheetData(view);\n\n\tlet [rows, cols] = arr.getDimension(data, obj.spans, view.config.rowCount, view.config.columnCount);\n\n\tif (rows != view.config.rowCount || cols != view.config.columnCount){\n\t\tview.config.rowCount = rows;\n\t\tview.config.columnCount = cols;\n\t\tview._resetTable();\n\t}\n\n\tupdateMaxColumn(cols);\n\n\tview.callEvent(\"onReset\", []);\n\n\tview._loading_data = true;\n\tview.callEvent(\"onDataParse\", [obj]);\n\tview._loading_data = false;\n\n\tview._table.refresh();\n\tif(view.config.bottombar)\n\t\tview.$$(\"sheets\").refresh();\n}\n\nfunction copy(view){\n\tadd(view, view.serialize());\n}\n\nfunction callAction(view, id){\n\tif(!view.$sheetMenu.data.getMark(id, \"webix_disabled\"))\n\t\tactionMap[id](view);\n}\n\n","import \"../views/formlate\";\n\nexport class Dialog{\n\tconstructor(view){\n\t\tthis.view = view;\n\t}\n\t$init(){}\n\t$show(){}\n\t$hide(){}\n\topen(){\n\t\tif(!this.$dialog){\n\t\t\tthis.$dialog = webix.ui(this.$init());\n\t\t\tthis.view._destroy_with_me.push(this.$dialog);\n\t\t\tthis.$dialog.attachEvent(\"onHide\", ()=> {\n\t\t\t\tthis.$hide();\n\t\t\t\twebix.UIManager.setFocus(this.view);\n\t\t\t});\n\t\t\tthis.$dialog.attachEvent(\"onShow\", ()=> {\n\t\t\t\twebix.UIManager.setFocus(this.$dialog);\n\t\t\t});\n\t\t}\n\n\t\tconst form = this.$dialog.getBody();\n\t\tthis.$dialog.show();\n\t\tif (this.$show(this.$dialog, form) === false)\n\t\t\tthis.close();\n\t}\n\tclose(){\n\t\tthis.$dialog.hide();\n\t}\n}","export function image(url){\n\treturn `=IMAGE(\"${url}\")`;\n}\n\nexport function chart(config){\n\tlet result = `=SPARKLINE(${config.range},\"${config.type}\"`;\n\tif (config.type === \"bar\")\n\t\tresult += `,\"${config.color}\",\"${config.negativeColor}\"`;\n\telse if(config.color)\n\t\tresult += `,\"${config.color}\"`;\n\treturn result+\")\";\n\n}\n\nexport function parseImage(value){\n\tif (value && value.indexOf(\"=IMAGE(\") === 0)\n\t\treturn {\n\t\t\turl: unescape(value.substr(7, value.length-8))\n\t\t};\n}\n\nexport function parseChart(value){\n\tif (value && value.indexOf(\"=SPARKLINE(\") === 0){\n\t\tlet text = value.substr(11, value.length-12).split(\",\");\n\t\treturn {\n\t\t\trange: text[0],\n\t\t\ttype: unescape(text[1]),\n\t\t\tcolor: unescape(text[2]),\n\t\t\tnegativeColor: unescape(text[3])\n\t\t};\n\t}\n}\n\nfunction unescape(text){\n\tif (!text) return \"\";\n\n\ttext = text.trim();\n\tif (text[0] === \"\\\"\") \n\t\ttext = text.substr(1);\n\tif (text[text.length-1] === \"\\\"\")\n\t\ttext = text.substr(0, text.length-1);\n\treturn text;\n}","import {Dialog} from \"./common\";\nimport {parseImage} from \"../mathematics/writer\";\n\nexport const action = \"add-image-cell\";\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tthis.cell = this.view.getSelectedId();\n\t\tif(!this.cell)\n\t\t\treturn false;\n\n\t\tform.elements.preview.setHTML(\"\");\n\t\tform.elements.url.setValue(\"\");\n\n\t\t//sync state of dialog to data with  the selected cell\n\t\tlet value = this.view.getCellValue(this.cell.row, this.cell.column);\n\t\tlet data = parseImage(value);\n\t\tif (data && data.url)\n\t\t\tform.elements.url.setValue(data.url);\n\n\t\tform.elements.url.focus();\n\t}\n\t$init(){\n\t\tconst save = this.view.config.save;\n\t\tconst server = (save && save.images) || null;\n\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: webix.i18n.spreadsheet.labels[\"image-title\"],\n\t\t\tmove: true,\n\t\t\tposition: \"center\",\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\telements:[\n\t\t\t\t\t{ view:\"text\", name:\"url\",  placeholder:webix.i18n.spreadsheet.labels[\"image-url\"], on:{\n\t\t\t\t\t\t\"onChange\":(image) => this.showPreview(image)\n\t\t\t\t\t}},\n\t\t\t\t\t{ view:\"label\", label:webix.i18n.spreadsheet.labels[\"image-or\"], align: \"center\"},\n\t\t\t\t\t{ view:\"uploader\", label:webix.i18n.spreadsheet.labels[\"image-upload\"], upload:server, on:{\n\t\t\t\t\t\tonBeforeFileAdd: function(file){\n\t\t\t\t\t\t\tif (!this.config.upload){\n\t\t\t\t\t\t\t\tconst reader = new FileReader();\n\t\t\t\t\t\t\t\treader.onload = (e) => this.getFormView().elements.url.setValue(e.target.result);\n\t\t\t\t\t\t\t\treader.readAsDataURL(file.file);\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tthis.getFormView().elements.preview.setHTML(\"\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonFileUpload: function(item, response){\n\t\t\t\t\t\t\tthis.getFormView().elements.url.setValue(response.imageURL);\n\t\t\t\t\t\t}\n\t\t\t\t\t}},\n\t\t\t\t\t{ view:\"formlate\", name:\"preview\", borderless: true, css: \"webix_ssheet_preview\", template:\"\", height:50 }\n\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\tokClick(){\n\t\tconst cell = this.cell;\n\t\tconst image = this.fillUrl(this.$dialog.getBody().elements.url.getValue());\n\t\tthis.view.addImage(cell.row, cell.column, image);\n\t\tthis.close();\n\t}\n\tfillUrl(url){\n\t\tif (!/^[/]|((https?:\\/|data:image)\\/)/i.test(url))\n\t\t\turl = \"http://\" + url;\n\t\treturn url;\n\t}\n\tshowPreview(image){\n\t\tif (image){\n\t\t\timage = webix.template.escape(this.fillUrl(image));\n\t\t\tthis.$dialog.queryView(\"form\").elements.preview.setHTML(\"<img class='webix_ssheet_cimage' src='\"+image+\"'></img>\");\n\t\t}\n\t}\n}","import * as box from \"./imagecell\";\n\nexport const action = \"add-image-top\";\n\nexport class DialogBox extends box.DialogBox{\n\topen(action){\n\t\tthis.config = action.config;\n\t\tthis.viewid = action.viewid;\n\n\t\tthis.view.callEvent(\"onUIEditStart\", [this.viewid, \"image\"]);\n\n\t\tbox.DialogBox.prototype.open.apply(this, arguments);\n\t}\n\t$hide(){\n\t\tthis.view.callEvent(\"onUIEditStop\", [this.viewid, \"image\"]);\n\t\tthis.config = this.viewid = null;\n\t}\n\t$init(){\n\t\tthis.view.attachEvent(\"onUIEditStart\", (id, type)=>{\n\t\t\tif(this.$dialog && this.$dialog.isVisible() && type != \"image\")\n\t\t\t\tthis.close();\n\t\t});\n\n\t\tthis.view.attachEvent(\"onCommand\", obj =>{\n\t\t\tif(obj.id == \"close-ui-editor\" && this.$dialog && this.$dialog.isVisible())\n\t\t\t\tthis.close();\n\t\t});\n\n\t\treturn box.DialogBox.prototype.$init.apply(this, arguments);\n\t}\n\t$show(box, form){\n\n\t\tform.elements.preview.setHTML(\"\");\n\t\tform.elements.url.setValue(\"\");\n\n\t\tif(this.config && this.config.data)\n\t\t\tform.elements.url.setValue(this.config.data);\n\n\t\tform.elements.url.focus();\n\t}\n\tokClick(){\n\t\tconst image = this.fillUrl(this.$dialog.getBody().elements.url.getValue());\n\t\tif(this.viewid)\n\t\t\tthis.view.views.update(this.viewid, image);\n\t\telse{\n\t\t\tconst id = this.view.views.add(null, null, \"image\", image);\n\t\t\tthis.view.views.highlight(id);\n\t\t}\n\t\tthis.close();\n\t}\n}","import {Dialog} from \"./common\";\nimport {range} from \"../helpers/column_names\";\nimport {parseChart} from \"../mathematics/writer\";\n\nexport const action = \"add-sparkline\";\n\nconst labels = webix.i18n.spreadsheet.labels;\n\nfunction getTypes(){\n\treturn  [\n\t\t{id:\"line\", value:labels[\"line-chart\"]},\n\t\t{id:\"spline\", value:labels[\"spline-chart\"]},\n\t\t{id:\"splineArea\", value:labels[\"splinearea-chart\"]},\n\t\t{id:\"area\", value:labels[\"area-chart\"]},\n\t\t{id:\"bar\", value:labels[\"bar-chart\"]},\n\t\t{id:\"pie\", value:labels[\"pie-chart\"]}\n\t];\n}\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tthis.cell = this.view.getSelectedId();\n\t\tif(!this.cell)\n\t\t\treturn false;\n\n\t\tconst els = form.elements;\n\t\tthis.view.$handleSelection = function(st, end, a, b){\n\t\t\tels.range.setValue(a+\":\"+b);\n\t\t\treturn false;\n\t\t};\n\n\t\tels.range.setValue(\"\");\n\n\t\t//sync state of dialog to data with  the selected cell\n\t\tlet value = this.view.getCellValue(this.cell.row, this.cell.column);\n\t\tlet data = parseChart(value);\n\t\tif (data){\n\t\t\tform.blockEvent();\n\t\t\tels.type.setValue(data.type);\n\t\t\tels.range.setValue(data.range);\n\t\t\tif (data.color){\n\t\t\t\tels.color_def.setValue(data.color);\n\t\t\t\tels.color_pos.setValue(data.color);\t\t\n\t\t\t}\n\t\t\tif (data.negativeColor)\n\t\t\t\tels.color_neg.setValue(data.negativeColor);\n\t\t\tform.unblockEvent();\n\t\t\tthis.renderPreview();\n\t\t}\t\n\n\t\tels.range.focus();\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead:labels[\"sparkline-title\"],\n\t\t\tmove: true,\n\t\t\tposition: \"center\",\n\t\t\tbody:{\n\t\t\t\tview:\"form\", visibleBatch:1, on:{ onChange : ()=> this.renderPreview() },  elements:[\n\t\t\t\t\t{view: \"richselect\", name:\"type\", label:labels[\"sparkline-type\"], value:\"line\", labelPosition:\"left\", suggest:{\n\t\t\t\t\t\tview:  \"ssheet-form-suggest\",\n\t\t\t\t\t\tdata:getTypes()\n\t\t\t\t\t}, on:{\n\t\t\t\t\t\tonChange: function(type){\n\t\t\t\t\t\t\tconst form = this.getFormView();\n\t\t\t\t\t\t\tswitch(type){\n\t\t\t\t\t\t\t\tcase \"pie\":\n\t\t\t\t\t\t\t\t\tform.showBatch(3);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase \"bar\":\n\t\t\t\t\t\t\t\t\tform.showBatch(2);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\tform.showBatch(1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}},\n\t\t\t\t\t{ view:\"text\", label:labels[\"sparkline-range\"], name:\"range\"},\n\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"sparkline-color\"], name:\"color_def\", id:\"add_sparkline_color\", value:\"#6666FF\", batch:\"1\"},\n\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"sparkline-positive\"], name:\"color_pos\", value:\"#6666FF\", batch:\"2\"},\n\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"sparkline-negative\"], name:\"color_neg\", value:\"#FF6666\", batch:\"2\"},\n\t\t\t\t\t{ view:\"formlate\", name:\"preview\", borderless:true, css:\"webix_ssheet_preview\", height:50 }\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\tcheckRange(text){\n\t\tif(text && range(text, this.view))\n\t\t\treturn true;\n\t\tthis.view.alert({text:labels[\"error-range\"]});\n\t}\n\tokClick(){\n\t\tconst form = this.$dialog.getBody();\n\t\tconst data = form.getValues();\n\t\tdata.range = data.range.toUpperCase();\n\n\t\tif (data.range && this.checkRange(data.range)){\n\t\t\tconst config = this.sparkConfig(data);\n\n\t\t\tthis.view.addSparkline(this.cell.row, this.cell.column, config);\n\t\t\tthis.close();\n\t\t}\n\t}\n\n\trenderPreview(){\n\t\tconst form = this.$dialog.getBody();\n\t\tconst data = form.getValues();\n\t\tdata.range = data.range.toUpperCase();\n\n\t\tif (data.range && this.checkRange(data.range)){\n\t\t\tconst pos = range(data.range, this.view);\n\t\t\tlet i,\n\t\t\t\tvalues = this.view._mPage.getRange(pos[0]-1, pos[1]-1, pos[2]-1, pos[3]-1),\n\t\t\t\tconfig = this.sparkConfig();\n\t\t\tfor(i =0 ; i < values.length; i++)\n\t\t\t\tvalues[i] = values[i]||0;\n\t\t\tform.elements.preview.setValue(webix.Sparklines.getTemplate(config)(values, { width:200, height: 40 }));\n\t\t}\n\t\telse\n\t\t\tform.elements.preview.setValue(\"\");\n\t}\n\n\tsparkConfig(config){\n\t\tconst form = this.$dialog.getBody();\n\t\tconst data = form.getValues();\n\t\tconfig = config || { type: data.type  };\n\t\tif (data.type === \"bar\"){\n\t\t\tconfig.color = data.color_pos;\n\t\t\tconfig.negativeColor = data.color_neg;\n\t\t}\n\t\telse if(form.elements.color_def.isVisible())\n\t\t\tconfig.color = data.color_def;\n\n\t\treturn config;\n\t}\n}","import {Dialog} from \"./common\";\nimport {isRange, toSheetRange} from \"../helpers/column_names\";\nimport {getLastCharIndex} from \"../mathematics/parser\";\n\nexport const action = \"add-range\";\n\nexport class DialogBox extends Dialog{\n\t$show(box){\n\t\tconst form = box.$$(\"form\");\n\n\t\tform.clear();\n\t\tform.clearValidation();\n\n\t\tconst elements = form.elements;\n\n\t\telements.name.focus();\n\n\t\tlet selectedCell = this.view.getSelectedRange();\n\t\tif(selectedCell)\n\t\t\tselectedCell = this.view.getActiveSheet()+\"!\"+selectedCell;\n\n\t\tform.setValues({\n\t\t\trange: selectedCell,\n\t\t\tscope: \"$global\"\n\t\t});\n\n\t\tthis._updateData();\n\n\t\tthis.view._rangeDialog = true;\n\t\tthis.view.$handleSelection = (st, end, a, b)=>{\n\t\t\tform.elements.range.setValue(toSheetRange(a,b,this.view.getActiveSheet()));\n\t\t\treturn false;\n\t\t};\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t\tthis.view._rangeDialog = null;\n\t}\n\tsaveClick(){\n\t\tconst view = this.view;\n\t\tconst form = this.$dialog.$$(\"form\");\n\t\tconst data = form.getValues();\n\n\t\tif(data.range){\n\t\t\tconst rangeParts = data.range.split(\"!\");\n\n\t\t\tif(rangeParts.length == 1)\n\t\t\t\trangeParts.unshift( view.getActiveSheet() );\n\n\t\t\tdata.range = rangeParts[0]+\"!\"+rangeParts[1].toUpperCase();\n\t\t}\n\n\t\tdata.name = data.name.toUpperCase();\n\n\t\tform.setValues(data);\n\n\t\tif (form.validate()){\n\t\t\tconst table = this.$dialog.$$(\"table\");\n\n\t\t\tif(data.id){\n\t\t\t\tconst oldData = table.getItem(data.id);\n\n\t\t\t\tview.ranges.remove(oldData.name, this._getScope(oldData));\n\t\t\t\ttable.updateItem(data.id, data);\n\t\t\t}\n\t\t\telse\n\t\t\t\ttable.add(data);\n\n\t\t\tview.ranges.add(\n\t\t\t\tdata.name,\n\t\t\t\tdata.range,\n\t\t\t\tthis._getScope(data)\n\t\t\t);\n\n\t\t\tview.refresh();\n\n\t\t\ttable.unselect();\n\t\t\tform.setValues({scope: \"$global\"});\n\t\t}\n\t}\n\t_getScope(data){\n\t\treturn data.scope == \"$global\" ? true : data.scope;\n\t}\n\tremoveRange(id){\n\t\tconst view = this.view;\n\t\tview.confirm({\n\t\t\ttext: webix.i18n.spreadsheet.labels[\"range-remove-confirm\"]\n\t\t}).then(()=>{\n\t\t\tconst table = this.$dialog.$$(\"table\");\n\t\t\tconst item = table.getItem(id);\n\n\t\t\tview.ranges.remove(item.name, this._getScope(item));\n\n\t\t\tview.refresh();\n\t\t\ttable.remove(id);\n\t\t});\n\t}\n\teditRange(id){\n\t\tconst form = this.$dialog.$$(\"form\");\n\t\tconst table = this.$dialog.$$(\"table\");\n\n\t\tform.clearValidation();\n\t\tconst item = webix.copy(table.getItem(id));\n\n\t\tform.setValues(item);\n\t}\n\t$init(){\n\t\tthis.view.attachEvent(\"onSheetRename\", (name, newName)=> this._updateData(name, newName));\n\t\tthis.view.attachEvent(\"onSheetRemove\", (name)=> this._updateData(name));\n\t\tthis.view.attachEvent(\"onSheetAdd\", ()=> this._updateData());\n\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\tconst theform = {\n\t\t\tpadding:0,\n\t\t\ttype: \"clean\",\n\t\t\tcols:[\n\t\t\t\t{ view: \"ssheet-dialog-table\", id: \"table\", borderless:true, columns:[\n\t\t\t\t\t{ id:\"name\", header:locale[\"range-name\"], width: 120 },\n\t\t\t\t\t{ id:\"range\", header:locale[\"range-cells\"], width: 150 },\n\t\t\t\t\t{ id:\"scope\", header:locale[\"range-scope\"], width: 95, template: obj => {\n\t\t\t\t\t\treturn obj.scope == \"$global\" ? locale[\"range-global\"] : obj.scope;\n\t\t\t\t\t}},\n\t\t\t\t\t{ template:\"<span class='webix_icon ssheet_ranges_edit wxi-pencil'></span>\", width:44 },\n\t\t\t\t\t{ template:\"<span class='webix_icon ssheet_ranges_edit wxi-trash'></span>\", width:44 }\n\t\t\t\t],\n\t\t\t\tautowidth:true, height: 200, select:\"row\",\n\t\t\t\ton:{\n\t\t\t\t\tonBeforeSelect: id =>{\n\t\t\t\t\t\treturn id == this.$dialog.$$(\"form\").getValues().id;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonClick:{\n\t\t\t\t\t\"wxi-trash\":(ev, id) => this.removeRange(id),\n\t\t\t\t\t\"wxi-pencil\":(ev, id) => this.editRange(id)\n\t\t\t\t}},\n\t\t\t\t{ width: 270, view: \"form\", id:\"form\",\n\t\t\t\t\trules:{\n\t\t\t\t\t\tname: (_, obj)=> {\n\t\t\t\t\t\t\tconst notUnique = this.$dialog.$$(\"table\").find(item => {\n\t\t\t\t\t\t\t\treturn item.name == obj.name && item.scope == obj.scope && item.id != obj.id;\n\t\t\t\t\t\t\t}, true);\n\n\t\t\t\t\t\t\treturn !notUnique && !getLastCharIndex(obj.name);\n\t\t\t\t\t\t},\n\t\t\t\t\t\trange: isRange,\n\t\t\t\t\t\tscope: webix.rules.isNotEmpty\n\t\t\t\t\t},\n\t\t\t\t\telementsConfig:{\n\t\t\t\t\t\tlabelWidth: 95\n\t\t\t\t\t},\n\t\t\t\t\telements:[\n\t\t\t\t\t\t{ view: \"text\", name:\"name\", label: locale[\"range-name\"]},\n\t\t\t\t\t\t{ view: \"text\", name:\"range\", id:\"range\", label: locale[\"range-cells\"], on:{\n\t\t\t\t\t\t\tonFocus:()=>{\n\t\t\t\t\t\t\t\tconst value = this.$dialog.$$(\"range\").getValue();\n\t\t\t\t\t\t\t\tconst rangeParts = value.split(\"!\");\n\t\t\t\t\t\t\t\tif(rangeParts.length == 2 && this.view.getActiveSheet() != rangeParts[0])\n\t\t\t\t\t\t\t\t\tthis.view.showSheet(rangeParts[0]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}},\n\t\t\t\t\t\t{ view: \"richselect\", name:\"scope\", id:\"sheets\", label: locale[\"range-scope\"], suggest:{\n\t\t\t\t\t\t\tview: \"ssheet-form-suggest\",\n\t\t\t\t\t\t\tbody:{\n\t\t\t\t\t\t\t\tdata: []\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\tmove:true,\n\t\t\thead: webix.i18n.spreadsheet.labels[\"range-title\"],\n\t\t\tautoheight: true,\n\t\t\twidth: 800,\n\t\t\tposition: \"center\",\n\t\t\tbody: theform,\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.saveClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\t_updateData(name, newName){\n\t\tif(!this.$dialog.isVisible())\n\t\t\treturn;\n\n\t\tconst ranges = this.view._mData.getRanges();\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\tconst table = this.$dialog.$$(\"table\");\n\t\tconst form = this.$dialog.$$(\"form\");\n\n\t\tlet editRange = table.getItem( form.getValues().id );\n\t\tif(editRange){\n\t\t\tlet rangeName = editRange.name;\n\n\t\t\tif(name == editRange.scope)\n\t\t\t\trangeName = newName ? newName+\"!\"+rangeName : null;\n\t\t\telse\n\t\t\t\trangeName = editRange.scope+\"!\"+rangeName;\n\n\t\t\teditRange = rangeName ? ranges.get(rangeName) : null;\n\t\t}\n\n\t\ttable.clearAll();\n\n\t\tconst allRanges = ranges.serialize();\n\t\tconst data = [];\n\n\t\tlet selectedId;\n\t\tfor(let i = 0; i < allRanges.length; i++){\n\t\t\tconst id = i+1;\n\t\t\tlet [name, range] = allRanges[i];\n \n\t\t\tif(editRange && ranges.get(name) == editRange)\n\t\t\t\tselectedId = id;\n\n\t\t\tconst nameParts = name.split(\"!\");\n\n\t\t\tdata.push({\n\t\t\t\tscope: nameParts.length == 1 ? \"$global\" : nameParts[0],\n\t\t\t\tname: nameParts[1] || nameParts[0],\n\t\t\t\trange,\n\t\t\t\tid\n\t\t\t});\n\t\t}\n\n\t\ttable.parse(data);\n\n\t\tform.setValues({id:selectedId}, true);\n\t\tif(selectedId)\n\t\t\ttable.select(selectedId);\n\n\t\tconst select = this.$dialog.$$(\"sheets\");\n\t\tconst selectList = select.getList();\n\n\t\tselectList.clearAll();\n\n\t\tconst sheets = [{\n\t\t\tid: \"$global\", value: locale[\"range-global\"]\n\t\t}];\n\t\tthis.view._sheets.forEach(sheet => {\n\t\t\tsheets.push({id:sheet.name, value: sheet.name});\n\t\t});\n\t\tselectList.parse(sheets);\n\n\t\tif(name){\n\t\t\tconst range = this.$dialog.$$(\"range\");\n\t\t\tconst rangeVal = range.getValue();\n\n\t\t\t//remove sheet\n\t\t\tnewName = newName || this.view.getActiveSheet();\n\n\t\t\tif(rangeVal.indexOf(name+\"!\") == 0)\n\t\t\t\trange.setValue((newName)+\"!\"+rangeVal.split(\"!\")[1]);\n\n\t\t\tif(select.getValue() == name)\n\t\t\t\tselect.setValue(newName);\n\t\t}\n\t}\n}","import {Dialog} from \"./common\";\nimport {range} from \"../helpers/column_names\";\nimport group from \"../operations/undo_group\";\n\nexport const action = \"add-dropdown\";\n\nexport class DialogBox extends Dialog{\n\t$show(){\n\t\tlet form = this.$dialog.$$(\"form\");\n\t\tthis.cell = this.view.getSelectedId(true);\n\t\tif (!this.cell.length)\n\t\t\treturn false;\n\n\t\tform.clear();\n\n\t\t//restore previosly selected range\n\t\tlet value = this.view.getCellEditor(this.cell[0].row, this.cell[0].column);\n\t\tif (value && value.options)\n\t\t\tform.elements.range.setValue(value.options);\n\n\t\tthis.view.$handleSelection = function(st, end, a, b){\n\t\t\tform.elements.range.setValue(a+\":\"+b);\n\t\t\treturn false;\n\t\t};\n\n\t\tform.elements.range.focus();\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\tposition:\"center\",\n\t\t\thead:webix.i18n.spreadsheet.labels[\"dropdown-title\"],\n\t\t\tmove: true,\n\t\t\tbody:{\n\t\t\t\tpadding:0, view:\"form\", id:\"form\", rows:[\n\t\t\t\t\t{ view:\"text\", label:webix.i18n.spreadsheet.labels[\"dropdown-range\"], name:\"range\" }\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\tokClick(){\n\t\tconst values = this.$dialog.$$(\"form\").elements.range.getValue();\n\n\t\tif (values){\n\t\t\tif(!range(values, this.view))\n\t\t\t\tthis.view.alert({text:webix.i18n.spreadsheet.labels[\"error-range\"]});\n\t\t\telse{\n\t\t\t\tgroup.set(function(){\n\t\t\t\t\tfor (let i = 0; i < this.cell.length; i++)\n\t\t\t\t\t\tthis.view.setCellEditor(this.cell[i].row, this.cell[i].column, { editor:\"ss_richselect\", options:values});\n\t\t\t\t}, this);\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tthis.close();\n\t}\n}","import {range as getRangePos} from \"../helpers/column_names\";\nimport {cell_template} from \"../table\";\n\nclass Ranges{\n\tconstructor(view){\n\t\tthis._master = view;\n\t}\n\tclear(scope){\n\t\tconst sheet = typeof scope == \"string\" ? scope : this._master.getActiveSheet();\n\t\tconst ranges = this.serialize(sheet);\n\t\tranges.forEach(range => {\n\t\t\tif(scope === true){\n\t\t\t\tif(range[2])\n\t\t\t\t\tthis.remove(range[0], scope);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse\n\t\t\t\tthis.remove(range[0], scope);\n\t\t});\n\t}\n\t_normalizeName(name, scope){\n\t\tif(scope !== true)\n\t\t\tname = (scope || this._master.getActiveSheet())+\"!\"+name;\n\t\treturn name;\n\t}\n\t_normalizeRange(range, scope){\n\t\tconst rangeParts = range.split(\"!\");\n\t\tif(rangeParts.length == 1)\n\t\t\trange = (typeof scope == \"string\" ? scope : this._master.getActiveSheet()) + \"!\" + range;\n\t\treturn range;\n\t}\n\tadd(name, range, scope){\n\t\tconst view = this._master;\n\n\t\tview.callEvent(\"onAfterRangeSet\", [name, range, scope]);\n\n\t\tname = this._normalizeName(name, scope);\n\n\t\tview._mData.getRanges().add(name, this._normalizeRange(range, scope));\n\t\tview.callEvent(\"onMathRefresh\", []);\n\t}\n\tgetCode(name, scope){\n\t\tname = this._normalizeName(name, scope);\n\n\t\tconst range = this._master._mData.getRanges().get(name);\n\t\tif(range)\n\t\t\treturn range.source;\n\t}\n\tremove(name, scope){\n\t\tname = this._normalizeName(name, scope);\n\n\t\tthis._master._mData.getRanges().remove(name);\n\t\tthis._master.callEvent(\"onMathRefresh\", []);\n\t}\n\tparse(data, sheet){\n\t\tif(!data)\n\t\t\treturn;\n\t\tfor(let i = 0; i < data.length; i++){\n\t\t\tconst ranges = this._master._mData.getRanges();\n\t\t\tlet [name, range, globalRange] = data[i];\n\t\t\tname = this._normalizeName(name, globalRange||sheet);\n\n\t\t\tif(!ranges.get(name))\n\t\t\t\tranges.add(name, this._normalizeRange(range, sheet));\n\t\t}\n\t}\n\tserialize(sheet){\n\t\tsheet = sheet || this._master.getActiveSheet();\n\t\tconst allRanges = this._master._mData.getRanges().serialize();\n\t\tconst out = [];\n\n\t\tfor(let i = 0; i < allRanges.length; i++){\n\t\t\tconst arr = allRanges[i];\n\t\t\tconst nameParts = arr[0].split(\"!\");\n\t\t\tconst globalRange = nameParts.length == 1;\n\n\t\t\tif(globalRange || nameParts[0] == sheet)\n\t\t\t\tout.push([\n\t\t\t\t\tnameParts[ globalRange ? 0 : 1 ],\n\t\t\t\t\tarr[1],\n\t\t\t\t\tglobalRange\n\t\t\t\t]);\n\t\t}\n\n\t\treturn out;\n\t}\n\tgetRanges(sheet){\n\t\tconst data = this.serialize(sheet);\n\t\treturn data.map(arr => {\n\t\t\treturn {\n\t\t\t\tname: arr[0],\n\t\t\t\trange: arr[1],\n\t\t\t\tglobal: arr[2]\n\t\t\t};\n\t\t});\n\t}\n}\n\nexport function init(view) {\n\tview.ranges = new Ranges(view);\n\n\tview.attachEvent(\"onDataSerialize\", data => {\n\t\tdata.ranges = view.ranges.serialize();\n\t});\n}\n\nfunction nullFilter(){ \n\tconst locale = webix.i18n.spreadsheet.labels;\n\treturn { id:\"$empty\", value:\"\", $value:\"<span class='webix_ssheet_empty'>\"+locale[\"dropdown-empty\"]+\"</span>\" };\n}\n\nfunction getRange(view, r1, c1, r2, c2){\n\tconst out = [];\n\tconst activeSheet = view._mPage === this;\n\n\tfor (var i = r1-1; i <= r2-1; i++) {\n\t\tfor (var j = c1-1; j <= c2-1; j++){\n\t\t\tlet obj = this.getCell(i, j);\n\t\t\tlet cell;\n\n\t\t\tif(!obj)\n\t\t\t\tcell = {\n\t\t\t\t\tvalue: \"\"\n\t\t\t\t};\n\t\t\telse\n\t\t\t\tcell = webix.copy(obj);\n\n\t\t\tif(activeSheet)\n\t\t\t\tcell.$value = cell_template(view, {id: i+1}, null, null, {id:j+1}, true);\n\t\t\telse\n\t\t\t\tdelete cell.format;\n\n\t\t\tcell.id = cell.value;\n\t\t\tout.push(cell);\n\t\t}\n\t}\n\n\treturn out;\n}\n\nexport function rangeOptions(view, text, extra){\n\tlet values = [];\n\tif (typeof text == \"string\"){\n\t\tconst pos = getRangePos(text, view);\n\t\tif (pos){\n\t\t\tlet page = view._mPage;\n\t\t\tif(pos[4])\n\t\t\t\tpage = view._mData.getPage(pos[4]);\n\n\t\t\tvalues = page ? getRange.apply(page, [view, ...pos]) : [];\n\t\t}\n\t}\n\telse if (webix.isArray(text))\n\t\tfor (let i=0; i<text.length; i++){\n\t\t\tlet v = (text[i] || text[i] === 0) ? text[i] : \"\";\n\t\t\tv = (typeof v === \"object\") ? webix.copy(v) : { id:v, value:v };\n\t\t\tvalues.push(v);\n\t\t}\n\n\tif (extra){\n\t\tif (extra.unique){\n\t\t\tconst test = {};\n\t\t\tfor (let i=values.length-1; i>=0; i--){\n\t\t\t\tif (test[values[i].id])\n\t\t\t\t\tvalues.splice(i, 1);\n\t\t\t\telse\n\t\t\t\t\ttest[values[i].id] = true;\n\t\t\t}\n\t\t}\n\n\t\tlet empty = false;\n\t\tfor (let i=values.length-1; i>=0; i--){\n\t\t\tvalues[i].value = String(values[i].value);\n\t\t\tif (values[i].value === \"\"){\n\t\t\t\tvalues.splice(i, 1);\n\t\t\t\tempty = true;\n\t\t\t}\n\t\t}\n\n\t\tif (extra.order)\n\t\t\tvalues.sort(function(objA, objB){\n\t\t\t\tconst sorters = view.$$(\"cells\").data.sorting.as;\n\t\t\t\tconst a = objA.value;\n\t\t\t\tconst b = objB.value;\n\n\t\t\t\treturn webix.rules.isNumber(a) && webix.rules.isNumber(b) ? sorters.int(a, b) : sorters.string(a, b);\n\t\t\t});\n\n\t\tif (empty && extra.filter)\n\t\t\tvalues.unshift( nullFilter() );\n\n\t\tif (extra.empty)\n\t\t\tvalues.unshift({ id:\"$empty\", $empty:true, value:\"\" });\n\t}\n\treturn values;\n}","import group from \"./undo_group\";\nimport {getType} from \"./types\";\nimport {setSpanCss} from \"./spans\";\nimport {rangeOptions} from \"../mathematics/ranges\";\nimport {changeRange, eachRange, toRange} from \"../helpers/column_names\";\nimport {conditions} from \"../helpers/conditional\";\n\nexport function init(view){\n\tconst table = view._table;\n\n\tview.attachEvent(\"onReset\", () => reset(view));\n\treset(view);\n\n\ttable.on_click.ssheet_filter_sign = (e, id) => {\n\t\tconst filter = table._ssFilters[id.row][id.column];\n\t\tconst mode = filter.mode || getFilterMode(view, id.row, id.column);\n\n\t\tlet options = [];\n\t\tif (filter.options){\n\t\t\tif (typeof filter.options == \"string\")\n\t\t\t\toptions = rangeOptions(view, filter.options, { unique:true, order:true, filter:true });\n\t\t\telse if (webix.isArray(filter.options))\n\t\t\t\toptions = rangeOptions(view, filter.options, { filter:true });\n\t\t}\n\t\tview.callEvent(\"onCommand\", [{id:\"start-filter\", cell:id, mode, options, filter}]);\n\t};\n\ttable.on_dblclick.ssheet_filter_sign = () => false;\n\n\tview.attachEvent(\"onCommand\", (cm) => {\n\t\tif (cm.id === \"create-filter\")\n\t\t\ttoggleFilters(view);\n\t});\n\n\tlet refilter = false;\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tif (type == \"filter\"){\n\t\t\tvalue = (typeof value == \"object\") ? value : null;\n\t\t\tview.setCellFilter(row, column, value);\n\t\t\trefilter = true;\n\t\t}\n\t\telse if (type == \"apply-filter\"){\n\t\t\tconst filter = view.getCellFilter(row, column);\n\n\t\t\tfilter.value = value;\n\t\t\tdelete filter.handler;\n\t\t\tif (value && value.condition){\n\t\t\t\tconst mode = filter.mode || getFilterMode(view, row, column);\n\t\t\t\tfilter.handler = getFilterFunction(mode, filter.value);\n\t\t\t}\n\t\t\trefilter = true;\n\n\t\t\t// update css\n\t\t\tconst add = value && isValueActive(value);\n\t\t\ttable[add?\"addCellCss\":\"removeCellCss\"](row, column, \"ss_filter_active\");\n\t\t\tsetSpanCss(view, row, column, \"ss_filter_active\", add);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAfterUndo\", () => {\n\t\tif (refilter){\n\t\t\tview.filterSpreadSheet();\n\t\t\trefilter = false;\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p) => {\n\t\tif (action == \"filter\"){\n\t\t\tsetSpanCss(view, p.row, p.column, \"ss_filter\", p.newValue);\n\t\t\tsetSpanCss(view, p.row, p.column, \"ss_filter_active\", (p.newValue && p.newValue.value && isValueActive(p.newValue.value)));\n\t\t\tmarkBarFilter(view);\n\t\t}\n\t\telse if (action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n}\n\nfunction reset(view){\n\tview._table._ssFilters = {};\n\tmarkBarFilter(view);\n}\n\nexport function getFilters(table){\n\tconst filters = table._ssFilters;\n\tconst all = [];\n\tfor (let row in filters)\n\t\tfor (let column in filters[row])\n\t\t\tall.push(filters[row][column]);\n\treturn all;\n}\n\nexport function serialize(view,data){\n\tconst filters = getFilters(view._table);\n\tconst result = data.filters = [];\n\n\tfor (let i = 0; i<filters.length; i++){\n\t\tlet {row, column, options, mode, value} = filters[i];\n\t\tvalue = value && webix.copy(value);\n\t\tresult.push([row, column, {value, options, mode}]);\n\t}\n}\n\nexport function load(view,data){\n\tconst filters = data.filters;\n\n\tif (filters){\n\t\tfor (let i = 0; i < filters.length; i++){\n\t\t\tview.setCellFilter(filters[i][0], filters[i][1], (filters[i][2] || {options:\"\"}));\n\t\t}\n\t\tview.filterSpreadSheet();\n\t}\n}\n\nexport function clearFilters(view, range){\n\tlet refilter = false;\n\teachRange(range, view, function(view, cell){\n\t\tlet filter = view._table._ssFilters[cell.row];\n\t\tif (filter){\n\t\t\tif (filter[cell.column]){\n\t\t\t\trefilter = true;\n\t\t\t\tdelete filter[cell.column];\n\n\t\t\t\tview._table.removeCellCss(cell.row, cell.column, \"ss_filter\");\n\t\t\t\tview._table.removeCellCss(cell.row, cell.column, \"ss_filter_active\");\n\n\t\t\t\tsetSpanCss(view, cell.row, cell.column, \"ss_filter\", false);\n\t\t\t\tsetSpanCss(view, cell.row, cell.column, \"ss_filter_active\", false);\n\t\t\t}\n\t\t}\n\t});\n\n\tif (refilter)\n\t\tview.filterSpreadSheet();\n}\n\nexport function isFilter(view, row, column){\n\tconst filters = view._table._ssFilters;\n\treturn filters[row] && !!filters[row][column];\n}\n\nexport function calibrateRange(view, row, column, range){\n\tif(!range)\n\t\trange = {end:{row:row}};\n\n\tif (range.end){\n\t\tvar endRow = range.end.row;\n\t\trange = getFilterRange(view, row, column, endRow);\n\t}\n\treturn range;\n}\n\nexport function isValueActive(value){\n\treturn !!(value.includes || (value.condition && value.condition.filter));\n}\n\nfunction isFilterExists(view){\n\tconst filters = view._table._ssFilters;\n\tfor (let row in filters)\n\t\tfor (let column in filters[row])\n\t\t\tif (filters[row][column]) return true;\n\treturn false;\n}\n\nfunction markBarFilter(view){\n\tconst value = isFilterExists(view);\n\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"create-filter\", value}]);\n}\n\n\nfunction getFilterRange(view, row, column, endRow){\n\tif (row === endRow){\n\t\tfor (endRow = row; endRow < view.config.rowCount; endRow++){\n\t\t\tif(!view.getCellValue(endRow+1, column))\n\t\t\t\tbreak;\n\t\t}\n\t}\n\treturn toRange(row+1, column, endRow, column);\n}\n\nexport function getFilterMode(view, row, column){\n\tfor (let i=row+1; i<view.config.rowCount; i++){\n\t\tconst value = view.getCellValue(i, column);\n\n\t\tif (value || value === 0){\n\t\t\tconst type = getType(view, i, column);\n\t\t\treturn (type == \"number\" || type == \"date\") ? type : \"text\";\n\t\t}\n\t\telse if (value !== \"\")\n\t\t\tbreak;\n\t}\n\treturn \"text\";\n}\n\nfunction toggleFilters(view){\n\tconst range = view._table.getSelectArea();\n\n\tif (isFilterExists(view)){\n\t\tgroup.set(function(){\n\t\t\tview.removeFilters();\n\t\t});\n\t\tif (range)\n\t\t\tview._table.addSelectArea(range.start, range.end);\n\t}\n\telse if (range)\n\t\tgroup.set(function(){\n\t\t\tlet row = range.start.row;\n\t\t\tfor (let i=range.start.column; i<=range.end.column; i++){\n\t\t\t\tview.setCellFilter(row, i, { options:range });\n\t\t\t}\n\t\t});\n\tmarkBarFilter(view);\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tconst filters = data.filters;\n\n\tif (inc){\n\t\tfor(let i=filters.length-1; i>=0; i--){\n\t\t\tlet [row,column,filter] = filters[i];\n\t\t\tif (name == \"row\" && row >= start.row || name == \"column\" && column >= start.column){\n\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc){\t//delete filter mark if row was deleted\n\t\t\t\t\t\tfilters.splice(i,1);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else\t\t\t\t\t\t//update mark position if upper row was deleted\n\t\t\t\t\t\tfilters[i][0] = row*1 + inc;\n\t\t\t\t}\n\t\t\t\telse if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\tfilters.splice(i, 1);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else \n\t\t\t\t\t\tfilters[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t\tfilter.options = changeRange(filter.options, name, inc, start);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function pasteFilter(view, extra, row, col, cutted, translate){\n\tconst filter = extra.filter;\n\n\tfilter.options = changeRange(filter.options, \"row\", translate.row, {column:extra.col, row:extra.row});\n\tfilter.options = changeRange(filter.options, \"column\", translate.column, {column:extra.col, row:extra.row});\n\n\tdelete filter.value; delete filter.handler;\n\tview.setCellFilter(row, col, filter);\n}\n\nexport function getSingleOption(mode, type){\n\tconst c = conditions[mode];\n\tfor (let i=0; i<c.length; i++)\n\t\tif (c[i].id == type) return c[i];\n}\n\nexport function getConditions(name){\n\treturn webix.copy( conditions[name] );\n}\n\nexport function getFilterFunction(mode, value){\n\tconst { includes, condition } = value;\n\tconst opt = getSingleOption(mode, condition.type);\n\tconst handler = opt ? opt.handler : function(){ return true; };\n\n\tif (includes){\n\t\tfor (let i=0; i<includes.length; i++)\n\t\t\tincludes[i] = String(includes[i]);\n\t}\n\n\treturn function(value){\n\t\tif (includes){\n\t\t\treturn includes.indexOf(value) !== -1;\n\t\t} else {\n\t\t\treturn condition.filter === \"\" || handler(value, condition.filter);\n\t\t}\n\t};\n}","import {Dialog} from \"./common\";\nimport * as flt from \"../operations/filter\";\n\nexport const action = \"start-filter\";\n\nexport class DialogBox extends Dialog{\n\topen(action){\n\t\tthis.cell = action.cell;\n\t\tthis.$mode = action.mode;\n\t\tthis.$filter = action.filter;\n\n\t\t// cell not provided\n\t\tif (!this.cell || \n\t\t\t// cell is locked\n\t\t\t(this.view.isCellLocked(this.cell.row, this.cell.column))){\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.$dialog){\n\t\t\tthis.$dialog = webix.ui(this.$init());\n\t\t\tthis.view._destroy_with_me.push(this.$dialog);\n\t\t\tthis.$dialog.attachEvent(\"onHide\", () => this.$hide());\n\n\t\t\tconst table = this.view.$$(\"cells\");\n\t\t\ttable.attachEvent(\"onScrollY\", () => this.syncScroll());\n\t\t\ttable.attachEvent(\"onScrollX\", () => this.syncScroll());\n\t\t}\n\n\t\tif (this.$show(this.$filter.value, action.options) === false)\n\t\t\treturn this.close();\n\t\tthis.$dialog.show( this._getTargetNode() );\n\t}\n\t_getTargetNode(){\n\t\tconst table = this.view.$$(\"cells\");\n\t\tconst span = table.getSpan(this.cell.row, this.cell.column);\n\t\treturn span ? table.getSpanNode(this.cell) : table.getItemNode(this.cell);\n\t}\n\t$show(value, options){\n\t\tconst list = this.getList();\n\t\tconst filter = this.getFilter();\n\n\t\tif (filter.config.mode !== this.$mode){\n\t\t\tfilter.define(\"conditions\", this.getConditions(this.$mode));\n\t\t\tfilter.define(\"mode\", this.$mode);\n\t\t}\n\n\t\t// if the filter mode for the current column has been changed - reset the value\n\t\tconst type = value && value.conditions && value.conditions.type;\n\t\tif (type && !flt.getSingleOption(this.$mode, type))\n\t\t\tvalue = \"\";\n\n\t\tlist.clearAll();\n\t\tlist.data.importData(options);\n\n\t\t// filter data has been changed - reset value\n\t\tfilter.config.value = \"\";\n\t\tfilter.setValue( webix.copy(value||{}) );\n\t}\n\t$init(){\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\treturn {\n\t\t\tview:\"popup\",\n\t\t\tcss:\"ssheet_filter\",\n\t\t\tpadding:7,\n\t\t\trelative:\"right\",\n\t\t\tbody:{\n\t\t\t\tmargin:4,\n\t\t\t\trows:[\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"filter\",\n\t\t\t\t\t\tfield:\"value\",\n\t\t\t\t\t\tmode:\"text\",\n\t\t\t\t\t\tconditions:this.getConditions(\"text\"),\n\t\t\t\t\t\tinputs:[\n\t\t\t\t\t\t\t\"text\",\n\t\t\t\t\t\t\t{ view:\"ssheet-datepicker\", timepicker:true, batch:\"datepicker\", on:{\n\t\t\t\t\t\t\t\tonChange:() => this.getFilter().applyFilter()\n\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t{ view:\"ssheet-daterangepicker\", timepicker:true, batch:\"daterangepicker\", on:{\n\t\t\t\t\t\t\t\tonChange:() => this.getFilter().applyFilter()\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t],\n\t\t\t\t\t\ttemplate:function(obj){\n\t\t\t\t\t\t\treturn obj.$value || obj.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{ cols:[\n\t\t\t\t\t\t{ },\n\t\t\t\t\t\t{ view:\"button\", label:locale[\"cancel\"], autowidth:true, css:\"webix_transparent\", on:{\n\t\t\t\t\t\t\t\"onItemClick\": () => this.close()\n\t\t\t\t\t\t}},\n\t\t\t\t\t\t{ view:\"button\", label:locale[\"apply\"], autowidth:true, css:\"webix_secondary\", on:{\n\t\t\t\t\t\t\t\"onItemClick\": () => this.applyFilter()\n\t\t\t\t\t\t}},\n\t\t\t\t\t]}\n\t\t\t\t]\n\t\t\t}\n\t\t};\n\t}\n\tapplyFilter(){\n\t\tconst filter = this.getFilter();\n\t\tconst oldValue = this.$filter.value;\n\t\tconst value = this.$filter.value = filter.getValue();\n\t\tthis.$filter.handler = flt.getFilterFunction(this.$mode, value);\n\n\t\tthis.view.filterSpreadSheet();\n\t\tthis.view.callEvent(\"onAction\", [\"apply-filter\", { row:this.cell.row, column:this.cell.column, value:oldValue, newValue:value }]);\n\t\tthis.setCellStyle(this.cell.row, this.cell.column, \"ss_filter_active\", flt.isValueActive(value));\n\n\t\tthis.close();\n\t}\n\tsetCellStyle(row, column, css, add){\n\t\tconst table = this.view.$$(\"cells\");\n\t\tconst span = this.getSpan(table, row, column);\n\n\t\tif (span){\n\t\t\tif (add){\n\t\t\t\tif (span[3].indexOf(css) == -1)\n\t\t\t\t\tspan[3] += \" \" + css;\n\t\t\t} else {\n\t\t\t\tspan[3] = span[3].replace(\" \" + css, \"\");\n\t\t\t}\n\t\t}\n\t\ttable[add?\"addCellCss\":\"removeCellCss\"](row, column, css);\n\t}\n\tgetSpan(table, row, column){\n\t\tlet item = table.getSpan()[row];\n\t\tif (item)\n\t\t\treturn item[column];\n\t}\n\tgetList(){\n\t\treturn this.getFilter().getChildViews()[2];\n\t}\n\tgetFilter(){\n\t\treturn this.$dialog.getBody().getChildViews()[0];\n\t}\n\tsyncScroll(){\n\t\tif (this.$dialog.isVisible()){\n\t\t\tconst node = this._getTargetNode();\n\t\t\tconst table = this.view.$$(\"cells\");\n\n\t\t\tlet isHidden = false;\n\t\t\tif (node){\n\t\t\t\tconst nodeOffset = webix.html.offset( node );\n\t\t\t\tconst tableOffset = webix.html.offset( table.$view.getElementsByClassName(\"webix_ss_body\")[0] );\n\t\t\t\tconst ydiff = nodeOffset.y - tableOffset.y;\n\t\t\t\tconst xdiff = nodeOffset.x - tableOffset.x + nodeOffset.width;\n\n\t\t\t\tisHidden = (ydiff < 0 || ydiff+nodeOffset.height > tableOffset.height || \n\t\t\t\t\txdiff < 0 || xdiff-nodeOffset.width > tableOffset.width - webix.env.scrollSize);\n\t\t\t}\n\t\t\tif (!node || isHidden)\n\t\t\t\tthis.$dialog.show({x:-9999, y:-9999});\n\t\t\telse \n\t\t\t\tthis.$dialog.show(node);\n\t\t}\n\t}\n\tgetConditions(name){\n\t\tconst locale = webix.i18n.filter;\n\t\tconst conditions = flt.getConditions(name);\n\n\t\tfor (let i=0; i<conditions.length; i++)\n\t\t\tif (conditions[i].id)\n\t\t\t\tconditions[i].value = locale[conditions[i].id];\n\n\t\treturn conditions;\n\t}\n}","import {Dialog} from \"./common\";\nimport {getFormat} from \"../operations/styles\";\nimport * as fmt from \"../operations/formats\";\nimport group from \"../operations/undo_group\";\n\nexport const action = \"custom\";\n\nexport class DialogBox extends Dialog{\n\t$show(){\n\t\tthis.form = this.$dialog.$$(\"form\");\n\t\tthis.list = this.$dialog.$$(\"list\");\n\t\tthis.preview = this.$dialog.$$(\"preview\");\n\n\t\tthis.cell = this.view.getSelectedId(true);\n\t\tif (!this.cell.length)\n\t\t\treturn false;\n\n\t\tthis.fillForm(this.view);\n\n\t\tthis.view.$handleSelection = function(){\n\t\t\treturn false;\n\t\t};\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\t$init(){\n\t\tconst i18n = webix.i18n.spreadsheet;\n\t\tconst labelsLocale = i18n.labels;\n\t\tconst formatsLocale = i18n.formats;\n\n\t\tconst docsLink = \"https://webix-guides.gitbook.io/spreadsheet-user-guide/formatting_numbers#custom-number-format\";\n\t\tconst delimiters = fmt.getDelimiters(\"int\");\n\n\t\tconst commonConfig = [\n\t\t\t{\n\t\t\t\tname:\"zeros\",\n\t\t\t\tview:\"counter\",\n\t\t\t\tcss:\"webix_ssheet_counter\",\n\t\t\t\tlabel:labelsLocale[\"decimal-places\"],\n\t\t\t\tvalue:0,\n\t\t\t\tbatch:\"common\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"separator\",\n\t\t\t\tview:\"checkbox\",\n\t\t\t\tlabel:labelsLocale[\"separator\"],\n\t\t\t\tbatch:\"common\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"richselect\",\n\t\t\t\tname:\"symbol\",\n\t\t\t\tlabel:labelsLocale[\"currency-symbol\"],\n\t\t\t\toptions:fmt.currencies,\n\t\t\t\tbatch:\"common\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"formlist\",\n\t\t\t\tlabel:labelsLocale[\"negative\"],\n\t\t\t\theight: 160,\n\t\t\t\tname:\"negative\",\n\t\t\t\tbatch:\"common\",\n\t\t\t\tcss:\"webix_ssheet_format_negative\",\n\t\t\t\ttemplate: obj => {\n\t\t\t\t\tif(this.list){\n\t\t\t\t\t\tlet format = this.getFormat(obj.id);\n\t\t\t\t\t\tformat = fmt.format2code(format.fmt, format.delimiters);\n\t\t\t\t\t\tconst style = {css:\"\"};\n\t\t\t\t\t\tconst value = format(-1234.56789, style);\n\n\t\t\t\t\t\treturn \"<span class='\"+style.css+\"'>\"+value+\"</span>\";\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdata:[{id:1}, {id:2}, {id:3}, {id:4}]\n\t\t\t}\n\t\t];\n\n\t\tconst customConfig = [\n\t\t\t{\n\t\t\t\tview:\"text\",\n\t\t\t\tlabel: labelsLocale[\"format-pattern\"],\n\t\t\t\tname:\"format\",\n\t\t\t\tlabelPosition:\"top\",\n\t\t\t\tbatch:\"custom\",\n\t\t\t\tplaceholder:\"[>100]0\"+delimiters.groupSign+\"000\"+delimiters.decimalSign+\"00;[>0]None\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"docs\",\n\t\t\t\ttemplate: \"<a href='\"+docsLink+\"' target='_blank' class = 'docs'>\"+labelsLocale[\"format-docs\"]+\"</a>\",\n\t\t\t\tborderless:true,\n\t\t\t\tbatch:\"custom\"\n\t\t\t}\n\t\t];\n\n\t\tconst dateConfig = [\n\t\t\t{\n\t\t\t\tname:\"date\",\n\t\t\t\tbatch:\"date\",\n\t\t\t\tview:\"formlist\",\n\t\t\t\tlabelWidth: 90,\n\t\t\t\theight: 160,\n\t\t\t\tlabel:labelsLocale[\"date-format\"],\n\t\t\t\tcss:\"webix_ssheet_format_date\",\n\t\t\t\ttemplate: obj => fmt.format2code(obj.value, delimiters)(45000),\n\t\t\t\tdata:[\n\t\t\t\t\tformatsLocale.dateFormat,\n\t\t\t\t\tformatsLocale.timeFormat,\n\t\t\t\t\tformatsLocale.fullDateFormat,\n\t\t\t\t\tformatsLocale.longDateFormat\n\t\t\t\t]\n\t\t\t}\n\t\t];\n\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\tposition:\"center\",\n\t\t\twidth:460,\n\t\t\thead: labelsLocale[\"format-title\"],\n\t\t\tmove: true,\n\t\t\tbody:{\n\t\t\t\tpadding:0,\n\t\t\t\tcols:[\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"list\",\n\t\t\t\t\t\tid:\"list\",\n\t\t\t\t\t\tcss:\"webix_ssheet_format_type\",\n\t\t\t\t\t\twidth:120,\n\t\t\t\t\t\tscroll:false,\n\t\t\t\t\t\tdata:this.getFormats(),\n\t\t\t\t\t\tselect:true,\n\t\t\t\t\t\ton:{\n\t\t\t\t\t\t\tonSelectChange: (id)=>{\n\t\t\t\t\t\t\t\tthis.updateForm();\n\t\t\t\t\t\t\t\tswitch(id[0]){\n\t\t\t\t\t\t\t\t\tcase \"custom\":\n\t\t\t\t\t\t\t\t\tcase \"date\":\n\t\t\t\t\t\t\t\t\t\tthis.form.showBatch(id[0]);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tdefault:{\n\t\t\t\t\t\t\t\t\t\tconst elements = this.form.elements;\n\t\t\t\t\t\t\t\t\t\tthis.form.showBatch(\"common\");\n\n\t\t\t\t\t\t\t\t\t\telements.separator[ id[0] == \"percent\" ? \"hide\" : \"show\" ]();\n\t\t\t\t\t\t\t\t\t\telements.symbol[ id[0] == \"price\" ? \"show\" : \"hide\" ]();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"form\",\n\t\t\t\t\t\tid:\"form\",\n\t\t\t\t\t\theight:340,\n\t\t\t\t\t\tpaddingY:0,\n\t\t\t\t\t\tpaddingX:20,\n\t\t\t\t\t\telements:[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: \"preview\",\n\t\t\t\t\t\t\t\ttemplate: function(obj){\n\t\t\t\t\t\t\t\t\tif(obj.value == i18n.table[\"format-error\"])\n\t\t\t\t\t\t\t\t\t\treturn obj.value;\n\t\t\t\t\t\t\t\t\treturn \"<span class ='\"+obj.css+\"'>\"+obj.value+\"</span>\";\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcss: \"webix_ssheet_format_preview\",\n\t\t\t\t\t\t\t\tautoheight: true,\n\t\t\t\t\t\t\t\tborderless:true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t].concat(commonConfig, customConfig, dateConfig),\n\t\t\t\t\t\telementsConfig: {\n\t\t\t\t\t\t\tlabelWidth: 140\n\t\t\t\t\t\t},\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonChange: () => this.updateForm()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.closeWin()\n\t\t\t}\n\t\t};\n\t}\n\tokClick(){\n\t\tlet type = this.list.getSelectedId();\n\t\tlet values = (type == \"custom\")?{format:this.form.getValues().format}:this.form.getValues();\n\t\tvalues.type = type;\n\n\t\tgroup.set(()=>{\n\t\t\tfor (let i = 0; i < this.cell.length; i++)\n\t\t\t\tfmt.addFormat(this.view, this.cell[i].row, this.cell[i].column, values.format, values);\n\t\t});\n\n\t\tthis.view.$$(\"cells\").refresh();\n\t\tthis.closeWin();\n\t}\n\tcloseWin(){\n\t\tconst format = getFormat(this.view, this.cell[0].row, this.cell[0].column);\n\t\tconst name = format || \"common\";\n\n\t\t//default format\n\t\tif(!fmt.isCustom(name))\n\t\t\tthis.view.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"format\", value:name}]);\n\t\tthis.close();\n\t}\n\tgetFormat(negative){\n\t\tconst type = this.list.getSelectedId();\n\t\tlet values = this.form.getValues();\n\n\t\tvalues.negative = negative || values.negative;\n\t\tif(type != \"custom\"){\n\t\t\tif(type != \"date\")\n\t\t\t\tvalues.date = \"\";\n\n\t\t\tvalues = fmt.formToValues(type, values);\n\t\t\treturn {\n\t\t\t\tfmt: fmt.serializeFormat(values),\n\t\t\t\tdelimiters:fmt.getDelimiters(type)\n\t\t\t};\n\t\t}\n\t\telse\n\t\t\treturn {\n\t\t\t\tfmt: values.format,\n\t\t\t\tdelimiters: fmt.getDelimiters(type)\n\t\t\t};\n\t}\n\tfillForm(view){\n\t\tconst locale = webix.i18n.spreadsheet;\n\t\tconst format = getFormat(view, this.cell[0].row, this.cell[0].column);\n\t\tlet values = { zeros:0, separator: 0, negative: 1, date: locale.formats.dateFormat, symbol:fmt.currencies[0].value, format: \"\"};\n\t\tlet type;\n\n\t\tlet name = format || \"\";\n\n\t\tvalues.format = fmt.getFormatSource(name || \"price\");\n\n\t\tif(!name)\n\t\t\ttype = name = \"price\";\n\t\telse if(name == \"string\")\n\t\t\ttype = name = \"custom\";\n\t\telse\n\t\t\ttype = fmt.formatHelpers[name].values.type;\n\n\t\tif(type != \"custom\")\n\t\t\twebix.extend(values, fmt.formatHelpers[name].values, true);\n\n\t\tconst item = this.view.$$(\"cells\").getItem(this.cell[0].row);\n\t\tconst col = this.cell[0].column;\n\n\t\tthis.value = webix.isUndefined(item[col]) ? \"\" : item[col];\n\n\t\tthis.form.setValues(values);\n\t\tthis.list.select(type);\n\t\tthis.updateForm();\n\t}\n\tupdateForm(){\n\t\tconst form = this.form.elements;\n\t\tconst format = this.getFormat();\n\t\tlet value = this.value;\n\n\t\tconst isText = value === \"\" || isNaN(value);\n\n\t\tif(fmt.checkFormat(format, \"date\") && (isText || fmt.isDateInvalid(value)))\n\t\t\tvalue = 45000;\n\t\telse if(isText && !fmt.checkFormat(format, \"string\"))\n\t\t\tvalue = 1234.56789;\n\n\t\tlet style = {css:\"\"};\n\t\tvalue = fmt.format2code(format.fmt, format.delimiters)(value, style);\n\n\t\t//preview values\n\t\tthis.preview.parse({value:value, css:style.css});\n\t\tform.negative.refresh();\n\t\tform.date.refresh();\n\n\t\t//set new format string\n\t\tform.format.setValue(format.fmt);\n\t}\n\tgetFormats(){\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\treturn [\n\t\t\t{id: \"price\", value: locale.currency},\n\t\t\t{id: \"int\", value: locale.number},\n\t\t\t{id: \"percent\", value: locale.percent},\n\t\t\t{id: \"date\", value: locale.date},\n\t\t\t{id: \"custom\", value: locale[\"custom-format\"]}\n\t\t];\n\t}\n}","import {Dialog} from \"./common\";\nimport {getJsDateFromExcel, getExcelDateFromJs} from \"../mathematics/methods\";\nimport {isDateInvalid} from \"../operations/formats\";\nimport {getDateEditFormat} from \"../operations/formats\";\nimport {getType} from \"../operations/types\";\nimport {find} from \"../helpers/array\";\n\nexport const action = \"conditional-format\";\n\nfunction getConditionStyle(data){\n\treturn data.map(item => {\n\t\titem.id = item.css;\n\t\treturn item;\n\t});\n}\n\nexport class DialogBox extends Dialog{\n\t_rulesToArr(){\n\t\tconst conditions = this.view.conditions.handlers;\n\t\treturn [\n\t\t\t{\n\t\t\t\tvalue: webix.i18n.spreadsheet.labels[\"common\"],\n\t\t\t\tdisabled:true,\n\t\t\t\t$css:\"webix_ssheet_cformats_type\"\n\t\t\t},\n\t\t\t...conditions.date, //number rules equal to date\n\t\t\t{\n\t\t\t\tvalue: webix.i18n.spreadsheet.labels[\"text\"],\n\t\t\t\tdisabled:true,\n\t\t\t\t$css:\"webix_ssheet_cformats_type\"\n\t\t\t},\n\t\t\t...conditions.text\n\t\t].map(rule => {\n\t\t\tif(!rule.value)\n\t\t\t\trule.value = webix.i18n.filter[ rule.id ];\n\t\t\treturn rule;\n\t\t});\n\t}\n\n\t_getCondition() {\n\t\tconst view = this.view;\n\t\tconst values = this._getDatalayout().getValue();\n\n\t\tconst data = [];\n\t\tvalues.forEach(v => {\n\t\t\tconst item = [v.condition];\n\t\t\tif (v.condition != \"between\" && v.condition != \"notBetween\")\n\t\t\t\titem.push(this._normalizeValue(v.value, v.condition));\n\t\t\telse\n\t\t\t\titem.push([\n\t\t\t\t\tthis._normalizeValue(v.value, v.condition),\n\t\t\t\t\tthis._normalizeValue(v.value2, v.condition)\n\t\t\t\t]);\n\n\t\t\titem.push(v.style);\n\t\t\tfor (let i=0; i<item.length; i++){\n\t\t\t\tif (item[i] === \"\" || (webix.isArray(item[i]) && item[i].indexOf(\"\") != -1))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\tdata.push(item);\n\t\t});\n\n\t\tview.callEvent(\"onConditionSet\", [data]);\n\t}\n\n\t_safeInt(a){\n\t\tconst num = parseFloat(a);\n\t\tif (num == a) return num;\n\t\treturn a;\n\t}\n\n\t_setCondition() {\n\t\tconst view = this.view;\n\t\tconst collection = view.conditions.get(this.cell.row, this.cell.column);\n\n\t\tconst data = [];\n\t\tif (collection) {\n\t\t\tcollection.forEach(item => {\n\t\t\t\tconst values = {};\n\t\t\t\tvalues.condition = item[0];\n\t\t\t\tif (webix.isArray(item[1])) {\n\t\t\t\t\tvalues.value = this._formatValue(item[1][0], values.condition);\n\t\t\t\t\tvalues.value2 = this._formatValue(item[1][1], values.condition);\n\t\t\t\t} else\n\t\t\t\t\tvalues.value = this._formatValue(item[1], values.condition);\n\n\t\t\t\tvalues.style = item[2];\n\t\t\t\tdata.push(values);\n\t\t\t});\n\t\t}\n\n\t\twhile (data.length < 3)\n\t\t\tdata.push({ });\n\n\t\tthis._getDatalayout().setValue(data);\n\t}\n\n\t_getDatalayout(){\n\t\treturn this.$dialog.getBody().getChildViews()[0].getChildViews()[1].getBody();\n\t}\n\n\t_formatValue(value, condition){\n\t\tif(!(condition && this._isNotDateRule(condition))){\n\t\t\tif(this.editFormat && value !== \"\" && value[0] != \"=\"){\n\t\t\t\tvalue = getJsDateFromExcel(value);\n\t\t\t\treturn this.editFormat(value);\n\t\t\t}\n\t\t}\n\t\treturn value.toString();\n\t}\n\n\t_normalizeValue(value, condition){\n\t\tif(!this._isNotDateRule(condition)){\n\t\t\tif(this.editFormat){\n\t\t\t\tif(isNaN(value)){\n\t\t\t\t\tif(value[0] != \"=\"){\n\t\t\t\t\t\tconst parser = webix.Date.strToDate( webix.i18n.spreadsheet.formats.parseDateTime );\n\t\t\t\t\t\tvalue = parser(value);\n\t\t\t\t\t\tvalue = isNaN(value) ? \"\" : getExcelDateFromJs(value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tvalue = isDateInvalid(value) ? \"\" : value;\n\t\t\t}\n\t\t\telse\n\t\t\t\tvalue = this._safeInt(value, 10);\n\t\t}\n\t\treturn value;\n\t}\n\n\t_isNotDateRule(condition){\n\t\tif(condition == \"equal\" || condition == \"notEqual\")\n\t\t\treturn false;\n\t\treturn find(this.view.conditions.handlers.text, obj => obj.id == condition);\n\t}\n\n\tokClick(){\n\t\tthis._getCondition();\n\t\tthis.close();\n\t}\n\n\t$show(){\n\t\tthis.cell = this.view.getSelectedId();\n\t\tif(!this.cell)\n\t\t\treturn false;\n\n\t\tconst type = getType(this.view, this.cell.row, this.cell.column);\n\n\t\tif(type == \"date\")\n\t\t\tthis.editFormat = getDateEditFormat(this.view, this.cell.row, this.cell.column);\n\n\t\tthis.$dialog.queryView(\"text\", \"all\").forEach(view => {\n\t\t\tview.define({placeholder: type == \"date\" ? this._formatValue(45000) : \"\"});\n\t\t\tview.refresh();\n\t\t});\n\n\t\tthis.view.$handleSelection = (st, end, a, b)=>{\n\t\t\tif (this.activeValue && a == b){\n\t\t\t\tthis.activeValue.setValue(\"=\"+a);\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t\tthis._setCondition();\n\t}\n\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t\tdelete this.editFormat;\n\t\tthis._getDatalayout().clearAll();\n\t}\n\n\tgetRows(data){\n\t\tconst dialog = this;\n\t\treturn {\n\t\t\tview: \"form\",\n\t\t\tpadding: 0,\n\t\t\tborderless: true,\n\t\t\tcss:\"webix_ssheet_cformats\",\n\t\t\telements: [{\n\t\t\t\tmargin: 10,\n\t\t\t\tpadding: { right: 4 },\n\t\t\t\tcols: [\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"richselect\",\n\t\t\t\t\t\tname: \"style\",\n\t\t\t\t\t\twidth:120,\n\t\t\t\t\t\tplaceholder: webix.i18n.spreadsheet.labels[\"conditional-style\"],\n\t\t\t\t\t\tcss: \"webix_ssheet_cformat_select\",\n\t\t\t\t\t\tsuggest: {\n\t\t\t\t\t\t\tpadding:0,\n\t\t\t\t\t\t\tborderless: true,\n\t\t\t\t\t\t\tcss: \"webix_ssheet_cformat_list\",\n\t\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\t\ttemplate(obj) {\n\t\t\t\t\t\t\t\t\tconst css = \"webix_ssheet_cformat \"+obj.css;\n\t\t\t\t\t\t\t\t\treturn `<div class=\"${css}\">${obj.name}</div>`;\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tdata: data\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"richselect\",\n\t\t\t\t\t\twidth: 150,\n\t\t\t\t\t\tname: \"condition\",\n\t\t\t\t\t\tplaceholder: webix.i18n.spreadsheet.labels[\"conditional-operator\"],\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonChange: function(newv) {\n\t\t\t\t\t\t\t\tconst elements = this.getFormView().elements;\n\n\t\t\t\t\t\t\t\tif (dialog.editFormat){\n\t\t\t\t\t\t\t\t\tif (dialog._isNotDateRule(newv))\n\t\t\t\t\t\t\t\t\t\telements.value.define({placeholder: \"\"});\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\tconst value = dialog._normalizeValue(elements.value.getValue(), newv);\n\t\t\t\t\t\t\t\t\t\telements.value.setValue(dialog._formatValue(value, newv));\n\t\t\t\t\t\t\t\t\t\telements.value.define({placeholder: dialog._formatValue(45000)});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telements.value.refresh();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (newv == \"between\" || newv == \"notBetween\")\n\t\t\t\t\t\t\t\t\telements.value2.show();\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\telements.value2.hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuggest:{\n\t\t\t\t\t\t\tview: \"ssheet-form-suggest\",\n\t\t\t\t\t\t\tbody:{\n\t\t\t\t\t\t\t\tdata: this._rulesToArr()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tcols: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: \"text\",\n\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\tonFocus: (current_view)=>{\n\t\t\t\t\t\t\t\t\t\tthis.activeValue = current_view;\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tonBlur: (current_view)=>{\n\t\t\t\t\t\t\t\t\t\tlet value = current_view.getValue();\n\t\t\t\t\t\t\t\t\t\tif(value !== \"\"){\n\t\t\t\t\t\t\t\t\t\t\tconst elements = current_view.getFormView().elements;\n\t\t\t\t\t\t\t\t\t\t\tconst condition = elements.condition.getValue();\n\t\t\t\t\t\t\t\t\t\t\tvalue = this._normalizeValue(value, condition);\n\t\t\t\t\t\t\t\t\t\t\tcurrent_view.setValue(this._formatValue(value, condition));\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tname: \"value\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: \"text\",\n\t\t\t\t\t\t\t\tname: \"value2\",\n\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\tonFocus: (current_view)=>{\n\t\t\t\t\t\t\t\t\t\tthis.activeValue = current_view;\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tonBlur: (current_view)=>{\n\t\t\t\t\t\t\t\t\t\tlet value = current_view.getValue();\n\t\t\t\t\t\t\t\t\t\tif(value !== \"\"){\n\t\t\t\t\t\t\t\t\t\t\tconst elements = current_view.getFormView().elements;\n\t\t\t\t\t\t\t\t\t\t\tconst condition = elements.condition.getValue();\n\t\t\t\t\t\t\t\t\t\t\tvalue = this._normalizeValue(value, condition);\n\t\t\t\t\t\t\t\t\t\t\tcurrent_view.setValue(this._formatValue(value, condition));\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\thidden: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{ view:\"icon\", css:\"webix_ssheet_cformat_icon\", icon:\"wxi-trash\", click: vid => {\n\t\t\t\t\t\tconst form = webix.$$(vid).getFormView();\n\t\t\t\t\t\tconst dlayout = this._getDatalayout();\n\t\t\t\t\t\tdlayout.getValue();\t\t\t// save local changes before rendering\n\n\t\t\t\t\t\tconst index = dlayout.getChildViews().indexOf(form);\n\t\t\t\t\t\tdlayout.remove(dlayout.getIdByIndex(index));\n\n\t\t\t\t\t\tif (dlayout.count() < 3) dlayout.add({ });\n\t\t\t\t\t}}\n\t\t\t\t]}\n\t\t\t]};\n\t}\n\n\t$init(){\n\t\tconst margin = webix.skin.$active.layoutMargin.form;\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: webix.i18n.spreadsheet.labels[\"conditional-format\"],\n\t\t\tposition: \"center\",\n\t\t\twidth: 770,\n\t\t\tmove: true,\n\t\t\tmargin,\n\t\t\tbody: { margin:0, rows:[\n\t\t\t\t{\n\t\t\t\t\theight: 36,\n\t\t\t\t\tpadding: { left: 12 },\n\t\t\t\t\tcols: [\n\t\t\t\t\t\t{ view:\"label\", width: 131, label: webix.i18n.spreadsheet.labels.display },\n\t\t\t\t\t\t{ view:\"label\", width: 161, label: webix.i18n.spreadsheet.labels.condition },\n\t\t\t\t\t\t{ view:\"label\", label: webix.i18n.spreadsheet.labels.value },\n\t\t\t\t\t\t{ view:\"icon\", css:\"webix_ssheet_cformat_icon\", icon:\"wxi-plus-circle\",\n\t\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\t\tconst dlayout = this._getDatalayout();\n\t\t\t\t\t\t\t\tdlayout.getValue();\t\t\t// save local changes before rendering\n\t\t\t\t\t\t\t\tdlayout.add({ });\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ width: 4 + webix.env.scrollSize }\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"scrollview\",\n\t\t\t\t\tmaxHeight: webix.skin.$active.inputHeight * 3 + 4,\n\t\t\t\t\tborderless: true,\n\t\t\t\t\tscroll: \"y\",\n\t\t\t\t\tbody: {\n\t\t\t\t\t\tview: \"datalayout\",\n\t\t\t\t\t\tpadding: 0,\n\t\t\t\t\t\tborderless: true,\n\t\t\t\t\t\trows: [ this.getRows(getConditionStyle(this.view.config.conditionStyle)) ]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]},\n\t\t\ton: {\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n}","import {Dialog} from \"./common\";\n\nexport const action = \"excel-export\";\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tthis.view.$handleSelection = function(){\n\t\t\treturn false;\n\t\t};\n\n\t\tform.elements.sheets.setValue(this.getSheets());\n\t\tform.elements.filename.setValue(\"Data\");\n\t\tform.elements.filename.getInputNode().select();\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: webix.i18n.spreadsheet.labels[\"export-title\"],\n\t\t\tmove: true,\n\t\t\tposition: \"center\",\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\telements:[\n\t\t\t\t\t{ view:\"text\", name:\"filename\",  placeholder:webix.i18n.spreadsheet.labels[\"export-name\"]},\n\t\t\t\t\t{ view:\"multicheckbox\", name:\"sheets\"}\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\tgetSheets(){\n\t\tconst view = this.view;\n\t\tconst sheets = view._sheets;\n\t\tlet value = [];\n\n\t\tfor(let i = 0; i < sheets.length; i++)\n\t\t\tvalue.push({\n\t\t\t\tname: sheets[i].name,\n\t\t\t\tactive: view._activeSheet === sheets[i].name ? 1 : 0\n\t\t\t});\n\n\t\treturn value;\n\t}\n\tokClick(){\n\t\tconst values = this.$dialog.getBody().getValues();\n\t\twebix.toExcel(this.view, values);\n\t\tthis.close();\n\t}\n}","import {Dialog} from \"./common\";\n\nexport const action = \"add-link\";\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tconst cell = this.view.getSelectedId();\n\t\tif(!cell)\n\t\t\treturn false;\n\t\tif (!this.restoreValue(form))\n\t\t\tform.clear();\n\t\tform.elements.name.focus();\n\t}\n\trestoreValue(form){\n\t\tconst cell = this.view.getSelectedId();\n\t\tif (cell){\n\t\t\tconst value = this.view.getCellValue(cell.row, cell.column);\n\t\t\tif (value && typeof value == \"string\" && value.indexOf(\"=HYPERLINK\") === 0){\n\t\t\t\tconst parts = value.split(\"\\\"\");\n\t\t\t\tform.setValues({\n\t\t\t\t\tname: (parts[3] || \"\"),\n\t\t\t\t\turl: (parts[1] || \"\")\n\t\t\t\t});\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\t$init(){\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: webix.i18n.spreadsheet.labels[\"link-title\"],\n\t\t\tmove: true,\n\t\t\tposition: \"center\",\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\telements:[\n\t\t\t\t\t{ view:\"text\", name:\"name\",  placeholder:webix.i18n.spreadsheet.labels[\"link-name\"]},\n\t\t\t\t\t{ view:\"text\", name:\"url\",  placeholder:webix.i18n.spreadsheet.labels[\"link-url\"]}\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\n\tokClick(){\n\t\tconst cell = this.view.getSelectedId();\n\t\tconst data = this.$dialog.getBody().getValues();\n\n\t\tlet text = \"\";\n\t\tif (data.url){\n\t\t\tdata.name = data.name || data.url;\n\t\t\tif (!/^https?:\\/\\//i.test(data.url))\n\t\t\t\tdata.url = \"http://\" + data.url;\n\t\t\ttext = `=HYPERLINK(\"${data.url}\",\"${data.name}\")`;\n\t\t}\n\n\t\tthis.view.setCellValue(cell.row, cell.column, text);\n\t\tthis.view.refresh();\n\t\tthis.close();\n\t}\n}","import {Dialog} from \"./common\";\n\nexport const action = \"print\";\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tform.setValues({\n\t\t\tdata:\"current\",\n\t\t\tpaper:\"A4\",\n\t\t\tfit:\"page\",\n\t\t\tmode:\"landscape\",\n\t\t\tsheetnames:1,\n\t\t\tmargin:0\n\t\t});\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: webix.i18n.spreadsheet.labels[\"print-title\"],\n\t\t\tmove: true,\n\t\t\tmodal:true,\n\t\t\twidth:530, height:520,\n\t\t\tposition: \"center\",\n\t\t\tbuttons:false,\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\telements:[\n\t\t\t\t\t{ type:\"section\", template: webix.i18n.spreadsheet.labels[\"print-settings\"]},\n\t\t\t\t\t{ cols:[\n\t\t\t\t\t\t{ view:\"radio\", name:\"data\",vertical:true, options:[\n\t\t\t\t\t\t\t{ id:\"current\", value:webix.i18n.spreadsheet.labels[\"current-sheet\"]},\n\t\t\t\t\t\t\t{ id:\"all\", value:webix.i18n.spreadsheet.labels[\"all-sheets\"]},\n\t\t\t\t\t\t\t{ id:\"selection\", value:webix.i18n.spreadsheet.labels[\"selection\"]}\n\t\t\t\t\t\t], on:{\n\t\t\t\t\t\t\tonChange:function(newv){\n\t\t\t\t\t\t\t\tif(newv == \"all\"){\n\t\t\t\t\t\t\t\t\tconst form = this.getFormView();\n\t\t\t\t\t\t\t\t\tform.elements.sheetnames.setValue(1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}},\n\t\t\t\t\t\t{ rows:[\n\t\t\t\t\t\t\t{view:\"checkbox\", name:\"sheetnames\", labelRight:webix.i18n.spreadsheet.labels[\"sheet-names\"]},\n\t\t\t\t\t\t\t{view:\"checkbox\", name:\"borderless\", labelRight:webix.i18n.spreadsheet.labels[\"borderless\"]},\n\t\t\t\t\t\t\t{view:\"checkbox\", name:\"skiprows\", labelRight:webix.i18n.spreadsheet.labels[\"skip-rows\"]},\n\t\t\t\t\t\t\t{view:\"checkbox\", name:\"margin\", labelRight:webix.i18n.spreadsheet.labels[\"margin\"]}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]},\n\t\t\t\t\t{ type:\"section\", template: webix.i18n.spreadsheet.labels[\"print-paper\"]},\n\t\t\t\t\t{ view:\"radio\", name:\"paper\", options:[\n\t\t\t\t\t\t{ id:\"letter\", value:webix.i18n.spreadsheet.labels[\"page-letter\"]},\n\t\t\t\t\t\t{ id:\"A4\", value:webix.i18n.spreadsheet.labels[\"page-a4\"]},\n\t\t\t\t\t\t{ id:\"A3\", value:webix.i18n.spreadsheet.labels[\"page-a3\"]}\n\t\t\t\t\t]},\n\t\t\t\t\t{ type:\"section\", template: webix.i18n.spreadsheet.labels[\"print-layout\"]},\n\t\t\t\t\t{ cols:[\n\t\t\t\t\t\t{view:\"radio\", name:\"fit\", options:[\n\t\t\t\t\t\t\t{ id:\"page\", value:webix.i18n.spreadsheet.labels[\"page-width\"]},\n\t\t\t\t\t\t\t{ id:\"data\", value:webix.i18n.spreadsheet.labels[\"page-actual\"]}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{ width:25},\n\t\t\t\t\t\t{ view:\"radio\", width:220, name:\"mode\", options:[\n\t\t\t\t\t\t\t{ id:\"portrait\", value:webix.i18n.spreadsheet.labels[\"page-portrait\"]},\n\t\t\t\t\t\t\t{ id:\"landscape\", value:webix.i18n.spreadsheet.labels[\"page-landscape\"]}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]},\n\t\t\t\t\t{\n\t\t\t\t\t\tcols:[\n\t\t\t\t\t\t\t{ },\n\t\t\t\t\t\t\t{ view: \"button\", css:\"ssheet_cancel_button\", hotkey:\"esc\",\n\t\t\t\t\t\t\t\tvalue: webix.i18n.spreadsheet.labels.cancel, autowidth:true,\n\t\t\t\t\t\t\t\tclick: () => this.close()\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ view: \"button\", value: webix.i18n.spreadsheet.labels.print, hotkey:\"enter\", autowidth:true,\n\t\t\t\t\t\t\t\tclick: () => this.okClick()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t};\n\t}\n\tokClick(){\n\t\tconst data = this.$dialog.getBody().getValues();\n\t\tdata.margin = data.margin?0:{};\n\t\tthis.close();\n\t\twebix.print(this.view, data);\n\t}\n}\n","import {Dialog} from \"./common\";\n\nexport const action = \"add-comment\";\n\nexport class DialogBox extends Dialog{\n\topen(action){\n\t\t//we get cell only on hover commented cell\n\t\tthis.cell = action.cell ? action.cell : this.view.getSelectedId();\n\n\t\t// cell not provided\n\t\tif (!this.cell || \n\t\t\t// cell is locked and in the edit mode\n\t\t\t(this.view.isCellLocked(this.cell.row, this.cell.column) && !action.viewonly) ||\n\t\t\t// action blocked by user's code\n\t\t\t!(this.view.callEvent(\"onBeforeCommentShow\", [this.cell.row, this.cell.column, !action.viewonly]))){\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.view.comments._activeComment = {editStatus: !action.viewonly, cell: this.cell};\n\n\t\tif(!this.$dialog){\n\t\t\tthis.$dialog = webix.ui(this.$init());\n\t\t\tthis.view._destroy_with_me.push(this.$dialog);\n\t\t\tthis.view.comments.commentsView = this.$dialog;\n\t\t\tthis.$dialog.attachEvent(\"onHide\", ()=>this.$hide());\n\t\t\tthis.view.attachEvent(\"onCommentHide\", ()=>this.$dialog.hide());\n\t\t}\n\n\t\tconst form = this.$dialog.getBody();\n\n\t\tconst span = this.view.$$(\"cells\").getSpan(this.cell.row, this.cell.column);\n\t\tconst item = span ? {row: this.cell.row, column:(span[1]*1+span[2]-1)} : this.cell;\n\n\t\twebix.delay(()=>{\n\t\t\tthis.$dialog.show(this.view.$$(\"cells\").getItemNode(item));\n\t\t\tthis._setComment();\n\t\t});\n\t\tif (this.$show(this.$dialog, form) === false)\n\t\t\tthis.close();\n\t}\n\t$show(){\n\t\tthis.textarea = this.$dialog.queryView({view:\"textarea\"});\n\t\tthis.template = this.$dialog.queryView({view:\"template\"});\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"popup\",\n\t\t\tcss:\"ssheet_comments\",\n\t\t\tminWidth:250,\n\t\t\tminHeight:150,\n\t\t\trelative:\"right\",\n\t\t\tresize:true,\n\t\t\ton:{\n\t\t\t\tonViewResize:()=>{\n\t\t\t\t\tthis.$dialog.hide();\n\t\t\t\t\tthis.$dialog.show();\n\t\t\t\t\tif(this.textarea.isVisible())\n\t\t\t\t\t\tthis.textarea.focus();\n\t\t\t\t}\n\t\t\t},\n\t\t\tbody:{\n\t\t\t\tanimate:false,\n\t\t\t\tcells:[\n\t\t\t\t\t{\n\t\t\t\t\t\tview: \"template\",\n\t\t\t\t\t\tcss:\"ssheet_comment_view\",\n\t\t\t\t\t\tborderless: true,\n\t\t\t\t\t\tscroll:\"auto\",\n\t\t\t\t\t\tonClick:{\n\t\t\t\t\t\t\t\"ssheet_comment_view\":() => {\n\t\t\t\t\t\t\t\tif(!(this.view.config.readonly || this.view.isCellLocked(this.cell.row, this.cell.column)))\n\t\t\t\t\t\t\t\t\tthis.showInput(this.view.comments.get(this.cell.row, this.cell.column));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview: \"textarea\",\n\t\t\t\t\t\ton:{\n\t\t\t\t\t\t\tonChange:()=>{\n\t\t\t\t\t\t\t\tthis.addComment();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonFocus:()=>{\n\t\t\t\t\t\t\t\tthis.view.comments._activeComment = {editStatus: true, cell: this.cell};\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonBlur:()=>{\n\t\t\t\t\t\t\t\tthis.view.comments._activeComment = {};\n\t\t\t\t\t\t\t\tthis.$dialog.hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t};\n\t}\n\t_setComment(){\n\t\tconst comment = this.view.comments.get(this.cell.row, this.cell.column);\n\t\tif(this.view.comments._activeComment.editStatus)\n\t\t\tthis.showInput(comment);\n\t\telse\n\t\t\tthis.showTemplate(comment);\n\t}\n\tshowTemplate(text){\n\t\tthis.template.show();\n\t\tthis.template.setHTML(text);\n\t}\n\tshowInput(text){\n\t\tthis.view.$$(\"cells\").select(this.cell.row, this.cell.column);\n\t\twebix.delay(()=>{\n\t\t\tthis.changeTextarea(text);\n\t\t\tthis.textarea.show();\n\t\t\tthis.textarea.focus();\n\t\t});\n\t}\n\taddComment(){\n\t\tthis.view.comments.add(this.cell.row, this.cell.column, this.textarea.getValue());\n\t}\n\tchangeTextarea(text){\n\t\tthis.textarea.blockEvent();\n\t\tthis.textarea.setValue(text||\"\");\n\t\tthis.textarea.unblockEvent();\n\t}\n}","import {Dialog} from \"./common\";\nexport const action = \"resize\";\n\nexport class DialogBox extends Dialog{\n\topen(action){\n\t\tthis.group = action.group;\n\t\tthis.header = action.value;\n\t\tDialog.prototype.open.apply(this, arguments);\n\t}\n\t$show(){\n\t\tconst sel = this.view.getSelectedId();\n\t\tif(!sel)\n\t\t\treturn false;\n\t\tthis.view.$handleSelection = ()=>{\n\t\t\treturn false;\n\t\t};\n\n\t\tconst elements = this.$dialog.getBody().elements;\n\t\tthis.type = elements[\"type\"];\n\t\tthis.size = elements[\"size\"];\n\n\t\tthis.$dialog.getHead().getChildViews()[0].setHTML(this.header);\n\t\tconst grid = this.view.$$(\"cells\");\n\n\t\tlet value;\n\t\tif(this.group == \"row\")\n\t\t\tvalue = grid.getItem(sel.row).$height || grid.config.rowHeight;\n\t\telse\n\t\t\tvalue = grid.getColumnConfig(sel.column).width || grid.config.columnWidth;\n\n\t\tthis.type.getOption(1).value = webix.i18n.spreadsheet.labels[this.group == \"row\" ? \"height\" : \"width\"];\n\t\tthis.type.setValue(1);\n\t\tthis.type.refresh();\n\n\t\tthis.size.setValue(value);\n\t\tthis.size.focus();\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\tokClick(){\n\t\tconst type = this.type.getValue();\n\n\t\tlet size = \"auto\";\n\t\tif(type == 1)\n\t\t\tsize = this.size.getValue()*1;\n\t\telse if(type == 3)\n\t\t\tsize = this.view.$$(\"cells\").config[this.group == \"row\" ? \"rowHeight\" : \"columnWidth\"];\n\n\t\tif(this.group == \"row\")\n\t\t\tthis.view.setRowHeight(null, size);\n\t\telse\n\t\t\tthis.view.setColumnWidth(null, size);\n\n\t\tthis.close();\n\t}\n\t$init(){\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\tposition:\"center\",\n\t\t\twidth: 300,\n\t\t\tmove: true,\n\t\t\tbody:{\n\t\t\t\tpadding:0,\n\t\t\t\tcols:[\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"radio\", name:\"type\", vertical:true, optionHeight:40,\n\t\t\t\t\t\ton:{\n\t\t\t\t\t\t\tonChange: id => {\n\t\t\t\t\t\t\t\tif(id == 1)\n\t\t\t\t\t\t\t\t\tthis.size.enable();\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tthis.size.disable();\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\toptions:[\n\t\t\t\t\t\t\t{id:1, value: \"\"},\n\t\t\t\t\t\t\t{id:2, value: locale[\"fit-content\"]},\n\t\t\t\t\t\t\t{id:3, value: locale[\"default-size\"]},\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{rows: [\n\t\t\t\t\t\t{view:\"text\", name: \"size\", width:120},\n\t\t\t\t\t]}\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n}","import * as imc from \"./imagecell\";\nimport * as imt from \"./imagetop\";\nimport * as asw from \"./sparkline\";\nimport * as rgs from \"./ranges\";\nimport * as dpd from \"./dropdown\";\nimport * as flt from \"./filter\";\nimport * as fmt from \"./format\";\nimport * as cnd from \"./conditional\";\nimport * as exp from \"./export\";\nimport * as lnk from \"./link\";\nimport * as pnt from \"./print\";\nimport * as cmt from \"./comments\";\nimport * as siz from \"./sizing\";\n\nconst bases = [ imt, imc, asw, rgs, dpd, flt, fmt, cnd, exp, lnk, pnt, cmt, siz ];\n\nexport function init(view){\n\tconst dialogs = {};\n\tconst viewBases = view.config.readonly ? [cmt] : bases;\n\n\tfor (let i = 0; i < viewBases.length; i++)\n\t\tdialogs[viewBases[i].action] = new viewBases[i].DialogBox(view);\n\n\tview.attachEvent(\"onCommand\", function(action){\n\t\tconst box = dialogs[action.id];\n\t\tif (box) box.open(action);\n\t});\n\n\tview.attachEvent(\"onAction\", function(id, values){\n\t\t//hide win when the external ui is removed\n\t\tif(id == \"add-view\" && !values.newValue){\n\t\t\tconst box = dialogs[\"add-image-top\"];\n\t\t\tif(box && box.viewid == values.row){\n\t\t\t\tbox.close();\n\t\t\t}\n\t\t}\n\t});\n}","import {isCellLocked} from \"./lock_cell\";\nimport group from \"./undo_group\";\n\n\nvar ignoreUndoReset = false;\n\nexport function init(view){\n\treset(view);\n\tundoHandlers(view);\n\tview.attachEvent(\"onHardReset\", () => reset(view));\n\tview.attachEvent(\"onAfterSheetShow\", () => reset(view));\n\t// styles\n\tview.attachEvent(\"onBeforeStyleChange\", (row, column, nstyle, ostyle) =>{\n\t\tif (isCellLocked(view, row, column)) return false;\n\t\taddToHistory(view, {action: \"style\", row:row, column: column, value: ostyle, newValue: nstyle, group: group.value});\n\t});\n\t// editing\n\tview.attachEvent(\"onBeforeValueChange\", (row, column, nvalue, ovalue) => {\n\t\tif (isCellLocked(view, row, column)) return false;\n\t\taddToHistory(view, {action: \"value\", row:row, column: column, value: ovalue, newValue: nvalue, group: group.value});\n\t});\n\t// merge cells\n\tview.attachEvent(\"onBeforeSpan\", (row, column, value) => {\n\t\tif (isCellLocked(view, row, column)) return false;\n\t\taddToHistory(view, {action: \"span\", row:row, column: column, value: value, newValue:value, group: group.value});\n\t});\n\t// split cells\n\tview.attachEvent(\"onBeforeSplit\", (row, column, value) => {\n\t\tif (isCellLocked(view, row, column)) return false;\n\t\taddToHistory(view, {action: \"split\", row:row, column: column, value: value, newValue:value, group: group.value});\n\t});\n\t// Any abstract undo actions\n\tview.attachEvent(\"onAction\", (action, obj) =>\n\t\taddToHistory(\n\t\t\tview,\n\t\t\t{\n\t\t\t\taction: action,\n\t\t\t\trow: obj.row || null,\n\t\t\t\tcolumn: obj.column || null,\n\t\t\t\tvalue: obj.value || null,\n\t\t\t\tnewValue: obj.newValue || null,\n\t\t\t\tgroup: group.value\n\t\t\t}\n\t\t)\n\t);\n\n\t// column resize\n\tview.$$(\"cells\").attachEvent(\"onColumnResize\", (column, nvalue, ovalue) =>\n\t\taddToHistory(view, {action: \"c-resize\", row:0, column:column, value: ovalue, newValue: nvalue, group: group.value})\n\t);\n\t// column hide\n\tview.attachEvent(\"onColumnOperation\", (action, start, end) => {\n\t\tif (action.id !== \"add\" && action.id !== \"del\")\n\t\t\taddToHistory(view, { action:action, row:0, column:{ start, end } });\n\t});\n\t// row hide\n\tview.attachEvent(\"onRowOperation\", (action, start, end) => {\n\t\tif (action.id !== \"add\" && action.id !== \"del\")\n\t\t\taddToHistory(view, { action:action, row:{ start, end }, column:0 });\n\t});\n\t// row resize\n\tview.$$(\"cells\").attachEvent(\"onRowResize\", (row,  nvalue, ovalue) =>\n\t\taddToHistory(view, {action: \"r-resize\", row: row, column:0, value: ovalue, newValue: nvalue, group: group.value})\n\t);\n\n\t// condition formats\n\tview.attachEvent(\"onBeforeConditionSet\", (row, column, value, nvalue) => {\n\t\tif (isCellLocked(view, row, column)) return false;\n\n\t\tvalue = value ? webix.copy(value) : null;\n\t\taddToHistory(view, {action: \"condition\", row: row, column: column, value: value, newValue: nvalue, group: group.value});\n\t});\n\tview.$skipHistory = 0;\n}\n\nexport function undo(view){\n\trestoreHistory(view,-1);\n}\n\nexport function redo(view){\n\trestoreHistory(view,1);\n}\n\nexport function reset(view){\n\tif(!ignoreUndoReset){\n\t\tview._ssUndoHistory = [];\n\t\tview._ssUndoCursor = -1;\n\t}\n}\n\nfunction addToHistory(view, data){\n\tif(!view.$skipHistory && !view._loading_data){\n\t\t// remove futher history\n\t\tview._ssUndoHistory.splice(view._ssUndoCursor+1);\n\t\t// add to an array and increase cursor\n\t\tview._ssUndoHistory.push(data);\n\t\tview._ssUndoCursor++;\n\t}\n}\n\nexport function ignoreUndo(func, view){\n\tview.$skipHistory++;\n\ttry{\n\t\tfunc.call(view);\n\t}\n\tfinally {\n\t\tview.$skipHistory--;\n\t}\n}\n\nexport function ignoreReset(func){\n\tignoreUndoReset = true;\n\tfunc();\n\tignoreUndoReset = false;\n}\n\nfunction restoreHistory(view, step){\n\tvar data = view._ssUndoHistory[step>0?(view._ssUndoCursor+step):view._ssUndoCursor];\n\tif(data){\n\t\tvar value = step > 0 ? data.newValue : data.value;\n\t\tvar direction = step>0;\n\t\tvar params = [data.action, data.row, data.column, value, direction];\n\n\t\tview._ssUndoCursor += step;\n\n\t\t// group support\n\t\tvar group = data.group;\n\t\tvar prevData = view._ssUndoHistory[step>0?(view._ssUndoCursor+step):view._ssUndoCursor];\n\n\t\tignoreUndo(function(){\n\t\t\tview.callEvent(\"onUndo\", params);\n\t\t\tif (!group || !(prevData && group == prevData.group)){\n\t\t\t\tview.refresh();\n\t\t\t\tview.callEvent(\"onAfterUndo\", []);\n\t\t\t}\n\t\t},view);\n\n\t\tif(prevData && group && group == prevData.group){\n\t\t\trestoreHistory(view, step);\n\t\t}\n\t}\n}\n\nfunction undoHandlers(view){\n\tview.attachEvent(\"onUndo\", function(type, row, column, value) {\n\t\tswitch (type) {\n\t\t\tcase \"freeze-row\":\n\t\t\t\tview.freezeRows(value);\n\t\t\t\tbreak;\n\t\t\tcase \"freeze-column\":\n\t\t\t\tview.freezeColumns(value);\n\t\t\t\tbreak;\n\t\t}\n\t});\n}","import {range, toRange, changeRange, encode, isRange} from \"../helpers/column_names\";\nimport {ignoreUndo} from \"./undo\";\nimport * as arr from \"../helpers/array\";\n\nexport function init(view){\n\tconst grid = view._table.$view.querySelector(\".webix_ss_center\");\n\n\tview.views = {\n\t\tregister:function(type, render, track){\n\t\t\tif(!this._types[type])\n\t\t\t\tthis._types[type] = { render:render, track:track };\n\t\t},\n\t\tmove: function(id, x, y){\n\t\t\tconst win = webix.$$(id);\n\t\t\tconst old = webix.copy(this._pull[id]);\n\t\t\tthis._pull[id].x = _correctPos(view, win, x, \"x\");\n\t\t\tthis._pull[id].y = _correctPos(view, win, y, \"y\");\n\t\t\tview.callEvent(\"onAction\", [\"move-view\", { row:id, newValue:webix.copy(this._pull[id]), value:old} ]);\n\t\t\t_showOne(view, win, this._pull[id]);\n\t\t},\n\t\tadd: function(x, y, type, data, config, id){\n\t\t\tconfig = config || {};\n\t\t\tif(type == \"chart\"){\n\t\t\t\tconfig = webix.extend(config, {\n\t\t\t\t\ttype: \"line\",\n\t\t\t\t\tdataSeries:\"columns\"\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst height =  config.height || 300;\n\t\t\tconst width = config.width || 500;\n\n\t\t\tconst win = webix.ui({ \n\t\t\t\tid:id || \"$ssheet-ui\"+webix.uid(), // fixed id is for undo only\n\t\t\t\tview: \"ssheet-ui\",\n\t\t\t\tcontainer:grid, master:view._table.config.id,\n\t\t\t\twidth:width, height:height\n\t\t\t});\n\n\t\t\twin.attachEvent(\"onViewMoveEnd\", (x, y) => {\n\t\t\t\tconst state = view._table.getScrollState();\n\t\t\t\tthis.move(id, x, y+state.y);\n\t\t\t});\n\t\t\twin.attachEvent(\"onViewResize\", () => {\n\t\t\t\tconst conf =  this._pull[id];\n\t\t\t\tconst old = webix.copy(conf);\n\n\t\t\t\tconf.config.height = win.$height;\n\t\t\t\tconf.config.width = win.$width;\n\t\t\t\tview.callEvent(\"onAction\", [\"resize-view\", { row:id, newValue:webix.copy(conf), value:old } ]);\n\t\t\t});\n\t\t\twin.attachEvent(\"onViewEdit\", () => {\n\t\t\t\tconst config = this._pull[id];\n\t\t\t\tconst command = this._commands[config.type] || config.type;\n\t\t\t\tview.callEvent(\"onCommand\", [{ id:command, viewid:id, config }]);\n\t\t\t});\n\t\t\twin.attachEvent(\"onViewRemove\", () => this.remove(id));\n\n\t\t\tid = win.config.id;\n\n\t\t\tx = _correctPos(view, win, x, \"x\");\n\t\t\ty = _correctPos(view, win, y, \"y\");\n\n\t\t\tthis._pull[id] = { x, y, type, data, config };\n\t\t\tthis.update(id, data, config, true);\n\t\t\t_showOne(view, win, this._pull[id]);\n\n\t\t\treturn id; \n\t\t},\n\t\tremove: function(id){\n\t\t\tconst old = this._pull[id];\n\t\t\twebix.$$(id).close();\n\t\t\tdelete this._pull[id];\n\n\t\t\tview.callEvent(\"onAction\", [\"add-view\", { row:id, newValue:null, value:old } ]);\n\t\t},\n\t\tget:function(id){\n\t\t\treturn webix.$$(id).getBody();\n\t\t},\n\t\tgetConfig:function(id){\n\t\t\treturn this._pull[id];\n\t\t},\n\t\tupdate:function(id, data, config, inner){\n\t\t\tconst old = inner ? null : webix.copy(this._pull[id]);\n\t\t\tconst conf = this._pull[id];\n\t\t\tconst actions = this._types[conf.type];\n\n\t\t\tdata = data || config.data || \"\";\n\t\t\tconfig = config || {};\n\n\t\t\tdelete config.data;\n\n\t\t\tif(conf.type == \"chart\"){\n\t\t\t\tconst type = config.type;\n\t\t\t\tif(type && !_isPie(type) && !config.series){\n\t\t\t\t\tconst xAxis = config.xAxis && config.xAxis.range;\n\t\t\t\t\tconst legend = config.legend && config.legend.range;\n\n\t\t\t\t\tconst oldXaxis = old && old.config && old.config.xAxis && old.config.xAxis.fromData;\n\n\t\t\t\t\tconfig.series = _getSeries(view, data, config.dataSeries, {xAxis, legend}, oldXaxis);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst win = webix.$$(id);\n\n\t\t\tconst height = config.height || 300;\n\t\t\tconst width = config.width || 500;\n\n\t\t\tif(win.$width != width && win.$height != height){\n\t\t\t\twin.define({width, height});\n\t\t\t\twin.resize();\n\t\t\t}\n\n\t\t\tconf.data = data;\n\t\t\tconf.config = config;\n\n\t\t\tlet node = this.get(id);\n\n\t\t\tdata = _fromRange(view, conf);\n\n\t\t\tif(actions.render){\n\t\t\t\tconst renderConfig = webix.copy(conf);\n\n\t\t\t\t//clear width and height for inner view resizing\n\t\t\t\trenderConfig.config.width = renderConfig.config.height = 0;\n\n\t\t\t\tnode = actions.render(node, renderConfig, data);\n\t\t\t\t_processTables(node);\n\t\t\t}\n\n\t\t\tif(actions.track)\n\t\t\t\t_trackOne(view, node, actions.track, conf);\n\n\t\t\tview.callEvent(\"onAction\", [\"add-view\", { row:id, newValue:webix.copy(this._pull[id]), value:old} ]);\n\t\t},\n\t\thighlight:function(id){\n\t\t\tconst win = webix.$$(id);\n\t\t\tconst css = \"webix_ssheet_ui_focused\";\n\n\t\t\tconst oldWin = webix.$$(this._activeWin);\n\t\t\tif(oldWin && !oldWin.$destructed)\n\t\t\t\twebix.html.removeCss(oldWin.$view, css);\n\n\t\t\tif(win){\n\t\t\t\tthis._activeWin = id;\n\t\t\t\twebix.html.addCss(win.$view, css);\n\t\t\t}\n\t\t\telse\n\t\t\t\tdelete this._activeWin;\n\t\t},\n\t\t_commands:{\n\t\t\t\"image\":\"add-image-top\",\n\t\t\t\"chart\":\"add-chart\"\n\t\t},\n\t\t_types:{},\n\t\t_pull:{}\n\t};\n\n\t// handle events\n\tview._table.attachEvent(\"onResize\", () => _showAll(view) );\n\tview._table.attachEvent(\"onScrollY\", () => _showAll(view) );\n\tview._table.attachEvent(\"onScrollX\", () => _showAll(view) );\n\n\tview.attachEvent(\"onReset\", () => _reset(view));\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tconst move = type === \"move-view\";\n\t\tif (move || type == \"resize-view\" || type === \"add-view\")\n\t\t\t_undoUI(view, move, row, value);\n\t});\n\tview.attachEvent(\"onAction\", (action, p) => {\n\t\tif(action == \"header-hide\")\n\t\t\t_showAll(view);\n\t\telse if(action == \"before-grid-change\")\n\t\t\t_updateData(view, p.name, p.inc, p.data, p.start);\n\t});\n\tview.attachEvent(\"onColumnOperation\", () =>  _showAll(view, true));\n\tview.attachEvent(\"onRowOperation\", () => _showAll(view, true));\n\tview.attachEvent(\"onDataParse\", (data) => _parse(view, data));\n\tview.attachEvent(\"onDataSerialize\", (data, config) => _serialize(view, data, config));\n\tview.attachEvent(\"onCellChange\", () => _trackAll(view));\n\tview.attachEvent(\"onMathRefresh\", () => _trackAll(view));\n\n\tview.attachEvent(\"onDestruct\", () => {\n\t\tfor(let i in view.views._pull) webix.$$(i).destructor();\n\t});\n\n\tlet editUIType;\n\twebix.attachEvent(\"onClick\", function(ev){\n\t\tlet focus = webix.$$(ev);\n\t\tif(focus && focus.config.externalUI)\n\t\t\tfocus = webix.$$(focus.config.externalUI);\n\n\t\tconst ui = focus && (focus.queryView(\"ssheet-ui\",\"self\") || focus.queryView(\"ssheet-ui\",\"parent\"));\n\n\t\tif(ui){\n\t\t\tview.views.highlight(ui);\n\t\t\tconst id = ui.config.id;\n\n\t\t\tif(editUIType){\n\t\t\t\tif(view.views.getConfig(id).type == editUIType)\n\t\t\t\t\tui.callEvent(\"onViewEdit\", []); //start editing if any editor is open\n\t\t\t\telse\n\t\t\t\t\tview.callEvent(\"onCommand\", [{ id:\"close-ui-editor\" }]);\n\t\t\t}\n\t\t}\n\t\telse if(!editUIType)\n\t\t\tview.views.highlight();\n\t});\n\n\tview.attachEvent(\"onUIEditStart\", function(id, type){\n\t\tview.views.highlight(id);\n\t\teditUIType = type;\n\t});\n\n\tview.attachEvent(\"onUIEditStop\", function(id, type){\n\t\tif(editUIType == type)\n\t\t\twebix.delay(()=>{ // after onClick handler (to save focus)\n\t\t\t\teditUIType = null;\n\t\t\t});\n\t});\n\n\t// set default views\n\tview.views.register(\"chart\", (node, conf, data) => {\n\t\tconst dataRange = _getNames(view, conf);\n\t\tconst config = _genChartConfig(conf, data, dataRange);\n\t\treturn webix.ui(config, node);\n\t}, (view, data) => {\n\t\tview.clearAll();\n\t\tview.parse(data);\n\t});\n\n\tview.views.register(\"image\", (node, conf, data) => {\n\t\tconst config = webix.extend({ css:\"webix_ssheet_bgimage\", template:`<img src=\"${data}\"/>` }, conf.config||{}, true );\n\t\treturn webix.ui(config, node);\n\t});\n}\n\nfunction _parse(view, data){\n\tconst views = data.views;\n\tif(views){\n\t\tignoreUndo(function(){\n\t\t\tviews.forEach(obj => view.views.add.apply(view.views, obj));\n\t\t}, view);\n\t}\n}\n\nfunction _serialize(view, data, config){\n\tdata.views = [];\n\tfor(let i in view.views._pull){\n\t\tconst conf = view.views._pull[i];\n\t\tconst one = [conf.x, conf.y, conf.type, conf.data, conf.config];\n\t\tif(config && config.viewIds)\n\t\t\tone.push(i);\n\t\tdata.views.push(one);\n\t}\n}\n\nlet thread;\nfunction _trackAll(view){\n\tclearTimeout(thread);\n\tthread = webix.delay(() => {\n\t\tconst ui = view.views;\n\t\tfor(let id in ui._pull){\n\t\t\tconst conf = ui._pull[id];\n\n\t\t\tconst viewMethods = ui._types[conf.type];\n\t\t\tconst render = viewMethods.render;\n\t\t\tconst track = viewMethods.track;\n\n\t\t\tif(track)\n\t\t\t\t_trackOne(view, ui.get(id), track, conf, render);\n\t\t}\n\t});\n}\n\nfunction _trackOne(view, node, track, conf, render){\n\tconst data = _fromRange(view, conf);\n\n\tif(conf.type == \"chart\"){\n\t\tif(render)\n\t\t\tnode = render(node, conf, data, true);\n\n\t\tconst config = conf.config;\n\t\tif(config && !_isPie(config.type))\n\t\t\t_removeLegend(data, conf, view);\n\t}\n\n\ttrack(node, data);\n}\n\nfunction _updateData(view, name, inc, data, start){\n\tconst views = data.views;\n\tfor(let i = 0; i < views.length; i++){\n\t\tif(_isRange(views[i][3])){\n\t\t\tconst series = views[i][4].series;\n\t\t\tif(series){\n\t\t\t\tseries.forEach(obj => {\n\t\t\t\t\tobj.range = changeRange(obj.range, name, inc, start);\n\t\t\t\t\tobj.active = changeRange(obj.active, name, inc, start);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst legend = views[i][4].legend && views[i][4].legend.range;\n\t\t\tif(legend)\n\t\t\t\tviews[i][4].legend.range = _getDataParts(legend).map(range => changeRange(range, name, inc, start)).join(\",\");\n\n\t\t\tconst xAxis = views[i][4].xAxis && views[i][4].xAxis.range;\n\t\t\tif(xAxis)\n\t\t\t\tviews[i][4].xAxis.range = changeRange(xAxis, name, inc, start);\n\n\t\t\tviews[i][3] = _getDataParts(views[i][3]).map(range => changeRange(range, name, inc, start)).join(\",\");\n\t\t}\n\t}\n}\n\nfunction _showAll(view, pos){\n\t//close possibly open menus of embedded ui\n\twebix.callEvent(\"onClick\", []);\n\n\tfor(let id in view.views._pull){\n\t\tconst win = webix.$$(id);\n\t\tconst conf = view.views._pull[id];\n\t\tif(pos){\n\t\t\tconf.x = _correctPos(view, win, conf.x, \"x\");\n\t\t\tconf.y = _correctPos(view, win, conf.y, \"y\");\n\t\t}\n\t\t_showOne(view, win, conf);\n\t}\n}\n\nfunction _showOne(view, win, conf){\n\tconst state = view._table.getScrollState();\n\n\twin.show({\n\t\tx:conf.x,\n\t\ty:conf.y-state.y\n\t});\n}\n\nfunction _correctPos(view, win, v, type){\n\tif(!v && v !==0 )\n\t\tv = view._table.getScrollState()[type]+50;\n\telse{\n\t\tconst size = type == \"x\" ? _getWidth(view)-win.$width : _getHeight(view)-win.$height;\n\t\tv = Math.min(Math.max(v, 0), size);\n\t}\t\n\treturn v;\n}\n\nfunction _reset(view){\n\tignoreUndo(function(){\n\t\tfor(let id in view.views._pull)\n\t\t\tview.views.remove(id);\n\t}, view);\n}\n\nfunction _undoUI(view, move, id, value){\n\tif(value){\n\t\tconst {x, y, type, data, config} = value;\n\t\tif(view.views._pull[id]){\n\t\t\tif(move)\n\t\t\t\tview.views.move(id, x, y);\n\t\t\telse\n\t\t\t\tview.views.update(id, data, config);\n\t\t}\n\t\telse\n\t\t\tview.views.add(x, y, type, data, config, id);\n\n\t\tconst editor = view.$$(\"chartEditor\");\n\t\tif(editor && editor.viewId == id)\n\t\t\teditor.queryView(\"form\").setValues(config);\n\t}\n\telse\n\t\tview.views.remove(id);\n}\n\nfunction _getWidth(view){\n\tlet width = 0;\n\tview._table.eachColumn(function(id){\n\t\tif(id !== \"rowId\")\n\t\t\twidth += this.getColumnConfig(id).width;\n\t});\n\treturn width;\n}\n\nfunction _getHeight(view){\n\tlet height = 0;\n\tview._table.data.each(function(obj){\n\t\theight += obj.$height || webix.skin.$active.rowHeight;\n\t});\n\treturn height;\n}\n\n//disable datatables not to interfere with ss table events\nfunction _processTables(node){\n\tconst query = function(view){\n\t\treturn view.name == \"datatable\" || view.name == \"treetable\";\n\t};\n\tlet tables = node.queryView(query, \"self\");\n\tif(tables) tables = [tables];\n\telse tables = node.queryView(query, \"all\");\n\ttables.forEach((dt) => dt.disable());\n}\n\n/* chart-specific helpers */\n\nfunction _genChartConfig(conf, data, dataRange){\n\tconst htmlFilter = /<[^>]*>/gi;\n\tlet config = webix.copy(conf.config);\n\n\tconfig = _normalizeConfig(config);\n\n\tconst scale = config.scale.lines;\n\tconst scaleColor = config.scale.color || undefined;\n\n\tconst type = config.type;\n\n\tif(_isPie(type))\n\t\tdelete config.series;\n\n\tconst legendConfig = config.legend;\n\tlet legendRange = !legendConfig.fromData && legendConfig.range;\n\tif(legendRange){\n\t\tconst switchDirection =  config.dataSeries == \"rows\";\n\t\tlegendRange = _getParts(legendConfig.range, switchDirection, dataRange);\n\t}\n\n\tconst legend = {\n\t\theight:24,\n\t\talign: legendConfig.align || \"center\",\n\t\tvalign: legendConfig.valign || \"bottom\"\n\t};\n\n\tlegend.layout = legend.valign == \"middle\" ? \"y\" : \"x\";\n\n\tif(_isPie(type))\n\t\t_pieConfig(data, config, legend, legendRange);\n\telse if(config.series){\n\t\tlegend.values = [];\n\n\t\tconst lines = config.series;\n\t\tconfig.series = [];\n\n\t\tconst xAxis = config.xAxis;\n\t\tif(xAxis.fromData)\n\t\t\txAxis.range = legendRange ? Object.keys(data[0]).filter(line => legendRange.indexOf(line) == -1)[0] : \"data0\";\n\t\telse if(xAxis.range)\n\t\t\txAxis.range = dataRange[xAxis.range];\n\n\t\tfor(let i = 0; i < lines.length; i++){\n\t\t\tconst color = lines[i].color;\n\t\t\tconst item = dataRange[lines[i].range];\n\n\t\t\tif(item != xAxis.range){\n\t\t\t\tconst s = {\n\t\t\t\t\tvalue:`#${item}#`,\n\t\t\t\t\tlabel: lines[i].label ? `#${item}#` : \"\",\n\t\t\t\t\ttooltip:{\n\t\t\t\t\t\ttemplate: lines[i].tooltip ? `#${item}#` : \"\"\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tif(type == \"radar\" || type == \"line\" || type == \"spline\"){\n\t\t\t\t\ts.line = { color:color };\n\t\t\t\t\ts.item = { borderColor:color, type:lines[i].marker };\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\ts.color = color;\n\t\t\t\tif(type == \"area\" || type == \"splineArea\")\n\t\t\t\t\ts.alpha = 0.7;\n\n\t\t\t\tif(data[0] && (legendRange || legendConfig.fromData)){\n\t\t\t\t\tconst val = legendRange ? data[0][legendRange[i]] : data[0][item];\n\t\t\t\t\tconst text = (val || val === 0) ? (val+\"\").replace(htmlFilter, \"\") : \"\";\n\t\t\t\t\tlegend.values.push({text, color});\n\t\t\t\t}\n\n\t\t\t\tconfig.series.push(s);\n\t\t\t}\n\t\t}\n\n\t\tconfig.xAxis = {\n\t\t\ttemplate: obj => {\n\t\t\t\tconst val = obj[xAxis.range];\n\t\t\t\treturn (val || val === 0) ? (val+\"\").replace(htmlFilter, \"\") : \"\";\n\t\t\t},\n\t\t\ttitle: config.xAxis.title,\n\t\t\tlineColor: scaleColor,\n\t\t\tcolor: scaleColor,\n\t\t\tlines: scale\n\t\t};\n\n\t\tif(legend.values.length)\n\t\t\tconfig.legend = legend;\n\t\telse\n\t\t\tdelete config.legend;\n\t}\n\n\tconfig.yAxis = config.yAxis||{};\n\tfor(let property in config.yAxis)\n\t\tif(config.yAxis[property] === \"\")\n\t\t\tdelete config.yAxis[property];\n\n\tconfig.yAxis = webix.extend(config.yAxis, {\n\t\tlineColor: scaleColor,\n\t\tcolor: scaleColor,\n\t\tlines: scale,\n\t\tlineShape: config.scale.circle ? \"arc\" : \"default\"\n\t});\n\n\treturn webix.extend({\n\t\tview:\"chart\",\n\t\tpadding:{\n\t\t\tleft:80\n\t\t}\n\t}, config, true);\n}\n\nfunction _pieConfig(data, config, legend, legendRange){\n\tconst htmlFilter = /<[^>]*>/gi;\n\tfor(var i in data[0]){\n\t\tif(config.legend.fromData){\n\t\t\tlegend.template = obj => {\n\t\t\t\tconst val = obj[i];\n\t\t\t\treturn (val || val === 0) ? (val+\"\").replace(htmlFilter, \"\") : \"\";\n\t\t\t}; //data0\n\t\t\tconfig.value = `#${i.replace(\"0\", \"1\")}#`; //data1\n\t\t}\n\t\telse{\n\t\t\tif(config.legend.range)\n\t\t\t\tlegend.template = obj => {\n\t\t\t\t\tconst val = obj[legendRange[0]];\n\t\t\t\t\treturn (val || val === 0) ? (val+\"\").replace(htmlFilter, \"\") : \"\";\n\t\t\t\t};\n\t\t\tconfig.value = `#${i}#`;\n\t\t}\n\t\tbreak; \n\t}\n\tif(legend.template)\n\t\tconfig.legend = legend;\n\telse\n\t\tdelete config.legend;\n\n\tif(config.pieInnerText)\n\t\tconfig.pieInnerText = config.value;\n}\n\nfunction _isRange(data){\n\treturn typeof data == \"string\" && data.indexOf(\"data:image\") === -1;\n}\n\nfunction _fromRange(view, conf){\n\tlet data = conf.data;\n\n\tif(/^(http|data:image|\\/)/i.test(data))\n\t\treturn data;\n\n\tconst arr = [];\n\tif(data){\n\t\tconst config = conf.config;\n\t\tconst switchDirection = config.dataSeries == \"rows\";\n\t\tlet lastIndex = 0;\n\n\t\tdata = _getDataParts(data);\n\t\tfor(let i = 0; i < data.length; i++){\n\t\t\tconst cells = _isRange(data[i]) ? range(data[i], view) : null;\n\t\t\tif(cells){\n\t\t\t\tconst page = cells[4] ? view._mData.getPage(cells[4]) : view._mPage;\n\t\t\t\tcells[5] = lastIndex;\n\n\t\t\t\tif(page){\n\t\t\t\t\tconst subdata = switchDirection ? getRangeRows.apply(page, cells) : getRangeCols.apply(page, cells);\n\t\t\t\t\tlastIndex += subdata[2];\n\t\t\t\t\tfor(let i = 0; i < subdata[0].length; i++){\n\t\t\t\t\t\tif(!arr[i])\n\t\t\t\t\t\t\tarr[i] = {};\n\t\t\t\t\t\twebix.extend(arr[i], subdata[0][i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn arr;\n}\n\nfunction _removeLegend(arr, conf, view){\n\tconst config = conf.config;\n\tif(typeof(config.legend) != \"object\")\n\t\tconfig.legend = {fromData: !!config.legend};\n\n\tconst legend = config.legend;\n\n\tif(legend.fromData)\n\t\tarr.shift();\n\telse if(legend.range){\n\t\tconst names = _getNames(view, conf);\n\t\tconst switchDirection = config.dataSeries == \"rows\";\n\t\tconst legendRange = _getParts(legend.range, switchDirection, names);\n\t\tfor (let i = 0; i < legendRange.length; i++){\n\t\t\tconst item = legendRange[i];\n\t\t\tdelete arr[0][item];\n\t\t}\n\t}\n}\n\nfunction _getNames(view, conf){\n\tlet data = conf.data;\n\n\tif(/^(http|data:image|\\/)/i.test(data))\n\t\treturn;\n\n\tlet names = {};\n\tif(data){\n\t\tconst config = conf.config;\n\t\tconst switchDirection = config.dataSeries == \"rows\";\n\t\tlet lastIndex = 0;\n\n\t\tdata = _getDataParts(data);\n\t\tfor(let i = 0; i < data.length; i++){\n\t\t\tconst cells = _isRange(data[i]) ? range(data[i], view) : null;\n\t\t\tif(cells){\n\t\t\t\tconst page = cells[4] ? view._mData.getPage(cells[4]) : view._mPage;\n\t\t\t\tcells[5] = lastIndex;\n\n\t\t\t\tif(page){\n\t\t\t\t\tconst subdata = switchDirection ? getRangeRows.apply(page, cells) : getRangeCols.apply(page, cells);\n\t\t\t\t\tlastIndex += subdata[2];\n\t\t\t\t\twebix.extend(names, subdata[1]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn names;\n}\n\nexport function _getDataParts(data){\n\treturn data.replace(/\\s/g, \"\").split(\",\");\n}\n\nexport function _isPie(type){\n\treturn /pie|donut/.test(type);\n}\n\nexport function _getSeries(view, data, dataSeries, active, oldXaxis){\n\tconst dir = dataSeries == \"rows\";\n\tlet vals = [];\n\n\tif(data){\n\t\tlet xAxis = [];\n\t\tlet legend = [];\n\t\tlet activeVals = [];\n\n\t\tif(active){\n\t\t\tif(active.legend)\n\t\t\t\tlegend = _getParts(active.legend, dir);\n\t\t\tif(active.xAxis)\n\t\t\t\txAxis = _getParts(active.xAxis, dir);\n\t\t\tif(active.series)\n\t\t\t\tactiveVals = active.series.filter(val => legend.indexOf(val.range) == -1 && xAxis.indexOf(val.range) == -1);\n\t\t}\n\n\t\tdata = _getDataParts(data);\n\t\tlet colorIndex = 0;\n\t\tlet firstRange = 1;\n\t\tdata.forEach(subdata => {\n\t\t\tconst series = isRange(subdata) ? range(subdata, view) : null;\n\t\t\tif(series){\n\t\t\t\tconst start = dir ? series[0] : series[1];\n\t\t\t\tconst end = dir ? series[2] : series[3];\n\n\t\t\t\tlet inActiveSeries;\n\t\t\t\tfor(let i = start; i <= end; i++){\n\t\t\t\t\tconst range = dir ? toRange(i, series[1], i, series[3], series[4]) : toRange(series[0], i, series[2], i, series[4]);\n\t\t\t\t\tconst seria = arr.find(activeVals, val => val.range == range && (!val.active || val.active == subdata));\n\n\t\t\t\t\tif(seria){\n\t\t\t\t\t\tif(!seria.active)\n\t\t\t\t\t\t\tseria.active = subdata;\n\t\t\t\t\t\tinActiveSeries = 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor(let i = start; i <= end; i++){\n\t\t\t\t\tconst range = dir ? toRange(i, series[1], i, series[3], series[4]) : toRange(series[0], i, series[2], i, series[4]);\n\t\t\t\t\tif(legend.indexOf(range) != -1 || xAxis.indexOf(range) != -1)\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tconst activeVal = activeVals.filter(val => val.range == range && val.active == subdata)[0];\n\n\t\t\t\t\tif(inActiveSeries && !activeVal && !(oldXaxis && firstRange && i == start))\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tvals.push(activeVal || {\n\t\t\t\t\t\tactive: subdata,\n\t\t\t\t\t\trange,\n\t\t\t\t\t\tmarker: \"square\",\n\t\t\t\t\t\ttooltip: 1,\n\t\t\t\t\t\tcolor: _getColor(colorIndex)\n\t\t\t\t\t});\n\n\t\t\t\t\tcolorIndex++;\n\t\t\t\t}\n\t\t\t\tfirstRange = 0;\n\t\t\t}\n\t\t});\n\t}\n\treturn vals;\n}\n\nexport function _getParts(ranges, dir, dataRange){\n\tconst parts = [];\n\n\tranges = _getDataParts(ranges);\n\tranges.forEach(subRange => {\n\t\tsubRange = isRange(subRange) ? range(subRange) : null;\n\t\tif(subRange){\n\t\t\tconst start = dir ? subRange[0] : subRange[1];\n\t\t\tconst end = dir ? subRange[2] : subRange[3];\n\n\t\t\tfor(let i = start; i <= end; i++){\n\t\t\t\tconst range = dir ?\n\t\t\t\t\ttoRange(i, subRange[1], i, subRange[3], subRange[4]):\n\t\t\t\t\ttoRange(subRange[0], i, subRange[2], i, subRange[4]);\n\n\t\t\t\tparts.push(dataRange ? dataRange[range] : range);\n\t\t\t}\n\t\t}\n\t});\n\n\treturn parts;\n}\n\nexport function _normalizeConfig(config){\n\tif(typeof(config.xAxis) != \"object\")\n\t\tconfig.xAxis = {fromData: !!config.xAxis};\n\n\tif(typeof(config.legend) != \"object\")\n\t\tconfig.legend = {fromData: !!config.legend};\n\n\tconfig.legend = webix.extend(config.legend, {\n\t\tlayout:\"x\",\n\t\talign:\"center\",\n\t\tvalign:\"bottom\"\n\t});\n\n\tif(!config.scale)\n\t\tconfig.scale = {\n\t\t\tlines:1\n\t\t};\n\n\treturn config;\n}\n\nfunction _getColor(index){\n\tconst colors = [\n\t\t\"#e06666\", \"#6aa84f\", \"#3c78d8\", \"#e69138\", \"#783f04\", \"#134f5c\", \"#674ea7\", \"#c27ba0\"\n\t];\n\treturn colors[index%colors.length];\n}\n\nfunction getRangeCols(r1,c1,r2,c2,sheetName,lastIndex){\n\tconst data = [];\n\tconst rangeToData = {};\n\tfor (let i = r1, rind = 0; i <= r2; i++, rind++){\n\t\tdata[rind] = {};\n\t\tfor (let j = c1, cind = lastIndex; j <= c2; j++, cind++){\n\t\t\tif(i == r2){\n\t\t\t\trangeToData[`${sheetName ? sheetName+\"!\" : \"\"}${encode[j]}${r1}:${encode[j]}${r2}`] = `data${cind}`;\n\t\t\t\tlastIndex++;\n\t\t\t}\n\t\t\tdata[rind][`data${cind}`] = this.getValue(i-1,j-1);\n\t\t}\n\t}\n\treturn [data, rangeToData, lastIndex];\n}\n\nfunction getRangeRows(r1,c1,r2,c2,sheetName,lastIndex){\n\tconst data = [];\n\tconst rangeToData = {};\n\tfor (let i = c1, cind = 0; i <= c2; i++, cind++){\n\t\tdata[cind] = {};\n\t\tfor (let j = r1, rind = lastIndex; j <= r2; j++, rind++){\n\t\t\tif(i == c2){\n\t\t\t\trangeToData[`${sheetName ? sheetName+\"!\" : \"\"}${encode[c1]}${j}:${encode[c2]}${j}`] = `data${rind}`;\n\t\t\t\tlastIndex++;\n\t\t\t}\n\t\t\tdata[cind][`data${rind}`] = this.getValue(j-1,i-1);\n\t\t}\n\t}\n\treturn [data, rangeToData, lastIndex];\n}","import {range, toRange} from \"./helpers/column_names\";\nimport {_getSeries, _isPie, _normalizeConfig, _getDataParts} from \"./operations/views\";\n\nconst labels = webix.i18n.spreadsheet.labels;\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\tconst activeSkin = webix.skin.$active;\n\tconst padding = activeSkin.dataPadding-2;\n\tconst margin = activeSkin.layoutMargin.form;\n\n\treturn {\n\t\twidth:440,\n\t\thidden: true,\n\t\tid:\"chartEditor\",\n\t\tcss:\"ssheet_chart\",\n\t\trows:[\n\t\t\t{\n\t\t\t\theight: activeSkin.barHeight,\n\t\t\t\tcss: \"ssheet_chart_wizard_head\",\n\t\t\t\tpadding:{ left: 2 },\n\t\t\t\tcols: [\n\t\t\t\t\t{ view: \"icon\", hotkey:\"esc\", icon:\"webix_ssheet_icon ssi-arrow-left\", click: () => closeEditor(view)  },\n\t\t\t\t\t{ type:\"header\", borderless:true, template: labels[\"chart-edit\"] }\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"form\",\n\t\t\t\tcomplexData:true,\n\t\t\t\tborderless: true,\n\t\t\t\tpadding:{\n\t\t\t\t\ttop: 0\n\t\t\t\t},\n\t\t\t\telementsConfig:{\n\t\t\t\t\tlabelWidth:180\n\t\t\t\t},\n\t\t\t\telements:[{\n\t\t\t\t\tview:\"tabview\",\n\t\t\t\t\tid:\"chartTabs\",\n\t\t\t\t\tcells:[\n\t\t\t\t\t\t{ id:\"common\", borderless:true, type:\"form\", paddingX:0, header:labels[\"chart-common\"], rows:[\n\t\t\t\t\t\t\t{view:\"scrollview\", body:{\n\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\taddRichselect(\"type\", \"chart-type\", getTypes()),\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"stacked-chart\"], name:\"stacked\", hidden:true},\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-pie-3d\"], name:\"3D\", hidden:true},\n\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-range\"], name:\"range\"},\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-col-xAxis\"], name:\"xAxis.fromData\", batch:\"axis\"},\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-pie-text\"], name:\"pieInnerText\", hidden:true},\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-row-legend\"], name:\"legend.fromData\"},\n\t\t\t\t\t\t\t\t\t{ view:\"radio\", label:labels[\"chart-data-from\"], name:\"dataSeries\", vertical:true, options:[\n\t\t\t\t\t\t\t\t\t\t{id:\"columns\", value:labels[\"chart-columns\"]},\n\t\t\t\t\t\t\t\t\t\t{id:\"rows\", value:labels[\"chart-rows\"]}\n\t\t\t\t\t\t\t\t\t]},\n\t\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{ id:\"advanced\", borderless:true, type:\"form\", paddingX:0, padding:{bottom:0}, header:labels[\"chart-series\"], rows:[\n\t\t\t\t\t\t\t{ view: \"ssheet-series\", name:\"series\" },\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{ id:\"extras\", borderless:true, type:\"form\", paddingX:0, header:labels[\"chart-extras\"], rows:[\n\t\t\t\t\t\t\t{view:\"scrollview\", body:{\n\t\t\t\t\t\t\t\tview: \"accordion\",\n\t\t\t\t\t\t\t\tmargin: webix.skin.$active.layoutMargin.form,\n\t\t\t\t\t\t\t\tcss: \"webix_ssheet_accordion\",\n\t\t\t\t\t\t\t\tmulti: true,\n\t\t\t\t\t\t\t\ttype: \"clean\",\n\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t{ header:labels[\"chart-legend\"], body:{\n\t\t\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\t\t\tpadding,\n\t\t\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t\t\t{ view: \"text\", label:labels[\"chart-legend-range\"], name:\"legend.range\"},\n\t\t\t\t\t\t\t\t\t\t\taddRichselect(\"legend.align\", \"chart-legend-align\", getLegendAlign()),\n\t\t\t\t\t\t\t\t\t\t\taddRichselect(\"legend.valign\", \"chart-legend-valign\", getLegendValign())\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t\t\t{ header:labels[\"chart-scale\"], batch:\"axis\", id:\"scale\", body:{\n\t\t\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\t\t\tpadding,\n\t\t\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-lines\"], name:\"scale.lines\", batch:\"axis\"},\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-radar-circle\"], name:\"scale.circle\", hidden:true},\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"chart-scale-color\"], name:\"scale.color\", batch:\"axis\"}\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t\t\t{ header:labels[\"chart-x-axis\"], batch:\"axis\", body:{\n\t\t\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\t\t\tpadding,\n\t\t\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-xAxis-range\"], name:\"xAxis.range\", range:true, batch:\"axis\" },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-xAxis-title\"], name:\"xAxis.title\", batch:\"axisTitle\" },\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t\t\t{ header:labels[\"chart-y-axis\"], batch:\"axis\", body:{\n\t\t\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\t\t\tpadding,\n\t\t\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-title\"], name:\"yAxis.title\", batch:\"axisTitle\" },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-origin\"], name:\"origin\", batch:\"axis\", attributes:{ type:\"number\" } },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"label\", label:labels[\"chart-yAxis-note\"], css:\"ssheet_note\", height:20},\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-start\"], name:\"yAxis.start\", batch:\"axis\", attributes:{ type:\"number\" } },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-end\"], name:\"yAxis.end\", batch:\"axis\", attributes:{ type:\"number\" } },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-step\"], name:\"yAxis.step\", batch:\"axis\", attributes:{ type:\"number\" } }\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]\n\t\t\t\t}]\n\t\t\t}\n\t\t]\n\t};\n}\n\nfunction ready(view){\n\tconst chartEditor = view.$$(\"chartEditor\");\n\tconst form = chartEditor.queryView(\"form\");\n\tconst elements = form.elements;\n\n\tview.attachEvent(\"onCommand\", action => {\n\t\tif(action.id == \"add-chart\"){\n\t\t\tconst config = action.config;\n\t\t\tlet values = config && config.config || {};\n\n\t\t\tchartEditor.show();\n\n\t\t\tview.$handleSelection = function(st, end, a, b){\n\t\t\t\tconst focus = webix.UIManager.getFocus();\n\n\t\t\t\tif(chartEditor.queryView(view => view == focus)){\n\t\t\t\t\tif(focus == elements.range || focus == elements[\"legend.range\"]){\n\t\t\t\t\t\tlet val = focus.getValue();\n\t\t\t\t\t\tconst last = val.lastIndexOf(\",\");\n\n\t\t\t\t\t\tval = last == -1 ? \"\" : val.substring(0, last + 1);\n\t\t\t\t\t\tfocus.setValue(val + a+\":\"+b);\n\t\t\t\t\t}\n\t\t\t\t\telse if(focus.config.range)\n\t\t\t\t\t\tfocus.setValue(a+\":\"+b);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t};\n\n\t\t\tform.clear();\n\t\t\tview.$$(\"chartTabs\").setValue(\"common\");\n\n\t\t\tvalues = _normalizeConfig(values);\n\n\t\t\tvalues.range = config ? config.data : view.getSelectedRange();\n\t\t\tchartEditor.viewId = action.viewid ? action.viewid : view.views.add(null, null, \"chart\", values.range, values);\n\n\t\t\tview.callEvent(\"onUIEditStart\", [chartEditor.viewId, \"chart\"]);\n\n\t\t\tupdateValign(values.legend.align);\n\t\t\tupdateAlign(values.legend.valign);\n\t\t\tupdateType(values.type);\n\n\t\t\tform.setValues(inValues(values));\n\n\t\t\tif(values.legend.fromData)\n\t\t\t\tupdateLegendRange(values.legend.fromData);\n\t\t\tif(values.xAxis.fromData)\n\t\t\t\tupdateXaxisRange(values.xAxis.fromData);\n\n\t\t\tupdateSeries();\n\n\t\t\tform.queryView(\"accordionitem\", \"all\").forEach(view => view.expand());\n\n\t\t\telements.range.focus();\n\t\t}\n\t});\n\n\tview.attachEvent(\"onUIEditStart\", (id, type)=>{\n\t\tif(chartEditor.isVisible() && type != \"chart\")\n\t\t\tcloseEditor(view);\n\t});\n\n\tview.attachEvent(\"onCommand\", obj =>{\n\t\tif(obj.id == \"close-ui-editor\" && chartEditor.isVisible())\n\t\t\tcloseEditor(view);\n\t});\n\n\tview.attachEvent(\"onAction\", (id, values) => {\n\t\tif(id == \"add-view\" && !values.newValue){\n\t\t\tif(chartEditor.isVisible() && chartEditor.viewId == values.row)\n\t\t\t\tcloseEditor(view);\n\t\t}\n\t});\n\n\tform.attachEvent(\"onChange\", function(val, oldVal){\n\t\tconst source = this.$eventSource;\n\n\t\t//upper case ranges\n\t\tif(source === elements.range || source === elements[\"xAxis.range\"] || source === elements[\"legend.range\"]){\n\t\t\tconst parts = val.split(\"!\");\n\t\t\tconst upper = parts.length == 2 ? parts[0]+\"!\"+parts[1].toUpperCase() : val.toUpperCase();\n\n\t\t\tif(val != upper){\n\t\t\t\tval = upper;\n\t\t\t\tsetSilentValue(source, upper);\n\t\t\t}\n\t\t}\n\n\t\tswitch (source){\n\t\t\tcase elements.type:\n\t\t\t\tupdateType(val);\n\t\t\t\tbreak;\n\t\t\tcase elements.range:\n\t\t\tcase elements.dataSeries:\n\t\t\t\tif(this.$eventSource == elements.dataSeries)\n\t\t\t\t\tswitchRowsCols();\n\t\t\t\tif(elements[\"legend.fromData\"].getValue())\n\t\t\t\t\thandlePieLegend();\n\t\t\t\tif(elements[\"xAxis.fromData\"].getValue())\n\t\t\t\t\tsetSilentValue(elements[\"xAxis.range\"], getLeftColumn());\n\t\t\t\tupdateSeries();\n\t\t\t\tbreak;\n\t\t\tcase elements[\"xAxis.fromData\"]:\n\t\t\t\tupdateXaxisRange(val);\n\t\t\t\tupdateSeries(oldVal);\n\t\t\t\tbreak;\n\t\t\tcase elements[\"legend.fromData\"]:\n\t\t\t\tupdateLegendRange(val);\n\t\t\t\tupdateSeries();\n\t\t\t\tbreak;\n\t\t\tcase elements[\"legend.align\"]:\n\t\t\t\tupdateValign(val);\n\t\t\t\tbreak;\n\t\t\tcase elements[\"legend.valign\"]:\n\t\t\t\tupdateAlign(val);\n\t\t\t\tbreak;\n\t\t\tcase elements[\"xAxis.range\"]:\n\t\t\t\tif(elements[\"xAxis.fromData\"].getValue())\n\t\t\t\t\tsetSilentValue(elements[\"xAxis.fromData\"]);\n\t\t\t\tupdateRange(val, oldVal);\n\t\t\t\tbreak;\n\t\t\tcase elements[\"legend.range\"]:\n\t\t\t\tif(elements[\"legend.fromData\"].getValue())\n\t\t\t\t\tsetSilentValue(elements[\"legend.fromData\"]);\n\t\t\t\tupdateRange(val, oldVal);\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst config = outValues(form.getValues());\n\t\tview.views.update(chartEditor.viewId, config.range, config);\n\t});\n\n\telements.series.attachEvent(\"onRangeChange\", updateRange);\n\n\tfunction handlePieLegend(){\n\t\tif(elements[\"legend.fromData\"].getValue()){\n\t\t\tconst handler = _isPie(elements.type.getValue()) ? getLeftColumn : getTopRow;\n\t\t\tsetSilentValue(elements[\"legend.range\"], handler());\n\t\t}\n\t}\n\n\tfunction updateLegendRange(val){\n\t\tif(val){\n\t\t\tconst legendRange = elements[\"legend.range\"].getValue();\n\t\t\tupdateRange(\"\", legendRange);\n\t\t}\n\n\t\tconst handler = _isPie(elements.type.getValue()) ? getLeftColumn : getTopRow;\n\t\tval = val ? handler() : \"\";\n\n\t\tsetSilentValue(elements[\"legend.range\"], val);\n\t}\n\n\tfunction updateXaxisRange(val){\n\t\tif(val){\n\t\t\tconst xAxisRange = elements[\"xAxis.range\"].getValue();\n\t\t\tupdateRange(\"\", xAxisRange);\n\t\t}\n\n\t\tval = val ? getLeftColumn() : \"\";\n\n\t\tsetSilentValue(elements[\"xAxis.range\"], val);\n\t}\n\n\tfunction setSilentValue(element, val){\n\t\telement.blockEvent();\n\t\telement.setValue(val);\n\t\telement.unblockEvent();\n\t}\n\n\tfunction getLeftColumn(){\n\t\tconst data = elements.range.getValue();\n\t\tconst dataSeries = elements.dataSeries.getValue();\n\t\tconst legendRange = elements[\"legend.range\"].getValue();\n\t\tlet leftColumn = \"\";\n\n\t\tconst series = _getSeries(view, data, dataSeries, {legend: legendRange || \"\"});\n\n\t\tif(series.length)\n\t\t\tleftColumn = series[0].range;\n\n\t\treturn leftColumn;\n\t}\n\n\tfunction getTopRow(){\n\t\tconst data = _getDataParts(elements.range.getValue());\n\t\tconst dir = elements.dataSeries.getValue() == \"rows\";\n\t\tconst xAxisRange = _getDataParts(elements[\"xAxis.range\"].getValue());\n\t\tlet topRow = [];\n\n\t\tdata.forEach(subdata => {\n\t\t\tif(xAxisRange.indexOf(subdata) == -1){\n\t\t\t\tconst part = range(subdata, view);\n\t\t\t\tif(part){\n\t\t\t\t\tconst range = dir ?\n\t\t\t\t\t\ttoRange(part[0], part[1], part[2], part[1], part[4]) :\n\t\t\t\t\t\ttoRange(part[0], part[1], part[0], part[3], part[4]);\n\n\t\t\t\t\tif(data.indexOf(range) == -1)\n\t\t\t\t\t\ttopRow.push(range);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn topRow.join(\",\");\n\t}\n\n\tfunction updateRange(val, oldVal){\n\t\tlet data = elements.range.getValue();\n\n\t\tconst legend = elements[\"legend.range\"].getValue();\n\t\tconst xAxis = elements[\"xAxis.range\"].getValue();\n\t\tconst dataSeries = elements.dataSeries.getValue();\n\n\t\tconst series = _getSeries(view, data, dataSeries, {legend, xAxis});\n\n\t\toldVal = _getDataParts(oldVal);\n\n\t\tdata = _getDataParts(data).filter(val => oldVal.indexOf(val) == -1);\n\n\t\tif(val){\n\t\t\tval = _getDataParts(val);\n\t\t\tval.forEach(range => {\n\t\t\t\tconst exist = series.filter(obj => obj.range == range);\n\t\t\t\tif(!exist.length)\n\t\t\t\t\tdata.push(range);\n\t\t\t});\n\t\t}\n\n\t\tsetSilentValue(elements.range, data.join(\",\"));\n\t}\n\n\tfunction updateAlign(val){\n\t\tconst align = elements[\"legend.align\"];\n\t\tconst list = align.getList();\n\n\t\tif(val == \"middle\"){\n\t\t\tif(list.exists(\"center\"))\n\t\t\t\tlist.remove(\"center\");\n\t\t}\n\t\telse if(!list.exists(\"center\"))\n\t\t\tlist.add({id:\"center\", value:labels[\"chart-legend-center\"]}, 1);\n\t}\n\n\tfunction updateValign(val){\n\t\tconst align = elements[\"legend.valign\"];\n\t\tconst list = align.getList();\n\n\t\tif(val == \"center\"){\n\t\t\tif(list.exists(\"middle\"))\n\t\t\t\tlist.remove(\"middle\");\n\t\t}\n\t\telse if(!list.exists(\"middle\"))\n\t\t\tlist.add({id:\"middle\", value:labels[\"chart-legend-middle\"]}, 1);\n\t}\n\n\tfunction updateType(val){\n\t\tconst tabs = view.$$(\"chartTabs\").getTabbar();\n\t\tswitchRowsCols();\n\t\thandlePieLegend();\n\n\t\tconst series = elements.series;\n\t\tconst markersVisible = val == \"radar\" || val == \"line\" || val == \"spline\";\n\t\tseries.hideSubviews(\"marker\", markersVisible);\n\t\tseries.hideSubviews(\"label\", markersVisible || val == \"bar\");\n\n\t\tif(val == \"area\" || val == \"bar\") elements.stacked.show();\n\t\telse hideField(elements.stacked);\n\n\t\tif(val == \"radar\")\n\t\t\telements[\"scale.circle\"].show();\n\t\telse\n\t\t\thideField(elements[\"scale.circle\"]);\n\n\t\tif(val == \"pie\")\n\t\t\telements[\"3D\"].show();\n\t\telse\n\t\t\thideField(elements[\"3D\"]);\n\n\t\tif(_isPie(val)){\n\t\t\thideBatch(\"axis\");\n\t\t\telements.pieInnerText.show();\n\t\t\ttabs.hideOption(\"advanced\");\n\t\t}\n\t\telse{\n\t\t\thideBatch(\"axis\", true);\n\t\t\thideField(elements.pieInnerText);\n\t\t\ttabs.showOption(\"advanced\");\n\t\t}\n\n\t\tif(_isPie(val) || val == \"radar\")\n\t\t\thideBatch(\"axisTitle\");\n\t\telse\n\t\t\thideBatch(\"axisTitle\", true);\n\t}\n\n\tfunction updateSeries(oldXaxis){\n\t\tlet data = elements.range.getValue();\n\n\t\tlet series = elements.series.getValue();\n\t\tconst legend = elements[\"legend.range\"].getValue();\n\t\tconst xAxis = elements[\"xAxis.range\"].getValue();\n\t\tconst dataSeries = elements.dataSeries.getValue();\n\n\t\tseries = _getSeries(view, data, dataSeries, {series, legend, xAxis}, oldXaxis);\n\n\t\telements.series.setValue(series);\n\t}\n\n\tfunction switchRowsCols(){\n\t\tconst dir = elements.dataSeries.getValue() == \"rows\";\n\t\tconst pie = _isPie(elements.type.getValue());\n\t\tif((!pie && dir) || (!dir && pie)){\n\t\t\telements[\"legend.fromData\"].define(\"label\", labels[\"chart-col-legend\"]);\n\t\t\telements[\"xAxis.fromData\"].define(\"label\", labels[\"chart-row-xAxis\"]);\n\t\t}\n\t\telse{\n\t\t\telements[\"legend.fromData\"].define(\"label\", labels[\"chart-row-legend\"]);\n\t\t\telements[\"xAxis.fromData\"].define(\"label\", labels[\"chart-col-xAxis\"]);\n\t\t}\n\t\telements[\"legend.fromData\"].refresh();\n\t\telements[\"xAxis.fromData\"].refresh();\n\t}\n\n\tfunction hideField(field){\n\t\tif(field.setValue)\n\t\t\tsetSilentValue(field);\n\t\tfield.hide();\n\t}\n\n\tfunction hideBatch(batch, visible){\n\t\tform.queryView({batch:batch}, \"all\").forEach(field => {\n\t\t\tif(visible)\n\t\t\t\tfield.show();\n\t\t\telse\n\t\t\t\thideField(field);\n\t\t});\n\t}\n\n\tfunction inValues(values){\n\t\tif(/stacked|3D/.test(values.type))\n\t\t\tvalues.type = values.type.replace(/stacked|3D/, \"\").toLowerCase();\n\t\treturn values;\n\t}\n\n\tfunction outValues(values){\n\t\tif(values.stacked)\n\t\t\tvalues.type = \"stacked\"+values.type.charAt(0).toUpperCase()+values.type.substr(1);\n\t\telse if(values[\"3D\"])\n\t\t\tvalues.type += \"3D\";\n\n\t\treturn values;\n\t}\n}\n\nfunction closeEditor(view){\n\tconst chartEditor = view.$$(\"chartEditor\");\n\tview.callEvent(\"onUIEditStop\", [chartEditor.viewId, \"chart\"]);\n\tchartEditor.viewId = null;\n\tview.$handleSelection = null;\n\tchartEditor.hide();\n}\n\nfunction addRichselect(name, label, data){\n\treturn { view: \"richselect\", name:name, label:labels[label], suggest:{\n\t\tview: \"ssheet-form-suggest\",\n\t\tdata: data\n\t}};\n}\n\nfunction getTypes(){\n\treturn [\n\t\t{id:\"line\", value:labels[\"line-chart\"]},\n\t\t{id:\"spline\", value:labels[\"spline-chart\"]},\n\t\t{id:\"splineArea\", value:labels[\"splinearea-chart\"]},\n\t\t{id:\"area\", value:labels[\"area-chart\"]},\n\t\t{id:\"bar\", value:labels[\"bar-chart\"]},\n\t\t{id:\"radar\", value:labels[\"radar-chart\"]},\n\t\t{id:\"pie\", value:labels[\"pie-chart\"]},\n\t\t{id:\"donut\", value:labels[\"donut-chart\"]}\n\t];\n}\n\nfunction getLegendAlign(){\n\treturn [\n\t\t{id:\"left\", value:labels[\"chart-legend-left\"]},\n\t\t{id:\"center\", value:labels[\"chart-legend-center\"]},\n\t\t{id:\"right\", value:labels[\"chart-legend-right\"]}\n\t];\n}\n\nfunction getLegendValign(){\n\treturn [\n\t\t{id:\"top\", value:labels[\"chart-legend-top\"]},\n\t\t{id:\"middle\", value:labels[\"chart-legend-middle\"]},\n\t\t{id:\"bottom\", value:labels[\"chart-legend-bottom\"]}\n\t];\n}","import {ignoreReset, ignoreUndo}  from \"../operations/undo\";\nimport group  from \"../operations/undo_group\";\nimport {adjustSpan}  from \"../operations/spans\";\nimport {updateMaxColumn} from \"../helpers/column_names\";\n\nexport function init(view){\n\tview.attachEvent(\"onCommand\", (action, start, end) => {\n\t\tif (action.id == \"add\" || action.id == \"del\"){\n\t\t\tvar area = view._table.getSelectArea();\n\t\t\tif(area && !(start && end)){\n\t\t\t\tstart = area.start;\n\t\t\t\tend = area.end;\n\t\t\t}\n\n\t\t\tif (start && end){\n\t\t\t\tif(action.group == \"column\" && action.id == \"add\")\n\t\t\t\t\tupdateMaxColumn(view.config.columnCount + (end.column - start.column) + 1);\n\n\t\t\t\tgroup.set(function(){\n\t\t\t\t\tprocess(action, start, end, view);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\tview.attachEvent(\"onUndo\", (action, row, column, value) => {\n\t\tif (action == \"grid-change\"){\n\t\t\tloadChangedData(view, value);\n\t\t}\n\t});\n}\n\nfunction process(action, start, end, view) {\n\tlet select = view._table.getSelectArea();\n\tconst state = view._table.getScrollState();\n\n\tconst oldData = view.serialize({math: true, viewIds:true});\n\tconst newData = webix.copy(oldData);\n\tconst data = {value:oldData, newValue:newData};\n\n\tconst spanData = [];\n\tconst spans = newData.spans;\n\tfor (let i in spans){\n\t\tconst span = adjustSpan(spans[i], action, start, end, view, newData.data, spanData);\n\t\tif (span[2] <= 0 || span[3] <= 0)\n\t\t\tspans.splice(i, 1);\n\t}\n\n\tconst values = getUpdateValues(action, start, end);\n\tignoreUndo(function(){\n\t\tview.callEvent(\"onAction\", [\"before-grid-change\", {\n\t\t\tname: values.name,\n\t\t\tinc: values.inc,\n\t\t\tdata: newData,\n\t\t\tstart: start\n\t\t}]);\n\t},view);\n\n\tif (action.group == \"column\"){\n\t\tif (action.id == \"add\")\n\t\t\t_addColumn(action, start, end, view);\n\t\telse if (action.id == \"del\")\n\t\t\t_delColumn(action, start, end, view);\n\t}\n\telse if (action.group == \"row\") {\n\t\tif (action.id == \"add\")\n\t\t\t_addRow(action, start, end, view);\n\t\telse if (action.id == \"del\")\n\t\t\t_delRow(action, start, end, view);\n\t}\n\n\t// muon updates data and ranges\n\tconst updatedData = view.serialize({math: true});\n\tnewData.data = updatedData.data;\n\tnewData.ranges = updatedData.ranges;\n\n\tspanData.forEach(item => {\n\t\tnewData.data.push(item);\n\t});\n\n\tview.callEvent(\"onAction\", [\"grid-change\", data]);\n\n\tignoreUndo(function() {\n\t\tloadChangedData(view, newData);\n\t\tview._table.scrollTo(state.x, state.y);\n\t},view);\n\n\tif (select){\n\t\tselect = fixSelectArea(select, view.config);\n\t\tif (select)\n\t\t\tview.$$(\"cells\").addSelectArea(select.start, select.end);\n\t}\n}\n\nfunction fixSelectArea(select, config){\n\tconst rows = config.rowCount;\n\tconst cols = config.columnCount;\n\tif (select.start.row*1 > rows) select.start.row = rows;\n\tif (select.end.row*1 > rows) select.end.row = rows;\n\tif (select.start.column*1 > cols) select.start.column = cols;\n\tif (select.end.column*1 > cols) select.end.column = cols;\n\n\treturn select;\n}\n\nfunction loadChangedData(view, data){\n\t// data loading resets undo history, and\n\t// we need to preserve it\n\tignoreReset(function(){\n\t\tview.$handleSelection = null;\n\t\tview.parse(data);\n\t});\n}\n\nfunction getUpdateValues( action, start, end){\n\tvar name = action.group,\n\t\tinc = action.id==\"add\"?1:(action.id==\"del\"?-1:0);\n\n\tif(inc) {\n\t\t// span support\n\t\tif (name == \"row\")\n\t\t\tinc += inc * (end.row - start.row);\n\t\tif (name == \"column\")\n\t\t\tinc += inc * (end.column - start.column);\n\t}\n\treturn {name: name, inc: inc};\n}\n\nfunction _addColumn(action, start, end, view) {\n\tlet count = end.column - start.column + 1;\n\n\tview._mPage.addColumn(start.column-1, count);\n\tview.config.columnCount += count;\n\n\tview.callEvent(\"onColumnOperation\", [action, start, end]); //add item to history\n}\n\nfunction _delColumn(action, start, end, view) {\n\tlet count = end.column - start.column + 1;\n\n\tif (view.config.columnCount === count){\n\t\tif (start.column == end.column)\n\t\t\treturn; //deleting last column, ignoring\n\t\t//prevent deleting all columns\n\t\tend.column--;\n\t\tcount--;\n\t}\n\n\tview._mPage.removeColumn(start.column-1, count);\n\tview.config.columnCount -= count;\n\n\tview.callEvent(\"onColumnOperation\", [action, start, end]);\n}\n\nfunction _addRow(action, start, end, view) {\n\tlet count = end.row - start.row + 1;\n\n\tview._mPage.addRow(start.row-1, count);\n\tview.config.rowCount += count;\n\n\tview.callEvent(\"onRowOperation\", [action, start, end]);\n}\n\nfunction _delRow(action, start, end, view) {\n\tlet count = end.row - start.row + 1;\n\n\tif (view.config.rowCount === count){\n\t\tif (start.row == end.row)\n\t\t\treturn; //deleting last column, ignoring\n\t\t//prevent deleting all columns\n\t\tend.row--;\n\t\tcount--;\n\t}\n\n\tview._mPage.removeRow(start.row-1, count);\n\tview.config.rowCount -= count;\n\n\tview.callEvent(\"onRowOperation\", [action, start, end]);\n}","import group from \"./undo_group\";\nimport {setSpanCss} from \"./spans\";\nimport {rangeOptions} from \"../mathematics/ranges\";\nimport * as fmt from \"../operations/formats\";\nimport {changeRange, eachRange} from \"../helpers/column_names\";\n\nexport function init(view){\n\tconst table = view._table;\n\n\tview.attachEvent(\"onReset\", () => reset(view));\n\treset(view);\n\n\ttable.attachEvent(\"onBeforeEditStart\", function(id){\n\t\tlet col = this.getColumnConfig(id.column);\n\t\tif (this._ssEditors[id.row]){\n\t\t\tlet ed = this._ssEditors[id.row][id.column];\n\t\t\tif (ed){\n\t\t\t\twebix.extend(col, ed, true);\n\t\t\t\twebix.extend(col, {row: view.getRow(id.row)}, true);\n\t\t\t\tif (ed.options){\n\t\t\t\t\tif (typeof ed.options == \"string\")\n\t\t\t\t\t\tcol.options = rangeOptions(view, ed.options, { unique:true, order:true, empty:true });\n\t\t\t\t\telse if (webix.isArray(ed.options))\n\t\t\t\t\t\tcol.options = rangeOptions(view, ed.options, { empty:true });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\t// update format if editor supports this feature\n\ttable.attachEvent(\"onBeforeEditStop\", function(state, editor, ignore){\n\t\tif (!ignore && editor.getFormat){\n\t\t\tconst value = editor.getValue();\n\t\t\tlet format = editor.getFormat(value);\n\n\t\t\tgroup.set(function(){\n\t\t\t\tview.setCellValue(editor.row, editor.column, value);\n\t\t\t\tif (format){\n\t\t\t\t\tfmt.addFormat(view, editor.row, editor.column, fmt.getFormatSource(format));\n\t\t\t\t} else\n\t\t\t\t\tfmt.removeFormat(view, editor.row, editor.column);\n\t\t\t});\n\n\t\t\tconst cell = view.getSelectedId();\n\t\t\tif (cell && cell.row == editor.row && cell.column == editor.column){\n\t\t\t\tformat = format || \"common\";\n\t\t\t\tformat = fmt.isCustom(format) ? \"custom\" : format;\n\t\t\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"format\", value:format}]);\n\t\t\t}\n\t\t}\n\t});\n\n\ttable.attachEvent(\"onAfterEditStop\", function(state, editor){\n\t\tconst col = this.getColumnConfig(editor.column);\n\n\t\tcol.editor = \"text\";\n\t\tdelete col.popup; delete col.$popup; delete col.row;\n\t});\n\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tif (type == \"dropdown\")\n\t\t\tview.setCellEditor(row, column, value);\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p) => {\n\t\tif (action == \"dropdown\"){\n\t\t\tsetSpanCss(view, p.row, p.column, \"ss_editor\", p.newValue);\n\t\t}\n\t\telse if (action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n}\n\nfunction reset(view){\n\tview._table._ssEditors = {};\n}\n\nexport function serialize(view,data){\n\tvar row, column,\n\t\ttblEditors = view._table._ssEditors,\n\t\teditors = [];\n\n\tfor (row in tblEditors){\n\t\tfor (column in tblEditors[row])\n\t\t\teditors.push([row, column, tblEditors[row][column]]);\n\t}\n\tdata.editors = editors;\n}\n\nexport function load(view,data){\n\tconst editors = data.editors;\n\n\tif (editors)\n\t\tfor (let i=0; i<editors.length; i++)\n\t\t\tview.setCellEditor.apply(view, editors[i]);\n}\n\nexport function clearEditors(view, range){\n\tview._table.editStop();\n\teachRange(range, view, function(view, cell){\n\t\tlet editor = view._table._ssEditors[cell.row];\n\t\tif (editor){\n\t\t\tif (editor[cell.column]){\n\t\t\t\tdelete editor[cell.column];\n\t\t\t\tview._table.removeCellCss(cell.row, cell.column, \"ss_editor\");\n\t\t\t\tsetSpanCss(view, cell.row, cell.column, \"ss_editor\", false);\n\t\t\t}\n\t\t}\n\t});\n}\n\nexport function isEditor(view, row, column){\n\tconst editor = view._table._ssEditors;\n\treturn editor[row] && !!editor[row][column];\n}\n\n// called on column/row add, delete, hide,show\nfunction updatePosition(view, name, inc, data, start){\n\tconst editors = data.editors;\n\n\tif (inc){\n\t\t// create new editors\n\t\tfor(let i=editors.length-1; i>=0; i--){\n\t\t\tlet [row,column,editor] = editors[i];\n\t\t\tif (name == \"row\" && row >= start.row || name == \"column\" && column >= start.column){\n\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc){\t//delete editor mark if row was deleted\n\t\t\t\t\t\teditors.splice(i,1);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else\t\t\t\t\t\t//update mark position if upper row was deleted\n\t\t\t\t\t\teditors[i][0] = row*1 + inc;\n\t\t\t\t}\n\t\t\t\telse if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\teditors.splice(i, 1);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else \n\t\t\t\t\t\teditors[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t\teditor.options = changeRange(editor.options, name, inc, start);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function pasteDropdown(view, extra, row, col, cutted){\n\tconst editor = extra.dropdown;\n\n\tview.setCellEditor(row, col, editor);\n\tif (cutted === 1)\n\t\tview.setCellEditor(extra.row, extra.col, {});\n}","import group from \"./undo_group\";\nimport {pasteCondition} from \"../operations/conditional_formats\";\nimport {pasteDropdown} from \"../operations/dropdown\";\nimport {pasteFilter} from \"../operations/filter\";\nimport {pasteSpan} from \"../operations/spans\";\n\nvar styledata, clipdata, origin, cutted, updateFilters;\n\nexport function init(view){\n\tconst clipboard = view.config.clipboard;\n\tif(clipboard === false)\n\t\treturn;\n\n\twebix.clipbuffer.init();\n\tconst buffer = document.querySelector(\".webix_clipbuffer\");\n\n\tconst keyC = 67; //keyboard 'c' code\n\tconst keyX = 88; //keyboard 'x' code\n\tvar grid = view.$$(\"cells\");\n\n\tgrid.attachEvent(\"onAfterAreaAdd\", () => _sel_to_clip(view, buffer));\n\n\tgrid.attachEvent(\"onKeyPress\", (code, e) => {\n\t\tif((code === keyC || code === keyX) && (e.ctrlKey || e.metaKey) && grid.getSelectedId()){\n\t\t\tstyledata = _get_sel_style(view, grid);\n\t\t\tclipdata = buffer.value;\n\t\t\torigin = grid.getSelectArea();\n\t\t\tcutted = (code === keyX)*1;\n\t\t\tif(cutted && Object.keys(view._table._ssFilters).length !== 0)\n\t\t\t\tupdateFilters = allFiltersInZone(view._table._ssFilters, origin, view.config.columnCount);\n\t\t}\n\t});\n\n\tif (!view.config.readonly) {\n\t\tgrid.attachEvent(\"onPaste\", (text) => {\n\t\t\t_clip_to_sel(view, grid, text);\n\t\t});\n\t}\n}\n\nfunction _sel_to_clip(view, buffer){\n\tconst grid = view.$$(\"cells\");\n\tif(grid.getSelectedId())\n\t\twebix.delay(()=>{\n\t\t\tconst data = [];\n\t\t\tgrid.mapSelection(function(value, row, col, row_ind) {\n\t\t\t\tvalue = view._mPage.getValue(row-1, col-1);\n\t\t\t\tconst delimiter = view.config.clipboardDecimalDelimiter;\n\t\t\t\tif(!webix.isUndefined(delimiter))\n\t\t\t\t\tvalue = _updateDelimiter(value, delimiter);\n\t\t\t\tif (!data[row_ind]) data[row_ind] = [];\n\t\t\t\tdata[row_ind].push(value);\n\t\t\t});\n\t\t\tconst clipdata = webix.csv.stringify(data, grid.config.delimiter);\n\n\t\t\tif (grid.getEditor()){\n\t\t\t\tbuffer.value = clipdata;\n\t\t\t} else {\n\t\t\t\tbuffer.focus();\n\t\t\t\twebix.clipbuffer.set(clipdata);\n\t\t\t}\n\t\t\twebix.UIManager.setFocus(grid);\n\t\t});\n}\n\nfunction _updateDelimiter(value, clipboardDecimalDelimiter) {\n\tif(webix.rules.isNumber(value))\n\t\tvalue = value.toString().replace(\".\", clipboardDecimalDelimiter);\n\treturn value;\n}\n\nfunction _clip_to_sel(view, grid, text){\n\tvar leftTop = grid.getSelectArea();\n\tif (!leftTop) return;\n\tvar start = leftTop.start;\n\tvar fromSheet = text === clipdata;\n\n\tvar data = fromSheet ? styledata : webix.csv.parse(text, grid.config.delimiter);\n\tif(!fromSheet && view.config.clipboardDecimalDelimiter)\n\t\tdata = _changeDelimiter(data, view.config.clipboardDecimalDelimiter);\n\n\tvar translate = { id:\"move\", column:0, row: 0, cut:cutted };\n\tif (fromSheet){\n\t\ttranslate.column = start.column - origin.start.column;\n\t\ttranslate.row = start.row - origin.start.row;\n\t} else {\n\t\tcutted = 0;\n\t}\n\n\tgroup.set(function(){\n\t\tif (updateFilters)\n\t\t\tview.removeFilters();\n\n\t\t_add_row_col(view, start, data);\n\n\t\tif (cutted === 1) {\n\t\t\tfor (let row = origin.start.row; row <= origin.end.row; row++) {\n\t\t\t\tfor (let column = origin.start.column; column <= origin.end.column; column++) {\n\t\t\t\t\tview.setCellValue(row, column, null);\n\t\t\t\t\tview.setStyle(row, column, null);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (data.length == 1 && data[0].length == 1 && !updateFilters) {\n\t\t\tview.eachSelectedCell(function(cell) {\n\t\t\t\tvar subtrans = {\n\t\t\t\t\tid: \"move\",\n\t\t\t\t\tcolumn: translate.column + cell.column * 1 - start.column,\n\t\t\t\t\trow: translate.row + cell.row * 1 - start.row,\n\t\t\t\t\tcut:cutted\n\t\t\t\t};\n\t\t\t\t_clipboardToTable(view, cell.row, cell.column, data[0][0], fromSheet, subtrans);\n\t\t\t});\n\t\t} else {\n\t\t\tgrid.mapCells(\n\t\t\t\tstart.row,\n\t\t\t\tstart.column,\n\t\t\t\tdata.length,\n\t\t\t\tnull,\n\t\t\t\tfunction(value, row, col, row_ind, col_ind) {\n\t\t\t\t\tif (data[row_ind] && data[row_ind].length > col_ind) {\n\t\t\t\t\t\tvar cdata = data[row_ind][col_ind];\n\t\t\t\t\t\t_clipboardToTable(view, row, col, cdata, fromSheet, translate);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ttrue\n\t\t\t);\n\t\t}\n\n\t\tif (cutted === 1){\n\t\t\t//cut and cleared\n\t\t\tcutted = 2;\n\t\t\tupdateFilters = false;\n\t\t}\n\t});\n\t\n\tview.refresh();\n}\n\nfunction _clipboardToTable(view, row, col, cdata, fromSheet, translate){\n\tlet newValue = cdata;\n\n\tif (typeof cdata === \"object\"){\n\t\tif (cdata.math){\n\t\t\tif(translate.cut)\n\t\t\t\tnewValue = cdata.math;\n\t\t\telse\n\t\t\t\tnewValue = view._mData.getStore().transposeMath(cdata.math, translate.row, translate.column);\n\t\t}\n\t\telse\n\t\t\tnewValue = cdata.text;\n\n\t\tif(cdata.style && cdata.style.props){\n\t\t\tconst style = view.addStyle(cdata.style.props);\n\t\t\tview.setStyle(row, col, style);\n\t\t}\n\n\t\tconst extra = cdata.extra;\n\t\tif(extra){\n\t\t\tif(extra.condition)\n\t\t\t\tpasteCondition(view, extra, row, col, cutted);\n\t\t\tif(extra.dropdown)\n\t\t\t\tpasteDropdown(view, extra, row, col, cutted, translate);\n\t\t\tif(extra.filter && updateFilters)\n\t\t\t\tpasteFilter(view, extra, row, col, cutted, translate);\n\t\t}\n\t\tpasteSpan(view, extra, row, col, cutted, translate);\n\t}\n\n\tview.setCellValue(row, col, newValue);\n}\n\nfunction _get_sel_style(view, grid){\n\tvar data = [];\n\tvar row, last;\n\n\tgrid.mapSelection(function(value, id, col) {\n\t\tif (id != last){\n\t\t\trow = []; data.push(row);\n\t\t\tlast = id;\n\t\t}\n\n\t\tvar math =  view._mPage.getValue(id-1, col-1, true);\n\t\tmath = math && math[0] == \"=\" ? math : null;\n\t\tvalue = view._mPage.getValue(id-1, col-1);\n\t\tvar obj = { text:value, math, style:view.getStyle(id, col) };\n\n\t\tvar condition = view.conditions.get(id,col);\n\t\tvar editor = view.getCellEditor(id, col);\n\t\tvar filter = view.getCellFilter(id, col);\n\t\tvar span = view._table.getSpan(id, col);\n\n\t\tif (editor || filter || condition || span){\n\t\t\tvar extra = { row:id, col:col };\n\t\t\tif (condition) extra.condition = condition;\n\t\t\tif (editor) extra.dropdown = editor;\n\t\t\tif (filter) extra.filter = filter;\n\t\t\tif (span) extra.span = span;\n\t\t\tobj.extra = extra;\n\t\t}\n\n\t\trow.push(obj);\n\t\treturn value;\n\t});\n\n\treturn data;\n}\n\nfunction allFiltersInZone(extra, origin, columnCount){\n\tvar filters = Object.keys(extra);\n\tvar startRow = Math.min.apply(null, filters);\n\tvar endRow = Math.max.apply(null, filters);\n\tvar startCol = columnCount;\n\tvar endCol = 1;\n\n\tfor (var i = startRow; i <= endRow; i++){\n\t\tif(extra[i]){\n\t\t\tvar columns = Object.keys(extra[i]);\n\t\t\tstartCol = Math.min(startCol, Math.min.apply(null, columns));\n\t\t\tendCol = Math.max(endCol, Math.max.apply(null, columns));\n\t\t}\n\t}\n\n\tif(origin.start.row <= startRow && origin.end.row >= endRow && origin.start.column <= startCol && origin.end.column >= endCol)\n\t\treturn true;\n\telse\n\t\treturn false;\n}\n//dynamically increase rows and columns according to pasted data size\nfunction _add_row_col(view, start, data){\n\tvar maxRow = start.row + data.length - 1;\n\tvar maxCol = start.column + data[0].length - 1;\n\n\tif(maxRow > view.config.rowCount || maxCol > view.config.columnCount){\n\t\tvar action = { id:\"add\" };\n\t\tif (maxRow > view.config.rowCount) {\n\t\t\taction.group = \"row\";\n\t\t\tview.callEvent(\"onCommand\", [\n\t\t\t\taction, \n\t\t\t\t{ row: view.config.rowCount + 1 }, \n\t\t\t\t{ row: maxRow }\n\t\t\t]);\n\t\t}\n\t\tif (maxCol > view.config.columnCount) {\n\t\t\taction.group = \"column\";\n\t\t\tview.callEvent(\"onCommand\", [\n\t\t\t\taction, \n\t\t\t\t{ column: view.config.columnCount + 1 },\n\t\t\t\t{ column: maxCol }\n\t\t\t]);\n\t\t}\n\t}\n}\n\nfunction _changeDelimiter(data, clipboardDecimalDelimiter){\n\tfor(var i = 0; i < data.length; i++)\n\t\tfor(var k = 0; k < data[i].length; k++){\n\t\t\tvar record = data[i][k].toString().replace(clipboardDecimalDelimiter, \".\");\n\t\t\tif(webix.rules.isNumber(record))\n\t\t\t\tdata[i][k] = record;\n\t\t}\n\treturn data;\n}","export function init(view) {\n\tview.attachEvent(\"onCommand\", (action) => {\n\t\tif (action.id == \"show\" || action.id == \"hide\"){\n\t\t\tconst sel = view._table.getSelectArea();\n\t\t\tif (sel)\n\t\t\t\tprocess(action, webix.copy(sel.start), webix.copy(sel.end), view);\n\t\t}\n\t});\n\treset(view);\n\n\tview.attachEvent(\"onUndo\", (action, row, column, value, direction) => {\n\t\tif ((action.id == \"hide\" || action.id == \"show\") && (action.group == \"column\" || action.group == \"row\")){\n\t\t\tlet type = action.id;\n\t\t\tif (!direction)\n\t\t\t\ttype = type == \"hide\" ? \"show\" : \"hide\";\n\t\t\tconst obj = (row || column);\n\t\t\tprocess({ id: type, group: action.group }, obj.start, obj.end, view, true);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onHardReset\", () => reset(view));\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\t_updatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n}\n\nexport function reset(view, mode) {\n\tif(mode) view[\"_hidden_\"+mode+\"_hash\"] = {};\n\telse{\n\t\tview._hidden_cols_hash = {};\n\t\tview._hidden_rows_hash = {};\n\t\tview.filterSpreadSheet();\n\t}\n}\n\nfunction getIds(id){\n\treturn webix.isArray(id) ? id : [id, id];\n}\n\nexport function isColumnVisible(view, column){\n\treturn !view._hidden_cols_hash[column];\n}\n\nexport function setState(view, indexes, state, type){\n\t// hide\n\tif(!indexes){\n\t\tconst sel = view.getSelectedId(true);\n\t\tconst action = {\n\t\t\tid: state === false ? \"show\" : \"hide\",\n\t\t\tgroup: type\n\t\t};\n\n\t\tif(sel.length)\n\t\t\tview.callEvent(\"onCommand\", [action, sel[0], sel[sel.length-1]]);\n\t}\n\telse {\n\t\tconst ids = getIds(indexes);\n\t\tconst hidden = type == \"row\" ? view._hidden_rows_hash : view._hidden_cols_hash;\n\n\t\tif (!hidden[ids[0]] && (webix.isUndefined(state) || state)){\n\t\t\t(type == \"row\" ? _hideRow : _hideColumn)({id: \"hide\", group: type}, {[type]: ids[0]}, {[type]: ids[1]}, view);\n\t\t}\n\t\t// show\n\t\telse if (hidden[ids[0]] && (webix.isUndefined(state) || !state)) {\n\t\t\tconst inc = ids[0] > 1 ? 1 : -1;\n\t\t\t(type == \"row\" ? _showRow : _showColumn)({id: \"hide\", group: type}, {[type]: ids[0] + inc}, {[type]: ids[1] + inc}, view);\n\t\t}\n\t}\n}\n\nexport function isRowVisible(view, row){\n\treturn !view._hidden_rows_hash[row];\n}\n\nexport function serialize(view, data){\n\tlet hrows  = []; let hcols = [];\n\tfor(let r in view._hidden_rows_hash) hrows.push(r);\n\tfor(let c in view._hidden_cols_hash) hcols.push(c);\n\n\tif(hrows.length || hcols.length)\t\n\t\tdata.table.hidden = {};\n\tif(hrows.length)\n\t\tdata.table.hidden.row = hrows;\n\tif(hcols.length)\n\t\tdata.table.hidden.column = hcols;\n}\n\nexport function load(view, data){\n\treset(view);\n\t\n\tif(!webix.isUndefined(data.table) && !webix.isUndefined(data.table.hidden)){\n\t\tconst hidden = data.table.hidden;\n\n\t\tif(hidden.row && hidden.row.length){\n\t\t\tfor(let r = 0; r < hidden.row.length; r++)\n\t\t\t\t_hideRow({id:\"hide\", group:\"row\"}, {row:hidden.row[r]}, {row:hidden.row[r]}, view, true);\n\t\t}\n\n\t\tif(hidden.column && hidden.column.length){\n\t\t\tfor(let c = 0; c < hidden.column.length; c++)\n\t\t\t\t_hideColumn({id:\"hide\", group:\"column\"}, {column:hidden.column[c]}, {column:hidden.column[c]}, view, true);\n\t\t}\n\t}\n}\n\nfunction process(action) {\n\tif (action.group == \"column\"){\n\t\tif (action.id == \"show\")\n\t\t\t_showColumn.apply(this, arguments);\n\t\telse if (action.id == \"hide\")\n\t\t\t_hideColumn.apply(this, arguments);\n\t} else if (action.group == \"row\") {\n\t\tif (action.id == \"show\")\n\t\t\t_showRow.apply(this, arguments);\n\t\telse if (action.id == \"hide\")\n\t\t\t_hideRow.apply(this, arguments);\n\t}\n}\n\nfunction _showColumn(action, start, end, view, silent) {\n\tlet i = end.column;\n\tconst grid = view.$$(\"cells\");\n\n\twhile (i >= start.column) {\n\t\tlet id = i;\n\t\tif (!silent)\n\t\t\tid = view._hidden_cols_hash[i*1-1] || view._hidden_cols_hash[i*1+1] || false;\n\n\t\tif (id !== false) {\n\t\t\tdelete view._hidden_cols_hash[id];\n\t\t\tlet cell = grid.getColumnConfig(id - 1 || \"rowId\").header[0];\n\t\t\tcell.css = cell.css.replace(\"webix_ssheet_hide_column\", \"\");\n\t\t\tgrid.showColumn(id);\n\t\t\tstart.column = start.column < id ? start.column : id;\n\t\t\tend.column = end.column > id ? end.column : id;\n\n\t\t\tif (!silent)\n\t\t\t\tview.callEvent(\"onColumnOperation\", [action, { column: id }, { column:id }, null]);\n\t\t}\n\t\ti--;\n\t}\n\n\tconst split = view._frozenColumns;\n\tif(split && split >= start.column && split <= end.column){\n\t\tview.freezeColumns(0); // remove freeze (split is equal with current frozen col)\n\t\tview.freezeColumns(split); // if col was freezed on hidden column - move it\n\t}\n}\n\nfunction _showRow(action, start, end, view, silent) {\n\tlet i = end.row;\n\tconst grid = view.$$(\"cells\");\n\n\tconst split = view._frozenRows;\n\tif(split){\n\t\t//Frozen rows ignore filtering applied to the datatable\n\t\tview.freezeRows(0);\n\t}\n\n\twhile (i >= start.row) {\n\t\tlet id = i;\n\t\tif (!silent)\n\t\t\tid = view._hidden_rows_hash[i*1-1] || view._hidden_rows_hash[i*1+1] || false;\n\n\t\tif (id !== false) {\n\t\t\tdelete view._hidden_rows_hash[id];\n\t\t\tif (id - 1 === 0) {\n\t\t\t\tlet cell = grid.getColumnConfig(\"rowId\").header[0];\n\t\t\t\tcell.css = cell.css.replace(\"webix_ssheet_hide_row\", \"\");\n\t\t\t\tgrid.refreshColumns();\n\t\t\t} else {\n\t\t\t\tgrid.removeCellCss(id - 1, \"rowId\", \"webix_ssheet_hide_row\");\n\t\t\t}\n\t\t\tif (!silent)\n\t\t\t\tview.callEvent(\"onRowOperation\", [action, { row: id }, { row: id }, null]);\n\t\t}\n\t\ti--;\n\t}\n\n\tview.filterSpreadSheet();\n\n\tif(split)\n\t\tview.freezeRows(split);\n}\n\nfunction _hideColumn(action, start, end, view, silent) {\n\tconst grid = view.$$(\"cells\");\n\tlet i = end.column;\n\tview.$handleSelection = null;\n\tgrid.unselect();\n\n\tif (end.column<1 || start.column<1){\n\t\tdelete view._hidden_cols_hash[start.column];\n\t\treturn;\n\t}\n\twhile (i >= start.column) {\n\t\tif(grid.getColumnIndex(i) != -1){\n\t\t\tview._hidden_cols_hash[i] = i;\n\n\t\t\tlet cell = grid.getColumnConfig(i - 1 || \"rowId\").header[0];\n\t\t\tcell.css = (cell.css || \"\") + \" webix_ssheet_hide_column\";\n\n\t\t\tgrid.hideColumn(i);\n\t\t}\n\t\ti--;\n\t}\n\n\tif (!silent)\n\t\tview.callEvent(\"onColumnOperation\", [action, start, end, null]);\n}\n\nfunction _hideRow(action, start, end, view, silent) {\n\tif (end.row<1 || start.row<1){\n\t\tdelete view._hidden_rows_hash[start.row];\n\t\treturn;\n\t}\n\n\tconst split = view._frozenRows;\n\tif(split){\n\t\t//Frozen rows ignore filtering applied to the datatable\n\t\tview.freezeRows(0);\n\t}\n\n\tconst grid = view.$$(\"cells\");\n\tlet i = end.row;\n\n\twhile (i >= start.row) {\n\t\tview._hidden_rows_hash[i] = i;\n\n\t\tif (i - 1 === 0) {\n\t\t\tlet cell = grid.getColumnConfig(\"rowId\").header[0];\n\t\t\tcell.css = (cell.css || \"\") + \" webix_ssheet_hide_row\";\n\t\t\tgrid.refreshColumns();\n\t\t}\n\t\telse\n\t\t\tgrid.addCellCss(i - 1, \"rowId\", \"webix_ssheet_hide_row\");\n\n\t\ti--;\n\t}\n\n\tview.filterSpreadSheet();\n\n\tif(split)\n\t\tview.freezeRows(split);\n\n\tif (!silent)\n\t\tview.callEvent(\"onRowOperation\", [action, start, end, null]);\n}\n\nfunction _updatePosition(view, name, inc, data, start){\n\tif(data.table && data.table.hidden && data.table.hidden[name] && data.table.hidden[name].length){\n\t\tif(name ===\"column\") reset(view, \"cols\");\n\t\tif(name === \"row\") reset(view, \"rows\");\n\n\t\tlet s = start[name], e = s + inc;\n\t\tif(s > e) [s, e] = [e, s];\n\n\t\tfor(let i = s; i < e; i++){\n\t\t\tfor(let h = 0; h < data.table.hidden[name].length; h++){\n\t\t\t\tif(data.table.hidden[name][h] >= i)\n\t\t\t\t\tdata.table.hidden[name][h] = data.table.hidden[name][h]*1+(inc>0 ? 1: -1);\n\t\t\t}\n\t\t}\n\t}\n}","import {getStyle, getTextSize} from \"./styles\";\nimport {save} from \"./save\";\nimport * as arr from \"../helpers/array\";\n\nexport function init(view){\n\n\tif (view.config.resizeCell){\n\t\tvar grid = view.$$(\"cells\");\n\t\tgrid.define(\"resizeRow\", { headerOnly: true, size: 10 });\n\t\tgrid.define(\"resizeColumn\", { headerOnly: true, size: 10 });\n\t\tgrid.define(\"fixedRowHeight\", false);\n\n\t\tgrid.attachEvent(\"onRowResize\", (id) => {\n\t\t\tview.$$(\"cells\").refreshSelectArea();\n\t\t\tsave(view, \"sizes\", { row: id, column: 0, size: view.$$(\"cells\").getItem(id).$height });\n\t\t});\n\t\tgrid.attachEvent(\"onColumnResize\", (id) => {\n\t\t\tview.$$(\"cells\").refreshSelectArea();\n\t\t\tsave(view, \"sizes\", { row: 0, column: id, size: view.getColumn(id).width });\n\t\t});\n\n\t\t// undo\n\t\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\t\tif(type == \"c-resize\" || type == \"r-resize\")\n\t\t\t\t_undoResize(view, row, column, value);\n\t\t});\n\t}\n\n\tview.attachEvent(\"onDataParse\", (data) => {\n\t\tload(view,data);\n\t});\n\n\t\n\tview.attachEvent(\"onDataSerialize\", (data) => {\n\t\tserialize(view,data);\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n\n\tview.attachEvent(\"onBeforeStyleChange\", function(row, column, n, o){\n\t\tif (o && o.props.wrap === \"wrap\" && (!n || n.props.wrap != o.props.wrap)){\n\t\t\tdelete view._table.getItem(row).$height;\n\t\t}\n\t});\n\tview.attachEvent(\"onStyleChange\", _adjustRowHeight);\n\tview.attachEvent(\"onCellChange\",  _adjustRowHeight);\n}\n\nfunction serialize(view,data){\n\tvar sizes = [];\n\tvar grid = view.$$(\"cells\");\n\tvar columns = grid.getState().order;\n\tvar order = grid.data.order;\n\n\tvar defWidth = grid.config.columnWidth;\n\tvar defHeight = grid.config.rowHeight;\n\n\tfor (let i = 1; i < columns.length; i++){\n\t\tvar width = grid.getColumnConfig(columns[i]).width;\n\t\tif (width && width != defWidth)\n\t\t\tsizes.push([0, i, width]);\n\t}\n\n\tfor (let i = 0; i < order.length; i++){\n\t\tvar height = grid.getItem(order[i]).$height;\n\t\tif (height && height != defHeight)\n\t\t\tsizes.push([order[i]*1, 0, height]);\n\t}\n\t\n\tdata.sizes = sizes;\n}\n\nfunction load(view,data){\n\tif (data.sizes){\n\t\tfor (let i=0; i<data.sizes.length; i++){\n\t\t\tconst size = data.sizes[i];\n\t\t\tif (size[0]*1 !== 0){\n\t\t\t\tconst row = view.$$(\"cells\").getItem(size[0]);\n\t\t\t\tif(row) row.$height = size[2]*1;\n\t\t\t} else {\n\t\t\t\tconst col = view.getColumn(size[1]);\n\t\t\t\tif(col) col.width = size[2]*1;\n\t\t\t}\n\t\t}\n\t\tif (data.sizes.length)\n\t\t\tview.refresh(true);\n\t}\n}\n\nfunction _undoResize(view, row, column, value){\n\tif(row){\n\t\tview.$$(\"cells\").getItem(row).$height = value;\n\t\tsave(view, \"sizes\", { row:row, column: 0, size: value });\n\t}\n\telse{\n\t\tview._table.setColumnWidth(column, value);\n\t}\n\t// update area selection\n\tview._table.refreshSelectArea();\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet i,\n\t\tsizes = data.sizes,\n\t\tnsizes = [];\n\n\tif(inc){\n\t\tfor(i = sizes.length - 1; i >= 0; i--){\n\t\t\tlet [row, column, size] = sizes[i];\n\n\t\t\tif(row && name == \"row\" && row >= start.row){\n\t\t\t\tif(inc < 0 && row < start.row - inc)\n\t\t\t\t\tcontinue;\n\t\t\t\tnsizes.push([row*1 + inc, column, size]);\n\t\t\t}\n\t\t\telse if(column && name == \"column\" && column >= start.column){\n\t\t\t\tif(inc < 0 && column < start.column - inc)\n\t\t\t\t\tcontinue;\n\t\t\t\tnsizes.push([row, column*1 + inc, size]);\n\t\t\t}\n\t\t\telse\n\t\t\t\tnsizes.push(sizes[i]);\n\t\t}\n\n\t\tif(inc > 0){\n\t\t\t//col/row add: set sizes according to the selected area\n\t\t\tif(name == \"column\"){\n\t\t\t\tfor(let i = 0; i < inc; i++){\n\t\t\t\t\tconst size = arr.find(sizes, arr => arr[1] == start.column + i);\n\t\t\t\t\tif(size)\n\t\t\t\t\t\tnsizes.push([0, start.column + i, size[2]]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\tfor(let i = 0; i < inc; i++){\n\t\t\t\t\tconst size = arr.find(sizes, arr => arr[0] == start.row + i);\n\t\t\t\t\tif(size)\n\t\t\t\t\t\tnsizes.push([start.row + i, 0, size[2]]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdata.sizes = nsizes;\n\t}\n}\n\nfunction _adjustRowHeight(row, column){\n\tconst view = this;\n\tlet style = getStyle(view, {row:row, column:column});\n\n\t//changing styles or content of wrapped cell -> resize the related row\n\tif (style && style.props.wrap){\n\t\tlet item = view._table.getItem(row);\n\t\tlet height = item.$height || view._table.config.rowHeight;\n\n\t\tview._table.eachColumn(function(col, config){\n\t\t\tlet style = getStyle(view, {row:row, column:col});\n\t\t\t//include only cells with active wrap into calculation \n\t\t\tif(style && style.props && style.props.wrap === \"wrap\"){\n\t\t\t\tlet text = this.getText(row, col);\n\t\t\t\tlet baseWidth = config.width;\n\n\t\t\t\tconst span = view._table.getSpan(row, col);\n\t\t\t\tif(span)\n\t\t\t\t\tbaseWidth = view._table.getSpanNode({row:span[0], column:span[1]}).offsetWidth;\n\n\t\t\t\tif(view.getCellEditor(row, col) || view.getCellFilter(row, col))\n\t\t\t\t\tbaseWidth += 20;\n\n\t\t\t\theight = Math.max(height, getTextSize(view, text, style.id, baseWidth).height);\n\t\t\t}\n\t\t});\n\n\t\titem.$height  = height;\n\t}\n}\n","import {encode} from \"../helpers/column_names\";\n\nexport function init(view){\n\tvar table = view._table;\n\n\tvar bs = 0;\n\ttable.attachEvent(\"onAreaDrag\", () => bs = new Date());\n\ttable.attachEvent(\"onBeforeAreaRemove\", function(){\n\t\t//[FIXME] currently we don't have enough info to know\n\t\t//is user selects new area, and removing need to be blocked\n\t\t//or is it some API which attempts to remove the area\n\t\tif (view.$handleSelection && (new Date() - bs)<500) return false;\n\t});\n\n\ttable.attachEvent(\"onBeforeAreaAdd\", (area) => {\n\t\t//[FIXME] \n\t\t//block selection of row-id column\n\t\t//temporary fix, we need to fire onBeforeBlockSelect when selection moves\n\t\t//so the common onBeforeBlockSelect handler will block rowId selection\n\t\tif (area.start.column == \"rowId\") return false;\n\n\t\t//if we have an active editor, we need to close it on block selection\n\t\t//ignore, when selecting the editor's cell\n\t\tvar editor = table.getEditor();\n\t\tif (editor && (\n\t\t\teditor.row != area.start.row || editor.column != area.start.column ||\n\t\t\teditor.row != area.start.row || editor.column != area.start.column ))\n\t\t\ttable.editStop();\n\n\t\tif (!view.$handleSelection) return true;\n\t\t\n\n\t\tlet blockStart = encode[area.start.column] + area.start.row;\n\t\tlet blockEnd = encode[area.end.column] + area.end.row;\n\n\t\tvar res = view.$handleSelection(area.start, area.end, blockStart, blockEnd);\n\n\t\tif (res !== false){\n\t\t\tview.$handleSelection = null;\n\t\t\ttable.removeSelectArea();\n\t\t}\n\n\t\treturn res;\n\t});\n\n\twebix.event(table.$view, \"mousedown\", function(e){\n\t\tif (view.$handleSelection)\n\t\t\treturn webix.html.preventEvent(e);\n\t});\n}\n","export function expandSelection(r, view){\n\tlet maxY = view.config.rowCount;\n\tlet maxX = view.config.columnCount;\n\tlet table = view._table;\n\n\tlet nr1 = r.start.row, nr2 = r.end.row, nc1 = r.start.column, nc2 = r.end.column;\n\n\tfor (let i=nr1-1; i>0; i--){\n\t\tif (getValue(i, r.start.column, table))\n\t\t\tnr1 = i;\n\t\telse\n\t\t\tbreak;\n\t}\n\n\tfor (let i=nr2+1; i<maxY; i++){\n\t\tif (getValue(i, r.end.column, table))\n\t\t\tnr2 = i;\n\t\telse\n\t\t\tbreak;\n\t}\n\n\tfor (let i=nc1-1; i>0; i--){\n\t\tif (getValue(r.start.row, i, table))\n\t\t\tnc1 = i;\n\t\telse\n\t\t\tbreak;\n\t}\n\n\tfor (let i=nc2+1; i<maxX; i++){\n\t\tif (getValue(r.end.row, i, table))\n\t\t\tnc2 = i;\n\t\telse\n\t\t\tbreak;\n\t}\n\n\tlet newrange = { start:{ row:nr1, column:nc1 } , end:{ row: nr2, column: nc2 }};\n\tif (nr1 != r.start.row || nr2 != r.end.row || nc1 != r.start.column || nc2 != r.end.column){\n\t\tview._table.addSelectArea(newrange.start, newrange.end);\n\t}\n\n\treturn newrange;\n}\n\nfunction getValue(r,c, table){\n\tvar value = table.getItem(r)[c];\n\tif(value === undefined || value === \"\"){\n\t\treturn false;\n\t} else {\n\t\treturn true;\n\t}\n}","import {expandSelection} from \"../helpers/expand_selection\";\nimport {rangeObj} from \"../helpers/column_names\";\nimport group from \"./undo_group\";\nimport {_changeCondition} from \"./conditional_formats\";\n\nexport function init(view){\n\tview.attachEvent(\"onCommand\", (cm) => {\n\t\tif (cm.id === \"sort-asc\" || cm.id === \"sort-desc\")\n\t\t\tsortRange(view, null, cm.id.replace(\"sort-\",\"\"));\n\t});\n}\n\nconst sorters = {\n\t\"int\":function(dir, key){\n\t\treturn (a,b) => {\n\t\t\tif (!b[key]) return -1;\n\t\t\tif (!a[key]) return 1;\n\n\t\t\tlet c = parseFloat(a[key]) || dir*Infinity;\n\t\t\tlet d = parseFloat(b[key]) || dir*Infinity;\n\t\t\treturn (c > d ? 1 : (c == d ? 0 : -1))*dir;\n\t\t};\n\t},\n\t\"str\":function(dir, key){\n\t\treturn (a,b) => {\n\t\t\tif (!b[key]) return -1;\n\t\t\tif (!a[key]) return 1;\n\n\t\t\tlet c = a[key].toString().toLowerCase();\n\t\t\tlet d = b[key].toString().toLowerCase();\n\t\t\treturn (c > d ? 1 : (c == d ? 0 : -1))*dir;  \n\t\t};\n\t}\n};\n\nexport function sortRange(view, range, dir){\n\trange = range || view._table.getSelectArea();\n\n\tif (range){\n\t\trange = rangeObj(range, view);\n\t\tlet fullrange = range;\n\t\tif (range.start.row === range.end.row)\n\t\t\tfullrange = expandSelection(range, view);\n\n\t\tconst key = view.getCellValue(range.start.row, range.start.column, false);\n\t\tconst type = isNaN(parseFloat(key)) ? \"str\" : \"int\";\n\n\t\tdir = (!dir || dir === \"asc\") ? 1 : -1;\n\t\tgroup.set(()=>\n\t\t\tsort(fullrange, range.start.column, type, dir, view)\n\t\t);\n\t}\n}\n\nfunction sort(range, by, type, dir, view){\n\tfor (let column = range.start.column; column <= range.end.column; column++){\n\t\t//get all selected column values\n\t\tconst values = [];\n\t\tfor (let row = range.start.row; row <= range.end.row; row++) {\n\t\t\tif(view.isRowVisible(row)){\n\t\t\t\tconst value = view.getCellValue(row, column, false);\n\t\t\t\tconst style = view.getStyle(row, column);\n\n\t\t\t\tlet math = view.getCellValue(row, column);\n\t\t\t\tmath = math && math[0] == \"=\" ? math : null;\n\n\t\t\t\tconst conditions = view.conditions.get(row,column);\n\t\t\t\tif(conditions)\n\t\t\t\t\t_changeCondition(\"remove\", row, column, conditions, null, view);\n\n\t\t\t\tvalues.push({\n\t\t\t\t\tvalue,\n\t\t\t\t\tstyle,\n\t\t\t\t\tmath,\n\t\t\t\t\trow,\n\t\t\t\t\tconditions\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t//sort them\n\t\tvalues.sort(sorters[type](dir, \"value\"));\n\n\t\t//set new values to original column\n\t\tfor (let row = range.start.row; row <= range.end.row; row++) {\n\t\t\tif(view.isRowVisible(row)){\n\t\t\t\tconst element = values.shift();\n\n\t\t\t\tview.setStyle(row, column, (element.style || null));\n\t\t\t\tif(element.conditions)\n\t\t\t\t\t_changeCondition(\"update\", row, column, null, element.conditions, view);\n\n\t\t\t\tif (!element.math) view.setCellValue(row, column, element.value);\n\t\t\t\telse {\n\t\t\t\t\tconst newMath = view._mData.getStore().transposeMath(element.math, row - element.row, 0);\n\t\t\t\t\tview.setCellValue(row, column, newMath);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tview.refresh();\n}","import {split} from \"./parser\";\n\nfunction updateSheetNames(view, formula, oldName, newName){\n\tif(formula.indexOf(\"!\") == -1)\n\t\treturn formula;\n\n\tconst stack = split(formula, view, true);\n\tfor(let i = 0; i < stack.length; i++){\n\t\tif(webix.isArray(stack[i])){\n\t\t\tconst thisSheet = stack[i][0] === oldName;\n\t\t\tlet sheet = thisSheet ? newName : stack[i][0];\n\t\t\tif(sheet.indexOf(\" \") != -1)\n\t\t\t\tsheet = `'${sheet}'`;\n\t\t\tstack[i] = `${sheet}!${stack[i][1]}`;\n\t\t}\n\t}\n\treturn stack.join(\"\");\n}\n\nfunction isFormula(val){\n\treturn typeof val == \"string\" && val[0] == \"=\";\n}\n\nexport function init(view){\n\tview.attachEvent(\"onSheetRename\", (name, newName) => {\n\t\tview._sheets.forEach(sheet => {\n\t\t\tconst activeSheet = sheet.name == view.getActiveSheet();\n\t\t\tif(activeSheet)\n\t\t\t\tsheet.content = view.serialize(); //actual data\n\n\t\t\tif(sheet.content.editors){\n\t\t\t\tsheet.content.editors.forEach(value => {\n\t\t\t\t\tconst options = value[2].options;\n\t\t\t\t\tif(options){\n\t\t\t\t\t\tif(typeof options == \"string\")\n\t\t\t\t\t\t\tvalue[2].options = updateSheetNames(view, options, name, newName);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tfor (let i = 0; i < options.length; i++){\n\t\t\t\t\t\t\t\tconst option = options[i];\n\t\t\t\t\t\t\t\tif(typeof option == \"string\"){\n\t\t\t\t\t\t\t\t\tif(isFormula(option))\n\t\t\t\t\t\t\t\t\t\toptions[i] = updateSheetNames(view, option, name, newName);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if(isFormula(option.id))\n\t\t\t\t\t\t\t\t\toption.id = updateSheetNames(view, option.id, name, newName);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(sheet.content.conditions){\n\t\t\t\tsheet.content.conditions.forEach(value => {\n\t\t\t\t\tif(isFormula(value[3]))\n\t\t\t\t\t\tvalue[3] = updateSheetNames(view, value[3], name, newName);\n\t\t\t\t});\n\t\t\t\tif(activeSheet){\n\t\t\t\t\tview.conditions.clear();\n\t\t\t\t\tview.conditions.parse( sheet.content.conditions );\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}","export function init(view) {\n\tview.attachEvent(\"onUndo\", (action, row, column, value) => {\n\t\tif (action == \"gridlines-hide\"){\n\t\t\thideGridlines(view, value);\n\t\t}\n\t});\n}\n\nexport function hideGridlines(view, state = true){\n\tvar grid = view.$$(\"cells\");\n\tvar borderless = grid.$view.className.indexOf(\"webix_borderless\") !=-1;\n\tif (state === \"toggle\")\n\t\tstate = !borderless;\n\n\tif(!borderless && state){\n\t\twebix.html.addCss( grid.$view, \"webix_borderless\", true);\n\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"hide-gridlines\", value:true}]);\n\t\tview.callEvent(\"onAction\", [\"gridlines-hide\", {newValue:true, value: false}]);\n\t}\n\telse if(borderless && !state){\n\t\twebix.html.removeCss( grid.$view, \"webix_borderless\");\n\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"hide-gridlines\", value:false}]);\n\t\tview.callEvent(\"onAction\", [\"gridlines-hide\", {newValue:false, value: true}]);\n\t}\n}\n\nexport function serialize(view, data){\n\tdata.table.gridlines = view.$$(\"cells\").$view.className.indexOf(\"webix_borderless\") !=-1?0:1;\n}\n\nexport function load(view, data){\n\tvar mode = false;\n\tif(!webix.isUndefined(data.table) && !webix.isUndefined(data.table.gridlines))\n\t\tmode = !data.table.gridlines;\n\thideGridlines(view, mode);\n}","export function init(view) {\n\tview.attachEvent(\"onUndo\", (action, row, column, value) => {\n\t\tif (action == \"header-hide\"){\n\t\t\thideHeaders(view, value);\n\t\t}\n\t});\n}\n\nexport function hideHeaders(view, state = true){\n\tvar grid = view.$$(\"cells\");\n\tif (state === \"toggle\")\n\t\tstate = grid.config.header;\n\n\tif(grid.config.header && state){\n\t\tgrid.config.header = false;\n\t\tif (grid.isColumnVisible(\"rowId\"))\n\t\t\tgrid.hideColumn(\"rowId\", {}, true, true);\n\t\tgrid.refreshColumns();\n\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"hide-headers\", value:true}]);\n\t\tview.callEvent(\"onAction\", [\"header-hide\", {newValue:true, value:false}]);\n\t}\n\telse if(!grid.config.header && !state){\n\t\tgrid.config.header = true;\n\t\tif (!grid.isColumnVisible(\"rowId\"))\n\t\t\tgrid.showColumn(\"rowId\", {}, true);\n\t\tgrid.refreshColumns();\n\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"hide-headers\", value:false}]);\n\t\tview.callEvent(\"onAction\", [\"header-hide\", {newValue:false, value:true}]);\n\t}\n}\n\nexport function serialize(view, data){\n\tdata.table.headers = view.$$(\"cells\").config.header?1:0;\n}\n\nexport function load(view, data){\n\tvar mode = false;\n\tif(data.table && !webix.isUndefined(data.table.headers))\n\t\tmode = !data.table.headers;\n\thideHeaders(view, mode);\n}","import group from \"./undo_group\";\nimport {eachRange} from \"../helpers/column_names\";\n\nexport function init(view){\n\tview.comments = {\n\t\tget: function(row, column){\n\t\t\treturn getComment(view, row, column);\n\t\t},\n\t\tadd: function(row, column, comment){\n\t\t\tcommentCell(view, row, column, comment);\n\t\t},\n\t\tremove: function(row, column){\n\t\t\tremoveComment(view, row, column);\n\t\t},\n\t\t_activeComment: {},\n\t\t_pull:{}\n\t};\n\n\tview.attachEvent(\"onReset\", () => reset(view));\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tif (type === \"comment\")\n\t\t\t_undoComment(view, row, column, value);\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name,p.inc,p.data, p.start);\n\t});\n}\n\nfunction _undoComment(view, row, column, value){\n\tif(getComment(view, row, column))\n\t\tremoveComment(view, row, column, true);\n\tif(value)\n\t\tcommentCell(view, row, column, value, true);\n}\n\nfunction reset(view){\n\tview.comments._pull = {};\n}\n\nfunction removeComment(view, row, column, silent){\n\tif(getComment(view, row, column)){\n\t\tif (!silent)\n\t\t\tview.callEvent(\"onAction\", [\"comment\", {row, column, newValue: null, value: view.comments._pull[row][column]}]);\n\t\tdelete view.comments._pull[row][column];\n\t}\n\tview.$$(\"cells\").updateItem(row,column);\n}\n\nexport function removeCommentsRange(view, range){\n\tgroup.set(function(){\n\t\teachRange(range, view, function(view, cell){\n\t\t\tif(getComment(view, cell.row, cell.column))\n\t\t\t\tremoveComment(view, cell.row, cell.column);\n\t\t});\n\t\tview.$$(\"cells\").refresh();\n\t});\n}\n\nfunction commentCell(view, row, column, comment, silent){\n\tvar oldValue = getComment(view, row, column) ? view.comments._pull[row][column] : null;\n\tvar table = view.$$(\"cells\");\n\n\tif(typeof comment == \"string\")\n\t\tcomment = comment.trim() ? comment : \"\";\n\tview.comments._pull[row] = view.comments._pull[row] ? view.comments._pull[row] : {};\n\tview.comments._pull[row][column] = comment;\n\n\ttable.addCellCss(row, column, \"ssheet_commented_cell\");\n\n\tif (!silent)\n\t\tview.callEvent(\"onAction\", [\"comment\", {row, column, newValue:comment, value:oldValue}]);\n}\n\nexport function serialize(view,data){\n\tvar row, column,\n\t\tcomments = [];\n\tfor(row in view.comments._pull){\n\t\tfor(column in view.comments._pull[row])\n\t\t\tif(view.comments._pull[row][column])\n\t\t\t\tcomments.push([row, column, view.comments._pull[row][column]]);\n\t}\n\tdata.comments = comments;\n}\n\nexport function load(view,data){\n\tvar i,\n\t\tcomments = data.comments;\n\n\tif(comments)\n\t\tfor(i = 0; i < comments.length; i++)\n\t\t\tcommentCell(view, comments[i][0], comments[i][1], comments[i][2], true);\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet comments = data.comments,\n\t\ti = comments.length;\n\n\tif(inc){\n\t\twhile(i--){\n\t\t\tlet [row,column] = comments[i];\n\t\t\tif(row && name == \"row\" && row>= start.row || column && name == \"column\" && column >= start.column){\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc)\t//delete comment if row was deleted\n\t\t\t\t\t\tcomments.splice(i,1);\n\t\t\t\t\telse\t\t\t\t\t\t//update mark position if upper row was deleted\n\t\t\t\t\t\tcomments[i][0] = row*1 + inc;\n\t\t\t\t} else if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\tcomments.splice(i, 1);\n\t\t\t\t\t} else \n\t\t\t\t\t\tcomments[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction getComment(view, row, column){\n\treturn view.comments._pull[row] && view.comments._pull[row][column] ? view.comments._pull[row][column] : \"\";\n}","import * as m1  from \"./hide_gridlines\";\nimport * as m2  from \"./hide_headers\";\nimport * as m3  from \"./lock_cell\";\nimport * as m4  from \"./dropdown\";\nimport * as m5  from \"./filter\";\nimport * as m6  from \"./hide_row_col\";\nimport * as m7  from \"./comments\";\n\nexport function init(view){\n\tvar modules = [m1,m2,m3,m4,m5,m6,m7];\n\tview.attachEvent(\"onDataSerialize\", function(data){\n\t\tfor (var i = 0; i < modules.length; i++){\n\t\t\tif(modules[i].serialize)\n\t\t\t\tmodules[i].serialize(view,data);\n\t\t}\n\n\t});\n\tview.attachEvent(\"onDataParse\", function(data){\n\t\tfor (var i = 0; i < modules.length; i++){\n\t\t\tif(modules[i].load)\n\t\t\t\tmodules[i].load(view,data);\n\t\t}\n\t});\n}","const types = [\".xls\",\".xlt\",\".xla\",\".xlsx\",\".xlsm\",\".xltx\",\".xltm\",\".xlam\",\".xlsb\"];\n\nexport function init(view){\n\tlet uploader;\n\tif (window.XMLHttpRequest && (new XMLHttpRequest()).upload){\n\t\tuploader = webix.ui({\n\t\t\tview:\"uploader\",\n\t\t\tapiOnly:true,\n\t\t\taccept: types.join()\n\t\t});\n\n\t\tuploader.attachEvent(\"onBeforeFileAdd\",webix.bind(function(upload){\n\t\t\tif(types.indexOf(\".\"+upload.type.toLowerCase())>-1){\n\t\t\t\tview.reset();\n\t\t\t\tview.parse(upload.file, \"excel\");\n\t\t\t}\n\t\t\treturn false;\n\t\t},this));\n\n\t\tview._destroy_with_me.push(uploader);\n\t}\n\n\tview.attachEvent(\"onCommand\", (obj) => {\n\t\tif (obj.id === \"excel-import\")\n\t\t\tstartImport(view, uploader);\n\t});\n}\n\nfunction startImport(view, uploader){\n\tif (!uploader)\n\t\tview.alert(webix.i18n.spreadsheet.labels[\"import-not-support\"]);\n\telse\n\t\twebix.delay(() => uploader.fileDialog());\n}","export function print(view, options){\n\tlet active = view._activeSheet;\n\n\tlet html = _buildHtml(view, options, active);\n\twebix.html.insertBefore(html, options.docFooter, document.body);\n\twindow.print();\n\t_cleanHtml(view, html);\n\n\tview.showSheet(active);\n}\n\nexport function init(view){\n\tview.$customPrint = function(options){\n\t\tprint(view, options);\n\t};\n}\n\nfunction _cleanHtml(view, html){\n\twebix.html.remove(html);\n\n\tview._sheets.forEach((sheet, i) => {\n\t\twebix.html.removeStyle(\".wss_\"+view.$index+\"_\"+i);\n\t});\n}\nfunction _buildHtml(view, options, active){\n\tlet doc = webix.html.create(\"div\", { \"class\":\"webix_ssheet_print\"});\n\n\toptions.xCorrection = 1;\n\toptions.header = options.header || false;\n\toptions.trim = webix.isUndefined(options.trim) ? true : options.trim;\n\toptions.sheetnames = webix.isUndefined(options.sheetnames) ? true : options.sheetnames;\n\tconst baseIndex = view.$index;\n\n\tview._sheets.forEach((sheet, i) => {\n\t\tview.$index = baseIndex+\"_\"+i;\n\t\tif(options.data ===\"all\" || (options.data !== \"all\" && sheet.name === active)){\n\t\t\tview.showSheet(sheet.name);\n\t\t\tlet prefix = \"wss_\"+view.$index;\n\n\t\t\tif(options.sheetnames){\n\t\t\t\tlet sheetname = webix.html.create(\"div\", { \"class\":\"webix_view webix_ssheet_sheetname\"}, sheet.name+\":\");\n\t\t\t\tdoc.appendChild(sheetname);\n\t\t\t}\n\n\t\t\tview._print = true;\n\t\t\tlet table = view._table.$customPrint(options, true);\n\t\t\tdelete view._print;\n\n\t\t\t//for empty sheet we don't have any HTML\n\t\t\tif (table.firstChild)\n\t\t\t\ttable.firstChild.className += \" \"+prefix;\n\t\t\tdoc.appendChild(table);\n\n\t\t\tif(options.data == \"all\" && i+1 < view._sheets.length){\n\t\t\t\tvar br = webix.html.create(\"DIV\", {\"class\":\"webix_print_pagebreak\"});\n\t\t\t\tdoc.appendChild(br);\n\t\t\t}\n\t\t}\n\t});\n\tview.$index = baseIndex;\n\n\treturn doc;\n}","import { style_names } from \"../operations/styles\";\nimport { getType } from \"../operations/types\";\nimport { defaultStyles} from \"../toolbar/defaults\";\nimport { getFormatSource } from \"../operations/formats\";\nimport { getDimension } from \"../helpers/array\";\nimport { getConditionCss } from \"../operations/conditional_formats\";\nimport { getRenderedValue } from \"../table\";\n\nexport function init(view){\n\tconst table = view._table;\n\tview.$exportView = function(options){\n\t\tconst pdf = options.export_mode == \"pdf\";\n\t\tconst excel = options.export_mode == \"excel\";\n\t\tconst defaultOptions = {\n\t\t\tstubCells: true,\n\t\t\theader: false,\n\t\t\tfooter:false,\n\t\t\theights:true,\n\t\t\trawValues: !pdf,\n\t\t\tfilterHTML:true,\n\t\t\tspans: true,\n\t\t\tstyles:true,\n\t\t\tmath: !pdf,\n\t\t\thidden: excel,\n\t\t\txCorrection: table.config.header || options.hidden ? 1 : 0,\n\t\t\tignore:{rowId:true},\n\t\t\tconditions:true\n\t\t};\n\n\t\twebix.extend(options, defaultOptions);\n\n\t\tif(excel || pdf)\n\t\t\treturn _exportView(view, options);\n\t\telse\n\t\t\treturn table;\n\t};\n\n\ttable.$getExportValue = function(row, column, options){\n\t\tconst value = view.getCellValue(row, column, options.math);\n\t\tconst mode = options.export_mode;\n\t\tconst math = options.math && value[0] == \"=\";\n\t\tif((mode == \"pdf\" || mode == \"csv\") && !math && !options.rawValues)\n\t\t\treturn getRenderedValue(view, row, column);\n\t\treturn typeof value == \"string\" && value.match(/^=(image|sparkline)\\(/i) ? \"\" : value;\n\t};\n}\n\nfunction _exportView(view, options){\n\tconst excel = options.export_mode == \"excel\";\n\n\tif(options.sheets === true) \n\t\toptions.sheets = view._sheets.map(function(s){ return s.name;});\n\telse if(!options.sheets || !options.sheets.length)\n\t\toptions.sheets = [view._activeSheet];\n\telse if(typeof options.sheets == \"string\")\n\t\toptions.sheets = [options.sheets];\n\n\toptions.dataOnly = true;\n\n\tlet data = [];\n\tlet active = view._activeSheet;\n\n\tfor(let i = 0; i<options.sheets.length; i++){\n\t\tconst sheet = options.sheets[i];\n\t\tconst id = sheet.id || sheet;\n\n\t\tview.showSheet(id);\n\n\t\tif(options.hidden)\n\t\t\toptions.xCorrection = 1;\n\n\t\tconst sheetOptions = sheet.options ? webix.extend(sheet.options, options) : webix.copy(options);\n\t\tif(id != active)\n\t\t\tsheetOptions._hidden = true;\n\t\tif(!sheetOptions.name)\n\t\t\tsheetOptions.name = id;\n\n\t\tconst pdfTable = !excel && sheetOptions.display != \"image\";\n\n\t\tconst serialized = view.serialize();\n\t\tconst [rows, cols] = getDimension(serialized.data, serialized.spans, 0, 0);\n\n\t\tif(!excel){\n\t\t\tif(webix.isUndefined(sheetOptions.textBefore))\n\t\t\t\tsheetOptions.textBefore = sheetOptions.name;\n\t\t\tif(pdfTable){\n\t\t\t\tsheetOptions.ignore = sheetOptions.ignore || {};\n\t\t\t\tfor(let i = cols+1; i <= view.config.columnCount; i++){\n\t\t\t\t\tsheetOptions.ignore[i] = true;\n\t\t\t\t}\n\n\t\t\t\tconst filter = sheetOptions.filter || (()=>true);\n\t\t\t\tsheetOptions.filter = obj =>{\n\t\t\t\t\treturn obj.id <= rows && filter.apply(this, arguments);\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tconst sheetData = webix[excel ? \"toExcel\" : \"toPDF\"](view._table, sheetOptions);\n\t\tif(pdfTable && sheetData[0].scheme.length == 0)\n\t\t\tcontinue;\n\n\t\tif((excel || pdfTable) && sheetOptions.styles){\n\t\t\tconst styles = sheetData[0].styles = _getStyles(view, sheetOptions, excel, rows, cols);\n\n\t\t\tif(pdfTable)\n\t\t\t\t_updatePdfData(styles, sheetData, sheetOptions, view, serialized);\n\t\t}\n\n\t\tdata = data.concat(sheetData);\n\n\t\tif(excel){\n\t\t\tdata[i].ranges = [];\n\n\t\t\tview.ranges.serialize(id).forEach(range => {\n\t\t\t\tconst ref = range[1].split(\"!\");\n\t\t\t\tdata[i].ranges.push({\n\t\t\t\t\tSheet: range[2] ? null : i,\n\t\t\t\t\tName: range[0],\n\t\t\t\t\tRef: ref[0]+\"!\"+ref[1].replace(/[0-9]+|[A-Z]+/gi, (match)=>`$${match}`)\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\telse{\n\t\t\tif(options.autowidth)\n\t\t\t\tgetAutowidth(sheetOptions, options);\n\t\t}\n\t}\n\n\tview.showSheet(active);\n\tdelete options.dataOnly;\n\treturn data;\n}\n\nfunction _updatePdfData(styles, sheetData, sheetOptions, view, serialized){\n\tconst header = sheetOptions.header ? 1 : 0;\n\n\tif (sheetOptions.spans) {\n\t\tfor (let idx in serialized.spans) {\n\t\t\tif (serialized.spans[idx][2] > 1) {\n\t\t\t\tlet row = serialized.spans[idx][0] - 1 + header, // zero-based row position\n\t\t\t\t\tcol = serialized.spans[idx][1] - 1, // zero-based col position\n\t\t\t\t\tcols = serialized.spans[idx][2];\n\t\t\t\tif (styles[row] && styles[row][col]) {\n\t\t\t\t\tstyles[row][col].colspan = cols;\n\t\t\t\t\t// if colspan, then remove merged cells (else PDFJS will shift columns)\n\t\t\t\t\tconst rowData = sheetData[0].exportData[row - header];\n\t\t\t\t\tif (rowData){\n\t\t\t\t\t\t// remove merged cell values\n\t\t\t\t\t\trowData.splice(col + 1, cols - 1);\n\t\t\t\t\t}\n\t\t\t\t\tlet style = Object.values(styles[row]);\n\t\t\t\t\tstyle.splice(col + 1, cols - 1); // remove merged cell styles\n\t\t\t\t\tstyles[row] = style;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tconst data = sheetData[0].exportData;\n\tfor(let r = 0; r < data.length; r++){\n\t\tfor (let c = 0; c < data[r].length; c++) {\n\t\t\tlet height = view.$$(\"cells\").config.rowHeight;\n\n\t\t\tif(sheetOptions.heights && serialized.sizes.length){\n\t\t\t\tfor(let s = 0; s < serialized.sizes.length; s++){\n\t\t\t\t\tconst rowSize = serialized.sizes[s][0];\n\t\t\t\t\tif(rowSize && rowSize == r+1){\n\t\t\t\t\t\theight = serialized.sizes[s][2];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst cellStyle = styles[r + header][c];\n\t\t\tconst align = cellStyle.vertAlign;\n\t\t\tconst pad = height*0.75 - cellStyle.fontSize; // available px for padding in top & bottom\n\t\t\tcellStyle.paddingTop = (align == \"top\" ? 0 : (align == \"bottom\" ? pad : pad / 2));\n\t\t\tcellStyle.paddingBottom = (align == \"bottom\" ? 0 : (align == \"top\" ? pad : pad / 2));\n\t\t}\n\t}\n}\n\nfunction getAutowidth(view, options){\n\tconst prop = options.orientation && options.orientation == \"landscape\" ? \"height\" : \"width\";\n\tlet width;\n\n\tif(view.$width)\n\t\twidth = view.$width;\n\telse //'view' can be local settings and we need to compare them with common ones\n\t\twidth = view[prop];\n\n\toptions[prop] = Math.max(options[prop] || 0, width || 0);\n}\n\nfunction _safeColor(str){\n\tstr = str.substring(1);\n\tif(str.length === 3) str = str+str;\n\treturn str;\n}\n\nfunction _getDefaults(options){\n\tlet d = defaultStyles;\n\tif(options.export_mode == \"excel\")\n\t\treturn {\n\t\t\tfont:{\n\t\t\t\tsz:d[\"font-size\"].replace(\"px\", \"\")*0.75,\n\t\t\t\tname:d[\"font-family\"].replace(/'|,.*$/g, \"\"),\n\t\t\t\t//we do not export default color, but it is the right place to do it\n\t\t\t},\n\t\t\talignment:{\n\t\t\t\thorizontal:d[\"text-align\"],\n\t\t\t\tvertical:d[\"vertical-align\"]==\"middle\"?\"center\":d[\"vertical-align\"],\n\t\t\t\twrapText:d[\"white-space\"]!=\"nowrap\"\n\t\t\t}\n\t\t};\n\telse\n\t\treturn {\n\t\t\tfontSize: d[\"font-size\"].replace(\"px\", \"\")*0.75,\n\t\t\t//we do not export default color, but it is the right place to do it\n\t\t\ttextAlign: d[\"text-align\"],\n\t\t\twhiteSpace: (d[\"white-space\"]!=\"nowrap\")\n\t\t};\n}\n\nfunction _getStyles(view, options, excel, rows, cols){\n\tview.compactStyles();\n\n\tlet result = [];\n\tconst cached = {};\n\tconst cachedConditions = {};\n\tconst defaults = _getDefaults(options);\n\n\tif(excel && options.docHeader) result  = result.concat([{0:_getDocStyle(options.docHeader.css, defaults)}, {}]);\n\tif(options.header) result.push({});\n\n\tconst delta = result.length;\n\n\tconst grid = view.$$(\"cells\");\n\n\tlet rIndex = delta;\n\tgrid.eachRow(row =>{\n\t\tif(row > rows)\n\t\t\treturn;\n\n\t\tlet cIndex = 0;\n\t\tgrid.eachColumn(col => {\n\t\t\tif(cIndex > cols)\n\t\t\t\treturn;\n\n\t\t\tif(cIndex >= options.xCorrection){\n\t\t\t\tconst css = view.getStyle(row, col);\n\t\t\t\tconst index = cIndex - options.xCorrection;\n\n\t\t\t\tresult[rIndex] = result[rIndex] || {};\n\n\t\t\t\tlet styles;\n\t\t\t\tif(css){\n\t\t\t\t\tif(cached[css.id])\n\t\t\t\t\t\tstyles = webix.copy(cached[css.id]);\n\t\t\t\t\telse{\n\t\t\t\t\t\tstyles = _getCellStyle(css.text, excel);\n\n\t\t\t\t\t\tfor(let name in defaults){\n\t\t\t\t\t\t\tif(excel)\n\t\t\t\t\t\t\t\twebix.extend(styles[name], defaults[name]);\n\t\t\t\t\t\t\telse if (!styles[name])\n\t\t\t\t\t\t\t\tstyles[name] = defaults[name];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcached[css.id] = webix.copy(styles);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tstyles = webix.copy(defaults);\n\n\t\t\t\tif(options.conditions){\n\t\t\t\t\t//not real excel condition, save only bg and color (sheetJS doesn't support)\n\t\t\t\t\tconst condition = _getCellConditions(view, row, col, cachedConditions);\n\t\t\t\t\tif(condition)\n\t\t\t\t\t\t_updateStyleCondition(styles, condition, excel);\n\t\t\t\t}\n\n\t\t\t\tresult[rIndex][index] = styles;\n\t\t\t\tresult[rIndex][index].type = getType(view, row, col);\n\t\t\t}\n\t\t\tcIndex++;\n\t\t}, options.hidden);\n\t\trIndex++;\n\t}, options.hidden);\n\n\tif(excel && options.docFooter) result  = result.concat([{},{0:_getDocStyle(options.docFooter.css, defaults)}]);\n\n\treturn result;\n}\n\nfunction _getCellStyle(styles, excel){\n\tlet str = styles.split(\";\");\n\tlet stl = {};\n\tif(excel)\n\t\tstl = { font:{}, alignment:{}, border:{}};\n\n\tfor(let s = 0; s<str.length; s++){\n\t\tif(str[s]){\n\t\t\tif(excel)\n\t\t\t\t_getExcelCellStyle(stl, str, s);\n\t\t\telse\n\t\t\t\t_getPdfCellStyle(stl, str, s);\n\t\t}\n\t}\n\n\treturn stl;\n}\n\nfunction _getCellConditions(view, r, c, cached){\n\tconst rendered = getRenderedValue(view, r, c);\n\tconst css = getConditionCss(view, r, c, rendered);\n\tif(css){\n\t\tif(cached[css])\n\t\t\treturn cached[css];\n\t\tconst el = webix.html.create(\"div\", {\"class\":css});\n\t\tdocument.body.appendChild(el);\n\n\t\tconst computed = window.getComputedStyle(el);\n\t\tconst bg = computed.backgroundColor;\n\t\tconst color = computed.color;\n\n\t\tdocument.body.removeChild(el);\n\n\t\tcached[css] = [bg, color];\n\t\treturn cached[css];\n\t}\n}\n\nfunction _updateStyleCondition(stl, condition, excel){\n\tlet [bg, color] = condition.map(val => webix.color.rgbToHex(val));\n\tif(excel){\n\t\tstl.fill = {fgColor:{rgb:bg}};\n\t\tstl.font.color = {rgb:color};\n\t}\n\telse{\n\t\tstl.backgroundColor = bg;\n\t\tstl.color = color;\n\t}\n}\n\nfunction _getExcelCellStyle(stl, str, s){\n\tswitch (style_names[s]){\n\t\tcase \"color\":\n\t\t\tstl.font.color = {rgb:_safeColor(str[s])};\n\t\t\tbreak;\n\t\tcase \"background\":{\n\t\t\tconst fill = _safeColor(str[s]);\n\t\t\tif(fill && fill.toLowerCase() !== \"ffffff\")\n\t\t\t\tstl.fill = { fgColor:{ rgb:fill}};\n\t\t\tbreak;\n\t\t}\t\n\t\tcase \"text-align\":\n\t\t\tstl.alignment.horizontal = str[s];\n\t\t\tbreak;\n\t\tcase \"font-family\":\n\t\t\tstl.font.name = str[s].replace(/'|,.*$/g, \"\"); // cut off fallback font\n\t\t\tbreak;\n\t\tcase \"font-size\":\n\t\t\tstl.font.sz = str[s].replace(\"px\", \"\")*0.75; //px to pt conversion\n\t\t\tbreak;\n\t\tcase \"font-style\":\n\t\t\tstl.font.italic = str[s] == \"italic\";\n\t\t\tbreak;\n\t\tcase \"text-decoration\":\n\t\t\tstl.font.underline = str[s] == \"underline\";\n\t\t\tbreak;\n\t\tcase \"font-weight\":\n\t\t\tstl.font.bold = str[s] == \"bold\";\n\t\t\tbreak;\n\t\tcase \"vertical-align\":\n\t\t\tstl.alignment.vertical = str[s] == \"middle\"?\"center\":str[s];\n\t\t\tbreak;\n\t\tcase \"wrap\":\n\t\t\tstl.alignment.wrapText = str[s] == \"wrap\";\n\t\t\tbreak;\n\t\tcase \"borders\":\n\t\t\tbreak;\n\t\tcase \"format\":\n\t\t\tstl.format = getFormatSource(str[s], true) || \"\";\n\t\t\tbreak;\n\t\tcase \"border-right\":\n\t\tcase \"border-bottom\":\n\t\tcase \"border-left\":\n\t\tcase \"border-top\":\n\t\t\tstl.border[ style_names[s].split(\"-\")[1] ] = getBorderStyles(str[s], true);\n\t\t\tbreak;\n\t}\n}\n\nfunction _getPdfCellStyle(stl, str, s){\n\tswitch (style_names[s]) {\n\t\tcase \"color\":\n\t\t\tstl.color = _safeColor(str[s]);\n\t\t\tbreak;\n\t\tcase \"background\":\n\t\t\tstl.backgroundColor = _safeColor(str[s]);\n\t\t\tbreak;\n\t\tcase \"text-align\":\n\t\t\tstl.textAlign = str[s];\n\t\t\tbreak;\n\t\tcase \"font-family\":\n\t\t\tbreak;\n\t\tcase \"font-size\":\n\t\t\tstl.fontSize = str[s].replace(\"px\", \"\")*0.75;\n\t\t\tbreak;\n\t\tcase \"font-style\":\n\t\t\tstl.italic = str[s] == \"italic\";\n\t\t\tbreak;\n\t\tcase \"text-decoration\":\n\t\t\tstl.underline = str[s] == \"underline\";\n\t\t\tbreak;\n\t\tcase \"font-weight\":\n\t\t\tstl.bold = str[s] == \"bold\";\n\t\t\tbreak;\n\t\tcase \"vertical-align\":\n\t\t\tstl.vertAlign = str[s]; // not supported in PDFJS, so simulate with lineHeight and paddingTop\n\t\t\tbreak;\n\t\tcase \"wrap\":\n\t\t\tstl.whiteSpace = (str[s] != \"nowrap\");\n\t\t\tbreak;\n\t\tcase \"borders\":\n\t\t\tbreak;\n\t\tcase \"format\":\n\t\t\tbreak;\n\t\tcase \"border-right\":\n\t\tcase \"border-bottom\":\n\t\tcase \"border-left\":\n\t\tcase \"border-top\":{\n\t\t\tconst pos = style_names[s].split(\"-\")[1];\n\t\t\tstl[`border${pos[0].toUpperCase() + pos.substring(1)}Color`] = getBorderStyles(str[s]);\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\nfunction getBorderStyles(val, excel){\n\tconst [color, type] = val.split(\",\");\n\n\tif(excel)\n\t\treturn { color:{ rgb:_safeColor(color)}, style:type};\n\telse\n\t\treturn _safeColor(color);\n}\n\nfunction _getDocStyle(css){\n\tif(!css) return {};\n\tvar str = [];\n\tfor(let i =0; i<style_names.length; i++)\n\t\tstr.push(css[style_names[i]]||\"\");\n\treturn _getCellStyle(str.join(\";\"), true);\n}","import { style_names } from \"../operations/styles\";\nimport { fontFamily} from \"../toolbar/buttons\";\nimport { defaultStyles} from \"../toolbar/defaults\";\n\nexport function init(view){\n\tview._parseExcel = function(obj, driver){\n\t\tvar options = obj.options || {};\n\t\toptions.math = view.config.math;\n\n\t\tvar full = { sheets:[]};\n\t\tfor(let i  = 0; i< obj.names.length; i++){\n\t\t\toptions.name = obj.names[i];\n\t\t\tfull.sheets.push({\n\t\t\t\tname:options.name,\n\t\t\t\tcontent:_excel_to_data(driver.getSheet(obj, options), obj.ranges, i)\n\t\t\t});\n\t\t}\n\t\treturn full;\n\t};\n\tview._parseCsv = function(obj, driver){\n\t\tobj = driver.getRecords(obj);\n\n\t\tvar dataObj = webix.copy(obj);\n\t\tvar data = [];\n\n\t\tfor(let i = 0; i<dataObj.length; i++){\n\t\t\tlet item = dataObj[i].split(driver.cell);\n\t\t\tfor(let c  = 0; c<item.length; c++){\n\t\t\t\tvar row = i+1, column = c+1;\n\t\t\t\tdata.push([row, column, item[c]]);\n\t\t\t}\n\t\t}\n\t\treturn { data:data };\n\t};\n}\n\n\nfunction _excel_to_data(obj, ranges, index){\n\tvar dataObj = webix.copy(obj.data);\n\tvar data =  [];\n\n\tfor (let i = 0; i < dataObj.length; i++){\n\t\tfor(let c = 0; c<dataObj[0].length; c++){\n\t\t\tvar row = i+1, column = c+1;\n\t\t\tdata.push([row, column, dataObj[i][c]]);\n\t\t}\n\t}\n\tobj.data = data;\n\n\t//merged cells\n\tif(obj.spans){\n\t\tfor(let i = 0; i<obj.spans.length; i++){\n\t\t\tobj.spans[i][0]++;\n\t\t\tobj.spans[i][1]++;\n\t\t}\n\t}\n\n\t//named ranges\n\tif(ranges){\n\t\tfor(let r = 0; r<ranges.length; r++){\n\t\t\t//we don't support global named ranges, so import only sheet-based :(\n\t\t\tif(ranges[r].Sheet === index){\n\t\t\t\tobj.ranges = obj.ranges || [];\n\t\t\t\tobj.ranges.push([ranges[r].Name.toUpperCase(), ranges[r].Ref.substring(ranges[r].Ref.indexOf(\"!\")+1).replace(/\\$/g, \"\")]);\n\t\t\t}\n\t\t}\n\t}\n\n\t//cell styles\n\tif(obj.styles)\n\t\t_getStyles(obj);\n\n\tif(obj.types)\n\t\t_getTypes(obj);\n\n\tif(obj.hidden){\n\t\t_getHidden(obj);\n\t}\n\n\t//column width and row height\n\tif(obj.sizes){\n\t\tfor(let i = 0; i<obj.sizes.length; i++){\n\t\t\tif(obj.sizes[i][0] == \"column\")\n\t\t\t\tobj.sizes[i] = [0, obj.sizes[i][1]+1, obj.sizes[i][2]];\n\t\t\telse\n\t\t\t\tobj.sizes[i] = [obj.sizes[i][1]+1, 0, obj.sizes[i][2]];\n\t\t}\n\t}\n\n\treturn obj; \n}\n\n//ARGB conversion\nfunction _safeColor(str){\n\tstr = str || \"000000\";\n\tif(str.length === 8) str = str.substring(2);\n\treturn \"#\"+str;\n}\n\n//only fonts that we support can be imported\nfunction _safeFont(str){\n\tlet safe = defaultStyles[\"font-family\"];\n\tfor(let i = 0; i<fontFamily.length; i++){\n\t\tif(fontFamily[i].value == str) { safe = fontFamily[i].id; break; }\n\t}\n\treturn safe;\n}\n\nfunction _getTypes(obj){\n\tobj.types.forEach(type => {\n\t\tfor(let i = 0; i < obj.data.length; i++){\n\t\t\tif(obj.data[i][0] === type[0]+1 && obj.data[i][1] === type[1]+1){\n\t\t\t\tobj.data[i][4] = type[2];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction _getHidden(obj){\n\tconst hidden = {\n\t\trow:[],\n\t\tcolumn:[]\n\t};\n\n\tfor(let i = 0; i < obj.hidden.length; i++){\n\t\tconst item = obj.hidden[i];\n\t\tif(item[0] == \"column\")\n\t\t\thidden.column.push(item[1]+1);\n\t\telse\n\t\t\thidden.row.push(item[1]+1);\n\t}\n\n\tobj.table = {hidden};\n}\n\nfunction _getBorderStyles(pos, stl){\n\tpos = pos.replace(\"border-\", \"\");\n\tif(stl.border && stl.border[pos]){\n\t\tconst border = stl.border[pos];\n\t\tconst color = _safeColor(border.color.rgb) || \"\";\n\t\tconst type = border.style || \"\";\n\t\treturn `${color},${type}`;\n\t}\n\treturn \"\";\n}\n\nfunction _getStyles(obj){\n\tlet styleshash = {}, styles = [], stylescount = 1;\n\tfor(let i = 0; i<obj.styles.length; i++){\n\t\tlet str = [], stl = obj.styles[i][2], css;\n\n\t\tfor(let s  = 0; s<style_names.length; s++){\n\t\t\tswitch (style_names[s]){\n\t\t\t\tcase \"color\": \n\t\t\t\t\tstr[s] = stl.font && stl.font.color?(_safeColor(stl.font.color.rgb)||\"\"):\"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"background\":\n\t\t\t\t\tstr[s] = stl.fill && stl.fill.fgColor?(_safeColor(stl.fill.fgColor.rgb) ||\"\"):\"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"text-align\":\n\t\t\t\t\tstr[s] = (stl.alignment ?stl.alignment.horizontal:\"\") || defaultStyles[\"text-align\"];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"font-family\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.name?_safeFont(stl.font.name):\"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"font-size\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.sz?((stl.font.sz/0.75)+\"px\" ||\"\"):\"\"; //pt to px conversion\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"font-style\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.italic?\"italic\":\"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"text-decoration\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.underline?\"underline\":\"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"font-weight\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.bold?\"bold\":\"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"vertical-align\":\n\t\t\t\t\tvar va = stl.alignment ? (stl.alignment.vertical || \"\"):\"\";\n\t\t\t\t\tstr[s] = (va ==\"center\"?\"middle\":va) || defaultStyles[\"vertical-align\"];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"wrap\":\n\t\t\t\t\tstr[s] = stl.alignment && stl.alignment.wrapText?\"wrap\":\"nowrap\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"borders\":\n\t\t\t\t\tstr[s] = \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"format\":\n\t\t\t\t\tstr[s] = \"\"; //stl.numFmt\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"border-right\":\n\t\t\t\tcase \"border-bottom\":\n\t\t\t\tcase \"border-left\":\n\t\t\t\tcase \"border-top\":\n\t\t\t\t\tstr[s] = _getBorderStyles(style_names[s], stl);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tstr = str.join(\";\");\n\t\tcss = styleshash[str] || \"wss\"+stylescount;\n\n\t\tfor(let d = 0; d<obj.data.length; d++){\n\t\t\tif(obj.data[d][0] === obj.styles[i][0]+1 && obj.data[d][1] === obj.styles[i][1]+1){\n\t\t\t\tobj.data[d][3] = css;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif(!styleshash[str]){\n\t\t\tstyles.push([css, str]);\n\t\t\tstyleshash[str] = css;\n\t\t\tstylescount++;\n\t\t}\n\t}\n\tobj.styles = styles;\n}","import group from \"../operations/undo_group\";\n\nexport function init(view){\n\tview.attachEvent(\"onCommand\", (action) => {\n\t\tswitch (action.id) {\n\t\t\tcase \"clear-value\":\n\t\t\t\tview.clearRange(null,{values: true});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-style\":\n\t\t\t\tview.clearRange(null,{styles: true});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-conditional-formats\":\n\t\t\t\tview.clearRange(null,{conditions: true});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-dropdown-editors\":\n\t\t\t\tview.clearRange(null,{editors: true});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-all\":\n\t\t\t\tgroup.set(function(){\n\t\t\t\t\tview.clearRange(null,null);\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-comments\":\n\t\t\t\tview.clearRange(null,{comments: true});\n\t\t\t\tbreak;\n\t\t}\n\t});\n}","import group from \"../operations/undo_group\";\nimport {adjustRow, adjustColumn} from \"../operations/column_operations\";\n\n/* row operations */\n\nexport function insertRow(row){\n\tcallCommand(this, \"add\", \"row\", row);\n}\n\nexport function deleteRow(row){\n\tcallCommand(this, \"del\", \"row\", row);\n}\n\nexport function setRowHeight(row, height){\n\tsetSize(this, \"row\", row, height);\n}\n\n/* col operations */\n\nexport function insertColumn(column){\n\tcallCommand(this, \"add\", \"column\", column);\n}\n\nexport function deleteColumn(column){\n\tcallCommand(this, \"del\", \"column\", column);\n}\n\nexport function setColumnWidth(column, width){\n\tsetSize(this, \"column\", column, width);\n}\n\n/* helpers */\n\nfunction getCells(view, id, group){\n\tif(!id){\n\t\tlet area = view.$$(\"cells\").getSelectArea();\n\t\tif(area)\n\t\t\tid = [area.start[group],area.end[group]];\n\t}\n\telse if(!webix.isArray(id)){\n\t\tid =  [id,id];\n\t}\n\treturn id;\n}\n\nfunction callCommand(view, name, group, id){\n\tlet start = {}, end = {};\n\tid = getCells(view, id, group);\n\tif(!id)\n\t\treturn;\n\tstart[group] = id[0];\n\tend[group] = id[1];\n\tview.callEvent(\"onCommand\", [{id:name,  group:group}, start, end]);\n}\n\nfunction setSize(view, type, id, size){\n\tid = getCells(view, id, type);\n\tif(!id)\n\t\treturn;\n\tgroup.set(()=>{\n\t\tfor (let i = id[0]; i <= id[1]; i++){\n\t\t\tif(size != \"auto\")\n\t\t\t\tview.$$(\"cells\")[type == \"row\" ? \"setRowHeight\" : \"setColumnWidth\"](i, size);\n\t\t\telse\n\t\t\t\t(type == \"row\" ? adjustRow : adjustColumn)(i, view);\n\t\t}\n\t});\n}","import * as lock from \"../operations/lock_cell\";\n\nexport function lockCell(row, column, state){\n\tlock.lockCell(this, row, column, state);\n}\n\nexport function isCellLocked(row, column){\n\treturn lock.isCellLocked(this, row, column);\n}","import group from \"../operations/undo_group\";\n\nexport function freezeColumns(column){\n\tconst grid = this.$$(\"cells\");\n\n\tif( webix.isUndefined(column) ){\n\t\tlet sel = this.getSelectedId(true);\n\t\tcolumn = sel.length?sel[0].column:0;\n\t}\n\n\tconst base = grid.config.columns[0].id == \"rowId\" ? 1 : 0;\n\tlet index = base;\n\tif (column && column != this._frozenColumns){\n\t\tfor (let i = column; i > 0; i--) {\n\t\t\tindex = grid.getColumnIndex(i)+1;\n\t\t\tif(index)\n\t\t\t\tbreak;\n\t\t}\n\t\tif (!index) index = base;\n\t}\n\n\tgroup.set(function(){\n\t\tcheckSpans(this, \"column\", column);\n\t\tgrid.unselect();\n\t\tgrid.define(\"leftSplit\", index);\n\t\tgrid.refreshColumns();\n\n\t\tthis.callEvent(\"onAction\", [ \"freeze-column\", { value: (this._frozenColumns || 0), newValue: column}]);\n\t\tthis._frozenColumns = column || 0;\n\t},this);\n}\n\nexport function freezeRows(row){\n\tconst grid = this.$$(\"cells\");\n\n\tif( webix.isUndefined(row) ){\n\t\tlet sel = this.getSelectedId(true);\n\t\trow = sel.length?sel[0].row:0;\n\t}\n\n\tlet index = 0;\n\tif (row && row != this._frozenRows){\n\t\tfor (let i = row; i > 0; i--) {\n\t\t\tindex = grid.getIndexById(i)+1;\n\t\t\tif(index)\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tgroup.set(function(){\n\t\tcheckSpans(this, \"row\", row);\n\t\tgrid.unselect();\n\t\tgrid.define(\"topSplit\", index);\n\t\tgrid.refreshColumns();\n\n\t\tthis.callEvent(\"onAction\", [ \"freeze-row\", { value: this._frozenRows, newValue: row}]);\n\t\tthis._frozenRows = row || 0;\n\t},this);\n}\n\nfunction checkSpans(view, type, num){\n\tconst grid = view.$$(\"cells\");\n\tconst spans = grid.getSpan();\n\tlet changed;\n\n\tfor(let row in spans){\n\t\tif(type == \"row\" && row > num)\n\t\t\tcontinue;\n\n\t\tfor (let col in spans[row]){\n\t\t\tif(type == \"column\" && col > num)\n\t\t\t\tcontinue;\n\n\t\t\tconst span = spans[row][col];\n\t\t\tconst spanSize = type == \"row\" ? (row*1) + span[1] - 1 : (col*1) + span[0] - 1;\n\n\t\t\tif(spanSize > num){\n\t\t\t\tchanged = true;\n\t\t\t\tchangeSpan(\n\t\t\t\t\tview,\n\t\t\t\t\t[row, col],\n\t\t\t\t\ttype == \"row\" ? span[0] : span[0] - (spanSize - num),\n\t\t\t\t\ttype == \"row\" ? span[1] - (spanSize - num) : span[1]\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif(changed)\n\t\tview.refresh();\n}\n\nfunction changeSpan(view, span, x, y){\n\tview.splitCell(span[0], span[1], true);\n\tview.combineCells(\n\t\t{\n\t\t\tcell:{\n\t\t\t\trow:span[0],\n\t\t\t\tcolumn:span[1]\n\t\t\t},\n\t\t\tx,\n\t\t\ty,\n\t\t},\n\t\ttrue\n\t);\n}","import * as gridlines from \"../operations/hide_gridlines\";\n\nexport function hideGridlines(state){\n\tgridlines.hideGridlines(this,state);\n}","import * as headers from \"../operations/hide_headers\";\n\nexport function hideHeaders(state){\n\theaders.hideHeaders(this,state);\n}","import * as hrows from \"../operations/hide_row_col\";\n\nexport function hideColumn(column,state){\n\throws.setState(this, column, state, \"column\");\n}\nexport function isColumnVisible(column){\n\treturn hrows.isColumnVisible(this, column);\n}\nexport function hideRow(row,state){\n\throws.setState(this, row, state, \"row\");\n}\nexport function isRowVisible(row){\n\treturn hrows.isRowVisible(this, row);\n}","import {image, chart} from \"../mathematics/writer\";\nimport {addMath} from \"../mathematics/methods\";\nimport {range as getRange} from \"../helpers/column_names\";\n\nexport function addImage(row, column, url){\n\tthis.setCellValue(row, column, image(url));\n\tthis.refresh();\n}\n\nexport function addSparkline(row, column, config){\n\tlet value = chart(config);\n\tthis.setCellValue(row, column, value);\n\tthis.refresh();\n}\n\nexport function getSheetData(name){\n\tconst sheet = this._mData.getPage(name);\n\n\tif(sheet)\n\t\treturn {\n\t\t\tgetValue: (r, c, math)=>{\n\t\t\t\treturn _normalizeVal(sheet.getValue(r-1, c-1, math));\n\t\t\t},\n\t\t\tgetRangeValue: (range)=>{\n\t\t\t\tconst pos = getRange(range, this, name);\n\t\t\t\tif (!pos) return [];\n\n\t\t\t\tconst page = pos[4] == name ? sheet : this._mData.getPage(pos[4]);\n\t\t\t\treturn page.getRange(pos[0]-1, pos[1]-1, pos[2]-1, pos[3]-1).map(_normalizeVal);\n\t\t\t}\n\t\t};\n}\n\nfunction _normalizeVal(val){\n\treturn !val && val !== 0 ? \"\" : val;\n}\n\nexport function registerMathMethod(name, handler){\n\taddMath(this, name, handler, true);\n}\n\nexport function recalculate(){\n\tthis._mData.getStore().recalculate();\n\tthis.callEvent(\"onMathRefresh\",[]);\n\tthis.refresh();\n}\n\nexport function setPlaceholder(name, value){\n\tif(typeof name == \"object\"){\n\t\tvalue = name;\n\t\tname = \"*\";\n\t}\n\n\tthis._mData.getStore().setPlaceholder(name, value);\n\n\tthis.refresh();\n\tthis.callEvent(\"onMathRefresh\",[]);\n}","import * as sheets from \"../sheets\";\nimport * as spn from \"../operations/spans\";\nimport * as und from \"../operations/undo\";\nimport group from \"../operations/undo_group\";\nimport * as stl from \"../operations/styles\";\nimport * as srt from \"../operations/sorting\";\nimport {removeCommentsRange} from \"../operations/comments\";\nimport {clearConditionalFormats} from \"../operations/conditional_formats\";\nimport {clearEditors} from \"../operations/dropdown\";\nimport {clearFilters} from \"../operations/filter\";\n\n//spans\nexport function combineCells(range, silent){\n\tif(!range){\n\t\tvar sel = this.getSelectedId(true);\n\t\tif (sel.length>1){\n\t\t\trange = spn.getRange(sel);\n\t\t}\n\t}\n\tgroup.set(()=> {\n\t\tif (range)\n\t\t\tspn.addSpan(this, range.cell, range.x, range.y);\n\t});\n\n\tif(!silent)\n\t\tthis.refresh();\n}\n\nexport function splitCell(row, column, silent){\n\tif (row && column) {\n\t\tspn.removeSpan(this, {row: row, column: column});\n\t}\n\telse{\n\t\tgroup.set(function(){\n\t\t\tthis.eachSelectedCell(function(cell){\n\t\t\t\tspn.removeSpan(this, cell);\n\t\t\t});\n\t\t},this);\n\n\t}\n\n\tif(!silent)\n\t\tthis.refresh();\n}\n\n//styles\nexport function addStyle(prop, origin){\n\treturn stl.addStyle(this, prop, origin);\n}\n\nexport function getStyle(row, column){\n\treturn stl.getStyle(this, {row:row, column:column});\n}\n\nexport function setStyle(row, column, style){\n\treturn stl.setStyle(this, {row: row, column: column}, style);\n}\n\nexport function setRangeStyle(rangeStr, style){\n\tgroup.set(function() {\n\t\tstl.setRangeStyle(this, rangeStr, style);\n\t},this);\n}\n\nexport function clearRange(rangeStr, type) {\n\tif (!rangeStr){\n\t\trangeStr = this._table.getSelectArea();\n\t\tif (!rangeStr) return;\n\t}\n\n\tif (!type) type = {styles: true, values: true, editors:true, conditions:true, comments:true };\n\t\n\tif (type.styles)\n\t\tstl.clearRangeStyle(this,rangeStr);\n\n\tif (type.conditions)\n\t\tclearConditionalFormats(this,rangeStr);\n\t\n\tif (type.values)\n\t\tthis.setRangeValue(rangeStr, null);\n\n\tif (type.editors){\n\t\tclearEditors(this, rangeStr);\n\t\tclearFilters(this, rangeStr);\n\t}\n\n\tif (type.comments)\n\t\tremoveCommentsRange(this, rangeStr);\n\n\tthis.refresh();\n}\n\nexport function compactStyles(){\n\treturn stl.compactStyles(this);\n}\n\n// serialize\nexport function serialize(config){\n\tconst obj = {};\n\tthis.callEvent(\"onDataSerialize\",[obj, config]);\n\n\tif(config){\n\t\tif(config.compactStyles)\n\t\t\tobj.styles = stl.removeUnusedStyles(obj);\n\t\tif(config.sheets)\n\t\t\treturn sheets.serialize(this, obj, config);\n\t}\n\n\treturn obj;\n}\n\n//sheets\nexport function showSheet(name){\n\tsheets.show(this,name);\n}\nexport function getActiveSheet(){\n\treturn this._activeSheet;\n}\nexport function addSheet(content){\n\tsheets.add(this, content);\n}\nexport function clearSheet(){\n\tthis.reset();\n}\nexport function renameSheet(name,newName){\n\tsheets.rename(this,name,newName);\n}\nexport function editSheet(name){\n\tsheets.edit(this,name);\n}\nexport function removeSheet(name){\n\tsheets.remove(this,name);\n}\n\n\n//undo\nexport function undo(){\n\tund.undo(this);\n}\nexport function redo(){\n\tund.redo(this);\n}\n\n// sort\nexport function sortRange(range, dir){\n\tsrt.sortRange(this, range, dir);\n}","import {toRange,rangeObj} from \"../helpers/column_names\";\nimport * as tbl from \"../table\";\nimport group from \"../operations/undo_group\";\nimport {newSheet} from \"../sheets\";\nimport {getType} from \"../operations/types\";\nimport {getExcelDateFromJs} from \"../mathematics/methods\";\n\nexport function refresh(all){\n\tif (all)\n\t\tthis._table.refreshColumns();\n\telse\n\t\tthis._table.refresh();\n}\nexport function eachSelectedCell(cb){\n\tvar cells = this.getSelectedId(true);\n\tfor (var i=0; i<cells.length; i++)\n\t\tcb.call(this, cells[i]);\n}\nexport function getSelectedRange(sheet){\n\tvar area = this._table.getSelectArea();\n\tif (area){\n\t\tif (sheet)\n\t\t\tsheet = this.getActiveSheet();\n\t\treturn toRange(area.start.row,area.start.column,area.end.row,area.end.column,sheet);\n\t}\n\treturn \"\";\n}\nexport function getSelectedId(all){\n\tvar area = this._table.getSelectArea();\n\tif(!all)\n\t\treturn area && area.start.row ? area.start : null;\n\n\tvar selection = [];\n\tif(area){\n\t\tvar c0 = area.start;\n\t\tvar c1 = area.end;\n\n\t\tfor(var i = c0.row; i<= c1.row; i++){\n\t\t\tfor(var j = c0.column; j <= c1.column; j++){\n\t\t\t\tselection.push({row: i,column:j});\n\t\t\t}\n\t\t}\n\t}\n\n\treturn selection;\n\t//return this._table.getSelectedId(all)\n}\nexport function getCellValue(row, column, math){\n\tconst value = this._mPage.getValue(row-1, column-1, math !== false);\n\n\treturn correctVal(value);\n}\nexport function setCellValue(row, column, value){\n\tvalue = correctVal(value);\n\tconst old = this.getCellValue(row, column);\n\tconst oldType = getType(this, row, column);\n\n\tlet sameValue;\n\tif(oldType == \"date\"){\n\t\tconst parser = webix.Date.strToDate( webix.i18n.spreadsheet.formats.parseDateTime );\n\t\tconst dateValue = isNaN(value) ? getExcelDateFromJs(parser(value)) : value;\n\t\tsameValue = old == dateValue;\n\t}\n\telse if(oldType != \"string\" && value !== \"\" && !isNaN(value) && old == value){\n\t\tsameValue = true;\n\t\tvalue = value*1;\n\t}\n\n\tif (!sameValue && old !== value){\n\t\tgroup.set(()=>{\n\t\t\tif (this.callEvent(\"onBeforeValueChange\",[row, column, value, old])){\n\t\t\t\tthis._mPage.setValue(row-1, column-1, value);\n\n\t\t\t\t//onCellChange can change item (via types module)\n\t\t\t\tthis.callEvent(\"onCellChange\", [row, column, value]);\n\t\t\t\tconst updatedType = getType(this, row, column);\n\n\t\t\t\t//recalculate if we refer to a cell, where type is string and value is something like 005 or 5e5\n\t\t\t\tif(oldType != updatedType && updatedType == \"string\" && value[0] == \"=\" && value.length > 1)\n\t\t\t\t\tthis._mPage.setValue(row-1, column-1, value);\n\n\t\t\t\tthis.saveCell(row, column);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction correctVal(val){\n\treturn val || val === 0 ? val : \"\";\n}\n\nexport function setRangeValue(range, value){\n\tgroup.set(function(){\n\t\tvar pos = rangeObj(range, this);\n\t\tfor (let row = pos.start.row; row <= pos.end.row; row++) {\n\t\t\tfor (let column = pos.start.column; column <=  pos.end.column; column++) {\n\t\t\t\tthis.setCellValue(row, column, value);\n\t\t\t}\n\t\t}\n\t},this);\n\n}\n\nexport function getRow(id){\n\tconst row = webix.copy(this._table.getItem(id));\n\n\tfor(let i = 1; i <= this.config.columnCount; i++){\n\t\tconst cell = this._mPage.getCell(id-1, i-1);\n\n\t\tif(cell){\n\t\t\trow[i] = cell.value;\n\n\t\t\t[[\"style\", \"$cellCss\"], [\"type\", \"$cellType\"], [\"format\", \"$cellFormat\"]].forEach(param => {\n\t\t\t\tconst val = cell[param[0]];\n\t\t\t\tif(val){\n\t\t\t\t\tif(!row[param[1]])\n\t\t\t\t\t\trow[param[1]] = {};\n\t\t\t\t\trow[param[1]][i] = val;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tconst math =  this.getCellValue(id, i, true);\n\t\t\tif(math && math[0] == \"=\")\n\t\t\t\trow[\"$\"+i] = math;\n\t\t}\n\t}\n\n\treturn row;\n}\nexport function getColumn(id){\n\treturn this._table.getColumnConfig(id);\n}\nexport function reset(mode){\n\tvar obj = { data:[] };\n\tif (mode && mode.sheets){\n\t\tobj = newSheet(obj);\n\t}\n\t\n\tthis.parse(obj);\n}\n\nexport function _resetTable(){\n\ttbl.reset(this);\n}\n","import {save} from \"../operations/save\";\n\nexport function saveCell(row, column){\n\tvar style = this.getStyle(row, column);\n\n\tsave(this, \"data\", {\n\t\trow: row,\n\t\tcolumn: column,\n\t\tvalue: this.getCellValue(row, column),\n\t\tstyle: (style ? style.id : \"\")\n\t});\n}","export function setCellEditor(row, column, editor) {\n\tconst line = this._table._ssEditors[row] = this._table._ssEditors[row] || {};\n\tconst value = line[column] || null;\n\tline[column] = editor;\n\n\tif (editor && editor.editor){\n\t\tthis._table.addCellCss(row,column, \"ss_editor\");\n\t} else {\n\t\tdelete this._table._ssEditors[row][column];\n\t\tthis._table.removeCellCss(row,column, \"ss_editor\");\n\t}\n\tthis.callEvent(\"onAction\", [\"dropdown\", { row, column, value, newValue:editor }]);\n}\n\nexport function getCellEditor(row, column){\n\tlet line = this._table._ssEditors[row] || {};\n\treturn line[column] || null;\n}","import * as flt from \"../operations/filter\";\n\nexport function setCellFilter(row, column, filter){\n\tconst line = this._table._ssFilters[row] = this._table._ssFilters[row] || {};\n\tconst value = line[column] || null;\n\n\tif (filter && (webix.isArray(filter) || typeof filter == \"string\"))\n\t\tfilter = { options:filter };\n\tline[column] = filter;\n\n\tif (filter && typeof filter == \"object\"){\n\t\tthis._table.addCellCss(row,column, \"ss_filter\");\n\t\tif (filter.value && flt.isValueActive(filter.value))\n\t\t\tthis._table.addCellCss(row,column, \"ss_filter_active\");\n\n\t\twebix.extend(filter, {row, column}, true);\n\t\tfilter.options = flt.calibrateRange(this, row, column, filter.options);\n\n\t\tif (!filter.handler && filter.value && filter.value.condition){\n\t\t\tconst mode = filter.mode || flt.getFilterMode(this, row, column);\n\t\t\tfilter.handler = flt.getFilterFunction(mode, filter.value);\n\t\t}\n\t} else {\n\t\tdelete this._table._ssFilters[row][column];\n\t\tthis._table.removeCellCss(row,column, \"ss_filter\");\n\t\tthis._table.removeCellCss(row,column, \"ss_filter_active\");\n\t}\n\tthis.callEvent(\"onAction\", [\"filter\", { row, column, value, newValue:filter }]);\n}\n\nexport function getCellFilter(row, column){\n\tlet line = this._table._ssFilters[row] || {};\n\treturn line[column] || null;\n}\n\nexport function removeFilters(){\n\tconst filters = flt.getFilters(this._table);\n\n\tfor\t(let i=0; i<filters.length; i++){\n\t\tconst {row, column} = filters[i];\n\t\tthis.setCellFilter(row, column, null);\n\t}\n\n\tthis._table._ssFilters = {};\n\tthis._table.data.filter((obj) => {\n\t\treturn this.isRowVisible(obj.id);\n\t});\n}\n\n\nexport function filterSpreadSheet(){\n\tthis._table.data.silent(function(){\n\t\tconst filters = flt.getFilters(this._table);\n\n\t\t// hidden rows\n\t\tthis._table.data.filter((obj) => {\n\t\t\treturn this.isRowVisible(obj.id);\n\t\t});\n\n\t\tfor (let i=0; i<filters.length; i++){\n\t\t\tconst {row, column, handler} = filters[i];\n\n\t\t\tlet all = false;\n\t\t\tthis._table.data.filter(obj => {\n\t\t\t\tif (all || obj.id*1 <= row*1) return true;\n\n\t\t\t\tlet value = this._mPage.getValue(obj.id - 1, column - 1);\n\n\t\t\t\tif (!value && value !== \"\") return all = true;\n\t\t\t\treturn (typeof handler == \"function\") ? handler( String(value) ) : true;\n\t\t\t}, 1, true);\n\t\t}\n\t}, this);\n\n\tthis._table.callEvent(\"onAfterFilter\", []);\n\tthis._table.refresh();\n}\n","export function confirm(config){\n\treturn webix.confirm({\n\t\tcss:\"webix_ssheet_confirm\",\n\t\ttext:config.text,\n\t\tok: webix.i18n.spreadsheet.labels.ok,\n\t\tcancel: webix.i18n.spreadsheet.labels.cancel\n\t});\n}\n\nexport function alert(config){\n\treturn webix.alert({\n\t\tcss: \"webix_ssheet_alert\",\n\t\ttext:config.text,\n\t\tok: webix.i18n.spreadsheet.labels.ok\n\t});\n}","import * as undo from \"../operations/undo\";\nimport group from \"../operations/undo_group\";\n\nexport function resetUndo(){\n\tundo.reset(this);\n}\n\nexport function groupUndo(func){\n\tgroup.set(func, this);\n}\n\nexport function ignoreUndo(func){\n\tundo.ignoreUndo(func, this);\n}","import * as fmt from \"../operations/formats\";\n\nexport function setFormat(row, column, format){\n\tfmt.addFormat(this, row, column, format);\n}\n\nexport function changeDecimals(row, column, inc){\n\t//row and column may be obj\n\tfmt.changeAreaDecimals(this, inc, row, column);\n}","const defaultMenu = [\n\t{ id:\"file\", submenu:[\n\t\t{id: \"sheet\", submenu: [\n\t\t\t{id: \"new-sheet\"},\n\t\t\t{id: \"copy-sheet\"},\n\t\t\t{id: \"remove-sheet\"}\n\t\t]},\n\t\t{id: \"excel-import\"},\n\t\t{id: \"excel-export\"}\n\t]},\n\t{ id:\"edit\", submenu:[\n\t\t{id: \"add-range\"},\n\t\t{id: \"add-dropdown\"},\n\t\t{id: \"add-link\"},\n\t\t{id: \"lock-cell\"},\n\t\t{id: \"conditional-format\"},\n\t\t{id: \"clear\", submenu:[\n\t\t\t{id: \"clear-value\"},\n\t\t\t{id: \"clear-style\"},\n\t\t\t{id: \"clear-conditional-formats\"},\n\t\t\t{id: \"clear-dropdown-editors\"},\n\t\t\t{id: \"clear-comments\"},\n\t\t\t{ $template:\"Separator\" },\n\t\t\t{id: \"clear-all\"}\n\t\t]}\n\t]},\n\t{ id:\"insert\", submenu:[\n\t\t{id: \"image\", submenu:[\n\t\t\t{ id: \"add-image-cell\"},\n\t\t\t{ id: \"add-image-top\"}\n\t\t]},\n\t\t{id: \"graph\", submenu:[\n\t\t\t{ id: \"add-sparkline\"},\n\t\t\t{ id: \"add-chart\"}\n\t\t]},\n\t\t{id: \"add-comment\"}\n\t]},\n\t{ id:\"data\", submenu:[\n\t\t{id: \"sort\", submenu: [\n\t\t\t{id: \"sort-asc\"},\n\t\t\t{id: \"sort-desc\"}\n\t\t]},\n\t\t{id: \"create-filter\"}\n\t]},\n\t{ id: \"view\", submenu:[\n\t\t{id: \"columns\", submenu: [\n\t\t\t{id: \"insert-column\"},\n\t\t\t{id: \"delete-column\"},\n\t\t\t{id: \"show-column\"},\n\t\t\t{id: \"hide-column\"},\n\t\t\t{id: \"resize-column\"}\n\t\t]},\n\t\t{id: \"rows\", submenu: [\n\t\t\t{id: \"insert-row\"},\n\t\t\t{id: \"delete-row\"},\n\t\t\t{id: \"show-row\"},\n\t\t\t{id: \"hide-row\"},\n\t\t\t{id: \"resize-row\"}\n\t\t]},\n\t\t{ $template:\"Separator\" },\n\t\t{id: \"freeze-columns\"},\n\t\t{id: \"freeze-rows\"},\n\t\t{id: \"hide-gridlines\"},\n\t\t{id: \"hide-headers\"}\n\t]}\n];\n\nconst ui = {\n\tgetMenuData: function(menu, config){\n\t\tvar i;\n\t\tfor(i=0; i < menu.length; i++){\n\t\t\tif(typeof menu[i] == \"string\")\n\t\t\t\tmenu[i] = {id: menu[i]};\n\t\t\tif((menu[i].id == \"resize-column\" || menu[i].id == \"resize-row\") && !config.resizeCell){\n\t\t\t\tmenu.splice(i,1);\n\t\t\t\ti--;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(!menu[i].value)\n\t\t\t\tmenu[i].value = webix.i18n.spreadsheet.menus[menu[i].id];\n\t\t\tif(menu[i].submenu)\n\t\t\t\tmenu[i].submenu = this.getMenuData(menu[i].submenu, config);\n\t\t}\n\n\t\treturn menu;\n\t}\n};\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\tvar config = view.config,\n\t\tmenu = {\n\t\t\tview: \"menu\",\n\t\t\tborderless: true,\n\t\t\tcss: \"webix_ssheet_menu\",\n\t\t\tid: \"menu\",\n\t\t\tautowidth: true,\n\t\t\ttype:{\n\t\t\t\theight: 40\n\t\t\t},\n\t\t\tdata: ui.getMenuData(webix.isArray(config.menu)?config.menu : webix.copy(defaultMenu), view.config)\n\t\t};\n\n\tview.callEvent(\"onViewInit\", [\"menu\", menu]);\n\treturn menu;\n}\n\n\nfunction ready(view){\n\tif(view.$$(\"menu\"))\n\t\tview.$$(\"menu\").attachEvent(\"onMenuItemClick\",(id) => callAction(view,id));\n}\n\nconst actionMap = {\n\t\"undo\": function (view) {\n\t\tview.undo();\n\t},\n\t\"redo\": function (view) {\n\t\tview.redo();\n\t},\n\t\"insert-column\": function (view) {\n\t\tview.insertColumn();\n\t},\n\t\"delete-column\": function (view) {\n\t\tview.deleteColumn();\n\t},\n\t\"show-column\": function (view) {\n\t\tview.hideColumn(null,false);\n\t},\n\t\"hide-column\": function (view) {\n\t\tview.hideColumn(null,true);\n\t},\n\t\"resize-column\": function (view) {\n\t\t//like we are calling from the toolbar\n\t\tview.callEvent(\"onCommand\",[{id: \"resize\", group: \"column\", value: webix.i18n.spreadsheet.menus[\"resize-column\"]}]);\n\t},\n\t\"insert-row\": function (view) {\n\t\tview.insertRow();\n\t},\n\t\"delete-row\": function (view) {\n\t\tview.deleteRow();\n\t},\n\t\"show-row\": function (view) {\n\t\tview.hideRow(null,false);\n\t},\n\t\"hide-row\": function (view) {\n\t\tview.hideRow(null,true);\n\t},\n\t\"resize-row\": function (view) {\n\t\t//like we are calling from the toolbar\n\t\tview.callEvent(\"onCommand\",[{id: \"resize\", group: \"row\", value: webix.i18n.spreadsheet.menus[\"resize-row\"]}]);\n\t},\n\t\"freeze-columns\": function(view){\n\t\tview.freezeColumns();\n\t},\n\t\"hide-gridlines\": function(view){\n\t\tview.hideGridlines(\"toggle\");\n\t},\n\t\"hide-headers\": function(view){\n\t\tview.hideHeaders(\"toggle\");\n\t}\n};\n\nfunction callAction(view,id){\n\tif(view.callEvent(\"onMenuItemClick\",[id])){\n\t\tif(actionMap[id])\n\t\t\tactionMap[id](view);\n\t\telse\n\t\t\tview.callEvent(\"onCommand\",[{id: id}]);\n\t}\n}","//global definitions\nimport \"./locale\";\nimport \"./views/index\";\n\n//special content for non-production builds\nimport \"./init\";\n\nimport \"./editors/index\";\n\n//modules\nimport * as bar from \"./toolbar\";\nimport * as tbl from \"./table\";\nimport * as key from \"./hotkeys\";\nimport * as editor from \"./editor\";\nimport * as sheets from \"./sheets\";\nimport * as dialogs from \"./dialogs/index\";\nimport * as context from \"./context\";\nimport * as chart from \"./chart\";\n\nimport {setDefaultFormats} from \"./operations/formats\";\nimport {operations} from \"./operations/index\";\nimport {api} from \"./api/index\";\n\n//styling\nimport * as menu from \"./menu\";\nimport {getDefaultStyles} from \"./helpers/conditional\";\nimport {setSkinDefaults} from \"./toolbar/defaults\";\n\nvar component = {\n\tname:\"spreadsheet\",\n\t_base_index:{ count:1 },\n\tdefaults:{\n\t\tspans: true,\n\t\tliveEditor: true,\n\t\trowCount:50,\n\t\tmath:true,\n\t\tcolumnCount:20,\n\t\tresizeCell: true,\n\t\tsheetTabWidth: 90,\n\t\tconditionStyle: getDefaultStyles()\n\t},\n\t$init:function(){\n\t\tthis.$index = (this._base_index.count++);\n\t\tthis.$view.className += \" webix_ssheet\";\n\n\t\tthis.$ready.unshift(this._sub_init);\n\t\tthis.$ready.unshift(setDefaultFormats);\n\t\tthis.$ready.push(this._set_handlers);\n\n\t\tthis._destroy_with_me = [];\n\t\tthis.attachEvent(\"onDestruct\", () => {\n\t\t\tthis._destroy_with_me.forEach(view => view.destructor());\n\t\t});\n\t},\n\t$skin:function(){\n\t\tsetSkinDefaults();\n\t},\n\t_sub_init:function(){\n\t\tconst obj = this.config;\n\t\tconst rows = [];\n\n\t\t//toolbars\n\t\tif(!obj.readonly && obj.menu)\n\t\t\trows.push(menu.init(this));\n\t\tif(!obj.readonly && obj.toolbar !== false)\n\t\t\trows.push(bar.init(this));\n\t\tif (obj.subbar)\n\t\t\trows.push(obj.subbar);\n\t\tif(!obj.readonly && obj.liveEditor)\n\t\t\trows.push(editor.init(this));\n\n\t\t//data part\n\t\tconst tblObj = {\n\t\t\teditable : !obj.readonly,\n\t\t\tliveEditor: obj.liveEditor\n\t\t};\n\t\tif(obj.rowHeight)\n\t\t\ttblObj.rowHeight = obj.rowHeight;\n\t\tif(obj.columnWidth)\n\t\t\ttblObj.columnWidth = obj.columnWidth;\n\n\t\tif(obj.readonly)\n\t\t\trows.push(tbl.init(this, tblObj));\n\t\telse\n\t\t\trows.push({cols:[tbl.init(this, tblObj), chart.init(this)]});\n\n\t\tconst bottom = obj.bottombar === true ? sheets.defaultBottom(this) : obj.bottombar;\n\t\tif (bottom)\n\t\t\trows.push(bottom);\n\n\t\tsheets.init(this);\n\n\t\tif(!obj.readonly)\n\t\t\tcontext.init(this);\n\n\t\tdialogs.init(this);\n\n\t\tthis.rows_setter(rows);\n\t},\n\t_set_handlers:function(){\n\t\t//prevent double init\n\t\tif (this._table) return;\n\t\tthis._table = this.$$(\"cells\");\n\n\t\t//init all sub modules\n\t\toperations(this);\n\n\t\t//set sizes for the table\n\t\ttbl.reset(this, this.config.columnCount, this.config.rowCount);\n\t\tkey.init(this); //keyboard shortcuts\n\t\t\n\t\tthis._table.attachEvent(\"onAfterAreaAdd\", () =>\n\t\t\tthis.callEvent(\"onAfterSelect\", [ this.getSelectedId(true) ]));\n\n\t\tthis.callEvent(\"onComponentInit\", []);\n\t},\n\t$onLoad:function(obj, driver){\n\t\t//when loading data by data:, we can get $onLoad before _set_handlers call\n\t\tthis._set_handlers();\n\n\t\tif (obj.excel)\n\t\t\tobj = this._parseExcel(obj, driver);\n\t\telse if(!obj.data && typeof obj == \"string\" && (driver.cell || driver.row))\n\t\t\tobj = this._parseCsv(obj, driver);\n\n\t\tsheets.load(this, obj);\n\t}\n};\napi(component);\nwebix.protoUI(component, webix.AtomDataLoader, webix.IdSpace, webix.ui.layout);\n","import {isCellSelected, isColSelected,isRowSelected,selectRow,selectColumn} from \"./operations/column_operations\";\nimport {getColumnOperation, getRowOperation, getClearOperation} from \"./toolbar/buttons\";\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => view.$$(\"context\").attachTo(view._table.$view));\n\n\tvar locale = webix.i18n.spreadsheet.menus;\n\tconst lists = {\n\t\tdata:[\n\t\t\t{ id:\"clear\",\t\tvalue: locale[\"clear\"], submenu: getClearOperation()},\n\t\t\t{ id:\"lock-cell\",\t\tvalue: locale[\"lock-cell\"]},\n\t\t\t{ $template: \"Separator\"},\n\t\t\t{ id:\"sort\",\tvalue: locale.sort, submenu:[\n\t\t\t\t{id: \"sort-asc\", value: locale[\"sort-asc\"]},\n\t\t\t\t{id: \"sort-desc\", value: locale[\"sort-desc\"]}\n\t\t\t]},\n\t\t\t{id:\"create-filter\",\t\tvalue: locale[\"create-filter\"]},\n\t\t\t{ $template: \"Separator\"},\n\t\t\t{ id:\"add-range\",\t\tvalue: locale[\"add-range\"]},\n\t\t\t{ id:\"add-link\",\t\tvalue: locale[\"add-link\"]},\n\t\t\t{ id:\"add-comment\",\t\tvalue: locale[\"add-comment\"]}\n\t\t],\n\t\tcolumn: getColumnOperation(view),\n\t\trow: getRowOperation(view)\n\t};\n\n\n\tvar context = {\n\t\tview: \"contextmenu\",\n\t\tid: \"context\",\n\t\tpadding:0,\n\t\tsubmenuConfig:{\n\t\t\tpadding:0,\n\t\t\ton:{\n\t\t\t\tonBeforeShow:function(){\n\t\t\t\t\tthis.sizeToContent();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdata:[],\n\t\ton:{\n\t\t\tonMenuItemClick(id) {\n\t\t\t\tview.callEvent(\"onCommand\", [this.getMenuItem(id)]);\n\t\t\t},\n\t\t\tonBeforeShow(pos) {\n\t\t\t\twebix.callEvent(\"onClick\", []);\n\t\t\t\tvar mode, trg;\n\n\t\t\t\ttrg = view._table.locate(pos);\n\t\t\t\tif (!trg) return false;\n\n\t\t\t\tmode = \"\";\n\t\t\t\tif (trg.header && trg.column !== \"rowId\"){\n\t\t\t\t\tif (!isColSelected(trg.column, view))\n\t\t\t\t\t\tselectColumn(trg.column, view);\n\t\t\t\t\tmode = \"column\";\n\t\t\t\t} else if (trg.row){\n\t\t\t\t\tif (trg.column === \"rowId\"){\n\t\t\t\t\t\tif (!isRowSelected(trg.row, view))\n\t\t\t\t\t\t\tselectRow(trg.row, view);\n\t\t\t\t\t\tmode = \"row\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!isCellSelected(trg.row, trg.column, view))\n\t\t\t\t\t\t\tview._table.addSelectArea(trg, trg);\n\t\t\t\t\t\tmode = \"data\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (mode){\n\t\t\t\t\tvar data = getMenuData(view, mode, lists[mode]);\n\t\t\t\t\tif (data){\n\t\t\t\t\t\tthis.clearAll();\n\t\t\t\t\t\tthis.parse(data);\n\t\t\t\t\t\tthis.sizeToContent();\n\t\t\t\t\t\twebix.html.preventEvent(pos);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n\n\tview.callEvent(\"onViewInit\", [\"context\", context]);\n\tconst contextMenu = view.ui(context);\n\n\tview._destroy_with_me.push(contextMenu);\n}\n\nexport function getMenuData(view, name, data){\n\tvar ev = { area:name, data:data };\n\tif (view.callEvent(\"onContextMenuConfig\", [ev]))\n\t\treturn ev && ev.data;\n\treturn null;\n}","import * as m1  from \"./add_row_col\";\nimport * as m6  from \"./clipboard\";\nimport * as m12 from \"./column_operations\";\nimport * as m2  from \"./conditional_formats\";\nimport * as m4 from \"./types\";\nimport * as m8 from \"./formats\";\nimport * as m17 from \"./data\";\nimport * as m18 from \"./dropdown\";\nimport * as m7  from \"./formats\";\nimport * as m13 from \"./hide_row_col\";\nimport * as m14 from \"./lock_cell\";\nimport * as m3  from \"./resize\";\nimport * as m9  from \"./selection\";\nimport * as m10 from \"./sorting\";\nimport * as m16 from \"./spans\";\nimport * as m16a from \"../mathematics/methods\";\nimport * as m16b from \"../mathematics/ranges\";\nimport * as m16c from \"../mathematics/sheets\";\nimport * as m19 from \"./states\";\nimport * as m5  from \"./styles\";\nimport * as m11 from \"./undo\";\nimport * as m20 from \"./import\";\nimport * as m21 from \"./filter\";\nimport * as m22 from \"./print\";\nimport * as m23 from \"./export\";\nimport * as m24 from \"./load\";\nimport * as m25 from \"./clear_styles\";\nimport * as m26 from \"./comments\";\nimport * as m27 from \"./save\";\nimport * as m28 from \"./hide_headers\";\nimport * as m29 from \"./hide_gridlines\";\nimport * as m30 from \"./views\";\n\nexport function operations(view){\n\t//order in some cases does matter\n\t//resize must be applied after math, to size data by the result of math calculation\n\t//types must be applied after state and data \n\tvar all = [m1,m2,m5,m6,m7,m9,m10,m11,m12,m13,m14,m16,m3,m8,m17,m16a,m16b,m16c,m18,m19,m4,m20,m21,m22,m23,m24,m25,m26,m27,m28,m29,m30];\n\tfor (var i = 0; i < all.length; i++){\n\t\tif (all[i].init)\n\t\t\tall[i].init(view);\n\t}\n}","import * as rco from \"./row_col_operations\";\nimport * as lcl from \"./lock_cell\";\nimport * as fcl from \"./freeze\";\nimport * as hbr from \"./hide_gridlines\";\nimport * as hhd from \"./hide_headers\";\nimport * as hrc from \"./hide_rows\";\nimport * as mat from \"./math\";\nimport * as ops from \"./operations\";\nimport * as cor from \"./core\";\nimport * as sav from \"./save\";\nimport * as dpd from \"./dropdown\";\nimport * as flt from \"./filter\";\nimport * as cfm from \"./confirm\";\nimport * as und from \"./undo\";\nimport * as fmt from \"./number_formats\";\n\nexport function api(view){\n\tvar all = [rco, lcl, fcl, hbr, hhd, hrc, mat, ops, cor, sav, dpd, flt, cfm, und, fmt];\n\tfor (var i = 0; i < all.length; i++)\n\t\twebix.extend(view, all[i]);\n}"],"names":["webix","i18n","spreadsheet","labels","tooltips","menus","table","liveEditor","formats","protoUI","name","$cssName","$init","config","options","view","body","tooltip","template","xCount","yCount","data","ui","richselect","defaults","width","margin","cols","scroll","select","obj","id","on","onAfterSelect","this","getParentView","updateMasterValue","value","rows","css","skin","$name","title","onChange","suggest","fitMaster","hide","getValue","$$","master","setValue","getList","getColorView","getTypeView","getSelectedId","getBody","getChildViews","getItemText","$ready","push","bind","getPopup","isArray","callEvent","join","height","type","palette","attachEvent","setMasterValue","colorboard","icon","borderless","$view","className","$renderInput","divStart","color","renderColor","call","replace","match","p1","p2","p3","colorpicker","prototype","$setValue","popup","toString","getColorNode","style","backgroundColor","firstChild","childNodes","$renderIcon","text","apply","arguments","Object","defineProperty","exports","t","r","1","2","3","e","assign","n","length","o","hasOwnProperty","i","a","u","f","s","h","c","p","v","code","g","source","l","b","M","d","pageName","substr","indexOf","toUpperCase","String","fromCharCode","charCodeAt","y","m","_","P","L","E","w","z","D","I","T","page","C","N","A","S","O","x","R","F","U","exec","broken","triggers","Function","Date","getFullYear","valueOf","getTimezoneOffset","Math","floor","round","getTime","isNaN","concat","Number","padStart","Y","ceil","X","H","B","j","G","pow","q","CM","CD","XC","XL","IX","V","IV","W","K","FACT","$","Q","J","Z","tt","rt","abs","exp","et","nt","substring","ot","it","cos","cosh","sin","sinh","at","ut","ft","st","ht","sort","ct","freeze","__proto__","SUM","AVERAGE","AVERAGEA","COUNT","COUNTA","COUNTBLANK","MAX","MIN","PRODUCT","SUMPRODUCT","SUMSQ","VAR","VARA","VARP","VARPA","STDEV","sqrt","STDEVP","STDEVA","STDEVPA","POWER","QUOTIENT","SQRT","ABS","RAND","random","PI","INT","ROUND","parseFloat","toFixed","ROUNDDOWN","ROUNDUP","TRUNC","EVEN","sign","ODD","ACOS","acos","ACOSH","acosh","ACOT","atan","ACOTH","log","ARABIC","test","ASIN","asin","ASINH","asinh","ATAN","ATAN2","atan2","ATANH","BASE","Array","max","CEILING","COS","COSH","COT","tan","COTH","CSC","CSCH","DEGREES","DECIMAL","parseInt","FACTDOUBLE","COMBIN","COMBINA","FLOOR","GCD","LN","LOG","LOG10","MOD","MROUND","MULTINOMIAL","RADIANS","RANDBETWEEN","ROMAN","split","pop","SEC","SECH","SIN","SINH","SQRTPI","SUBTOTAL","ADD","MINUS","DIVIDE","MULTIPLY","GT","GTE","LT","LTE","EQ","NE","POW","SUMX2MY2","find","SUMX2PY2","SUMXMY2","TAN","TANH","tanh","COMPLEX","CORREL","filter","reduce","DEC2BIN","DEC2HEX","DEC2OCT","DELTA","DEVSQ","forEach","ERF","ERFC","EXP","FISHER","FISHERINV","GAMMA","isInteger","GEOMEAN","some","isFinite","GESTEP","HARMEAN","HEX2BIN","HEX2DEC","HEX2OCT","IMREAL","IMAGINARY","IMABS","IMCONJUGATE","IMCOS","IMCOSH","IMCOT","IMCSC","IMCSCH","IMDIV","IMSIN","IMSINH","IMEXP","IMLN","IMPOWER","IMPRODUCT","slice","IMSEC","IMSECH","IMSQRT","IMSUB","IMSUM","IMTAN","LARGE","MEDIAN","OCT2BIN","OCT2DEC","OCT2HEX","PERMUT","PERCENTILE","QUORTILE","SIGN","SMALL","STEYX","WEIBULL","AVEDEV","BINOMDIST","BINOMDISTRANGE","BINOMDISTINV","BITAND","BITOR","BITXOR","BITLSHIFT","BITRSHIFT","COVAR","pt","vt","CONCATENATE","addMath","handler","addMethod","sid","list","exists","add","getJsDateFromExcel","excelDate","date","getExcelDateFromJs","jsDate","init","math","IMAGE","url","escape","HYPERLINK","SPARKLINE","arr","color1","color2","negativeColor","Sparklines","getTemplate","keys","key","getJsDate","getExcelDate","datepicker","$prepareValue","copy","start","end","daterangepicker","buttons","close","getBodyConfig","content","elements","getFormElements","padding","$active","layoutPadding","form","label","cancel","autowidth","click","getTopParentView","save","hotkey","body_setter","_typeof","isUndefined","window","move","head","autofocus","IdSpace","headerRowHeight","datatable","setHTML","dataview","contextmenu","group","set","method","uid","all","serialize","sheets","proxy","$parse","$proxy","ajax","headers","post","thread","events","newName","params","_loading_data","getActiveSheet","clearTimeout","delay","decode","encode","alpha","indexToHeader","index","chars","quotient","updateMaxColumn","maxColumn","str","adress","size","col","range","nind","sheet","parts","ranges","getCode","rangeParts","d1","d2","escapeSheet","toRange","x2","y2","rangeObj","row","column","eachRange","callback","cellTest","isRange","cells","changeRange","inc","updated","r1","c1","r2","c2","toolbarSizes","paddingY","sectorPadding","sectorMargin","defaultStyles","style_names","_style_map","left","center","right","top","middle","bottom","wrap","getBorderCss","pos","border","sizeEl","border_checks","cell","area","mode","_style_handlers","getSelectArea","lineStyle","modes","_updateStyle","reset","_styles","_styles_cache","_styles_max","prefix","$index","html","removeStyle","getStyle","_mPage","getCell","span","getSpan","spanStyles","spanStyle","getFormat","format","addStyle","props","origin","styleFromText","_styleToText","cache","_addStyle","_parse","styles","styleObj","update_style_data","nstyle","setStyle","_setStyle","setRangeStyle","getTextSize","baseWidth","innerHTML","_table","appendChild","offsetWidth","offsetHeight","removeChild","old","oldFormat","formatChanged","saveCell","silent","_buildCssString","clearRangeStyle","compactStyles","serialized","removeUnusedStyles","used","newStyles","_applyStyles","eachSelectedCell","_applyCellStyles","ostyle","refresh","_serialize","_undoStyle","create","func","findIndex","result","getDimension","spans","line","spanEndRow","spanEndCol","formatsCount","formatSources","formatCache","formatHelpers","currencies","setDefaultFormats","formatsLocale","price","map","getCurrencySymbol","trim","extra","priceFormat","values","extend","zeros","priceSettings","decimalSize","symbol","separator","negative","getDelimiters","numberFormat","percent","format2code","dateFormat","string","serializeFormat","formToValues","groupSign","groupDelimiter","decimalSign","decimalDelimiter","getFormatSource","toexcel","parseFormat","createFormatName","formatToForm","dates","timeFormat","fullDateFormat","longDateFormat","red","first","second","priceBrackets","currency","isPrice","delimiters","integer","decimal","addFormat","nev","removeFormat","splitFormat","conditional","errorMessage","separated","separateFmt","genCode","condition","toLowerCase","fmt","check","ind","isAbs","genFormatCode","isQuote","comma","numberPlaceholder","textPlaceholder","symbolPos","multiply","lastDateType","val","betweenPlaceholders","placeholder","datePart","excelDateToWebix","undefined","getParts","reverse","lzeros","lfills","rzeros","rfills","rmax","dateTypes","timeTypes","dateOrder","timeOrder","typesOrder","order","types","changeAreaDecimals","getCells","rules","isNumber","changeCellDecimals","getFormatName","isCustom","updateDecimals","parsed","decimals","placeholders","withoutText","withoutPlaceholders","formValues","symbolId","toExcel","leftPlaceholders","fmtParts","sepFmtParts","getFmtPartValues","leftText","rightText","fmtPart","firstPlaceholder","Infinity","k","checkFormat","checkTime","quot","item","isDateInvalid","getDateEditFormat","formatName","locale","isTime","dateToStr","getFormatFromData","array","styleName","fmtName","load","defaultFormats","isChar","char","getLastCharIndex","includeNumbers","lastChar","getWord","formula","passive","quotes","operand","position","word","sum","flags","crosssheet","activeSheet","lines","ph","escaped","next","pushLine","loadCell","setType","dateToExcel","setCellValue","getFormatType","formatType","getType","parseToStore","_setType","mathFormat","isFormula","parseDate","getMathFormat","blockLevel","level","methods","part","expectType","getExpectType","strToDate","parseDateTime","parser","ignoreUndo","checkType","$format","updateCell","isString","cellEditor","getCellEditor","setFormat","setCellEditor","editor","cursor","getInputNode","selectionStart","charAt","search","nextSymbol","node","tagName","_this","sizes","offset","textWidth","show","setValueHere","$enterKey","isVisible","getCellValue","action","newValue","getPopupConfig","onItemClick","button","getItem","suggestData","highlight","_highlightedCells","_update_range","_last_value_set","activeCell","showActiveSheet","updateCellValue","blur","preventEvent","oldVal","$handleSelection","UIManager","setFocus","eventRemove","keydownEv","event","_this2","endEdit","escapeText","changeCellCss","colorIndex","crossheet","cellSheet","prepareSheet","activeMath","_activeMath","cellText","rangeName","repeatedColor","nextCell","nextCellText","setColor","document","activeElement","paintValue","enter","grid","define","showSheet","moveSelection","remove","which","keyCode","dir","shiftKey","getItemNode","newv","$setValueHere","str1","str2","setSelectionRange","expectOperator","setRange","len","lastPos","prepareArea","min","row1","col1","row2","col2","coloredArea","texthighlight","layout","drag","dragscroll","EditAbility","toggle","onValue","offValue","common","inp","awidth","aheight","$allowsClear","blockEvent","unblockEvent","arrow","elementsConfig","labelWidth","_initOnChange","$eventSource","_getCheckboxes","count","$all","_count","base","labelRight","active","baseHeight","inputHeight","checkboxes","output","scrollview","queryView","onSelectChange","focus","resize","toFront","minWidth","minHeight","escHide","autofit","setAttribute","addHotKey","_removeView","getMenu","_clickEv","_menu","destructor","move_setter","DragControl","addDrag","$dragPos","$dragCreate","object","trg","target","getAttribute","elOffset","elPos","pOffset","parentNode","state","getScrollState","toNode","$dragDestroy","submenu","readonly","submenuConfig","externalUI","onMenuItemClick","_menuActions","onBeforeShow","_toggleExcel","dots","toPDF","display","toPNG","header","pull","showItem","hideItem","layoutMargin","multi","getSectionConfig","onAfterScroll","addSection","trashIcon","dataPadding","upper","hidden","labelsVisible","markersVisible","onClick","removeView","childs","getLayout","lastIndex","layoutId","addView","setValues","setSubValue","sub","hideSubviews","child","getValues","editors","excel_date","createPopup","icons","timepicker","_last_input_target","onEnter","render","showPopup","input","updateCalendar","calendar","afterRender","ss_richselect","popupInit","$value","actions","isMerged","c0","splitCell","confirm","then","combineCells","undo","redo","hideGridlines","hideHeaders","freezeColumns","freezeRows","fontFamily","getColumnOperation","colOperations","resizeCell","getRowOperation","rowOperations","getClearOperation","getLocaleClear","$template","borders","styleFormats","colorButton","toggleButton","iconButton","btn","segmented","popupWidth","popupTemplate","popupEvents","titleHeight","align","condFormat","buttonsMap","getFontSize","numbers","fontSize","px","getCellFormats","example","number","getText","getAllElements","calcButtons","groups","$button","insert","ready","selected","barStyles","getBarStyles","dropdowns","getCellStyles","cellStyle","property","splice","updateValue","element","toolbar","allElements","elm","bottombar","toolbarButtons","structure","checkButtons","getButtons","columns","block","blockColumns","bar","viewId","innerId","selectRow","endRow","last","_selectRange","selectAll","firstColumn","selectColumn","endColumn","isColSelected","selectedArea","isCellSelected","isRowSelected","selectColumns","addSelectArea","adjustColumn","columnWidth","getColumnConfig","eachRow","getCellFilter","setColumnWidth","adjustRow","eachColumn","getSpanNode","setRowHeight","highlightColRow","sr","er","sc","ec","removeCellCss","addCellCss","getHeaderNode","removeCss","addCss","lockCss","lockCell","_mapCellsCalls","_locks","isCellLocked","cm","lock","updatePosition","locked","addSpan","extraCss","getExtraCss","setSpanValue","isEmpty","removeSpan","getRange","sel","lx","ly","rx","ry","cx","cy","setSpanCss","borderChecks","adjustSpan","spanData","checkSpan","selection","isFirstCell","pasteSpan","cutted","translate","mapCells","rid","cid","parse","isUndo","undoSpan","checkSpanBorders","isDate","conditions","batch","lastIndexOf","_mData","getStore","getConditionCss","rendered","_empty","collection","get","currentValue","rule","handlers","checkOrder","compare","addEmptyCollection","oldConditions","_pull","clear","rowId","columnId","clearConditionalFormats","_changeCondition","pasteCondition","oldCondition","newCondition","_normalizeValue","createRules","rId","cId","cond","update","newData","_setCondition","type_action","_undoCondition","dragStartColumn","dragEndColumn","showCommentHandler","comments","_activeComment","editStatus","locate","visible","commentsView","viewonly","contains","editMath","highlightHeaders","ids","cop","ed","$anyKey","ev","getEditor","finalStep","resizeColumn","cind","dx","posRelative","selectColumnHandler","lastHeaderClick","headerClick","dblClick","lastClickedRow","editStop","getFocus","need_focus","setDefaultCss","leftSplit","areaselect","minColumnWidth","editable","editaction","minRowHeight","navigation","cell_template","_v","valueOnly","invalidDate","helper","_print","clearAll","columnCount","rowCount","el","nms","cssFormat","getRenderedValue","refreshColumns","env","isMac","f2","edit","del","styleHotKey","ctrlU","ctrlP","attr","elementOn","methodsName","updateEditor","fillEditor","startEdit","symbols","disableEditor","disabled","disable","enable","_rangeDialog","en","pasteRange","updateRange","colon","isEnabled","clearEditor","isActiveCell","getSheetData","getPage","tconfig","frozenColumns","frozenRows","_frozenColumns","_frozenRows","getState","_undoValue","actionMap","_activeSheet","prepare","selectSheet","command","changePagerVisability","sheetTabWidth","showBatch","changePagerStatus","scrollPos","tabWidth","context","dataOrder","num","_sheets","rename","defaultBottom","editValue","webix_ssheet_sheet_arrow","initSheetMenu","$sheetMenu","menuInit","menu","_destroy_with_me","callAction","getMark","disableItem","enableItem","scrollSheets","direction","scrollTo","newIndex","getNewTitle","getSheet","addPage","newSheet","removePage","changeId","renamePage","linkRegex","DataStore","sheetName","tabs","_resetTable","Dialog","$dialog","$hide","$show","unescape","DialogBox","box","preview","parseImage","server","images","image","showPreview","upload","onBeforeFileAdd","file","reader","FileReader","onload","getFormView","readAsDataURL","onFileUpload","response","imageURL","onSaveClick","okClick","onCancelClick","fillUrl","addImage","viewid","open","views","els","parseChart","color_def","color_pos","color_neg","renderPreview","visibleBatch","labelPosition","getTypes","alert","checkRange","sparkConfig","addSparkline","clearValidation","selectedCell","getSelectedRange","scope","_updateData","toSheetRange","unshift","validate","oldData","_getScope","updateItem","unselect","_this3","theform","onBeforeSelect","removeRange","editRange","isNotEmpty","onFocus","autoheight","saveClick","getRanges","selectedId","allRanges","nameParts","selectList","rangeVal","Ranges","_master","_normalizeName","_normalizeRange","globalRange","out","global","rangeOptions","getRangePos","unique","empty","objA","objB","sorters","sorting","as","int","nullFilter","$empty","_ssFilters","markBarFilter","getFilters","filters","clearFilters","refilter","filterSpreadSheet","calibrateRange","getFilterRange","isValueActive","includes","isFilterExists","getFilterMode","pasteFilter","setCellFilter","getSingleOption","getConditions","getFilterFunction","opt","on_click","ssheet_filter_sign","on_dblclick","toggleFilters","removeFilters","isFilter","$mode","$filter","syncScroll","_getTargetNode","getFilter","flt","importData","relative","field","inputs","applyFilter","oldValue","setCellStyle","isHidden","nodeOffset","tableOffset","getElementsByClassName","ydiff","xdiff","scrollSize","fillForm","labelsLocale","commonConfig","customConfig","dateConfig","getFormats","updateForm","paddingX","closeWin","isText","$css","_getDatalayout","value2","_formatValue","_isNotDateRule","editFormat","_safeInt","_getCondition","activeValue","dialog","_rulesToArr","current_view","_this4","onBlur","vid","dlayout","getIdByIndex","_this5","maxHeight","getRows","getConditionStyle","conditionStyle","getSheets","filename","restoreValue","paper","fit","sheetnames","modal","vertical","print","_setComment","textarea","onViewResize","animate","showInput","addComment","comment","showTemplate","changeTextarea","getHead","$height","rowHeight","getOption","optionHeight","bases","imt","imc","asw","rgs","dpd","cnd","lnk","pnt","cmt","ignoreUndoReset","restoreHistory","_ssUndoHistory","_ssUndoCursor","addToHistory","$skipHistory","ignoreReset","step","prevData","undoHandlers","nvalue","ovalue","_trackAll","conf","viewMethods","_types","track","_trackOne","_fromRange","_isPie","_removeLegend","legend","fromData","shift","names","_getNames","switchDirection","dataSeries","legendRange","_getParts","_showAll","win","_correctPos","_showOne","_getWidth","$width","_getHeight","each","_isRange","_getDataParts","subdata","getRangeRows","getRangeCols","_getSeries","oldXaxis","vals","xAxis","activeVals","series","firstRange","inActiveSeries","seria","activeVal","marker","_getColor","colors","dataRange","subRange","_normalizeConfig","valign","scale","rangeToData","rind","editUIType","querySelector","register","container","_commands","getConfig","inner","renderConfig","_processTables","query","tables","dt","oldWin","_activeWin","$destructed","_reset","_undoUI","one","viewIds","_genChartConfig","htmlFilter","scaleColor","legendConfig","_pieConfig","pieInnerText","borderColor","lineColor","yAxis","lineShape","circle","chartEditor","handlePieLegend","getLeftColumn","getTopRow","setSilentValue","updateLegendRange","updateXaxisRange","xAxisRange","leftColumn","topRow","exist","updateAlign","updateValign","updateType","getTabbar","switchRowsCols","stacked","hideField","hideBatch","hideOption","showOption","updateSeries","pie","inValues","expand","closeEditor","outValues","activeSkin","barHeight","complexData","addRichselect","getLegendAlign","getLegendValign","attributes","loadChangedData","process","getUpdateValues","_addColumn","addColumn","_delColumn","removeColumn","_addRow","addRow","_delRow","removeRow","updatedData","fixSelectArea","_ssEditors","clearEditors","pasteDropdown","dropdown","styledata","clipdata","updateFilters","getRow","ignore","$popup","tblEditors","isEditor","_clipboardToTable","cdata","fromSheet","cut","transposeMath","clipboard","clipbuffer","buffer","_sel_to_clip","mapSelection","row_ind","delimiter","clipboardDecimalDelimiter","_updateDelimiter","csv","stringify","ctrlKey","metaKey","_get_sel_style","allFiltersInZone","startRow","startCol","endCol","_clip_to_sel","leftTop","_changeDelimiter","record","_add_row_col","maxRow","maxCol","col_ind","subtrans","_hidden_cols_hash","_hidden_rows_hash","isColumnVisible","setState","indexes","getIds","_showRow","_showColumn","_hideRow","_hideColumn","isRowVisible","showColumn","getColumnIndex","hideColumn","_updatePosition","hrows","hcols","_adjustRowHeight","headerOnly","refreshSelectArea","getColumn","_undoResize","defWidth","defHeight","nsizes","bs","blockStart","blockEnd","res","removeSelectArea","sortRange","fullrange","expandSelection","maxY","maxX","nr1","nr2","nc1","nc2","newrange","by","newMath","updateSheetNames","oldName","stack","option","gridlines","removeComment","getComment","removeCommentsRange","commentCell","_undoComment","modules","m1","m2","m3","m4","m5","m6","m7","uploader","XMLHttpRequest","apiOnly","accept","startImport","fileDialog","_buildHtml","doc","xCorrection","baseIndex","sheetname","$customPrint","br","insertBefore","docFooter","_cleanHtml","_safeColor","_getCellStyle","excel","stl","font","alignment","_getExcelCellStyle","_getPdfCellStyle","rgb","fill","fgColor","horizontal","sz","italic","underline","bold","wrapText","getBorderStyles","textAlign","vertAlign","whiteSpace","_getDocStyle","$exportView","pdf","export_mode","defaultOptions","stubCells","footer","heights","rawValues","filterHTML","_exportView","dataOnly","sheetOptions","_hidden","pdfTable","textBefore","sheetData","scheme","_getStyles","cached","cachedConditions","_getDefaults","docHeader","delta","rIndex","cIndex","_getCellConditions","computed","getComputedStyle","bg","_updateStyleCondition","rgbToHex","_updatePdfData","idx","colspan","rowData","exportData","rowSize","pad","paddingTop","paddingBottom","ref","Sheet","Name","Ref","getAutowidth","prop","orientation","$getExportValue","_excel_to_data","dataObj","styleshash","stylescount","_safeFont","va","_getBorderStyles","_getTypes","_getHidden","safe","_parseExcel","driver","full","_parseCsv","getRecords","clearRange","callCommand","setSize","insertRow","deleteRow","insertColumn","deleteColumn","checkSpans","changed","spanSize","changeSpan","getIndexById","hideRow","_normalizeVal","chart","getRangeValue","registerMathMethod","recalculate","setPlaceholder","spn","rangeStr","setRangeValue","addSheet","clearSheet","renameSheet","editSheet","removeSheet","und","srt","correctVal","cb","sameValue","oldType","dateValue","updatedType","param","tbl","ok","resetUndo","groupUndo","changeDecimals","defaultMenu","getMenuData","component","_base_index","getDefaultStyles","_sub_init","_set_handlers","$skin","setSkinDefaults","material","background","subbar","tblObj","attachTo","lists","sizeToContent","getMenuItem","contextMenu","dialogs","viewBases","rows_setter","operations","m9","m10","m11","m12","m13","m14","m16","m8","m17","m16a","m16b","m16c","m18","m19","m20","m21","m22","m23","m24","m25","m26","m27","m28","m29","m30","$onLoad","api","rco","lcl","fcl","hbr","hhd","hrc","mat","ops","cor","sav","cfm","AtomDataLoader"],"mappings":";;;;;;;uJACAA,MAAMC,KAAKC,YCDI,CACdC,OAAO,QAEI,kBACE,kBACF,iBACC,eACH,cACE,uBACO,0BACA,2BACL,2BACD,oCACO,yBACJ,4BACA,qCAED,iBACL,YACA,YACA,aACC,eACC,gBACA,iBACC,aACL,WACG,eAEC,cACF,aAEC,6BAEa,+BACT,gCACQ,+BACG,iCACF,kCACE,kBAEf,sBACM,4BACD,qBACC,sBACA,uBACC,kBAEJ,mBACG,2BACC,qCACH,wCAEM,iCACD,yBACC,0BACA,6BACG,gCACA,0BAEN,8BACE,kCAEA,+BACA,gCACA,WAEZ,oBAEU,8BACM,6DACN,uBACD,wCACK,iCAEN,uBACD,kBACD,YAEH,yBACQ,8BACD,wBAEP,wBACO,0BACJ,0BAEA,gBACF,+BAEc,gFACA,8EACH,6EACN,gCAEP,sBACM,sCACG,iCACH,4BACC,yBACC,6BACH,uBACD,4BACC,+BACC,+BACF,yBACH,6BACK,mBACJ,2BACA,8BACG,2BACC,8BACE,4BACC,oBAEP,gBAEF,eACC,uBACM,gCACA,+BAEH,qBACE,sBACD,4BAEE,wBACA,wBACA,uBAED,6BACI,iCACA,gCACE,0BAEP,oBACA,mBACD,oBACE,oBACF,oBACE,uBACC,4BACI,4BAEL,uBACC,wBACA,uBACD,4BACM,kCACA,4BACA,0BACF,6CACA,2CACE,6BACC,6BACD,0BACF,yBACC,0BACA,sEAEJ,4BACI,2CACA,iDACE,oCACA,4BACD,4BACC,8BACC,+BACA,oCACH,4BACG;sBACA,sBAET,uBACG,wBACF,6BACO,mBACV,wBACE,uBACG,yBACF,2BAEI,mCACF,uBACH,uBAEG,iCACO,kCACE,mCACD,gCACF,yBAEL,oCACF,0BAEM,iBAEtBC,SAAU,OACA,wBACK,iCACC,0BACF,yBACC,oCACI,yBACP,uBACG,+BACE,4BACD,6BACE,gCACC,8BACH,8BACE,qCACK,yCACL,4BACH,4BACE,6BACD,0BACF,2BACG,8BACA,oBACR,aACA,iBACA,YACA,cACE,oCACU,8CACA,wCACL,oBACD,2BACK,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"}